/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={2838:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(e,o,a){return n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,o){var a=[null];a.push.apply(a,n);var r=new(Function.bind.apply(e,a));return o&&t(r,o.prototype),r},n.apply(null,arguments)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var r=Object.hasOwnProperty,s=Object.setPrototypeOf,c=Object.isFrozen,i=Object.getPrototypeOf,l=Object.getOwnPropertyDescriptor,m=Object.freeze,d=Object.seal,u=Object.create,p="undefined"!=typeof Reflect&&Reflect,_=p.apply,y=p.construct;_||(_=function(e,t,n){return e.apply(t,n)}),m||(m=function(e){return e}),d||(d=function(e){return e}),y||(y=function(e,t){return n(e,o(t))});var h,g=T(Array.prototype.forEach),w=T(Array.prototype.pop),f=T(Array.prototype.push),v=T(String.prototype.toLowerCase),b=T(String.prototype.toString),E=T(String.prototype.match),S=T(String.prototype.replace),k=T(String.prototype.indexOf),N=T(String.prototype.trim),x=T(RegExp.prototype.test),C=(h=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y(h,t)});function T(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return _(e,t,o)}}function O(e,t,n){var o;n=null!==(o=n)&&void 0!==o?o:v,s&&s(e,null);for(var a=t.length;a--;){var r=t[a];if("string"==typeof r){var i=n(r);i!==r&&(c(t)||(t[a]=i),r=i)}e[r]=!0}return e}function I(e){var t,n=u(null);for(t in e)!0===_(r,e,[t])&&(n[t]=e[t]);return n}function A(e,t){for(;null!==e;){var n=l(e,t);if(n){if(n.get)return T(n.get);if("function"==typeof n.value)return T(n.value)}e=i(e)}return function(e){return console.warn("fallback value for",e),null}}var R=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),M=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=m(["#text"]),B=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),V=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=d(/<%[\w\W]*|[\w\W]*%>/gm),H=d(/\${[\w\W]*}/gm),Y=d(/^data-[\-\w.\u00B7-\uFFFF]/),q=d(/^aria-[\-\w]+$/),G=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=d(/^(?:\w+script|data):/i),Z=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K=d(/^html$/i),J=d(/^[a-z][.\w]*(-[.\w]+)+$/i),X=function(){return"undefined"==typeof window?null:window};return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X(),a=function(e){return t(e)};if(a.version="2.5.6",a.removed=[],!n||!n.document||9!==n.document.nodeType)return a.isSupported=!1,a;var r=n.document,s=n.document,c=n.DocumentFragment,i=n.HTMLTemplateElement,l=n.Node,d=n.Element,u=n.NodeFilter,p=n.NamedNodeMap,_=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,y=n.HTMLFormElement,h=n.DOMParser,T=n.trustedTypes,ee=d.prototype,te=A(ee,"cloneNode"),ne=A(ee,"nextSibling"),oe=A(ee,"childNodes"),ae=A(ee,"parentNode");if("function"==typeof i){var re=s.createElement("template");re.content&&re.content.ownerDocument&&(s=re.content.ownerDocument)}var se=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var o=null,a="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(a)&&(o=n.currentScript.getAttribute(a));var r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(T,r),ce=se?se.createHTML(""):"",ie=s,le=ie.implementation,me=ie.createNodeIterator,de=ie.createDocumentFragment,ue=ie.getElementsByTagName,pe=r.importNode,_e={};try{_e=I(s).documentMode?s.documentMode:{}}catch(e){}var ye={};a.isSupported="function"==typeof ae&&le&&void 0!==le.createHTMLDocument&&9!==_e;var he,ge,we=V,fe=W,ve=H,be=Y,Ee=q,Se=Q,ke=Z,Ne=J,xe=G,Ce=null,Te=O({},[].concat(o(R),o(L),o(D),o(P),o(F))),Oe=null,Ie=O({},[].concat(o(B),o(z),o(U),o($))),Ae=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Re=null,Le=null,De=!0,je=!0,Pe=!1,Me=!0,Fe=!1,Be=!0,ze=!1,Ue=!1,$e=!1,Ve=!1,We=!1,He=!1,Ye=!0,qe=!1,Ge=!0,Qe=!1,Ze={},Ke=null,Je=O({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xe=null,et=O({},["audio","video","img","source","image","track"]),tt=null,nt=O({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ot="http://www.w3.org/1998/Math/MathML",at="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",st=rt,ct=!1,it=null,lt=O({},[ot,at,rt],b),mt=["application/xhtml+xml","text/html"],dt=null,ut=s.createElement("form"),pt=function(e){return e instanceof RegExp||e instanceof Function},_t=function(t){dt&&dt===t||(t&&"object"===e(t)||(t={}),t=I(t),he=he=-1===mt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===he?b:v,Ce="ALLOWED_TAGS"in t?O({},t.ALLOWED_TAGS,ge):Te,Oe="ALLOWED_ATTR"in t?O({},t.ALLOWED_ATTR,ge):Ie,it="ALLOWED_NAMESPACES"in t?O({},t.ALLOWED_NAMESPACES,b):lt,tt="ADD_URI_SAFE_ATTR"in t?O(I(nt),t.ADD_URI_SAFE_ATTR,ge):nt,Xe="ADD_DATA_URI_TAGS"in t?O(I(et),t.ADD_DATA_URI_TAGS,ge):et,Ke="FORBID_CONTENTS"in t?O({},t.FORBID_CONTENTS,ge):Je,Re="FORBID_TAGS"in t?O({},t.FORBID_TAGS,ge):{},Le="FORBID_ATTR"in t?O({},t.FORBID_ATTR,ge):{},Ze="USE_PROFILES"in t&&t.USE_PROFILES,De=!1!==t.ALLOW_ARIA_ATTR,je=!1!==t.ALLOW_DATA_ATTR,Pe=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Fe=t.SAFE_FOR_TEMPLATES||!1,Be=!1!==t.SAFE_FOR_XML,ze=t.WHOLE_DOCUMENT||!1,Ve=t.RETURN_DOM||!1,We=t.RETURN_DOM_FRAGMENT||!1,He=t.RETURN_TRUSTED_TYPE||!1,$e=t.FORCE_BODY||!1,Ye=!1!==t.SANITIZE_DOM,qe=t.SANITIZE_NAMED_PROPS||!1,Ge=!1!==t.KEEP_CONTENT,Qe=t.IN_PLACE||!1,xe=t.ALLOWED_URI_REGEXP||xe,st=t.NAMESPACE||rt,Ae=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&pt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&pt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ae.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fe&&(je=!1),We&&(Ve=!0),Ze&&(Ce=O({},o(F)),Oe=[],!0===Ze.html&&(O(Ce,R),O(Oe,B)),!0===Ze.svg&&(O(Ce,L),O(Oe,z),O(Oe,$)),!0===Ze.svgFilters&&(O(Ce,D),O(Oe,z),O(Oe,$)),!0===Ze.mathMl&&(O(Ce,P),O(Oe,U),O(Oe,$))),t.ADD_TAGS&&(Ce===Te&&(Ce=I(Ce)),O(Ce,t.ADD_TAGS,ge)),t.ADD_ATTR&&(Oe===Ie&&(Oe=I(Oe)),O(Oe,t.ADD_ATTR,ge)),t.ADD_URI_SAFE_ATTR&&O(tt,t.ADD_URI_SAFE_ATTR,ge),t.FORBID_CONTENTS&&(Ke===Je&&(Ke=I(Ke)),O(Ke,t.FORBID_CONTENTS,ge)),Ge&&(Ce["#text"]=!0),ze&&O(Ce,["html","head","body"]),Ce.table&&(O(Ce,["tbody"]),delete Re.tbody),m&&m(t),dt=t)},yt=O({},["mi","mo","mn","ms","mtext"]),ht=O({},["foreignobject","annotation-xml"]),gt=O({},["title","style","font","a","script"]),wt=O({},L);O(wt,D),O(wt,j);var ft=O({},P);O(ft,M);var vt=function(e){f(a.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ce}catch(t){e.remove()}}},bt=function(e,t){try{f(a.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(a.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Oe[e])if(Ve||We)try{vt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Et=function(e){var t,n;if($e)e="<remove></remove>"+e;else{var o=E(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===he&&st===rt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=se?se.createHTML(e):e;if(st===rt)try{t=(new h).parseFromString(a,he)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(st,"template",null);try{t.documentElement.innerHTML=ct?ce:a}catch(e){}}var r=t.body||t.documentElement;return e&&n&&r.insertBefore(s.createTextNode(n),r.childNodes[0]||null),st===rt?ue.call(t,ze?"html":"body")[0]:ze?t.documentElement:r},St=function(e){return me.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null,!1)},kt=function(e){return e instanceof y&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof _)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Nt=function(t){return"object"===e(l)?t instanceof l:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},xt=function(e,t,n){ye[e]&&g(ye[e],(function(e){e.call(a,t,n,dt)}))},Ct=function(e){var t;if(xt("beforeSanitizeElements",e,null),kt(e))return vt(e),!0;if(x(/[\u0080-\uFFFF]/,e.nodeName))return vt(e),!0;var n=ge(e.nodeName);if(xt("uponSanitizeElement",e,{tagName:n,allowedTags:Ce}),e.hasChildNodes()&&!Nt(e.firstElementChild)&&(!Nt(e.content)||!Nt(e.content.firstElementChild))&&x(/<[/\w]/g,e.innerHTML)&&x(/<[/\w]/g,e.textContent))return vt(e),!0;if("select"===n&&x(/<template/i,e.innerHTML))return vt(e),!0;if(7===e.nodeType)return vt(e),!0;if(Be&&8===e.nodeType&&x(/<[/\w]/g,e.data))return vt(e),!0;if(!Ce[n]||Re[n]){if(!Re[n]&&Ot(n)){if(Ae.tagNameCheck instanceof RegExp&&x(Ae.tagNameCheck,n))return!1;if(Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(n))return!1}if(Ge&&!Ke[n]){var o=ae(e)||e.parentNode,r=oe(e)||e.childNodes;if(r&&o)for(var s=r.length-1;s>=0;--s){var c=te(r[s],!0);c.__removalCount=(e.__removalCount||0)+1,o.insertBefore(c,ne(e))}}return vt(e),!0}return e instanceof d&&!function(e){var t=ae(e);t&&t.tagName||(t={namespaceURI:st,tagName:"template"});var n=v(e.tagName),o=v(t.tagName);return!!it[e.namespaceURI]&&(e.namespaceURI===at?t.namespaceURI===rt?"svg"===n:t.namespaceURI===ot?"svg"===n&&("annotation-xml"===o||yt[o]):Boolean(wt[n]):e.namespaceURI===ot?t.namespaceURI===rt?"math"===n:t.namespaceURI===at?"math"===n&&ht[o]:Boolean(ft[n]):e.namespaceURI===rt?!(t.namespaceURI===at&&!ht[o])&&!(t.namespaceURI===ot&&!yt[o])&&!ft[n]&&(gt[n]||!wt[n]):!("application/xhtml+xml"!==he||!it[e.namespaceURI]))}(e)?(vt(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!x(/<\/no(script|embed|frames)/i,e.innerHTML)?(Fe&&3===e.nodeType&&(t=e.textContent,t=S(t,we," "),t=S(t,fe," "),t=S(t,ve," "),e.textContent!==t&&(f(a.removed,{element:e.cloneNode()}),e.textContent=t)),xt("afterSanitizeElements",e,null),!1):(vt(e),!0)},Tt=function(e,t,n){if(Ye&&("id"===t||"name"===t)&&(n in s||n in ut))return!1;if(je&&!Le[t]&&x(be,t));else if(De&&x(Ee,t));else if(!Oe[t]||Le[t]){if(!(Ot(e)&&(Ae.tagNameCheck instanceof RegExp&&x(Ae.tagNameCheck,e)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(e))&&(Ae.attributeNameCheck instanceof RegExp&&x(Ae.attributeNameCheck,t)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(t))||"is"===t&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&x(Ae.tagNameCheck,n)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(n))))return!1}else if(tt[t]);else if(x(xe,S(n,ke,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(n,"data:")||!Xe[e])if(Pe&&!x(Se,S(n,ke,"")));else if(n)return!1;return!0},Ot=function(e){return"annotation-xml"!==e&&E(e,Ne)},It=function(t){var n,o,r,s;xt("beforeSanitizeAttributes",t,null);var c=t.attributes;if(c){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Oe};for(s=c.length;s--;){var l=n=c[s],m=l.name,d=l.namespaceURI;if(o="value"===m?n.value:N(n.value),r=ge(m),i.attrName=r,i.attrValue=o,i.keepAttr=!0,i.forceKeepAttr=void 0,xt("uponSanitizeAttribute",t,i),o=i.attrValue,Be&&x(/((--!?|])>)|<\/(style|title)/i,o))bt(m,t);else if(!i.forceKeepAttr&&(bt(m,t),i.keepAttr))if(Me||!x(/\/>/i,o)){Fe&&(o=S(o,we," "),o=S(o,fe," "),o=S(o,ve," "));var u=ge(t.nodeName);if(Tt(u,r,o)){if(!qe||"id"!==r&&"name"!==r||(bt(m,t),o="user-content-"+o),se&&"object"===e(T)&&"function"==typeof T.getAttributeType)if(d);else switch(T.getAttributeType(u,r)){case"TrustedHTML":o=se.createHTML(o);break;case"TrustedScriptURL":o=se.createScriptURL(o)}try{d?t.setAttributeNS(d,m,o):t.setAttribute(m,o),kt(t)?vt(t):w(a.removed)}catch(e){}}}else bt(m,t)}xt("afterSanitizeAttributes",t,null)}},At=function e(t){var n,o=St(t);for(xt("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)xt("uponSanitizeShadowNode",n,null),Ct(n)||(n.content instanceof c&&e(n.content),It(n));xt("afterSanitizeShadowDOM",t,null)};return a.sanitize=function(t){var o,s,i,m,d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ct=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Nt(t)){if("function"!=typeof t.toString)throw C("toString is not a function");if("string"!=typeof(t=t.toString()))throw C("dirty is not a string, aborting")}if(!a.isSupported){if("object"===e(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof t)return n.toStaticHTML(t);if(Nt(t))return n.toStaticHTML(t.outerHTML)}return t}if(Ue||_t(u),a.removed=[],"string"==typeof t&&(Qe=!1),Qe){if(t.nodeName){var p=ge(t.nodeName);if(!Ce[p]||Re[p])throw C("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)1===(s=(o=Et("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!Ve&&!Fe&&!ze&&-1===t.indexOf("<"))return se&&He?se.createHTML(t):t;if(!(o=Et(t)))return Ve?null:He?ce:""}o&&$e&&vt(o.firstChild);for(var _=St(Qe?t:o);i=_.nextNode();)3===i.nodeType&&i===m||Ct(i)||(i.content instanceof c&&At(i.content),It(i),m=i);if(m=null,Qe)return t;if(Ve){if(We)for(d=de.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return(Oe.shadowroot||Oe.shadowrootmod)&&(d=pe.call(r,d,!0)),d}var y=ze?o.outerHTML:o.innerHTML;return ze&&Ce["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&x(K,o.ownerDocument.doctype.name)&&(y="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+y),Fe&&(y=S(y,we," "),y=S(y,fe," "),y=S(y,ve," ")),se&&He?se.createHTML(y):y},a.setConfig=function(e){_t(e),Ue=!0},a.clearConfig=function(){dt=null,Ue=!1},a.isValidAttribute=function(e,t,n){dt||_t({});var o=ge(e),a=ge(t);return Tt(o,a,n)},a.addHook=function(e,t){"function"==typeof t&&(ye[e]=ye[e]||[],f(ye[e],t))},a.removeHook=function(e){if(ye[e])return w(ye[e])},a.removeHooks=function(e){ye[e]&&(ye[e]=[])},a.removeAllHooks=function(){ye={}},a}()}()},2467:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-checkmark-circle",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M11 17.768l-4.884-4.884 1.768-1.768L11 14.232l8.658-8.658A9.98 9.98 0 0012 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10a9.94 9.94 0 00-.966-4.266L11 17.768z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},5955:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-checkmark",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},4788:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-cross-small",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M17.705 7.705l-1.41-1.41L12 10.59 7.705 6.295l-1.41 1.41L10.59 12l-4.295 4.295 1.41 1.41L12 13.41l4.295 4.295 1.41-1.41L13.41 12l4.295-4.295z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},9774:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-cross",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M18.36 19.78L12 13.41l-6.36 6.37-1.42-1.42L10.59 12 4.22 5.64l1.42-1.42L12 10.59l6.36-6.36 1.41 1.41L13.41 12l6.36 6.36z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},4236:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-help-outline",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4 8a4 4 0 00-8 0h2c0-1.103.897-2 2-2s2 .897 2 2-.897 2-2 2a1 1 0 00-1 1v2h2v-1.141A3.991 3.991 0 0016 10zm-3 6h-2v2h2v-2z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},4275:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-info-outline",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M13 9h-2V7h2v2zm0 2h-2v6h2v-6zm-1-7c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8m0-2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},2294:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-minus",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M3 11h18v2H3z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},9031:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-notice-outline",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},5588:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-notice",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-2h2v2zm0-4h-2l-.5-6h3l-.5 6z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},1064:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-plus",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8v2z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},4015:(e,t,n)=>{"use strict";t.A=function(e){var t=e.size,n=void 0===t?24:t,o=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,r),l=["gridicon","gridicons-sync",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:n,width:n,onClick:o},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M23.5 13.5l-3.086 3.086L19 18l-4.5-4.5 1.414-1.414L18 14.172V12c0-3.308-2.692-6-6-6V4a8 8 0 018 8v2.172l2.086-2.086L23.5 13.5zM6 12V9.828l2.086 2.086L9.5 10.5 5 6 3.586 7.414.5 10.5l1.414 1.414L4 9.828V12a8 8 0 008 8v-2c-3.308 0-6-2.692-6-6z"})))};var o,a=(o=n(1609))&&o.__esModule?o:{default:o},r=["size","onClick","icon","className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)}},2694:(e,t,n)=>{"use strict";var o=n(6925);function a(){}function r(){}r.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,r,s){if(s!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:a};return n.PropTypes=n,n}},5556:(e,t,n)=>{e.exports=n(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5338:(e,t,n)=>{"use strict";var o=n(5795);t.H=o.createRoot,o.hydrateRoot},2799:(e,t)=>{"use strict";if("function"==typeof Symbol&&Symbol.for){var n=Symbol.for;n("react.element"),n("react.portal"),n("react.fragment"),n("react.strict_mode"),n("react.profiler"),n("react.provider"),n("react.context"),n("react.forward_ref"),n("react.suspense"),n("react.suspense_list"),n("react.memo"),n("react.lazy"),n("react.block"),n("react.server.block"),n("react.fundamental"),n("react.debug_trace_mode"),n("react.legacy_hidden")}},4363:(e,t,n)=>{"use strict";n(2799)},1020:(e,t,n)=>{"use strict";var o=n(1609),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,r={},l=null,m=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(m=t.ref),t)s.call(t,o)&&!i.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:a,type:e,key:l,ref:m,props:r,_owner:c.current}}t.Fragment=r,t.jsx=l,t.jsxs=l},4848:(e,t,n)=>{"use strict";e.exports=n(1020)},5721:e=>{function t(e,t){if((e=e.replace(/\s+/g,""))===(t=t.replace(/\s+/g,"")))return 1;if(e.length<2||t.length<2)return 0;let n=new Map;for(let t=0;t<e.length-1;t++){const o=e.substring(t,t+2),a=n.has(o)?n.get(o)+1:1;n.set(o,a)}let o=0;for(let e=0;e<t.length-1;e++){const a=t.substring(e,e+2),r=n.has(a)?n.get(a):0;r>0&&(n.set(a,r-1),o++)}return 2*o/(e.length+t.length-2)}e.exports={compareTwoStrings:t,findBestMatch:function(e,n){if(!function(e,t){return"string"==typeof e&&!!Array.isArray(t)&&!!t.length&&!t.find((function(e){return"string"!=typeof e}))}(e,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const o=[];let a=0;for(let r=0;r<n.length;r++){const s=n[r],c=t(e,s);o.push({target:s,rating:c}),c>o[a].rating&&(a=r)}return{ratings:o,bestMatch:o[a],bestMatchIndex:a}}}},1609:e=>{"use strict";e.exports=window.React},5795:e=>{"use strict";e.exports=window.ReactDOM},6942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=o[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.p=window.wcpayAssets.url,(()=>{"use strict";var e={};n.r(e),n.d(e,{getAllDepositsOverviews:()=>hn,getAllDepositsOverviewsError:()=>gn,getDeposit:()=>yn,getDepositQueryError:()=>bn,getDeposits:()=>fn,getDepositsCount:()=>vn,getDepositsSummary:()=>Sn,getDepositsSummaryError:()=>kn,getInstantDeposit:()=>Nn});var t={};n.r(t),n.d(t,{submitInstantDeposit:()=>Kn,updateAllDepositsOverviews:()=>Vn,updateDeposit:()=>$n,updateDeposits:()=>Hn,updateDepositsCount:()=>Yn,updateDepositsSummary:()=>Gn,updateErrorForAllDepositsOverviews:()=>Wn,updateErrorForDepositQuery:()=>qn,updateErrorForDepositsSummary:()=>Qn,updateInstantDeposit:()=>Zn});var o={};n.r(o),n.d(o,{getAllDepositsOverviews:()=>Xn,getDeposit:()=>Jn,getDeposits:()=>oo,getDepositsSummary:()=>ao,getPayoutsCSVRequestURL:()=>no,payoutsDownloadEndpoint:()=>to});var a={};n.r(a),n.d(a,{getFraudOutcomeTransactions:()=>wo,getFraudOutcomeTransactionsError:()=>fo,getFraudOutcomeTransactionsSummary:()=>bo,getFraudOutcomeTransactionsSummaryError:()=>Eo,getTransactions:()=>uo,getTransactionsError:()=>po,getTransactionsSummary:()=>yo,getTransactionsSummaryError:()=>ho});var r={};n.r(r),n.d(r,{updateErrorForFraudOutcomeTransactions:()=>To,updateErrorForFraudOutcomeTransactionsSummary:()=>Io,updateErrorForTransactions:()=>ko,updateErrorForTransactionsSummary:()=>xo,updateFraudOutcomeTransactions:()=>Co,updateFraudOutcomeTransactionsSummary:()=>Oo,updateTransactions:()=>So,updateTransactionsSummary:()=>No});var s={};n.r(s),n.d(s,{formatQueryFilters:()=>Ao,getFraudOutcomeTransactions:()=>Po,getFraudOutcomeTransactionsExport:()=>Fo,getFraudOutcomeTransactionsSummary:()=>Mo,getTransactions:()=>Ro,getTransactionsCSVRequestURL:()=>Do,getTransactionsSummary:()=>jo,transactionsDownloadEndpoint:()=>Lo});var c={};n.r(c),n.d(c,{getCharge:()=>zo,getChargeError:()=>Uo,getChargeFromOrder:()=>$o,getChargeFromOrderError:()=>Vo});var i={};n.r(i),n.d(i,{updateCharge:()=>Wo,updateErrorForCharge:()=>Ho});var l={};n.r(l),n.d(l,{getCharge:()=>Yo,getChargeFromOrder:()=>qo});var m={};n.r(m),n.d(m,{getTimeline:()=>Qo,getTimelineError:()=>Zo});var d={};n.r(d),n.d(d,{updateErrorForTimeline:()=>Jo,updateTimeline:()=>Ko});var u={};n.r(u),n.d(u,{getTimeline:()=>Xo});var p={};n.r(p),n.d(p,{getCachedDispute:()=>sa,getDispute:()=>aa,getDisputeError:()=>ra,getDisputes:()=>ca,getDisputesSummary:()=>ia});var _={};n.r(_),n.d(_,{refundCharge:()=>pa,updateErrorForPaymentIntent:()=>ua,updatePaymentIntent:()=>da});var y={};n.r(y),n.d(y,{getPaymentIntent:()=>_a});var h={};n.r(h),n.d(h,{acceptDispute:()=>fa,updateDispute:()=>ya,updateDisputes:()=>ga,updateDisputesSummary:()=>wa,updateErrorForDispute:()=>ha});var g={};n.r(g),n.d(g,{disputesDownloadEndpoint:()=>Ia,getDispute:()=>Ra,getDisputes:()=>La,getDisputesCSVRequestURL:()=>Aa,getDisputesSummary:()=>Da});var w={};n.r(w),n.d(w,{getAccountBusinessSupportEmail:()=>pr,getAccountBusinessSupportPhone:()=>_r,getAccountDomesticCurrency:()=>yr,getAccountStatementDescriptor:()=>mr,getAccountStatementDescriptorKana:()=>ur,getAccountStatementDescriptorKanji:()=>dr,getAdvancedFraudProtectionSettings:()=>Gr,getAvailablePaymentMethodIds:()=>sr,getCompletedWaitingPeriod:()=>vr,getCurrentProtectionLevel:()=>qr,getDepositDelayDays:()=>fr,getDepositRestrictions:()=>Er,getDepositScheduleInterval:()=>hr,getDepositScheduleMonthlyAnchor:()=>wr,getDepositScheduleWeeklyAnchor:()=>gr,getDepositStatus:()=>br,getDuplicatedPaymentMethodIds:()=>or,getEnabledPaymentMethodIds:()=>rr,getIsAppleGooglePayInPaymentMethodsOptionsEnabled:()=>Tr,getIsCardPresentEligible:()=>Fr,getIsDebugLogEnabled:()=>Or,getIsDevModeEnabled:()=>xr,getIsManualCaptureEnabled:()=>Sr,getIsMultiCurrencyEnabled:()=>Ir,getIsPaymentRequestEnabled:()=>Cr,getIsSavedCardsEnabled:()=>Pr,getIsStripeBillingEnabled:()=>Zr,getIsStripeBillingMigrationInProgress:()=>Kr,getIsSubscriptionsPluginActive:()=>Ur,getIsTestModeEnabled:()=>kr,getIsTestModeOnboarding:()=>Nr,getIsWCPayEnabled:()=>ar,getIsWCPaySubscriptionsEligible:()=>zr,getIsWCPaySubscriptionsEnabled:()=>Br,getIsWooPayEnabled:()=>$r,getIsWooPayGlobalThemeSupportEnabled:()=>Vr,getPaymentMethodStatuses:()=>cr,getPaymentRequestButtonBorderRadius:()=>jr,getPaymentRequestButtonSize:()=>Lr,getPaymentRequestButtonTheme:()=>Dr,getPaymentRequestButtonType:()=>Rr,getPaymentRequestLocations:()=>Ar,getSavingError:()=>Mr,getSettings:()=>nr,getShowWooPayIncompatibilityNotice:()=>Qr,getStripeBillingMigratedCount:()=>Xr,getStripeBillingSubscriptionCount:()=>Jr,getWooPayCustomMessage:()=>Wr,getWooPayLocations:()=>Yr,getWooPayStoreLogo:()=>Hr,isDirty:()=>lr,isSavingSettings:()=>ir});var f={};n.r(f),n.d(f,{saveOption:()=>Bs,saveSettings:()=>Ts,submitStripeBillingSubscriptionMigration:()=>Fs,updateAccountBusinessSupportEmail:()=>Ss,updateAccountBusinessSupportPhone:()=>ks,updateAccountStatementDescriptor:()=>vs,updateAccountStatementDescriptorKana:()=>Es,updateAccountStatementDescriptorKanji:()=>bs,updateAdvancedFraudProtectionSettings:()=>Ps,updateDepositScheduleInterval:()=>Ns,updateDepositScheduleMonthlyAnchor:()=>Cs,updateDepositScheduleWeeklyAnchor:()=>xs,updateEnabledPaymentMethodIds:()=>ds,updateIsAppleGooglePayInPaymentMethodsOptionsEnabled:()=>ms,updateIsCardPresentEligible:()=>ns,updateIsDebugLogEnabled:()=>gs,updateIsManualCaptureEnabled:()=>ys,updateIsMultiCurrencyEnabled:()=>ws,updateIsPaymentRequestEnabled:()=>ls,updateIsSavedCardsEnabled:()=>ts,updateIsSavingSettings:()=>us,updateIsStripeBillingEnabled:()=>Ms,updateIsTestModeEnabled:()=>hs,updateIsWCPayEnabled:()=>is,updateIsWCPaySubscriptionsEnabled:()=>fs,updateIsWooPayEnabled:()=>Is,updateIsWooPayGlobalThemeSupportEnabled:()=>As,updatePaymentRequestButtonBorderRadius:()=>ss,updatePaymentRequestButtonSize:()=>as,updatePaymentRequestButtonTheme:()=>rs,updatePaymentRequestButtonType:()=>os,updatePaymentRequestLocations:()=>Os,updateProtectionLevel:()=>js,updateSelectedPaymentMethod:()=>ps,updateSettings:()=>cs,updateUnselectedPaymentMethod:()=>_s,updateWooPayCustomMessage:()=>Rs,updateWooPayLocations:()=>Ds,updateWooPayStoreLogo:()=>Ls});var v={};n.r(v),n.d(v,{getSettings:()=>zs});var b={};n.r(b),n.d(b,{getCardReaderStats:()=>Ws,getCardReaderStatsError:()=>Hs,getCardReaders:()=>Ys});var E={};n.r(E),n.d(E,{updateCardReaderStats:()=>qs,updateCardReaders:()=>Gs,updateErrorForCardReaderStats:()=>Qs,updateErrorForCardReaders:()=>Zs});var S={};n.r(S),n.d(S,{getCardReaderStats:()=>Ks,getCardReaders:()=>Js});var k={};n.r(k),n.d(k,{getActiveLoanSummary:()=>oc,getActiveLoanSummaryError:()=>ac,getLoans:()=>rc,getLoansError:()=>sc});var N={};n.r(N),n.d(N,{updateActiveLoanSummary:()=>cc,updateErrorForActiveLoanSummary:()=>ic,updateErrorForLoans:()=>mc,updateLoans:()=>lc});var x={};n.r(x),n.d(x,{getActiveLoanSummary:()=>dc,getLoans:()=>uc});var C={};n.r(C),n.d(C,{getDocuments:()=>gc,getDocumentsError:()=>fc,getDocumentsSummary:()=>bc,getDocumentsSummaryError:()=>Ec});var T={};n.r(T),n.d(T,{updateDocuments:()=>Sc,updateDocumentsSummary:()=>Nc,updateErrorForDocuments:()=>kc,updateErrorForDocumentsSummary:()=>xc});var O={};n.r(O),n.d(O,{formatQueryFilters:()=>Cc,getDocuments:()=>Tc,getDocumentsSummary:()=>Oc});var I={};n.r(I),n.d(I,{getPaymentIntent:()=>Ac,getPaymentIntentError:()=>Rc});var A={};n.r(A),n.d(A,{getAuthorization:()=>zc,getAuthorizations:()=>Bc,getAuthorizationsError:()=>Uc,getAuthorizationsSummary:()=>Vc,getAuthorizationsSummaryError:()=>Wc,getIsRequesting:()=>Hc});var R={};n.r(R),n.d(R,{setIsRequestingAuthorization:()=>Kc,submitCancelAuthorization:()=>Xc,submitCaptureAuthorization:()=>Jc,updateAuthorization:()=>Qc,updateAuthorizations:()=>qc,updateAuthorizationsSummary:()=>Zc,updateErrorForAuthorizations:()=>Gc,updateErrorForAuthorizationsSummary:()=>ei});var L={};n.r(L),n.d(L,{getAuthorization:()=>ni,getAuthorizations:()=>ti,getAuthorizationsSummary:()=>oi});var D={};n.r(D),n.d(D,{getFile:()=>li,getFileError:()=>mi});var j={};n.r(j),n.d(j,{updateErrorForFiles:()=>ui,updateFiles:()=>di});var P={};n.r(P),n.d(P,{getFile:()=>pi});var M={};n.r(M),n.d(M,{getPmPromotions:()=>hi,getPmPromotionsError:()=>gi});var F={};n.r(F),n.d(F,{activatePmPromotion:()=>bi,dismissPmPromotion:()=>Ei,updateErrorForPmPromotions:()=>vi,updatePmPromotions:()=>fi});var B={};n.r(B),n.d(B,{getPmPromotions:()=>ki});var z={};n.r(z),n.d(z,{getAvailableCurrencies:()=>Op,getCurrencies:()=>Tp,getCurrencySettings:()=>Rp,getDefaultCurrency:()=>Ap,getEnabledCurrencies:()=>Ip,getStoreSettings:()=>Lp});var U={};n.r(U),n.d(U,{saveOption:()=>Vp,submitCurrencySettings:()=>Up,submitEnabledCurrenciesUpdate:()=>zp,submitStoreSettingsUpdate:()=>$p,updateAvailableCurrencies:()=>jp,updateCurrencies:()=>Dp,updateCurrencySettings:()=>Fp,updateDefaultCurrency:()=>Mp,updateEnabledCurrencies:()=>Pp,updateStoreSettings:()=>Bp});var $={};n.r($),n.d($,{getCurrencies:()=>Wp,getCurrencySettings:()=>Hp,getStoreSettings:()=>Yp});const V=window.wp.i18n,W=window.wp.hooks;window.wp.mediaelement;var H=n(1609),Y=n.n(H);const q=window.wp.apiFetch;var G=n.n(q);const Q=window.wp.url,Z=window.wp.components,K=window.wc.experimental,J=window.wp.element,X=window.wc.components;var ee=n(9031);window.wc.tracks,n(5721),(0,V.__)("Metro Manila","woocommerce"),(0,V.__)("Roma","woocommerce");var te=n(6942),ne=n.n(te);const oe=({className:e="",percent:t=0,color:n="#674399",bgcolor:o="var(--wp-admin-theme-color)"})=>{const a={backgroundColor:o},r={backgroundColor:n,width:`${t}%`,display:0===t?"none":"inherit"};return(0,H.createElement)("div",{className:`woocommerce-onboarding-progress-bar ${e}`},(0,H.createElement)("div",{className:"woocommerce-onboarding-progress-bar__container",style:a},(0,H.createElement)("div",{className:"woocommerce-onboarding-progress-bar__filler",style:r})))},ae=({children:e,className:t})=>(0,J.createElement)("div",{className:ne()("woocommerce-onboarding-loader",t)},e);ae.Layout=({children:e,className:t})=>(0,J.createElement)("div",{className:ne()("woocommerce-onboarding-loader-wrapper",t)},(0,J.createElement)("div",{className:ne()("woocommerce-onboarding-loader-container",t)},e)),ae.Illustration=({children:e})=>(0,J.createElement)(J.Fragment,null,e),ae.Title=({children:e,className:t})=>(0,J.createElement)("h1",{className:ne()("woocommerce-onboarding-loader__title",t)},e),ae.ProgressBar=({progress:e,className:t})=>(0,J.createElement)(oe,{className:ne()("progress-bar",t),percent:null!=e?e:0,color:"var(--wp-admin-theme-color)",bgcolor:"#E0E0E0"}),ae.Subtext=({children:e,className:t})=>(0,J.createElement)("p",{className:ne()("woocommerce-onboarding-loader__paragraph",t)},e),ae.Sequence=({interval:e,shouldLoop:t=!0,children:n,onChange:o=()=>{}})=>{const[a,r]=(0,J.useState)(0),s=J.Children.count(n);(0,J.useEffect)((()=>{const n=setInterval((()=>{r((e=>{const a=e+1;if(t){const e=a%s;return o(e),e}return a<s?(o(a),a):(clearInterval(n),e)}))}),e);return()=>clearInterval(n)}),[e,n,t,s]);const c=J.Children.toArray(n)[a];return(0,J.createElement)(J.Fragment,null,c)};const re=window.wp.domReady;var se=n.n(re);const ce=(e,t={})=>{var n;if(window.wcpaySettings){Object.assign(t,{is_test_mode:wcpaySettings.testMode,jetpack_connected:wcpaySettings.isJetpackConnected,wcpay_version:wcpaySettings.version,woo_country_code:wcpaySettings.connect.country,hosting_provider:null===(n=wcpaySettings.trackingInfo)||void 0===n?void 0:n.hosting_provider});for(const e in t)void 0===t[e]&&delete t[e]}se()((()=>{var n,o;(null!==(o=null===(n=null===wc||void 0===wc?void 0:wc.tracks)||void 0===n?void 0:n.recordEvent)&&void 0!==o?o:wcTracks.recordEvent)(e,t)}))},ie="https://cdn.sift.com/s.js",le="https://js.stripe.com/v3",me={sift:({beacon_key:e,session_id:t,user_id:n})=>{const o=window._sift=window._sift||[];if(o.push(["_setAccount",e]),o.push(["_setUserId",n]),o.push(["_setSessionId",t]),o.push(["_trackPageview"]),!document.querySelector(`[src="${ie}"]`)){const e=document.createElement("script");e.src=ie,e.async=!0,document.body.appendChild(e)}},stripe:()=>{if(!document.querySelector(`[src^="${le}"]`)){const e=document.createElement("script");e.src=le,e.async=!0,document.body.appendChild(e)}}};function de(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=de(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const ue=function(){for(var e,t,n=0,o="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=de(e))&&(o&&(o+=" "),o+=t);return o};var pe=n(5955),_e=n(4275);const ye=function(e){const{icon:t,actions:n,children:o,buttonVariant:a}=e,r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["icon","actions","children","buttonVariant"]);r.className=ue("wcpay-inline-notice",`wcpay-inline-${r.status}-notice`,r.className);let s=t;if(!0===s)switch(r.status){case"success":s=Y().createElement(pe.A,null);break;case"error":case"warning":s=Y().createElement(ee.A,null);break;default:s=Y().createElement(_e.A,null)}const c="wcpay-inline-notice__action",i=null==n?void 0:n.map(((e,t)=>{var n,o;return"url"in e?Y().createElement("a",{key:t,className:c,href:e.url},e.label):Y().createElement(Z.Button,{key:t,className:c,onClick:e.onClick,isBusy:null!==(n=e.isBusy)&&void 0!==n&&n,disabled:null!==(o=e.disabled)&&void 0!==o&&o,variant:a},e.label)}));return Y().createElement(Z.Notice,Object.assign({},r),Y().createElement(Z.Flex,{align:"center",justify:"flex-start"},s&&Y().createElement(Z.FlexItem,{className:`wcpay-inline-notice__icon wcpay-inline-${r.status}-notice__icon`},Y().createElement(Z.Icon,{icon:s,size:24})),Y().createElement(Z.FlexItem,{className:`wcpay-inline-notice__content wcpay-inline-${r.status}-notice__content`},o,i&&Y().createElement(Z.Flex,{className:"wcpay-inline-notice__content__actions",align:"baseline",justify:"flex-start",gap:4},i))))};class he extends H.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){return this.state.error?Y().createElement(ye,{icon:!0,status:"error",isDismissible:!1},(0,V.__)("There was an error rendering this view. Please contact support for assistance if the problem persists.","woocommerce-payments"),Y().createElement("br",null),this.state.error.toString()):this.props.children}}const ge=({children:e,id:t="",maxWidth:n,isNarrow:o,className:a=""})=>{const r=n?{maxWidth:n}:void 0,s=[a,"woocommerce-payments-page"];return o&&s.push("is-narrow"),(0,H.useEffect)((()=>{(e=>{for(const t in e){const n=me[t];n&&e[t]&&n(e[t])}})("undefined"!=typeof wcpaySettings?wcpaySettings.fraudServices:[])}),[]),Y().createElement("div",{id:t,className:s.join(" "),style:r},Y().createElement(he,null,e))},we=window.wp.a11y,fe=window.wp.primitives;var ve=n(4848);const be=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),Ee=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm.75 4v1.5h-1.5V8h1.5Zm0 8v-5h-1.5v5h1.5Z"})});var Se=n(5588),ke=n(4788);const Ne={success:be,error:Se.A,warning:ee.A,info:Ee},xe=({icon:e,children:t,actions:n=[],className:o,status:a="info",isDismissible:r=!0,onRemove:s})=>{((e,t)=>{const n="string"==typeof t?t:(0,J.renderToString)(t),o="error"===e?"assertive":"polite";(0,J.useEffect)((()=>{n&&(0,we.speak)(n,o)}),[n,o])})(a,t);const c=!0===e?Ne[a]:e,i=ue(o,"wcpay-banner-notice","is-"+a);return Y().createElement("div",{className:i},c&&Y().createElement(Z.Icon,{icon:c,className:"wcpay-banner-notice__icon"}),Y().createElement("div",{className:"wcpay-banner-notice__content"},t,n.length>0&&Y().createElement("div",{className:"wcpay-banner-notice__actions"},n.map((({className:e,label:t,variant:n,onClick:o,url:a,urlTarget:r},s)=>{let c=n;return"primary"!==n&&(c=a?"link":"secondary"),Y().createElement(Z.Button,{key:s,href:a,variant:c,onClick:a?void 0:o,className:e,target:r,__next40pxDefaultSize:!0},t)})))),r&&Y().createElement(Z.Button,{className:"wcpay-banner-notice__dismiss",icon:ke.A,label:(0,V.__)("Dismiss this notice","woocommerce-payments"),onClick:()=>null==s?void 0:s(),showTooltip:!1,__next40pxDefaultSize:!0}))};function Ce(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function Te(e,t){let n,o,a=[];for(let r=0;r<e.length;r++){const s=e[r];if("string"!==s.type){if(void 0===t[s.value])throw new Error(`Invalid interpolation, missing component node: \`${s.value}\``);if("object"!=typeof t[s.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${s.value}\``);if("componentClose"===s.type)throw new Error(`Missing opening component token: \`${s.value}\``);if("componentOpen"===s.type){n=t[s.value],o=r;break}a.push(t[s.value])}else a.push(s.value)}if(n){const r=function(e,t){const n=t[e];let o=0;for(let a=e+1;a<t.length;a++){const e=t[a];if(e.value===n.value){if("componentOpen"===e.type){o++;continue}if("componentClose"===e.type){if(0===o)return a;o--}}}throw new Error("Missing closing component token `"+n.value+"`")}(o,e),s=Te(e.slice(o+1,r),t),c=(0,H.cloneElement)(n,{},s);if(a.push(c),r<e.length-1){const n=Te(e.slice(r+1),t);a=a.concat(n)}}return a=a.filter(Boolean),0===a.length?null:1===a.length?a[0]:(0,H.createElement)(H.Fragment,null,...a)}function Oe(e){const{mixedString:t,components:n,throwErrors:o}=e;if(!n)return t;if("object"!=typeof n){if(o)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const a=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(Ce)}(t);try{return Te(a,n)}catch(e){if(o)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}const Ie={button:{jetpack_not_connected:(0,V.__)("Connect your store","woocommerce-payments"),account_not_connected:(0,V.__)("Verify business details","woocommerce-payments"),account_invalid:(0,V.__)("Finish business details verifications","woocommerce-payments"),sandbox:(0,V.__)("Create test account","woocommerce-payments"),reset:(0,V.__)("Reset account","woocommerce-payments")},heading:e=>(0,V.sprintf)((0,V.__)("Hi%s, Welcome to %s!","woocommerce"),e?` ${e}`:"","WooPayments"),paymentMethods:{deposits:{title:(0,V.__)("Payouts","woocommerce-payments"),value:(0,V.__)("Automatic - Daily","woocommerce-payments")},capture:{title:(0,V.__)("Payments capture","woocommerce-payments"),value:(0,V.__)("Capture on order","woocommerce-payments")},recurring:{title:(0,V.__)("Recurring payments","woocommerce-payments"),value:(0,V.__)("Supported","woocommerce-payments")}},usp1:(0,V.__)("Offer card payments, Apple Pay, iDeal, Affirm, Afterpay, and accept in-person payments with the Woo mobile app.","woocommerce-payments"),usp2:(0,V.__)("Sell to international markets and accept over 135 currencies with local payment methods.","woocommerce-payments"),usp3:(0,V.__)("Earn recurring revenue and get payouts into your bank account.","woocommerce-payments"),sandboxMode:{title:(0,V.__)("I'm setting up a store for someone else.","woocommerce-payments"),description:(0,V.sprintf)((0,V.__)("This option will set up a %s test account using test data. When youre ready to launch your store, switching to live payments is easy.","woocommerce-payments"),"WooPayments")},sandboxModeNotice:Oe({mixedString:(0,V.__)("Test mode is enabled, only test accounts will be created. If you want to process live transactions, please {{learnMoreLink}}disable it{{/learnMoreLink}}.","woocommerce-payments"),components:{learnMoreLink:Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/sandbox-mode/",target:"_blank",rel:"noreferrer"})}}),setupErrorNotice:(0,V.sprintf)((0,V.__)("Please <b>complete your %1$s setup</b> to process payments.","woocommerce-payments"),"WooPayments"),infoNotice:{description:{jetpack_connected:(0,V.__)("You'll need to verify your business and payment details to ","woocommerce-payments"),jetpack_not_connected:(0,V.__)("To ensure safe and secure transactions, a WordPress.com account is required before you can verify your business details.","woocommerce-payments")},button:(0,V.__)("enable payouts.","woocommerce-payments")},infoModal:{title:(0,V.sprintf)((0,V.__)("Verifying your information with %s","woocommerce-payments"),"WooPayments"),whyWeAsk:{heading:(0,V.__)("Why we ask for personal financial information","woocommerce-payments"),description:(0,V.sprintf)((0,V.__)("As you continue the process of signing up for %s, we'll ask for information about your business, including the business owner's date of birth and tax ID number. We know you may wonder why we ask for this information, and how it will be used. The Know Your Customer process, explained below, helps us provide a safe, ethical environment for all financial transactions.","woocommerce-payments"),"WooPayments")},whatIsKyc:{heading:(0,V.__)("What is Know Your Customer?","woocommerce-payments"),description:(0,V.__)("Know Your Customer standards are used by banks and other financial institutions to confirm that customers are who they say they are. By confirming their customers' identities, banks and financial institutions can help keep transactions safe from fraud and other suspicious activities.","woocommerce-payments")},whyShareInfo:{heading:(0,V.__)("Why do I have to share this information?","woocommerce-payments"),description:(0,V.__)("Before we build a payment relationship with a customer, we ask for the information listed above to validate the business owner's identity and tax ID number, and to ensure that we can connect the listed bank account with the business itself.","woocommerce-payments"),description2:(0,V.__)("The ultimate goal of the Know Your Customer process is to help your business get up and running with payments as soon as possible while protecting your business and your customers. We follow the same regulations as other financial institutions so that we can ensure we operate in an ethical and trustworthy manner. We want to protect your business and the payments that we manage for you. The Know Your Customer process helps us protect you.","woocommerce-payments")},whatElse:{heading:(0,V.__)("What else should I keep in mind while completing this process?","woocommerce-payments"),description:(0,V.sprintf)((0,V.__)("If you're setting up %s for someone else, it's best to have that person complete the account creation process. As you can see above, we ask for very specific information about the business owner - and you might not have all the details at hand. It's not always possible to change account information once it's been saved, especially if the site accepts live transactions before the correct account information is entered.","woocommerce-payments"),"WooPayments")},isMyDataSafe:{heading:(0,V.sprintf)((0,V.__)("Is my data safe with %s?","woocommerce-payments"),"WooPayments"),description:(0,V.sprintf)((0,V.__)("We take every step required to safeguard your personal data. %s is built in partnership with Stripe to store your data in a safe and secure manner.","woocommerce-payments"),"WooPayments")},howQuickly:{heading:(0,V.__)("How quickly will you confirm my identity and allow me to process payments?","woocommerce-payments"),description:(0,V.__)("We'll do our best to work with Stripe to confirm your identity as quickly as we can. Typically, we'll confirm your application within a couple of days.","woocommerce-payments")},whatInformation:{heading:(0,V.__)("What information should I have at hand before I start the Know Your Customer process?","woocommerce-payments"),description:(0,V.__)("Here's a brief list of the information you'll need to finish payment signup:")},businessOwnerInfo:{heading:(0,V.__)("Business owner info:","woocommerce-payments"),fields:[(0,V.__)("Legal name","woocommerce-payments"),(0,V.__)("Date of birth","woocommerce-payments"),(0,V.__)("Home address","woocommerce-payments"),(0,V.__)("Email address","woocommerce-payments"),(0,V.__)("Mobile phone number","woocommerce-payments"),(0,V.__)("Bank account information","woocommerce-payments"),(0,V.__)("Social Security number (SSN) or Taxpayer Identification Number","woocommerce-payments")]},businessInfo:{heading:(0,V.__)("Business info:","woocommerce-payments"),fields:[(0,V.__)("Country where your business is based","woocommerce-payments "),(0,V.__)("Type of business","woocommerce-payments "),(0,V.__)("Industry","woocommerce-payments "),(0,V.__)("Company address","woocommerce-payments "),(0,V.__)("Company phone number","woocommerce-payments "),(0,V.__)("Company URL","woocommerce-payments ")]}},stepsHeading:(0,V.__)("Youre only steps away from getting paid","woocommerce-payments"),step1:{heading:(0,V.__)("Create and connect your account","woocommerce-payments"),description:(0,V.__)("To ensure safe and secure transactions, a WordPress.com account is required.","woocommerce-payments")},step2:{heading:(0,V.__)("Provide a few business details","woocommerce-payments"),description:(0,V.__)("Next well ask you to verify your business and payment details to enable payouts.","woocommerce-payments")},step3:{heading:(0,V.__)("Setup complete!","woocommerce-payments"),description:(0,V.sprintf)((0,V.__)("Youre ready to start using the features and benefits of %s.","woocommerce-payments"),"WooPayments")},onboardingDisabled:(0,V.__)("We've temporarily paused new account creation. We'll notify you when we resume!","woocommerce-payments"),incentive:{limitedTimeOffer:(0,V.__)("Limited time offer","woocommerce-payments"),details:(0,V.__)("Discount will be applied to payments processed via WooPayments upon completion of installation, setup, and connection.","woocommerce-payments"),termsAndConditions:e=>(0,J.createInterpolateElement)((0,V.__)("*See <a>Terms and Conditions</a> for details.","woocommerce-payments"),{a:Y().createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"})}),error:(0,V.__)("There was an error applying the promotion. Please contact support for assistance if the problem persists","woocommerce-payments")},nonSupportedCountry:(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("<b>%1$s is not currently available in your location</b>. To be eligible for %1$s, your business address must be in one of the following <a>supported countries</a>.","woocommerce-payments"),"WooPayments"),{b:Y().createElement("b",null),a:Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/compatibility/countries/",target:"_blank",rel:"noopener noreferrer"})})};var Ae=n(2838);const Re=e=>({__html:(0,Ae.sanitize)(e,{ALLOWED_TAGS:["a","b","em","i","strong","p","br"],ALLOWED_ATTR:["target","href","rel","name","download"]})}),Le=e=>Y().createElement("div",{className:"connect-account-page__incentive"},Y().createElement("div",{className:"connect-account-page__incentive-pill"},Ie.incentive.limitedTimeOffer),Y().createElement("h2",{dangerouslySetInnerHTML:Re(e.description+"*")}),Y().createElement("p",null,Ie.incentive.details),Y().createElement("p",null,Ie.incentive.termsAndConditions(e.tc_url))),De=()=>Y().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"-4 -4 24 24"},Y().createElement("path",{fillRule:"evenodd",d:"M8 1.33a4.67 4.67 0 0 0-2.67 8.5v1.5c0 .37.3.67.67.67h4c.37 0 .67-.3.67-.67v-1.5A4.66 4.66 0 0 0 8 1.33ZM6 14c0 .37.3.67.67.67h2.66c.37 0 .67-.3.67-.67v-.67H6V14Zm3.33-4.87.57-.4a3.33 3.33 0 1 0-3.8 0l.57.4v1.54h2.66V9.13Z",clipRule:"evenodd"})),je=({color:e,className:t,children:n})=>Y().createElement("div",{className:ue("wcpay-component-tip-box",e,t)},Y().createElement(De,null),Y().createElement("div",{className:"wcpay-component-tip-box__content"},n)),Pe=e=>e.map((e=>Y().createElement("li",{key:e},e))),Me=()=>{const[e,t]=(0,H.useState)(!1),n=()=>t(!1);return Y().createElement(Y().Fragment,null,Y().createElement(je,{color:"yellow"},wcpaySettings.isJetpackConnected?Ie.infoNotice.description.jetpack_connected:Ie.infoNotice.description.jetpack_not_connected,wcpaySettings.isJetpackConnected&&Y().createElement(Z.Button,{variant:"link",onClick:()=>{ce("wcpay_connect_account_kyc_modal_opened"),t(!0)},__next40pxDefaultSize:!0},Ie.infoNotice.button)),e&&Y().createElement(Z.Modal,{title:Ie.infoModal.title,isDismissible:!0,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,onRequestClose:n,className:"connect-account-page__info-modal"},Y().createElement("div",null,Y().createElement("h4",null,Ie.infoModal.whyWeAsk.heading," "),Y().createElement("p",null,Ie.infoModal.whyWeAsk.description),Y().createElement("h4",null,Ie.infoModal.whatIsKyc.heading," "),Y().createElement("p",null,Ie.infoModal.whatIsKyc.description),Y().createElement("h4",null,Ie.infoModal.whyShareInfo.heading," "),Y().createElement("p",null,Ie.infoModal.whyShareInfo.description),Y().createElement("p",null,Ie.infoModal.whyShareInfo.description2),Y().createElement("h4",null,Ie.infoModal.whatElse.heading," "),Y().createElement("p",null,Ie.infoModal.whatElse.description),Y().createElement("h4",null,Ie.infoModal.isMyDataSafe.heading," "),Y().createElement("p",null,Ie.infoModal.isMyDataSafe.description),Y().createElement("h4",null,Ie.infoModal.howQuickly.heading," "),Y().createElement("p",null,Ie.infoModal.howQuickly.description),Y().createElement("h4",null,Ie.infoModal.whatInformation.heading," "),Y().createElement("p",null,Ie.infoModal.whatInformation.description),Y().createElement(Z.Notice,{status:"warning",isDismissible:!1},Y().createElement("b",null,Ie.infoModal.businessOwnerInfo.heading),Y().createElement("ul",null,Pe(Ie.infoModal.businessOwnerInfo.fields))),Y().createElement(Z.Notice,{status:"warning",isDismissible:!1},Y().createElement("b",null,Ie.infoModal.businessInfo.heading),Y().createElement("ul",null,Pe(Ie.infoModal.businessInfo.fields)))),Y().createElement("hr",null),Y().createElement("div",{className:"connect-account-page__info-modal__footer"},Y().createElement(Z.Button,{variant:"primary",onClick:n,__next40pxDefaultSize:!0},(0,V.__)("Got it","woocommerce-payments")))))},Fe=({countries:e,onDeclined:t,onConfirmed:n})=>{const[o,a]=(0,J.useState)(!0),[r,s]=(0,J.useState)(!1);if(!o)return null;const c=()=>{a(!1),t()},i=Oe({mixedString:(0,V.sprintf)((0,V.__)("It appears you're attempting to set up %1$s from an unsupported country. In order to complete the set up of %1$s, your store is required to have a business entity in one of the following countries: {{list /}} {{link}}Learn more{{/link}} about setting up business entities in foreign countries.","woocommerce-payments"),"WooPayments"),components:{link:(0,ve.jsx)(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/compatibility/countries/"}),list:(0,ve.jsx)(X.List,{items:e})}});return(0,ve.jsx)(Z.Modal,{title:"WooPayments",isDismissible:!0,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,onRequestClose:c,className:"woocommerce-payments__onboarding_location_check-modal",children:(0,ve.jsxs)("div",{className:"woocommerce-payments__onboarding_location_check-wrapper",children:[(0,ve.jsx)("div",{className:"woocommerce-payments__onboarding_location_check-modal-message",children:i}),(0,ve.jsxs)("div",{className:"woocommerce-payments__onboarding_location_check-footer",children:[(0,ve.jsx)(Z.Button,{variant:"secondary",onClick:()=>{s(!0),n()},isBusy:r,__next40pxDefaultSize:!0,children:(0,V.__)("Continue","woocommerce-payments")}),(0,ve.jsx)(Z.Button,{variant:"primary",onClick:c,disabled:r,__next40pxDefaultSize:!0,children:(0,V.__)("Cancel","woocommerce-payments")})]})]})})},Be=n.p+"../assets/images/woopayments.svg?ver=e7864bfe9a160ad2811a",ze=n.p+"../assets/images/illustrations/setup.svg?ver=c62f1a23d71c0cf65264",Ue=n.p+"../assets/images/payment-method-icons/visa.svg?ver=fc7cc4d4e752bdf85f3d",$e=n.p+"../assets/images/payment-method-icons/mastercard.svg?ver=4d62eb12903d72705eba",Ve=n.p+"../assets/images/payment-method-icons/amex.svg?ver=f55d5deea3391ea7797b",We=n.p+"../assets/images/payment-method-icons/discover.svg?ver=9c04fa2a8eed50cc729c",He=n.p+"../assets/images/payment-method-icons/woopay.svg?ver=1ae20ff280e9f28b8d04",Ye=n.p+"../assets/images/payment-method-icons/applepay.svg?ver=1fd43f54eb27f793a6fb",qe=n.p+"../assets/images/payment-method-icons/afterpay.svg?ver=6b99c8084d7d9413b72d",Ge=n.p+"../assets/images/payment-method-icons/affirm.svg?ver=b81e03e18a236fb4504c",Qe=n.p+"../assets/images/payment-method-icons/klarna.svg?ver=c0d2eb713b53a3ce326a",Ze=n.p+"../assets/images/payment-method-icons/grabpay.svg?ver=2d907ee22ceb6da257d0",Ke=n.p+"../assets/images/payment-method-icons/jcb.svg?ver=b92eddb8dc7464c4f46c",Je=n.p+"../assets/images/payment-method-icons/gpay.svg?ver=0969c91684552e5dda51",Xe=n.p+"../assets/images/cards/cartes_bancaires.svg?ver=d30151baf3e66bac2776",et=n.p+"../assets/images/cards/unionpay.svg?ver=e60ed9d9db08315ff5c9",tt=n.p+"../assets/images/cards/diners.svg?ver=62451ea54fcf12af5e0d",nt=n.p+"../assets/images/cards/eftpos.svg?ver=c3943400388ac6bbaf0a",ot=n.p+"../assets/images/payment-methods/ideal.svg?ver=b1d095bc0b8400da9dd2",at=n.p+"../assets/images/payment-methods/bancontact.svg?ver=b1739ae958760f6f9733",rt=n.p+"../assets/images/payment-methods/eps.svg?ver=7bd9ed62d1b21ca35ceb",st=[{name:"visa",component:Ue},{name:"mastercard",component:$e},{name:"amex",component:Ve},{name:"discover",component:We},{name:"woopay",component:He},{name:"applepay",component:Ye},{name:"googlepay",component:Je},{name:"afterpay",component:qe},{name:"affirm",component:Ge},{name:"klarna",component:Qe},{name:"cartebancaire",component:Xe},{name:"unionpay",component:et},{name:"diners",component:tt},{name:"eftpos",component:nt},{name:"jcb",component:Ke},{name:"bancontact",component:at},{name:"becs",component:n.p+"../assets/images/payment-methods/becs.svg?ver=b99989d8a8e0050ea6b1"},{name:"eps",component:rt},{name:"ideal",component:ot},{name:"przelewy24",component:n.p+"../assets/images/payment-methods/przelewy24.svg?ver=f250356af47efe26461c"},{name:"grabpay",component:Ze},{name:"wechat_pay",component:n.p+"../assets/images/payment-method-icons/wechat-pay.svg?ver=0d8dce3ac11a73b55758"}],ct=({maxElements:e=10,isWooPayEligible:t=!1})=>{const[n,o]=(0,H.useState)(e),[a,r]=(0,H.useState)(!1),s=(0,H.useRef)(),c=t?20:19,i=e=>t?e:e+1;(0,H.useEffect)((()=>{const t=()=>{window.innerWidth<=480?o(5):window.innerWidth<=768?o(7):o(e)};t(),window.addEventListener("resize",t)}),[e]);const l=st.slice(0,i(n)).filter((e=>t||"woopay"!==e.name)),m=st.slice(i(n)).filter((e=>t||"woopay"!==e.name)),d=()=>{s.current&&clearTimeout(s.current),r(!0)},u=()=>{s.current=setTimeout((()=>{r(!1)}),300)};return(0,H.useEffect)((()=>()=>{s.current&&clearTimeout(s.current)}),[]),Y().createElement("div",{className:"connect-account-page__payment-methods--logos"},l.slice(0,n).map((e=>Y().createElement("img",{key:e.name,alt:e.name,src:e.component,width:38,height:24}))),n<c&&Y().createElement("div",{className:"connect-account-page__payment-methods--logos-count",onClick:()=>r(!a),onMouseEnter:d,onMouseLeave:u,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||r(!a)}},"+ ",c-n,a&&Y().createElement(Z.Popover,{position:"bottom left",className:"connect-account-page__payment-methods--logos-popover",noArrow:!0,onClose:()=>r(!1),onMouseEnter:d,onMouseLeave:u},Y().createElement("div",{className:"connect-account-page__payment-methods--logos connect-account-page__payment-methods--logos-inside-popover",onMouseEnter:d,onMouseLeave:u},m.map((e=>Y().createElement("img",{key:e.name,alt:e.name,src:e.component,width:38,height:24})))))))},it=n.p+"../assets/images/woo-logo.svg?ver=c57e105ad8f268f8edde",lt=window.lodash;var mt=n.n(lt);const dt=window.moment;var ut=n.n(dt);const pt=window.wp.date,_t="/wc/v3/payments",yt="wc/payments",ht=window.wc.number,gt=e=>null!==e&&("function"==typeof e||"object"==typeof e),wt=()=>{const e=wcpaySettings?.accountStatus;return!(!wcpaySettings?.isAccountConnected||!gt(e)||e?.isLive||!e?.testDrive)},ft=()=>{const e=wcpaySettings?.accountStatus;return!(!wcpaySettings?.isAccountConnected||!gt(e)||e?.isLive||e?.testDrive)},vt=(e=!1)=>gt(wcpaySettings)&&wcpaySettings.hasOwnProperty("testModeOnboarding")&&!!wcpaySettings.testModeOnboarding||e,bt=(e=!1)=>gt(wcpaySettings)&&wcpaySettings.hasOwnProperty("devMode")&&!!wcpaySettings.devMode||e,Et=e=>(0,Q.addQueryArgs)("admin.php",e),St=e=>{const t=`${wpApiSettings.root.replace(/\/$/,"")}`;return(0,Q.addQueryArgs)(`${t}${_t}/documents/${e}`,{_wpnonce:wpApiSettings.nonce})},kt=(e,t)=>{const n="object"==typeof e?e:{},o={page:"wc-admin",path:"/payments/connect",source:n.source?.replace(/[^\w-]+/g,"")||"unknown",from:t},a={...n,...o};return Et(a)},Nt=()=>Et({page:"wc-settings",tab:"checkout",section:"woocommerce_payments"}),xt=e=>(0,lt.capitalize)(e).replace(/_/g," "),Ct=(e,t=!1)=>{const n=t?ut()(e).endOf("day").utc().toISOString():ut()(e).startOf("day").utc().toISOString();return e&&(0,pt.dateI18n)("Y-m-d H:i:s",n,!0)},Tt=e=>{const t=document.documentElement.lang,n={thousandSeparator:","};return["fr","pl"].some((e=>t.startsWith(e)))?n.thousandSeparator=" ":"de-CH"===t?n.thousandSeparator="'":["de","nl","it","es","pt"].some((e=>t.startsWith(e)))&&(n.thousandSeparator="."),(0,lt.partial)(ht.numberFormat,n)(e)},Ot={title:vt()?(0,V.__)("Reset your test account","woocommerce-payments"):(0,V.__)("Reset account","woocommerce-payments"),description:vt()?(0,V.sprintf)((0,V.__)("When you reset your test account, all payment data  including your %1$s account details, test transactions, and payouts history  will be lost. Your order history will remain. This action cannot be undone, but you can create a new test account at any time.","woocommerce-payments"),"WooPayments"):(0,V.sprintf)((0,V.__)("When you reset your account, all payment data  including your %1$s account details, test transactions, and payouts history  will be lost. Your order history will remain. This action cannot be undone, but you can create a new test account at any time.","woocommerce-payments"),"WooPayments"),beforeContinue:(0,V.__)("Before you continue","woocommerce-payments"),step1:(0,V.sprintf)((0,V.__)("Your %s account will be reset, and all data will be lost.","woocommerce-payments"),"WooPayments"),step2:(0,V.__)("You will have to re-confirm your business and banking details.","woocommerce-payments"),step3:(0,V.__)("Once confirmed, this cannot be undone.","woocommerce-payments"),confirmation:(0,V.__)("Are you sure you want to continue?","woocommerce-payments"),cancel:(0,V.__)("Cancel","woocommerce-payments"),reset:(0,V.__)("Yes, reset account","woocommerce-payments")},It=e=>{const{isVisible:t,onDismiss:n,onSubmit:o}=e,[a,r]=(0,H.useState)(!1);return t?Y().createElement(Z.Modal,{title:Ot.title,className:"wcpay-reset-account-modal",onRequestClose:()=>{r(!1),n()}},Y().createElement("p",{className:"wcpay-reset-account-modal__headline"},Ot.description),Y().createElement("div",{className:"wcpay-reset-account-modal__content"},!vt&&Y().createElement(Y().Fragment,null,Y().createElement("b",null,Ot.beforeContinue),Y().createElement("ol",null,Y().createElement("li",null,Ot.step1),Y().createElement("li",null,Ot.step2),Y().createElement("li",null,Ot.step3)),Y().createElement(Z.CardDivider,null)),Y().createElement("b",null,Ot.confirmation)),Y().createElement("div",{className:"wcpay-reset-account-modal__footer"},Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>{r(!1),n()},__next40pxDefaultSize:!0},Ot.cancel),Y().createElement(Z.Button,{variant:"primary",isDestructive:!0,isBusy:a,disabled:a,onClick:()=>{r(!0),o()},__next40pxDefaultSize:!0},Ot.reset))):null};var At=n(4236),Rt=n(5795),Lt=n.n(Rt);const Dt=document.getElementById("wpbody-content")||document.body,jt=(e,t)=>!(!t||t!==e.target&&!(e.target instanceof Node&&t.contains(e.target))),Pt=(0,H.memo)((({children:e,parentElement:t})=>{const n=(0,H.useRef)(null);return n.current||(n.current=document.createElement("div"),t.appendChild(n.current)),(0,H.useEffect)((()=>()=>{n.current&&(t.removeChild(n.current),n.current=null)}),[t]),(0,Rt.createPortal)(e,n.current)})),Mt=({className:e,children:t,content:n,parentElement:o=Dt,hideDelayMs:a=600,isVisible:r,onHide:s,maxWidth:c="250px"})=>{const i=(0,H.useRef)(null),l=(0,H.useRef)(null),m=((e,{hideDelayMs:t=600,triggerRef:n,tooltipRef:o,parentElement:a,onHide:r=lt.noop})=>{const[s,c]=(0,H.useState)(e),i=(0,H.useRef)(!1),l=(0,H.useRef)(r);return(0,H.useEffect)((()=>{l.current=r}),[r]),(0,H.useEffect)((()=>{let n=null;if(i.current){if(e)return a.dispatchEvent(new Event("wcpay-tooltip-open")),void c(!0);if(s)return n=setTimeout((()=>{c(!1),l.current()}),t),()=>{n&&clearTimeout(n)}}else i.current=!0}),[c,t,e,s,a]),(0,H.useEffect)((()=>{if(!s)return;const e=()=>{c(!1),l.current()},t=e=>{var t;jt(e,null===(t=n.current)||void 0===t?void 0:t.firstChild)||jt(e,o.current)||(c(!1),l.current())};return document.addEventListener("click",t),a.addEventListener("wcpay-tooltip-open",e),()=>{document.removeEventListener("click",t),a.removeEventListener("wcpay-tooltip-open",e)}}),[e,s,n,o,a]),s})(!!r,{hideDelayMs:a,triggerRef:i,tooltipRef:l,parentElement:o,onHide:s});return(0,H.useEffect)((()=>{const e=()=>{var e;if(!m)return;const t=l.current,n=null===(e=i.current)||void 0===e?void 0:e.firstChild;if(!t||!n)return;if(!(n instanceof HTMLElement))return;t.style.maxWidth=c;const o=n.getBoundingClientRect(),a=t.getBoundingClientRect().height;t.style.top=o.top-a-8+"px";let r=n.offsetWidth/2+o.left-t.offsetWidth/2;const s=window.innerWidth-(o.left+t.offsetWidth);r<0?r=45:s<0&&(r-=85),t.style.left=`${r}px`,t.style.visibility="visible",t.style.opacity="1"};e();const t=(0,lt.debounce)(e,150);return window.addEventListener("resize",t),document.addEventListener("scroll",t),()=>{window.removeEventListener("resize",t),document.removeEventListener("scroll",t)}}),[m,c]),Y().createElement(Y().Fragment,null,Y().createElement("div",{className:"wcpay-tooltip__content-wrapper",ref:i},t),m&&Y().createElement(Pt,{parentElement:o},Y().createElement("div",{ref:l,className:ue("wcpay-tooltip__tooltip-wrapper",{"is-hiding":!r}),role:"tooltip"},Y().createElement("div",{className:ue("wcpay-tooltip__tooltip",e)},n))))};var Ft=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};const Bt=e=>{var{isVisible:t,onHide:n=lt.noop,children:o,buttonIcon:a,buttonLabel:r,buttonSize:s=16}=e,c=Ft(e,["isVisible","onHide","children","buttonIcon","buttonLabel","buttonSize"]);const[i,l]=(0,H.useState)(!1),[m,d]=(0,H.useState)(!1),u=()=>{l(!0)},p=()=>{l(!1),n()};return Y().createElement("button",{className:"wcpay-tooltip__content-wrapper",onMouseEnter:u,onMouseLeave:p,onFocus:u,onBlur:p,onClick:()=>{d((e=>!e)),m&&n()},type:"button"},Y().createElement(Mt,Object.assign({},c,{onHide:()=>{l(!1),d(!1),n()},isVisible:t||i||m}),a?Y().createElement(Z.Icon,{icon:a,size:s,"aria-label":r}):o))},zt=e=>{var{isVisible:t,onHide:n=lt.noop,buttonIcon:o,buttonLabel:a,buttonSize:r=16,children:s,className:c,maxWidth:i}=e,l=Ft(e,["isVisible","onHide","buttonIcon","buttonLabel","buttonSize","children","className","maxWidth"]);const[m,d]=(0,H.useState)(!1),u=(0,H.useRef)(null);return Y().createElement("button",{className:"wcpay-tooltip__content-wrapper wcpay-tooltip--click__content-wrapper",onClick:()=>{d((e=>!e)),m&&n()},type:"button",ref:u},Y().createElement(Mt,Object.assign({},l,{parentElement:u.current||void 0,onHide:()=>{d(!1),n()},maxWidth:i,isVisible:t||m,className:ue("wcpay-tooltip--click__tooltip",c)}),o?Y().createElement("div",{tabIndex:0,role:"button","aria-label":a},Y().createElement(Z.Icon,{icon:o,size:r})):s))},Ut=(0,J.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,J.cloneElement)(e,{width:t,height:t,...n,ref:o})})),$t=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zm-1.338 4.877c-.314.22-.412.452-.412.623 0 .171.098.403.412.623.312.218.783.377 1.338.377.825 0 1.605.233 2.198.648.59.414 1.052 1.057 1.052 1.852 0 .795-.461 1.438-1.052 1.852-.41.286-.907.486-1.448.582v.316a.75.75 0 01-1.5 0v-.316a3.64 3.64 0 01-1.448-.582c-.59-.414-1.052-1.057-1.052-1.852a.75.75 0 011.5 0c0 .171.098.403.412.623.312.218.783.377 1.338.377s1.026-.159 1.338-.377c.314-.22.412-.452.412-.623 0-.171-.098-.403-.412-.623-.312-.218-.783-.377-1.338-.377-.825 0-1.605-.233-2.198-.648-.59-.414-1.052-1.057-1.052-1.852 0-.795.461-1.438 1.052-1.852a3.64 3.64 0 011.448-.582V7.5a.75.75 0 011.5 0v.316c.54.096 1.039.296 1.448.582.59.414 1.052 1.057 1.052 1.852a.75.75 0 01-1.5 0c0-.171-.098-.403-.412-.623-.312-.218-.783-.377-1.338-.377s-1.026.159-1.338.377z"})}),Vt=Y().createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Y().createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V9.8l4.7-5.3H19c.3 0 .5.2.5.5v14zm-6-9.5L16 12l-2.5 2.8 1.1 1L18 12l-3.5-3.5-1 1zm-3 0l-1-1L6 12l3.5 3.8 1.1-1L8 12l2.5-2.5z"})),Wt=Y().createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Y().createElement("path",{d:"M10 4.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm2.25 7.5v-1A2.75 2.75 0 0011 8.25H7A2.75 2.75 0 004.25 11v1h1.5v-1c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v1h1.5zM4 20h9v-1.5H4V20zm16-4H4v-1.5h16V16z",fillRule:"evenodd",clipRule:"evenodd"})),Ht=({from:e,source:t,onClose:n})=>{const[o,a]=(0,H.useState)(!1);return Y().createElement(Z.Modal,{title:(0,V.__)("Activate payments on your store","woocommerce-payments"),className:"wcpay-setup-real-payments-modal",isDismissible:!0,onRequestClose:()=>{a(!1),ce("wcpay_setup_live_payments_modal_exit",{from:e,source:t}),n()}},Y().createElement("div",{className:"wcpay-setup-real-payments-modal__content"},Y().createElement("div",{className:"wcpay-setup-real-payments-modal__content__item"},Y().createElement("p",null,(0,V.__)("Before continuing, please make sure that you're aware of the following:","woocommerce-payments"))),Y().createElement("div",{className:"wcpay-setup-real-payments-modal__content__item-flex"},Y().createElement("div",null,Y().createElement(Ut,{icon:Vt})),Y().createElement("p",{className:"wcpay-setup-real-payments-modal__content__item-flex__description"},(0,V.__)("Your test account will be deactivated, but your transactions can be found in your order history.","woocommerce-payments"))),Y().createElement("div",{className:"wcpay-setup-real-payments-modal__content__item-flex"},Y().createElement("div",null,Y().createElement(Ut,{icon:Wt})),Y().createElement("p",{className:"wcpay-setup-real-payments-modal__content__item-flex__description"},(0,V.sprintf)((0,V.__)("To use %s, you will need to verify your business details.","woocommerce-payments"),"WooPayments"))),Y().createElement("div",{className:"wcpay-setup-real-payments-modal__content__item-flex"},Y().createElement("div",null,Y().createElement(Ut,{icon:$t})),Y().createElement("p",{className:"wcpay-setup-real-payments-modal__content__item-flex__description"},(0,V.__)("In order to receive payouts, you will need to provide your bank details.","woocommerce-payments")))),Y().createElement("div",{className:"wcpay-setup-real-payments-modal__footer"},Y().createElement(Z.Button,{variant:"primary",isBusy:o,disabled:o,onClick:()=>{a(!0),ce("wcpay_onboarding_flow_setup_live_payments",{from:e,source:t}),window.location.href=Et({page:"wc-settings",tab:"checkout",path:"/woopayments/onboarding",source:t,from:"wcpay-setup-live-payments"})},__next40pxDefaultSize:!0},(0,V.__)("Activate payments","woocommerce-payments"))))},Yt=({from:e,source:t})=>{const[n,o]=(0,H.useState)(!1);return Y().createElement(Y().Fragment,null,Y().createElement(xe,{status:"warning",className:"sandbox-mode-notice",isDismissible:!1},wt()&&!bt()&&Oe({mixedString:(0,V.sprintf)((0,V.__)("{{div}}{{strong}}You're using a test account.{{/strong}} To accept payments from shoppers, {{switchToLiveLink}}activate your %1$s account.{{/switchToLiveLink}}{{/div}}{{learnMoreIcon/}}","woocommerce-payments"),"WooPayments"),components:{div:Y().createElement("div",null),strong:Y().createElement("strong",null),learnMoreIcon:Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about test accounts","woocommerce-payments"),maxWidth:"250px",content:Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("A test account gives you access to all %1$s features while checkout transactions are simulated. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{learnMoreLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/test-accounts/",target:"_blank",rel:"noreferrer",type:"external",onClick:()=>ce("wcpay_overview_sandbox_mode_learn_more_clicked",{account_type:"test",is_dev_mode:!1})})}}))}),switchToLiveLink:Y().createElement(Z.Button,{variant:"link",onClick:()=>{ce("wcpay_setup_live_payments_modal_open",{from:e,source:t}),o(!0)},__next40pxDefaultSize:!0})}}),wt()&&bt()&&Oe({mixedString:(0,V.sprintf)((0,V.__)("{{div}}{{strong}}You're using a test account.{{/strong}}  Development mode is enabled for the store! There can be no live onboarding process while using development, testing, or staging WordPress environments!{{/div}}{{learnMoreIcon/}}","woocommerce-payments"),"WooPayments"),components:{div:Y().createElement("div",null),strong:Y().createElement("strong",null),learnMoreIcon:Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about development mode","woocommerce-payments"),maxWidth:"250px",content:Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("To begin accepting real payments, please go to the live store or change your {{wpEnvLink}}WordPress environment{{/wpEnvLink}} to a production one. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{wpEnvLink:Y().createElement(X.Link,{type:"external",target:"_blank",rel:"noreferrer",href:"https://make.wordpress.org/core/2020/08/27/wordpress-environment-types/"}),learnMoreLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/test-accounts/#developer-notes",target:"_blank",rel:"noreferrer",type:"external",onClick:()=>ce("wcpay_overview_sandbox_mode_learn_more_clicked",{account_type:"test",is_dev_mode:!0})})}}))})}}),ft()&&!bt()&&Oe({mixedString:(0,V.sprintf)((0,V.__)("{{div}}{{strong}}You're using a sandbox test account.{{/strong}} To accept real payments from shoppers, you will need to first {{resetAccountLink}}reset your account{{/resetAccountLink}} and, then, provide additional details about your business.{{/div}}{{learnMoreIcon/}}","woocommerce-payments"),"WooPayments"),components:{div:Y().createElement("div",null),strong:Y().createElement("strong",null),resetAccountLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/startup-guide/#resetting",target:"_blank",rel:"noreferrer",type:"external"}),learnMoreIcon:Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about sandbox accounts","woocommerce-payments"),maxWidth:"250px",content:Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("A sandbox account gives you access to all %1$s features while checkout transactions are simulated. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{learnMoreLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/startup-guide/#sign-up-process",target:"_blank",rel:"noreferrer",type:"external",onClick:()=>ce("wcpay_overview_sandbox_mode_learn_more_clicked",{account_type:"sandbox",is_dev_mode:!1})})}}))})}}),ft()&&bt()&&Oe({mixedString:(0,V.sprintf)((0,V.__)("{{div}}{{strong}}You are using a sandbox test account.{{/strong}}  Development mode is enabled for the store! There can be no live onboarding process while using development, testing, or staging WordPress environments!{{/div}}{{learnMoreIcon/}}","woocommerce-payments"),"WooPayments"),components:{div:Y().createElement("div",null),strong:Y().createElement("strong",null),learnMoreIcon:Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about development mode","woocommerce-payments"),maxWidth:"250px",content:Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("To begin accepting real payments, please go to the live store or change your {{wpEnvLink}}WordPress environment{{/wpEnvLink}} to a production one. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{wpEnvLink:Y().createElement(X.Link,{type:"external",target:"_blank",rel:"noreferrer",href:"https://make.wordpress.org/core/2020/08/27/wordpress-environment-types/"}),learnMoreLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/test-accounts/#developer-notes",target:"_blank",rel:"noreferrer",type:"external",onClick:()=>ce("wcpay_overview_sandbox_mode_learn_more_clicked",{account_type:"sandbox",is_dev_mode:!0})})}}))})}})),n&&Y().createElement(he,null,Y().createElement(Ht,{from:e,source:t,onClose:()=>o(!1)})))},qt=window.wp.htmlEntities;var Gt=n(5338),Qt=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const Zt=()=>Y().createElement(xe,{icon:!0,status:"warning",isDismissible:!1},Ie.sandboxModeNotice),Kt=({progress:e})=>Y().createElement(ae,{className:"connect-account-page__preloader"},Y().createElement("img",{className:"logo",src:it,alt:""}),Y().createElement(ae.Layout,null,Y().createElement(ae.Illustration,null,Y().createElement("img",{src:ze,alt:"setup",style:{maxWidth:"223px"}})),Y().createElement(ae.Title,null,(0,V.__)("Finishing payments setup","woocommerce-payments")),Y().createElement(ae.ProgressBar,{progress:null!=e?e:0}),Y().createElement(ae.Sequence,{interval:0},(0,V.__)("In just a few moments, you'll be ready to test payments on your store.")))),Jt=()=>{var e,t;const n=null===(t=null===(e=wcSettings.admin)||void 0===e?void 0:e.currentUserData)||void 0===t?void 0:t.first_name,o=wcpaySettings.connectIncentive,[a,r]=(0,H.useState)(!1),[s,c]=(0,H.useState)(wcpaySettings.errorMessage),[i,l]=(0,H.useState)(!1),[m,d]=(0,H.useState)(!1),[u,p]=(0,H.useState)(!1),[_,y]=(0,H.useState)(5),h=(0,H.useRef)(_);let g;h.current=_;const{connectUrl:w,connect:{availableCountries:f,country:v},testModeOnboarding:b,isJetpackConnected:E,isAccountConnected:S,isAccountValid:k}=wcpaySettings,N=!!f[v],x=new URLSearchParams(window.location.search),C=()=>{var e;const t=null===(e=x.get("source"))||void 0===e?void 0:e.replace(/[^\w-]+/g,"");if(t&&"unknown"!==t)return t;if(w.includes("source=")){const e=new URL(w).searchParams.get("source");if(e&&"unknown"!==e)return e}let n="wcpay-connect-page";switch(x.get("from")||""){case"WCADMIN_PAYMENT_TASK":n="wcadmin-payment-task";break;case"WCADMIN_PAYMENT_SETTINGS":n="wcadmin-settings-page";break;case"WCADMIN_PAYMENT_INCENTIVE":n="wcadmin-incentive-page"}return n},T=()=>{var e;return(null===(e=x.get("from"))||void 0===e?void 0:e.replace(/[^\w-]+/g,""))||""},O=e=>{ce("wcpay_connect_account_clicked",Object.assign(Object.assign({wpcom_connection:E?"Yes":"No"},o&&{incentive_id:o.id}),{sandbox_mode:e,path:"payments_connect_v2",from:T(),source:C()}))},I=(e,t)=>{if(h.current<e){const e=h.current+t;y(e)}},A=(e={})=>{G()({path:"/wc/v3/payments/accounts",method:"GET"}).then((t=>{if(I(100,6),t&&t.status&&!t.status.includes("pending")||h.current>95||(n=g,Math.round((Date.now()-n)/1e3)>40)){y(100);const t={test_drive:"true","wcpay-sandbox-success":"true",source:C(),from:"WCPAY_CONNECT",redirect_to_settings_page:x.get("redirect_to_settings_page")||""};window.location.href=(0,Q.addQueryArgs)(w,Object.assign(Object.assign({},t),e))}else setTimeout((()=>A(e)),2500);var n}))},R=()=>Qt(void 0,void 0,void 0,(function*(){g=Date.now(),y(5),d(!0),O(!0);const e=(0,Q.addQueryArgs)(w,{test_drive:"true",capabilities:x.get("capabilities")||""}),t=setInterval(I,2500,40,5);wcpaySettings.isJetpackConnected?(p(!0),fetch(e,{method:"GET",redirect:"follow",credentials:"same-origin",headers:{"content-type":"application/json",pragma:"no-cache","cache-control":"no-cache"}}).then((e=>e.json())).then((e=>{var n;(null==e?void 0:e.success)&&(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.redirect_to)?(clearInterval(t),y(40),new URLSearchParams(e.data.redirect_to).get("wcpay-connection-success")?A({"wcpay-connection-success":"1"}):window.location.href=(0,Q.addQueryArgs)(e.data.redirect_to,{test_drive:"true",test_drive_error:"true"})):window.location.href=(0,Q.addQueryArgs)(window.location.href,{test_drive_error:"true"})})).catch((()=>{window.location.href=(0,Q.addQueryArgs)(window.location.href,{test_drive_error:"true"})}))):window.location.href=(0,Q.addQueryArgs)(e,{auto_start_test_drive_onboarding:"true"})}));(0,H.useEffect)((()=>{ce("page_view",Object.assign(Object.assign({path:"payments_connect_v2"},o&&{incentive_id:o.id}),{from:T(),source:C()})),wcpaySettings.isJetpackConnected&&x.get("auto_start_test_drive_onboarding")&&R()}),[]);let L=!1;s&&s.includes("account setup session")&&(L=!0);const D="true"===x.get("test_drive_error");!s&&D&&c((0,V.__)("An error occurred while setting up your sandbox account. Please try again!","woocommerce-payments"));let j=Ie.button.jetpack_not_connected;return E&&(j=Ie.button.account_not_connected,L||!S||k||(j=Ie.button.account_invalid)),!s&&(!E&&S||E&&S&&!k)&&c(Ie.setupErrorNotice),Y().createElement(ge,{isNarrow:!0,id:"connect-account-page",className:"connect-account-page"},s&&Y().createElement(xe,{status:"error",icon:!0,isDismissible:!1},Y().createElement("div",{dangerouslySetInnerHTML:Re((0,qt.decodeEntities)(s))})),wcpaySettings.onBoardingDisabled?Y().createElement(Z.Card,null,Y().createElement(Z.CardBody,null,Ie.onboardingDisabled)):Y().createElement(Y().Fragment,null,!N&&Y().createElement(xe,{status:"error",isDismissible:!1},Ie.nonSupportedCountry),!S&&b?Y().createElement(Zt,null):S&&!k&&b&&E&&Y().createElement(Yt,{from:"WCPAY_CONNECT",source:"wcpay-connect-page"}),Y().createElement(Z.Card,null,Y().createElement("div",{className:"connect-account-page__heading"},Y().createElement("img",{src:Be,alt:"logo"}),Y().createElement("h2",null,Ie.heading(n))),Y().createElement("div",{className:"connect-account-page__content"},Y().createElement(Me,null)),Y().createElement("div",{className:"connect-account-page__payment-methods"},Y().createElement(ct,{maxElements:10,isWooPayEligible:wcpaySettings.isWooPayStoreCountryAvailable}),Y().createElement("div",{className:"connect-account-page__payment-methods__description"},Y().createElement("div",null,Y().createElement("p",null,Ie.paymentMethods.deposits.title),Y().createElement("span",null,Ie.paymentMethods.deposits.value)),Y().createElement("div",{className:"connect-account-page__payment-methods__description__divider"}),Y().createElement("div",null,Y().createElement("p",null,Ie.paymentMethods.capture.title),Y().createElement("span",null,Ie.paymentMethods.capture.value)),Y().createElement("div",{className:"connect-account-page__payment-methods__description__divider"}),Y().createElement("div",null,Y().createElement("p",null,Ie.paymentMethods.recurring.title),Y().createElement("span",null,Ie.paymentMethods.recurring.value)))),Y().createElement("div",{className:"connect-account-page__buttons"},Y().createElement(Z.Button,{variant:"primary",isBusy:i,disabled:i||L,onClick:()=>Qt(void 0,void 0,void 0,(function*(){if(l(!0),O(!1),o)try{const e=yield G()({path:`/wc-analytics/admin/notes/experimental-activate-promo/${o.id}`,method:"POST"});if(!(null==e?void 0:e.success))throw new Error}catch(e){c(Ie.incentive.error)}if(!N)return(()=>{const e=Object.values(f).sort().map((e=>({title:e}))),t=document.createElement("div");t.id="wcpay-onboarding-location-check-container",(0,Gt.H)(t).render(Y().createElement(Fe,{countries:e,onDeclined:()=>{l(!1)},onConfirmed:()=>{window.location.href=(0,Q.addQueryArgs)(w,{source:C(),from:"WCPAY_CONNECT"})}})),document.body.appendChild(t)})();window.location.href=(0,Q.addQueryArgs)(w,{source:C(),from:"WCPAY_CONNECT"})})),__next40pxDefaultSize:!0},j),S&&(!wcpaySettings.accountStatus.detailsSubmitted||vt())&&Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>r(!0),__next40pxDefaultSize:!0},Ie.button.reset))),!S&&o&&Y().createElement(Le,Object.assign({},o)),!S&&Y().createElement(Z.Panel,{className:"connect-account-page__sandbox-mode-panel"},Y().createElement(Z.PanelBody,{title:Ie.sandboxMode.title,initialOpen:!1},Y().createElement(ye,{icon:!0,status:"info",isDismissible:!1},Ie.sandboxMode.description),Y().createElement(Z.Button,{variant:"secondary",isBusy:m,disabled:m,onClick:R,__next40pxDefaultSize:!0},Ie.button.sandbox))),Y().createElement(It,{isVisible:a,onDismiss:()=>r(!1),onSubmit:()=>{window.location.href=(0,Q.addQueryArgs)(wcpaySettings.connectUrl,{"wcpay-reset-account":"true",from:"WCPAY_CONNECT",source:C()})}})),u&&Y().createElement(Kt,{progress:_}))},Xt={documents:(0,V.__)("document","woocommerce-payments"),deposits:(0,V.__)("payout","woocommerce-payments"),disputes:(0,V.__)("dispute","woocommerce-payments"),loans:(0,V.__)("loan","woocommerce-payments"),payments:(0,V.__)("order","woocommerce-payments"),transactions:(0,V.__)("order","woocommerce-payments")},en={documents:(0,V.__)("created","woocommerce-payments"),deposits:(0,V.__)("created","woocommerce-payments"),disputes:(0,V.__)("created","woocommerce-payments"),loans:(0,V.__)("created","woocommerce-payments"),payments:(0,V.__)("placed","woocommerce-payments"),transactions:(0,V.__)("placed","woocommerce-payments")},tn=({currentPage:e,actions:t,isDetailsView:n=!1,isTestModeOnboarding:o=!1})=>((e=!1)=>gt(wcpaySettings)&&wcpaySettings.hasOwnProperty("testMode")&&!!wcpaySettings.testMode||e)()?Y().createElement(xe,{status:"warning",isDismissible:!1,actions:t},((e,t,n)=>{switch(e){case"overview":return n?Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("{{strong}}%1$s is in sandbox mode.{{/strong}} You need to set up a live %1$s account before you can accept real transactions.","woocommerce-payments"),"WooPayments"),components:{strong:Y().createElement("strong",null)}})):Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("{{strong}}%1$s is in test mode.{{/strong}} All transactions will be simulated. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{strong:Y().createElement("strong",null),learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/sandbox-mode/",onClick:()=>ce("wcpay_overview_test_mode_learn_more_clicked")})}}));case"documents":case"deposits":case"disputes":case"payments":case"loans":case"transactions":return t?Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V._n)("%1$s was in test mode when this %2$s was %3$s. To view live %2$ss, disable test mode in {{settingsLink}}%1$s settings{{/settingsLink}}.","%1$s was in test mode when these %2$ss were %3$s. To view live %2$ss, disable test mode in {{settingsLink}}%1$s settings{{/settingsLink}}.","deposits"===e?2:1,"woocommerce-payments"),"WooPayments",Xt[e],en[e]),components:{settingsLink:Y().createElement("a",{href:Nt()})}})):Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.sprintf)((0,V.__)("Viewing test %1$s. To view live %1s, disable test mode in {{settingsLink}}%2s settings{{/settingsLink}}.","woocommerce-payments"),"deposits"===e?"payouts":e,"WooPayments"),components:{settingsLink:Y().createElement("a",{href:Nt()})}}))}})(e,n,o)):null;function nn(e,t={}){const{customFormat:n=null,includeTime:o=!1,separator:a=" / ",timezone:r}=t,s=ut().utc(e).toISOString(),c=n||`${window.wcpaySettings.dateFormat}${o?`${a}${window.wcpaySettings.timeFormat}`:""}`;return(0,pt.dateI18n)(c,s,r)}function on(e,t={}){const{customFormat:n=null,includeTime:o=!1,separator:a=" / ",timezone:r}=t,s=ut().unix(e).utc().toISOString(),c=n||`${window.wcpaySettings.dateFormat}${o?`${a}${window.wcpaySettings.timeFormat}`:""}`;return(0,pt.dateI18n)(c,s,r)}const an=({monthlyAnchor:e,capitalize:t=!0})=>{const n=ut().locale().startsWith("en")?"en":ut().locale();let o=ut()().locale(n).date(e).format("Do");return 31===e&&(o=(0,V.__)("Last day of the month","woocommerce-payments")),t||(o=o.toLowerCase()),o},rn=e=>!!e&&["daily","weekly","monthly"].includes(e),sn=({depositsSchedule:e})=>{switch(e.interval){case"daily":return Oe({mixedString:(0,V.sprintf)((0,V.__)("Available funds are automatically dispatched {{strong}}every day{{/strong}}.","woocommerce-payments")),components:{strong:Y().createElement("strong",null)}});case"weekly":const t=ut()().locale("en").day(e.weekly_anchor).locale(ut().locale()).format("dddd");return Oe({mixedString:(0,V.sprintf)((0,V.__)("Available funds are automatically dispatched {{strong}}every %1$s{{/strong}}.","woocommerce-payments"),t),components:{strong:Y().createElement("strong",null)}});case"monthly":const n=e.monthly_anchor;return Oe(31===n?{mixedString:(0,V.sprintf)((0,V.__)("Available funds are automatically dispatched {{strong}}on the last day of every month{{/strong}}.","woocommerce-payments")),components:{strong:Y().createElement("strong",null)}}:{mixedString:(0,V.sprintf)((0,V.__)("Available funds are automatically dispatched {{strong}}on the %1$s of every month{{/strong}}.","woocommerce-payments"),an({monthlyAnchor:n,capitalize:!1})),components:{strong:Y().createElement("strong",null)}});default:return Y().createElement(Y().Fragment,null)}},cn=({depositsSchedule:e})=>{if(!rn(e.interval))return null;const t=Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.__)("The timing and amount of your payouts may vary due to several factors. Check out our {{link}}payout schedule guide{{/link}} for details.","woocommerce-payments"),components:{link:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:"https://woocommerce.com/document/woopayments/payouts/payout-schedule/"})}}));return Y().createElement(Y().Fragment,null,Y().createElement(sn,{depositsSchedule:e}),Y().createElement(zt,{content:t,buttonIcon:Y().createElement(At.A,null),buttonLabel:"Payout schedule tooltip"}))},ln=window.wp.data,mn=window.wp.dataControls,dn={SET_DEPOSIT:"SET_DEPOSIT",SET_DEPOSITS:"SET_DEPOSITS",SET_DEPOSITS_COUNT:"SET_DEPOSITS_COUNT",SET_ERROR_FOR_DEPOSIT_QUERY:"SET_ERROR_FOR_DEPOSIT_QUERY",SET_DEPOSITS_SUMMARY:"SET_DEPOSITS_SUMMARY",SET_ERROR_FOR_DEPOSITS_SUMMARY:"SET_ERROR_FOR_DEPOSITS_SUMMARY",SET_INSTANT_DEPOSIT:"SET_INSTANT_DEPOSIT",SET_ALL_DEPOSITS_OVERVIEWS:"SET_ALL_DEPOSITS_OVERVIEWS",SET_ERROR_FOR_ALL_DEPOSITS_OVERVIEWS:"SET_ERROR_FOR_ALL_DEPOSITS_OVERVIEWS"},un=e=>JSON.stringify(e,Object.keys(e).sort()),pn={byId:{},queries:{},count:0,instant:{}},_n=e=>e&&e.deposits||{},yn=(e,t)=>(_n(e).byId||{})[t],hn=e=>{const t=_n(e).overviews||{};if(!t.data)return{account:null,currencies:[]};const{deposit:n,balance:o,account:a}=t.data,r={lastPaid:n.last_paid,pending:o.pending,available:o.available,instant:o.instant},s={};for(const[e,t]of Object.entries(r))t?.forEach((t=>{const{currency:n}=t;s[n]||(s[n]={currency:n,lastPaid:void 0,pending:void 0,available:void 0,instant:void 0}),s[n][e]=t}));const c=Object.values(s);return{account:a,currencies:[...c.filter((e=>a.default_currency===e.currency)),...c.filter((e=>a.default_currency!==e.currency))]}},gn=e=>(_n(e).overviews||{}).error,wn=(e,t)=>{const n=un(t);return(_n(e).queries||{})[n]||{}},fn=(e,t)=>(wn(e,t).data||[]).map(yn.bind(void 0,e)),vn=e=>_n(e).count,bn=(e,t)=>wn(e,t).error||{},En=(e,t)=>{const n=un(t);return(_n(e).summary||{})[n]||{}},Sn=(e,t)=>En(e,t).data||{},kn=(e,t)=>En(e,t).error||{},Nn=e=>(_n(e).instant||{}).data,xn=(0,H.createContext)(window.wcpaySettings),Cn=(0,H.createContext)({isActive:!1,setActive:()=>null,isCompleted:!1,setCompleted:()=>null,taskId:""}),Tn=window.wc.currency;var On=n.n(Tn);const In={aud:(0,V.__)("Australian dollar","woocommerce-payments"),cad:(0,V.__)("Canadian dollar","woocommerce-payments"),chf:(0,V.__)("Swiss franc","woocommerce-payments"),dkk:(0,V.__)("Danish krone","woocommerce-payments"),eur:(0,V.__)("Euro","woocommerce-payments"),gbp:(0,V.__)("Pound sterling","woocommerce-payments"),nok:(0,V.__)("Norwegian krone","woocommerce-payments"),nzd:(0,V.__)("New Zealand dollar","woocommerce-payments"),sek:(0,V.__)("Swedish krona","woocommerce-payments"),usd:(0,V.__)("United States (US) dollar","woocommerce-payments")},An=e=>In[e.toLowerCase()]||e.toUpperCase(),Rn=(e,t=null)=>{const{currencyData:n,connect:{country:o="US"}}=wcpaySettings,a=(0,lt.find)(n,{code:e.toUpperCase()});if(a){if(null!==t&&t.toUpperCase()!==e.toUpperCase()||n[o]){const e=t?(0,lt.find)(n,{code:t.toUpperCase()}):n[o];e&&(a.decimalSeparator=e.decimalSeparator,a.thousandSeparator=e.thousandSeparator,a.symbolPosition=e.symbolPosition)}return On()(a)}return null},Ln=e=>wcpaySettings.zeroDecimalCurrencies.includes(e.toLowerCase()),Dn=(e,t)=>(Ln(t)||(e/=100),e),jn=(e,t="USD",n=null,o=!1)=>{const a=Ln(t);a||(e/=100);const r=e<0,s=r?-1*e:e,c=r?"-":"",i=o?(e=>{const t=e.toUpperCase(),{currencyData:n,connect:{country:o="US"}}=wcpaySettings;if(n[o]?.code===t)return On()(n[o]);const a=(0,lt.find)(n,{code:t});if(a){const{defaultLocale:e={}}=a;return e.hasOwnProperty("decimalSeparator")&&e.hasOwnProperty("thousandSeparator")&&e.hasOwnProperty("symbolPosition")&&(a.decimalSeparator=e.decimalSeparator,a.thousandSeparator=e.thousandSeparator,a.symbolPosition=e.symbolPosition),On()(a)}return null})(t):Rn(t,n);if(null===i)return c+Bn(s,t,a);try{return c+("function"==typeof i.formatAmount?zn(i.formatAmount(s)):zn(i.formatCurrency(s)))}catch(e){return c+zn(Bn(s,t,a))}},Pn=(e,t)=>(-1===e.toString().indexOf(t)&&(e=e+" "+t),e),Mn=(e,t="USD",n=!1,o=null)=>{let a=jn(e,t,o);return wcpaySettings.shouldUseExplicitPrice?(n&&(a=Fn(a)),Pn(a,t.toUpperCase())):a};function Fn(e){return e.replace(/[^0-9,.' ]/g,"").trim()}function Bn(e,t,n){try{return e.toLocaleString(void 0,{style:"currency",currency:t,currencyDisplay:"narrowSymbol",dummy:n})}catch(o){return(0,V.sprintf)(n?"%s %i":"%s %.2f",t.toUpperCase(),e)}}function zn(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}const Un=(e,t)=>{if((e=e.toUpperCase())===(t=t.toUpperCase()))return!1;const{currencyData:n}=wcpaySettings,o=(0,lt.find)(n,{code:e}),a=(0,lt.find)(n,{code:t});return!(!o||!a)&&o.symbol===a.symbol};function $n(e){return{type:dn.SET_DEPOSIT,data:e}}function Vn(e){return{type:dn.SET_ALL_DEPOSITS_OVERVIEWS,data:e}}function Wn(e,t){return{type:dn.SET_ERROR_FOR_ALL_DEPOSITS_OVERVIEWS,error:t}}function Hn(e,t){return{type:dn.SET_DEPOSITS,query:e,data:t}}function Yn(e){return{type:dn.SET_DEPOSITS_COUNT,data:e}}function qn(e,t,n){return{type:dn.SET_ERROR_FOR_DEPOSIT_QUERY,query:e,data:t,error:n}}function Gn(e,t){return{type:dn.SET_DEPOSITS_SUMMARY,query:e,data:t}}function Qn(e,t,n){return{type:dn.SET_ERROR_FOR_DEPOSITS_SUMMARY,query:e,data:t,error:n}}function Zn(e){return{type:dn.SET_INSTANT_DEPOSIT,data:e}}function*Kn(e){try{yield(0,ln.dispatch)(yt).startResolution("getInstantDeposit",[e]);const t=yield(0,mn.apiFetch)({path:"/wc/v3/payments/deposits",method:"POST",data:{type:"instant",currency:e}});yield Zn(t),yield(0,ln.dispatch)(yt).invalidateResolutionForStoreSelector("getDeposits"),yield(0,ln.dispatch)(yt).invalidateResolutionForStoreSelector("getAllDepositsOverviews"),yield(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.sprintf)((0,V.__)("Instant payout for %s in transit.","woocommerce-payments"),jn(t.amount)),{actions:[{label:(0,V.__)("View details","woocommerce-payments"),url:Et({page:"wc-admin",path:"/payments/payouts/details",id:t.id})}]})}catch{yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error creating instant payout.","woocommerce-payments"))}finally{yield(0,ln.dispatch)(yt).finishResolution("getInstantDeposit",[e])}}function*Jn(e){if(/\W/.test(e))return;const t=(0,Q.addQueryArgs)(`${_t}/deposits/${e}`);try{const e=yield(0,mn.apiFetch)({path:t});yield $n(e)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving payout.","woocommerce-payments"))}}function*Xn(){const e=(0,Q.addQueryArgs)(`${_t}/deposits/overview-all`);try{const t=yield(0,mn.apiFetch)({path:e});yield Vn(t)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving all payouts' overviews.","woocommerce-payments")),yield Wn()}}const eo=e=>({user_email:e.userEmail,match:e.match,store_currency_is:e.storeCurrencyIs,date_before:Ct(e.dateBefore,!0),date_after:Ct(e.dateAfter),date_between:e.dateBetween&&[Ct(e.dateBetween[0]),Ct(e.dateBetween[1],!0)],status_is:e.statusIs,status_is_not:e.statusIsNot,locale:e.locale}),to=`${_t}/deposits/download`;function no(e){return(0,Q.addQueryArgs)(to,eo(e))}function*oo(e){const t=(0,Q.addQueryArgs)(`${_t}/deposits`,{page:e.paged,pagesize:e.perPage,sort:e.orderby,direction:e.order,...eo(e)});try{const n=yield(0,mn.apiFetch)({path:t})||{};yield Hn(e,n.data),yield Yn(n.total_count);for(const e in n.data)yield ln.controls.dispatch(yt,"finishResolution","getDeposit",[n.data[e].id])}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving payouts.","woocommerce-payments")),yield qn(e,null,t)}}function*ao(e){const t=(0,Q.addQueryArgs)(`${_t}/deposits/summary`,eo(e));try{const n=yield(0,mn.apiFetch)({path:t});yield Gn(e,n)}catch(t){yield Qn(e,null,t)}}const ro=()=>(0,ln.useSelect)((e=>{const{getAllDepositsOverviews:t,getAllDepositsOverviewsError:n,isResolving:o,hasFinishedResolution:a}=e(yt);return{overviews:t(),overviewError:n(),isLoading:!a("getAllDepositsOverviews")||o("getAllDepositsOverviews")}})),so=({paged:e,per_page:t,orderby:n="date",order:o="desc",store_currency_is:a,match:r,date_before:s,date_after:c,date_between:i,status_is:l,status_is_not:m})=>(0,ln.useSelect)((d=>{const{getDeposits:u,getDepositsCount:p,getDepositQueryError:_,isResolving:y}=d(yt),h={paged:Number.isNaN(parseInt(null!=e?e:"",10))?"1":e,perPage:Number.isNaN(parseInt(null!=t?t:"",10))?"25":t,orderby:n,order:o,storeCurrencyIs:a,match:r,dateBefore:s,dateAfter:c,dateBetween:i&&i.sort(((e,t)=>ut()(e).diff(ut()(t)))),statusIs:l,statusIsNot:m};return{deposits:u(h),depositsCount:p(),depositsError:_(h),isLoading:y("getDeposits",[h])}}),[e,t,n,o,a,r,s,c,JSON.stringify(i),l,m]),co={SET_TRANSACTIONS:"SET_TRANSACTIONS",SET_ERROR_FOR_TRANSACTIONS:"SET_ERROR_FOR_TRANSACTIONS",SET_TRANSACTIONS_SUMMARY:"SET_TRANSACTIONS_SUMMARY",SET_ERROR_FOR_TRANSACTIONS_SUMMARY:"SET_ERROR_FOR_TRANSACTIONS_SUMMARY",SET_FRAUD_OUTCOME_TRANSACTIONS:"SET_FRAUD_OUTCOME_TRANSACTIONS",SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS:"SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS",SET_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY:"SET_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY",SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY:"SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY"},io={summary:{},fraudProtection:{review:{summary:{}},block:{summary:{}}}},lo=e=>e&&e.transactions||{},mo=(e,t)=>{const n=un(t);return lo(e)[n]||{}},uo=(e,t)=>mo(e,t).data||[],po=(e,t)=>mo(e,t).error||{},_o=(e,t)=>{const n=un(t);return lo(e).summary[n]||{}},yo=(e,t)=>_o(e,t).data||{},ho=(e,t)=>_o(e,t).error||{},go=(e,t,n)=>{const o=un(n);return lo(e).fraudProtection?.[t]?.[o]||{}},wo=(e,t,n)=>go(e,t,n).data||[],fo=(e,t,n)=>go(e,t,n).error||{},vo=(e,t,n)=>{const o=un(n);return lo(e).fraudProtection?.[t]?.summary[o]||{}},bo=(e,t,n)=>vo(e,t,n).data||{},Eo=(e,t,n)=>vo(e,t,n).error||{};function So(e,t){return{type:co.SET_TRANSACTIONS,query:e,data:t}}function ko(e,t,n){return{type:co.SET_ERROR_FOR_TRANSACTIONS,query:e,data:t,error:n}}function No(e,t){return{type:co.SET_TRANSACTIONS_SUMMARY,query:e,data:t}}function xo(e,t,n){return{type:co.SET_ERROR_FOR_TRANSACTIONS_SUMMARY,query:e,data:t,error:n}}function Co(e,t,n){return{type:co.SET_FRAUD_OUTCOME_TRANSACTIONS,status:e,query:t,data:n}}function To(e,t,n){return{type:co.SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS,status:e,query:t,data:null,error:n}}function Oo(e,t,n){return{type:co.SET_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY,status:e,query:t,data:n}}function Io(e,t,n){return{type:co.SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY,status:e,query:t,data:null,error:n}}const Ao=e=>({user_email:e.userEmail,match:e.match,date_before:Ct(e.dateBefore,!0),date_after:Ct(e.dateAfter),date_between:e.dateBetween&&[Ct(e.dateBetween[0]),Ct(e.dateBetween[1],!0)],type_is:e.typeIs,type_is_not:e.typeIsNot,type_is_in:e.typeIsIn,source_device_is:e.sourceDeviceIs,source_device_is_not:e.sourceDeviceIsNot,channel_is:e.channelIs,channel_is_not:e.channelIsNot,customer_country_is:e.customerCountryIs,customer_country_is_not:e.customerCountryIsNot,risk_level_is:e.riskLevelIs,risk_level_is_not:e.riskLevelIsNot,store_currency_is:e.storeCurrencyIs,loan_id_is:e.loanIdIs,deposit_id:e.depositId,customer_currency_is:e.customerCurrencyIs,customer_currency_is_not:e.customerCurrencyIsNot,source_is:e.sourceIs,source_is_not:e.sourceIsNot,search:e.search,user_timezone:ut()(new Date).format("Z"),locale:e.locale});function*Ro(e){const t=(0,Q.addQueryArgs)(`${_t}/transactions`,{page:e.paged,pagesize:e.perPage,sort:e.orderby,direction:e.order,...Ao(e)});try{const n=yield(0,mn.apiFetch)({path:t});yield So(e,n.data||[])}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving transactions.","woocommerce-payments")),yield ko(e,null,t)}}const Lo=`${_t}/transactions/download`;function Do(e){return(0,Q.addQueryArgs)(Lo,Ao(e))}function*jo(e){const t=(0,Q.addQueryArgs)(`${_t}/transactions/summary`,Ao(e));try{const n=yield(0,mn.apiFetch)({path:t});yield No(e,n)}catch(t){yield xo(e,null,t)}}function*Po(e,t){const n=(0,Q.addQueryArgs)(`${_t}/transactions/fraud-outcomes`,{status:e,page:t.paged,sort:t.orderby,pagesize:t.perPage,direction:t.order,additional_status:t.additionalStatus,...Ao(t)});try{const o=yield(0,mn.apiFetch)({path:n});yield Co(e,t,o.data||[])}catch(n){if("wcpay_fraud_outcome_not_found"===n.code)return void(yield Co(e,t,[]));yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving transactions.","woocommerce-payments")),yield To(e,t,n)}}function*Mo(e,t){const n=(0,Q.addQueryArgs)(`${_t}/transactions/fraud-outcomes/summary`,{status:e,additional_status:t.additionalStatus}),o={count:0,total:0};try{const a=yield(0,mn.apiFetch)({path:n});yield Oo(e,t,a||o)}catch(n){if("wcpay_fraud_outcome_not_found"===n.code)return void(yield Oo(e,t,o));yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving on review transactions.","woocommerce-payments")),yield Io(e,t,n)}}function Fo(e,t){return(0,Q.addQueryArgs)(`${_t}/transactions/fraud-outcomes/download`,{status:e,sort:t.orderby,direction:t.order,additional_status:t.additionalStatus,...Ao(t)})}const Bo={SET_CHARGE:"SET_CHARGE",SET_ERROR_FOR_CHARGE:"SET_ERROR_FOR_CHARGE"},zo=(e,t)=>e.charges[t]&&e.charges[t].data?e.charges[t].data:{},Uo=(e,t)=>e.charges[t]&&e.charges[t].error?e.charges[t].error:{},$o=(e,t)=>zo(e,t),Vo=(e,t)=>Uo(e,t);function Wo(e,t){return{type:Bo.SET_CHARGE,id:e,data:t}}function Ho(e,t,n){return{type:Bo.SET_ERROR_FOR_CHARGE,id:e,data:t,error:n}}function*Yo(e){try{const t=yield(0,mn.apiFetch)({path:`${_t}/charges/${e}`});yield Wo(e,t)}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving transaction.","woocommerce-payments")),yield Ho(e,null,t)}}function*qo(e){try{const t=yield(0,mn.apiFetch)({path:`${_t}/charges/order/${e}`});yield Wo(e,t)}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving transaction.","woocommerce-payments")),yield Ho(e,null,t)}}const Go={SET_TIMELINE:"SET_TIMELINE",SET_ERROR_FOR_TIMELINE:"SET_ERROR_FOR_TIMELINE"},Qo=(e,t)=>e.timeline&&e.timeline[t]&&e.timeline[t].data?e.timeline[t].data:{},Zo=(e,t)=>e.timeline&&e.timeline[t]&&e.timeline[t].error?e.timeline[t].error:{};function Ko(e,t){return{id:e,type:Go.SET_TIMELINE,data:t}}function Jo(e,t){return{id:e,type:Go.SET_ERROR_FOR_TIMELINE,error:t}}function*Xo(e){try{const t=yield(0,mn.apiFetch)({path:`${_t}/timeline/${e}`});yield Ko(e,t.data)}catch(t){yield Jo(e,t)}}const ea=e=>(0,ln.useSelect)((t=>{const{getTimeline:n,getTimelineError:o,isResolving:a}=t(yt);return{timeline:n(e),timelineError:o(e),isLoading:a("getTimeline",[e])}}),[e]),ta={SET_DISPUTE:"SET_DISPUTE",SET_ERROR_FOR_DISPUTE:"SET_ERROR_FOR_DISPUTE",SET_DISPUTES:"SET_DISPUTES",SET_DISPUTES_SUMMARY:"SET_DISPUTES_SUMMARY"},na={byId:{},queries:{},summary:{},cached:{}},oa=e=>e&&e.disputes||{},aa=(e,t)=>(oa(e).byId||{})[t],ra=(e,t)=>{const n=oa(e).byId||{};return n[t]?.error},sa=(e,t)=>(oa(e).cached||{})[t],ca=(e,t)=>{const n=((e,t)=>{const n=un(t);return(oa(e).queries||{})[n]||{}})(e,t).data||[];return n.map(sa.bind(void 0,e))},ia=(e,t)=>((e,t)=>{const n=un(t);return(oa(e).summary||{})[n]||{}})(e,t).data||{};var la;!function(e){e.SET_PAYMENT_INTENT="SET_PAYMENT_INTENT",e.SET_ERROR_FOR_PAYMENT_INTENT="SET_ERROR_FOR_PAYMENT_INTENT"}(la||(la={}));const ma=la;function da(e,t){return{type:ma.SET_PAYMENT_INTENT,id:e,data:t}}function ua(e,t){return{type:ma.SET_ERROR_FOR_PAYMENT_INTENT,id:e,error:t}}function*pa(e,t){var n;const o=e.payment_intent;try{yield(0,mn.apiFetch)({path:"/wc/v3/payments/refund/",method:"post",data:{charge_id:e.id,amount:e.amount,reason:t,order_id:null===(n=null==e?void 0:e.order)||void 0===n?void 0:n.id}}),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getTimeline"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getPaymentIntent"),yield ln.controls.dispatch("core/notices","createSuccessNotice",(0,V.sprintf)((0,V.__)("Refunded payment #%s.","woocommerce-payments"),o))}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.sprintf)((0,V.__)("There has been an error refunding the payment #%s. Please try again later.","woocommerce-payments"),o))}}function*_a(e){try{const t=yield(0,mn.apiFetch)({path:`${_t}/payment_intents/${e}`});yield da(e,t)}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving transaction.","woocommerce-payments")),yield ua(e,t)}}function ya(e){return{type:ta.SET_DISPUTE,data:e}}function ha(e,t,n){return{type:ta.SET_ERROR_FOR_DISPUTE,id:e,data:t,error:n}}function ga(e,t){return{type:ta.SET_DISPUTES,query:e,data:t}}function wa(e,t){return{type:ta.SET_DISPUTES_SUMMARY,query:e,data:t}}function*fa(e){const{id:t,payment_intent:n}=e;try{yield ln.controls.dispatch(yt,"startResolution","getDispute",[t]);const e=yield(0,mn.apiFetch)({path:`${_t}/disputes/${t}/close`,method:"post"});yield ya(e),yield _a(n),yield ln.controls.dispatch(yt,"finishResolution","getDispute",[t]);const o=e.order?(0,V.sprintf)((0,V.__)("You have accepted the dispute for order #%s.","woocommerce-payments"),e.order.number):(0,V.__)("You have accepted the dispute.","woocommerce-payments");yield ln.controls.dispatch("core/notices","createSuccessNotice",o)}catch(e){const n=(0,V.__)("There has been an error accepting the dispute. Please try again later.","woocommerce-payments");yield ln.controls.dispatch("core/notices","createErrorNotice",n),yield ln.controls.dispatch(yt,"finishResolution","getDispute",[t])}}const va=window.wc.wcSettings,ba={bank_cannot_process:{display:(0,V.__)("Bank cannot process","woocommerce-payments")},check_returned:{display:(0,V.__)("Check returned","woocommerce-payments")},credit_not_processed:{display:(0,V.__)("Credit not processed","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If your customer was not refunded appropriately, you will need to accept the dispute, or resolve the issue with your customer. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The customer claims that the purchased product was returned or the transaction was otherwise canceled, but you have not yet provided a refund or credit.","woocommerce-payments")],required:[(0,V.__)("Demonstrate that you have refunded your customer through other means or that your customer is not entitled to a refund. You cannot issue a refund while a payment is being disputed. If you believe that your customer was entitled a refund that you did not provide, you can accept the dispute.","woocommerce-payments")],respond:[(0,V.__)("You should first get in touch with your customer. If you understand what their complaint is, there is a chance for you to explain the misunderstanding or to make it right. If youre able to resolve the issue with your customer, you can ask that they withdraw the dispute.","woocommerce-payments"),(0,V.__)("If the cardholder agrees to withdraw the dispute, you should still submit evidence for the dispute using the forms on the next screen. In addition to the following evidence, your submission should include correspondence with the cardholder saying they would withdraw the dispute and a written statement from their card issuer confirming that the dispute has been withdrawn.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims a credit was not processed.","woocommerce-payments")},customer_initiated:{display:(0,V.__)("Customer initiated","woocommerce-payments")},debit_not_authorized:{display:(0,V.__)("Debit not authorized","woocommerce-payments")},duplicate:{display:(0,V.__)("Duplicate","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If there were duplicate payments, you should accept the dispute. You cannot issue a refund while a payment is being disputed. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The customer claims they were charged multiple times for the same product or service.","woocommerce-payments")],required:[(0,V.__)("Demonstrate that each payment was for a separate product or service.","woocommerce-payments")],respond:[(0,V.__)("Determine if your customer was incorrectly charged multiple times.","woocommerce-payments"),(0,V.__)("If they were not, collect any and all information documenting that each payment was made separately, such as copies of receipts. If the receipts dont include the items purchased, be sure to include an itemized list. Each receipt should clearly indicate that the payments are for separate purchases of items or services. If youve been able to get in touch with the customer you should be sure to address any concerns they had in your evidence.","woocommerce-payments"),(0,V.__)("If there have been two or more separate payments, you should get in touch with your customer. If you understand what their complaint is, there is a chance for you to explain the misunderstanding or to make it right. If youre able to resolve the issue with your customer, you can ask that they withdraw the dispute.","woocommerce-payments"),(0,V.__)("Even if your customer agrees to withdraw the dispute, you must still submit appropriate evidence using the forms on the next screen. Simply saying that your customer is going to withdraw the dispute is not sufficient evidence.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims this is a duplicate transaction.","woocommerce-payments")},fraudulent:{display:(0,V.__)("Transaction unauthorized","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If you believe the payment was actually made using a stolen credit card, you will need to accept the dispute. The credit card networks place liability for accepting unauthorized transactions with you, the business.","woocommerce-payments")],summary:[(0,V.__)("This is the most common reason for a dispute, and happens when a cardholder claims that they didnt authorize the payment. This can happen if the card was lost or stolen and used to make an unauthorized transaction. It can also happen if the cardholder doesnt recognize the payment as it appears on the billing statement from their card issuer.","woocommerce-payments")],required:[(0,V.__)("Provide adequate payment and order details so that a legitimate customer recognizes it, or proves to the card issuer that their cardholder authorized the transaction.","woocommerce-payments")],respond:[(0,V.__)("Try to get in touch with your customer. Sometimes people forget about payments they make or dont recognize the way they appear on their card statement. If this is the case, ask them to contact their card issuer and let them know they no longer dispute the transaction.","woocommerce-payments"),(0,V.__)("Even if your customer agrees to withdraw the dispute, you must still submit appropriate evidence using the forms on the next screen. Simply saying that your customer is going to withdraw the dispute is not sufficient evidence.","woocommerce-payments"),(0,V.__)("It may be more efficientand provide a better customer experienceto accept an accidental dispute and charge the customer again, if appropriate. Even when a dispute is withdrawn, it usually takes approximately 75 days to be finalized. Remember, it doesnt matter to the card networks whether you win or lose a dispute; what matters is how many disputes a business receives, regardless of how many disputes are won.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims this is an unauthorized transaction.","woocommerce-payments")},general:{display:(0,V.__)("General","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments")],summary:[(0,V.__)("This is an uncategorized dispute, so you should contact the customer for additional details to find out why the payment was disputed.","woocommerce-payments")]},incorrect_account_details:{display:(0,V.__)("Incorrect account details","woocommerce-payments")},insufficient_funds:{display:(0,V.__)("Insufficient funds","woocommerce-payments")},product_not_received:{display:(0,V.__)("Product not received","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If you can not prove the customer received their product or service, you should accept the dispute. You cannot issue a refund while a payment is being disputed. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The customer claims they did not receive the products or services purchased.","woocommerce-payments")],required:[(0,V.__)("Prove that the customer received a physical product or offline service, or made use of a digital product or online service. This must have occurred prior to the date the dispute was initiated.","woocommerce-payments")],respond:[(0,V.__)("First, get in touch with your customer. Understanding why they filed the dispute will be important for helping make sure your customer gets the product and will give you critical information to prevent this from happening to others.","woocommerce-payments"),(0,V.__)("Even if your customer agrees to withdraw the dispute, you must still submit appropriate evidence using the forms on the next screen. Simply saying that your customer is going to withdraw the dispute is not sufficient evidence.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims they did not receive the product.","woocommerce-payments")},product_unacceptable:{display:(0,V.__)("Product unacceptable","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If you can not prove the customer received their product or service as described, you should accept the dispute. You cannot issue a refund while a payment is being disputed. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The product or service was received but was defective, damaged, or not as described.","woocommerce-payments")],required:[(0,V.__)("Demonstrate that the product or service was delivered as described at the time of purchase.","woocommerce-payments")],respond:[(0,V.__)("If the product or service is as described, provide specific information (invoice, contract, etc.) to refute the cardholders claims. Quality disputes are where the customer does not agree with the condition of merchandise or service received (e.g., a car repair situation or quality of a hotel room). There may be instances where you will need to obtain a neutral third-party opinion to help corroborate your claim against the cardholder. Provide as much specific information and documentation as possible to refute the cardholders claims. It is recommended that you address each point that the cardholder has made.","woocommerce-payments"),(0,V.__)("If the customer has not yet returned the product or canceled the service, provide specific information to that effect. You should double-check your incoming shipping records to verify that you have not received a return before you respond. If you have processed a credit or reversal for this transaction, provide evidence of this which includes the amount and date processed.","woocommerce-payments"),(0,V.__)("For products that have been repaired or replaced, provide evidence that the cardholder agreed to a repair or replacement, it has been received by the customer, and the repair or replacement has not since been disputed.","woocommerce-payments"),(0,V.__)("If your customer made no attempt to return the product or cancel the service, or if you provided a replacement product or service, make sure to note that as well.","woocommerce-payments"),(0,V.__)("If the customer withdraws their dispute you should still submit evidence using the forms on the next screen. Be sure to provide a letter or email from the cardholder stating that they are no longer in dispute.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims the product was unacceptable.","woocommerce-payments")},subscription_canceled:{display:(0,V.__)("Subscription canceled","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If you can not prove the customers subscription was canceled, and or they did not follow your cancellation policy, you should accept the dispute. You cannot issue a refund while a payment is being disputed. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The customer claims that you continued to charge them after a subscription was canceled.","woocommerce-payments")],required:[(0,V.__)("Prove that the subscription was still active and that the customer was aware of, and did not follow, your cancellation procedure.","woocommerce-payments")],respond:[(0,V.__)("First, get in touch with your customer. If you understand what they believe happened, there is a chance for you to explain the misunderstanding or to make it right. ","woocommerce-payments"),(0,V.__)("Even if your customer agrees to withdraw the dispute, you must still submit appropriate evidence using the forms on the next screen. Simply saying that your customer is going to withdraw the dispute is not sufficient evidence.","woocommerce-payments"),(0,V.__)("Otherwise, use the forms on the next screen to submit evidence that the subscription was still active and that the customer was aware of, and did not follow, your cancellation procedure.","woocommerce-payments")],claim:(0,V.__)("The cardholder claims a subscription was canceled.","woocommerce-payments")},unrecognized:{display:(0,V.__)("Unrecognized","woocommerce-payments"),overview:[(0,V.__)("If you believe the dispute is invalid, you can challenge it by submitting the appropriate evidence using the response forms on the next screen.","woocommerce-payments"),(0,V.__)("If you can not prove the customers subscription was canceled, and or they did not follow your cancellation policy, you should accept the dispute. You cannot issue a refund while a payment is being disputed. The credit card networks place liability for accepting disputed payments with you, the business.","woocommerce-payments")],summary:[(0,V.__)("The customer doesnt recognize the payment appearing on their card statement.","woocommerce-payments")],required:[(0,V.__)("Get your customer to withdraw the dispute by helping them identify the payment. Otherwise, challenge the dispute with appropriate evidence that proves the purchase was legitimate. ","woocommerce-payments")],respond:[(0,V.__)("First, try to get in touch with your customer. Sometimes people forget about payments they make or dont recognize the way they appear on their card statement. If this is the case, ask them to contact their card issuer and let them know they no longer dispute the transaction. Even if your customer agrees to withdraw the dispute, you must still submit appropriate evidence. Simply saying that your customer is going to withdraw the dispute is not sufficient evidence.","woocommerce-payments"),(0,V.__)("It may be more efficientand provide a better customer experienceto accept an accidental dispute and charge the customer again, if appropriate. Even when a dispute is withdrawn, it usually takes approximately 75 days to be finalized. Remember, it doesnt matter to the card networks whether you win or lose a dispute; what matters is how many disputes a business receives, regardless of how many disputes are won.","woocommerce-payments")]},noncompliant:{display:(0,V.__)("Non-compliant","woocommerce-payments"),claim:(0,V.__)("Your customers bank claims this payment violates Visas rules.","woocommerce-payments"),summary:[(0,V.__)("The customers bank claims this transaction doesnt conform to Visas network rules.","woocommerce-payments")]}},Ea={warning_needs_response:(0,V.__)("Inquiry: Response needed","woocommerce-payments"),warning_under_review:(0,V.__)("Inquiry: Under review","woocommerce-payments"),warning_closed:(0,V.__)("Inquiry: Closed","woocommerce-payments"),needs_response:(0,V.__)("Response needed","woocommerce-payments"),under_review:(0,V.__)("Under review","woocommerce-payments"),charge_refunded:(0,V.__)("Charge refunded","woocommerce-payments"),won:(0,V.__)("Won","woocommerce-payments"),lost:(0,V.__)("Lost","woocommerce-payments")},Sa=Object.entries(Ea).map((([e,t])=>({label:t,value:e}))).filter((function(e){return null!=e})),ka=["needs_response","warning_needs_response"],Na=[{label:(0,V.__)("Dispute currency","woocommerce-payments"),param:"store_currency_is",staticParams:["paged","per_page","orderby","order","search","filter","status_is","status_is","date_before","date_after","date_between"],showFilters:()=>!1,filters:[{label:(0,V.__)("All currencies","woocommerce-payments"),value:"---"}],defaultValue:"---"},{label:(0,V.__)("Show","woocommerce-payments"),param:"filter",staticParams:["paged","per_page","orderby","order","search","store_currency_is"],showFilters:()=>!0,filters:[{label:(0,V.__)("Needs response","woocommerce-payments"),value:"awaiting_response"},{label:(0,V.__)("All disputes","woocommerce-payments"),value:"all"},{label:(0,V.__)("Advanced filters","woocommerce-payments"),value:"advanced"}]}],xa=(0,va.getSetting)("wcVersion"),Ca=parseFloat(xa),Ta={title:Ca<7.8?(0,V.__)("Disputes match {{select /}} filters","woocommerce-payments"):(0,V.__)("Disputes match <select /> filters","woocommerce-payments"),filters:{date:{labels:{add:(0,V.__)("Disputed on date","woocommerce-payments"),remove:(0,V.__)("Remove dispute date filter","woocommerce-payments"),rule:(0,V.__)("Select a dispute date filter match","woocommerce-payments"),title:Ca<7.8?(0,V.__)("{{title}}Date{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Date</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a dispute date","woocommerce-payments")},rules:[{value:"before",label:(0,V.__)("Before","woocommerce-payments")},{value:"after",label:(0,V.__)("After","woocommerce-payments")},{value:"between",label:(0,V.__)("Between","woocommerce-payments")}],input:{component:"Date"}},status:{labels:{add:(0,V.__)("Status","woocommerce-payments"),remove:(0,V.__)("Remove dispute status filter","woocommerce-payments"),rule:(0,V.__)("Select a dispute status filter match","woocommerce-payments"),title:Ca<7.8?(0,V.__)("{{title}}Status{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Status</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a dispute status","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","dispute status","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","dispute status","woocommerce-payments")}],input:{component:"SelectControl",options:Sa}}}},Oa=e=>({user_email:e.userEmail,match:e.match,store_currency_is:e.storeCurrencyIs,date_before:Ct(e.dateBefore,!0),date_after:Ct(e.dateAfter),date_between:e.dateBetween&&[Ct(e.dateBetween[0]),Ct(e.dateBetween[1],!0)],search:"awaiting_response"===e.filter?ka:e.search,status_is:e.statusIs,status_is_not:e.statusIsNot,locale:e.locale}),Ia=`${_t}/disputes/download`;function Aa(e){return(0,Q.addQueryArgs)(Ia,Oa(e))}function*Ra(e){const t=(0,Q.addQueryArgs)(`${_t}/disputes/${e}`);try{const e=yield(0,mn.apiFetch)({path:t});yield ya(e)}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving dispute.","woocommerce-payments")),yield ha(e,void 0,t)}}function*La(e){const t=(0,Q.addQueryArgs)(`${_t}/disputes`,{page:e.paged,pagesize:e.perPage,sort:(0,lt.snakeCase)(e.orderBy),direction:e.order,...Oa(e)});try{const n=yield(0,mn.apiFetch)({path:t})||{};yield ga(e,n.data)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving disputes.","woocommerce-payments"))}}function*Da(e){const t=(0,Q.addQueryArgs)(`${_t}/disputes/summary`,{page:e.paged,pagesize:e.perPage,...Oa(e)});try{const n=yield(0,mn.apiFetch)({path:t});yield wa(e,n)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving the summary of disputes.","woocommerce-payments"))}}const ja=({paged:e,per_page:t,store_currency_is:n,match:o,date_before:a,date_after:r,date_between:s,filter:c,status_is:i,status_is_not:l,orderby:m,order:d})=>(0,ln.useSelect)((u=>{const{getDisputes:p,isResolving:_}=u(yt),y={paged:Number.isNaN(parseInt(null!=e?e:"",10))?"1":e,perPage:Number.isNaN(parseInt(null!=t?t:"",10))?"25":t,storeCurrencyIs:n,match:o,dateBefore:a,dateAfter:r,dateBetween:s&&s.sort(((e,t)=>ut()(e).diff(ut()(t)))),filter:c,statusIs:i,statusIsNot:l,orderBy:m||"created",order:d||"desc"};return{disputes:p(y),isLoading:_("getDisputes",[y])}}),[e,t,n,o,a,r,JSON.stringify(s),c,i,l,m,d]),Pa={SET_SETTINGS:"SET_SETTINGS",SET_SETTINGS_VALUES:"SET_SETTINGS_VALUES",SET_IS_SAVING_SETTINGS:"SET_IS_SAVING_SETTINGS",SET_SELECTED_PAYMENT_METHOD:"SET_SELECTED_PAYMENT_METHOD",SET_UNSELECTED_PAYMENT_METHOD:"SET_UNSELECTED_PAYMENT_METHOD"},Ma={isDirty:!1,isSaving:!1,savingError:null,data:{}},Fa="basic",Ba="advanced",za="block",Ua="review",$a="avs_verification",Va="address_mismatch",Wa="international_ip_address",Ha="ip_address_mismatch",Ya="order_items_threshold",qa="purchase_price_threshold",Ga="item_count",Qa="order_total",Za="equals",Ka="greater_than",Ja="less_than",Xa={},er=[],tr=e=>e&&e.settings||Xa,nr=e=>tr(e).data||Xa,or=e=>nr(e).duplicated_payment_method_ids||Xa,ar=e=>nr(e).is_wcpay_enabled||!1,rr=e=>nr(e).enabled_payment_method_ids||er,sr=e=>nr(e).available_payment_method_ids||er,cr=e=>nr(e).payment_method_statuses||Xa,ir=e=>tr(e).isSaving||!1,lr=e=>tr(e).isDirty||!1,mr=e=>nr(e).account_statement_descriptor||"",dr=e=>nr(e).account_statement_descriptor_kanji||"",ur=e=>nr(e).account_statement_descriptor_kana||"",pr=e=>nr(e).account_business_support_email||"",_r=e=>nr(e).account_business_support_phone||"",yr=e=>nr(e).account_domestic_currency||"",hr=e=>nr(e).deposit_schedule_interval||"",gr=e=>nr(e).deposit_schedule_weekly_anchor||"",wr=e=>nr(e).deposit_schedule_monthly_anchor||"",fr=e=>nr(e).deposit_delay_days||"7",vr=e=>nr(e).deposit_completed_waiting_period||!1,br=e=>nr(e).deposit_status||"",Er=e=>nr(e).deposit_restrictions||"",Sr=e=>nr(e).is_manual_capture_enabled||!1,kr=e=>nr(e).is_test_mode_enabled||!1,Nr=e=>nr(e).is_test_mode_onboarding||!1,xr=e=>nr(e).is_dev_mode_enabled||!1,Cr=e=>nr(e).is_payment_request_enabled||!1,Tr=e=>nr(e).is_apple_google_pay_in_payment_methods_options_enabled||!1,Or=e=>nr(e).is_debug_log_enabled||!1,Ir=e=>nr(e).is_multi_currency_enabled||!1,Ar=e=>nr(e).payment_request_enabled_locations||er,Rr=e=>nr(e).payment_request_button_type||"",Lr=e=>nr(e).payment_request_button_size||"",Dr=e=>nr(e).payment_request_button_theme||"",jr=e=>{const t=nr(e)?.payment_request_button_border_radius;return 0===t||"0"===t||t?t:"undefined"==typeof wcpaySettings?4:parseInt(window?.wcpaySettings?.defaultExpressCheckoutBorderRadius||4,10)},Pr=e=>nr(e).is_saved_cards_enabled||!1,Mr=e=>tr(e).savingError,Fr=e=>nr(e).is_card_present_eligible||!1,Br=e=>nr(e).is_wcpay_subscriptions_enabled||!1,zr=e=>nr(e).is_wcpay_subscriptions_eligible||!1,Ur=e=>nr(e).is_subscriptions_plugin_active||!1,$r=e=>nr(e).is_woopay_enabled||!1,Vr=e=>nr(e).is_woopay_global_theme_support_enabled||!1,Wr=e=>nr(e).woopay_custom_message||"",Hr=e=>nr(e).woopay_store_logo||"",Yr=e=>nr(e).woopay_enabled_locations||er,qr=e=>nr(e).current_protection_level||Fa,Gr=e=>nr(e).advanced_fraud_protection_settings||er,Qr=e=>nr(e).show_woopay_incompatibility_notice||!1,Zr=e=>nr(e).is_stripe_billing_enabled||!1,Kr=e=>nr(e).is_migrating_stripe_billing||!1,Jr=e=>nr(e).stripe_billing_subscription_count||0,Xr=e=>nr(e).stripe_billing_migrated_count||0;function es(e){return{type:Pa.SET_SETTINGS_VALUES,payload:e}}function ts(e){return es({is_saved_cards_enabled:e})}function ns(e){return es({is_card_present_eligible:e})}function os(e){return es({payment_request_button_type:e})}function as(e){return es({payment_request_button_size:e})}function rs(e){return es({payment_request_button_theme:e})}function ss(e){return es({payment_request_button_border_radius:e})}function cs(e){return{type:Pa.SET_SETTINGS,data:e}}function is(e){return es({is_wcpay_enabled:e})}function ls(e){return es({is_payment_request_enabled:e})}function ms(e){return es({is_apple_google_pay_in_payment_methods_options_enabled:e})}function ds(e){return es({enabled_payment_method_ids:[...e]})}function us(e,t){return{type:Pa.SET_IS_SAVING_SETTINGS,isSaving:e,error:t}}function ps(e){return{type:Pa.SET_SELECTED_PAYMENT_METHOD,id:e}}function _s(e){return{type:Pa.SET_UNSELECTED_PAYMENT_METHOD,id:e}}function ys(e){return es({is_manual_capture_enabled:e})}function hs(e){return es({is_test_mode_enabled:e})}function gs(e){return es({is_debug_log_enabled:e})}function ws(e){return es({is_multi_currency_enabled:e})}function fs(e){return es({is_wcpay_subscriptions_enabled:e})}function vs(e){return es({account_statement_descriptor:e})}function bs(e){return es({account_statement_descriptor_kanji:e})}function Es(e){return es({account_statement_descriptor_kana:e})}function Ss(e){return es({account_business_support_email:e})}function ks(e){return es({account_business_support_phone:e})}function Ns(e){return es({deposit_schedule_interval:e})}function xs(e){return es({deposit_schedule_weekly_anchor:e})}function Cs(e){return es({deposit_schedule_monthly_anchor:""===e?null:parseInt(e,10)})}function*Ts(){let e=null;try{const e=(0,ln.select)(yt).getSettings();yield us(!0,null);const t=yield(0,mn.apiFetch)({path:`${_t}/settings`,method:"post",data:e});yield es({payment_method_statuses:t.data.payment_method_statuses}),yield(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Settings saved.","woocommerce-payments"))}catch(t){e=t,yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error saving settings.","woocommerce-payments")),e.server_error&&(yield(0,ln.dispatch)("core/notices").createErrorNotice(e.server_error))}finally{yield us(!1,e)}return null===e}function Os(e){return es({payment_request_enabled_locations:[...e]})}function Is(e){return es({is_woopay_enabled:e})}function As(e){return es({is_woopay_global_theme_support_enabled:e})}function Rs(e){return es({woopay_custom_message:e})}function Ls(e){return es({woopay_store_logo:e})}function Ds(e){return es({woopay_enabled_locations:[...e]})}function js(e){return es({current_protection_level:e})}function Ps(e){return es({advanced_fraud_protection_settings:e})}function Ms(e){return es({is_stripe_billing_enabled:e})}function*Fs(){try{yield(0,ln.dispatch)(yt).startResolution("scheduleStripeBillingMigration"),yield(0,mn.apiFetch)({path:`${_t}/settings/schedule-stripe-billing-migration`,method:"post"})}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error starting the Stripe Billing migration.","woocommerce-payments"))}yield(0,ln.dispatch)(yt).finishResolution("scheduleStripeBillingMigration")}function Bs(e,t){G()({path:`${_t}/settings/${e}`,method:"post",data:{value:t}}).catch((()=>{(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error saving option","woocommerce-payments"))}))}function*zs(){const e=`${_t}/settings`;try{const t=yield(0,mn.apiFetch)({path:e});yield cs(t)}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error retrieving settings.","woocommerce-payments"))}}const Us=()=>(0,ln.useSelect)((e=>e(yt).getSettings())),$s=()=>{const{saveSettings:e}=(0,ln.useDispatch)(yt),t=(0,ln.useSelect)((e=>e(yt).isSavingSettings())),n=(0,ln.useSelect)((e=>e(yt).isDirty()));return{isLoading:(0,ln.useSelect)((e=>{e(yt).getSettings();const t=e(yt).isResolving("getSettings"),n=e(yt).hasFinishedResolution("getSettings");return t||!n})),saveSettings:e,isSaving:t,isDirty:n}},Vs={SET_CARD_READER_STATS:"SET_CARD_READER_STATS",SET_ERROR_FOR_CARD_READER_STATS:"SET_ERROR_FOR_CARD_READER_STATS",SET_READERS:"SET_READERS",SET_ERROR_FOR_CARD_READERS:"SET_ERROR_FOR_CARD_READERS"},Ws=(e,t)=>e.readers[t]&&e.readers[t].data?e.readers[t].data:{},Hs=(e,t)=>e.readers[t]&&e.readers[t].error?e.readers[t].error:{},Ys=e=>e.readers&&e.readers.list?e.readers.list:{};function qs(e,t){return{type:Vs.SET_CARD_READER_STATS,id:e,data:t}}function Gs(e,t){return{type:Vs.SET_READERS,query:e,data:t}}function Qs(e,t,n){return{type:Vs.SET_CARD_ERROR_FOR_READER_STATS,id:e,data:t,error:n}}function Zs(e,t){return{type:Vs.SET_CARD_ERROR_FOR_READERS,data:e,error:t}}function*Ks(e,t){try{const n=yield(0,mn.apiFetch)({path:`${_t}/readers/charges/${t}`});yield qs(e,n)}catch(t){yield Qs(e,null,t)}}function*Js(e){const t=(0,Q.addQueryArgs)(`${_t}/readers`,{limit:e.limit});try{const n=yield(0,mn.apiFetch)({path:t})||{};yield Gs(e,n)}catch(e){yield Zs(null,e)}}var Xs;!function(e){e.SET_ACTIVE_LOAN_SUMMARY="SET_ACTIVE_LOAN_SUMMARY",e.SET_ERROR_FOR_ACTIVE_LOAN_SUMMARY="SET_ERROR_FOR_ACTIVE_LOAN_SUMMARY",e.SET_LOANS="SET_LOANS",e.SET_ERROR_FOR_LOANS="SET_ERROR_FOR_LOANS"}(Xs||(Xs={}));const ec=Xs,tc={},nc=e=>e&&e.capital||{},oc=e=>nc(e).summary,ac=e=>nc(e).summaryError,rc=e=>nc(e).loans||[],sc=e=>nc(e).loansError;function cc(e){return{type:ec.SET_ACTIVE_LOAN_SUMMARY,data:e}}function ic(e){return{type:ec.SET_ERROR_FOR_ACTIVE_LOAN_SUMMARY,error:e}}function lc(e){return{type:ec.SET_LOANS,data:e.data}}function mc(e){return{type:ec.SET_ERROR_FOR_LOANS,error:e}}function*dc(){const e=`${_t}/capital/active_loan_summary`;try{const t=yield(0,mn.apiFetch)({path:e});yield cc(t)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving the active loan summary.","woocommerce-payments")),yield ic(e)}}function*uc(){const e=`${_t}/capital/loans`;try{const t=yield(0,mn.apiFetch)({path:e});yield lc(t)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving the active loan summary.","woocommerce-payments")),yield mc(e)}}const pc={SET_DOCUMENTS:"SET_DOCUMENTS",SET_ERROR_FOR_DOCUMENTS:"SET_ERROR_FOR_DOCUMENTS",SET_DOCUMENTS_SUMMARY:"SET_DOCUMENTS_SUMMARY",SET_ERROR_FOR_DOCUMENTS_SUMMARY:"SET_ERROR_FOR_DOCUMENTS_SUMMARY"},_c={summary:{}},yc=e=>e&&e.documents||{},hc=(e,t)=>{const n=un(t);return yc(e)[n]||{}},gc=(e,t)=>hc(e,t).data||[],fc=(e,t)=>hc(e,t).error||{},vc=(e,t)=>{const n=un(t);return yc(e).summary[n]||{}},bc=(e,t)=>vc(e,t).data||{},Ec=(e,t)=>vc(e,t).error||{};function Sc(e,t){return{type:pc.SET_DOCUMENTS,query:e,data:t}}function kc(e,t,n){return{type:pc.SET_ERROR_FOR_DOCUMENTS,query:e,data:t,error:n}}function Nc(e,t){return{type:pc.SET_DOCUMENTS_SUMMARY,query:e,data:t}}function xc(e,t,n){return{type:pc.SET_ERROR_FOR_DOCUMENTS_SUMMARY,query:e,data:t,error:n}}const Cc=e=>({user_email:e.userEmail,match:e.match,date_before:Ct(e.dateBefore,!0),date_after:Ct(e.dateAfter),date_between:e.dateBetween&&[Ct(e.dateBetween[0]),Ct(e.dateBetween[1],!0)],type_is:e.typeIs,type_is_not:e.typeIsNot});function*Tc(e){const t=(0,Q.addQueryArgs)(`${_t}/documents`,{page:e.paged,pagesize:e.perPage,sort:e.orderby,direction:e.order,...Cc(e)});try{const n=yield(0,mn.apiFetch)({path:t});yield Sc(e,n.data||[])}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving documents.","woocommerce-payments")),yield kc(e,null,t)}}function*Oc(e){const t=(0,Q.addQueryArgs)(`${_t}/documents/summary`,Cc(e));try{const n=yield(0,mn.apiFetch)({path:t});yield Nc(e,n)}catch(t){yield xc(e,null,t)}}const Ic={},Ac=({paymentIntents:e},t)=>{const n=null==e?void 0:e[t];return(null==n?void 0:n.data)||{}},Rc=({paymentIntents:e},t)=>{const n=null==e?void 0:e[t];return(null==n?void 0:n.error)||{}},Lc=e=>-1!==e.indexOf("ch_")||-1!==e.indexOf("py_"),Dc=e=>{const{data:t,error:n,isLoading:o}=(0,ln.useSelect)((t=>{const n=t(yt);if(Lc(e))return((e,t)=>{const{getCharge:n,isResolving:o,getChargeError:a,hasFinishedResolution:r}=t;return{data:n(e),error:a(e),isLoading:o("getCharge",[e])||!r("getCharge",[e])}})(e,n);const{getPaymentIntent:o,getPaymentIntentError:a,isResolving:r,hasFinishedResolution:s}=n;return{data:o(e)||{},error:a(e),isLoading:r("getPaymentIntent",[e])||!s("getPaymentIntent",[e])}}),[e]),{refundCharge:a}=(0,ln.useDispatch)(yt);return{data:t,error:n,isLoading:o,doRefund:(e,t)=>a(e,t)}},jc={SET_AUTHORIZATIONS:"SET_AUTHORIZATIONS",SET_AUTHORIZATION:"SET_AUTHORIZATION",SET_ERROR_FOR_AUTHORIZATIONS:"SET_ERROR_FOR_AUTHORIZATIONS",SET_AUTHORIZATIONS_SUMMARY:"SET_AUTHORIZATIONS_SUMMARY",SET_ERROR_FOR_AUTHORIZATIONS_SUMMARY:"SET_ERROR_FOR_AUTHORIZATIONS_SUMMARY",SET_IS_REQUESTING_AUTHORIZATION:"SET_IS_REQUESTING_AUTHORIZATION"},Pc={summary:{},byId:{},isRequesting:!1},Mc=e=>e&&e.authorizations||{},Fc=(e,t)=>{const n=un(t);return Mc(e)[n]||{}},Bc=(e,t)=>Fc(e,t).data||[],zc=(e,t)=>(Mc(e).byId||{})[t],Uc=(e,t)=>Fc(e,t).error||{},$c=(e,t)=>{const n=un(t);return Mc(e).summary[n]||{}},Vc=(e,t)=>$c(e,t).data||{},Wc=(e,t)=>$c(e,t).error||{},Hc=e=>Mc(e).isRequesting,Yc=e=>{var t;const n={wcpay_missing_order:(0,V.__)("The order could not be found.","woocommerce-payments"),wcpay_refunded_order_uncapturable:(0,V.__)("Payment cannot be processed for partially or fully refunded orders.","woocommerce-payments"),wcpay_intent_order_mismatch:(0,V.__)("The payment cannot be processed due to a mismatch with order details.","woocommerce-payments"),wcpay_payment_uncapturable:(0,V.__)("This payment cannot be processed in its current state.","woocommerce-payments"),wcpay_capture_error:e=>{var t;return"amount_too_small"===(null===(t=e.data)||void 0===t?void 0:t.error_type)?(e=>{var t,n,o,a;if(!(null===(n=null===(t=e.data)||void 0===t?void 0:t.extra_details)||void 0===n?void 0:n.minimum_amount)||!(null===(a=null===(o=e.data)||void 0===o?void 0:o.extra_details)||void 0===a?void 0:a.minimum_amount_currency))return(0,V.__)("The payment amount is too small to be processed.","woocommerce-payments");const r=e.data.extra_details.minimum_amount_currency,s=jn(e.data.extra_details.minimum_amount,r);return(0,V.sprintf)((0,V.__)("The minimum amount that can be processed is %1$s %2$s.","woocommerce-payments"),s,r.toUpperCase())})(e):(0,V.__)("The payment capture failed to complete.","woocommerce-payments")},wcpay_cancel_error:(0,V.__)("The payment cancellation failed to complete.","woocommerce-payments"),wcpay_server_error:(0,V.__)("An unexpected error occurred. Please try again later.","woocommerce-payments")},o=n[null!==(t=e.code)&&void 0!==t?t:""];return"function"==typeof o?o(e):null!=o?o:(0,V.__)("Unable to process the payment. Please try again later.","woocommerce-payments")};function qc(e,t){return{type:jc.SET_AUTHORIZATIONS,data:t,query:e}}function Gc(e,t){return{type:jc.SET_ERROR_FOR_AUTHORIZATIONS,query:e,error:t}}function Qc(e){return{type:jc.SET_AUTHORIZATION,data:e}}function Zc(e,t){return{type:jc.SET_AUTHORIZATIONS_SUMMARY,data:t,query:e}}function Kc(e){return{type:jc.SET_IS_REQUESTING_AUTHORIZATION,data:e}}function*Jc(e,t){try{yield ln.controls.dispatch(yt,"startResolution","getAuthorization",[e]),yield ln.controls.dispatch(yt,"setIsRequestingAuthorization",!0);const n=yield(0,mn.apiFetch)({path:`/wc/v3/payments/orders/${t}/capture_authorization`,method:"post",data:{payment_intent_id:e}}),o={payment_intent_id:n.id,captured:"succeeded"===n.status};yield Qc(o),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getAuthorizations"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getAuthorizationsSummary"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getFraudOutcomeTransactions"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getFraudOutcomeTransactionsSummary"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getTimeline"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getPaymentIntent"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getTransactions"),yield ln.controls.dispatch("core/notices","createSuccessNotice",(0,V.sprintf)((0,V.__)("Payment for order #%s captured successfully.","woocommerce-payments"),t))}catch(e){const n=(0,V.sprintf)((0,V.__)("There has been an error capturing the payment for order #%s.","woocommerce-payments"),t),o=Yc(e);yield ln.controls.dispatch("core/notices","createErrorNotice",`${n} ${o}`)}finally{yield ln.controls.dispatch(yt,"finishResolution","getAuthorization",[e]),yield ln.controls.dispatch(yt,"setIsRequestingAuthorization",!1)}}function*Xc(e,t){try{yield ln.controls.dispatch(yt,"startResolution","getAuthorization",[e]),yield ln.controls.dispatch(yt,"setIsRequestingAuthorization",!0);const n=yield(0,mn.apiFetch)({path:`/wc/v3/payments/orders/${t}/cancel_authorization`,method:"post",data:{payment_intent_id:e}}),o={payment_intent_id:n.id,captured:"succeeded"===n.status};yield Qc(o),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getAuthorizations"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getAuthorizationsSummary"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getFraudOutcomeTransactions"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getFraudOutcomeTransactionsSummary"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getTimeline"),yield ln.controls.dispatch(yt,"invalidateResolutionForStoreSelector","getPaymentIntent"),yield ln.controls.dispatch("core/notices","createSuccessNotice",(0,V.sprintf)((0,V.__)("Payment for order #%s canceled successfully.","woocommerce-payments"),t))}catch(e){const n=(0,V.sprintf)((0,V.__)("There has been an error canceling the payment for order #%s.","woocommerce-payments"),t),o=Yc(e);yield ln.controls.dispatch("core/notices","createErrorNotice",`${n} ${o}`)}finally{yield ln.controls.dispatch(yt,"finishResolution","getAuthorization",[e]),yield ln.controls.dispatch(yt,"setIsRequestingAuthorization",!1)}}function ei(e,t){return{type:jc.SET_ERROR_FOR_AUTHORIZATIONS_SUMMARY,query:e,error:t}}function*ti(e){var t;let{paged:n=1,per_page:o=25,orderby:a="created",order:r="asc"}=e;"capture_by"===a&&(a="created");const s=(0,Q.addQueryArgs)(`${_t}/authorizations`,{page:n,pagesize:o,sort:a,direction:r});try{const n=yield(0,mn.apiFetch)({path:s});yield qc(e,null!==(t=n.data)&&void 0!==t?t:[])}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving uncaptured transactions.","woocommerce-payments")),yield Gc(e,t)}}function*ni(e){try{if(e){const t=yield(0,mn.apiFetch)({path:`${_t}/authorizations/${e}`}),{is_captured:n,payment_intent_id:o,created:a}=t;yield Qc({payment_intent_id:o,captured:n,created:a})}}catch(e){"authorization_missing"!==e.code&&(yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving authorization.","woocommerce-payments")))}}function*oi(e){const t=(0,Q.addQueryArgs)(`${_t}/authorizations/summary`,{pagesize:e.per_page,sort:e.orderby,direction:e.order,page:e.paged});try{const n=yield(0,mn.apiFetch)({path:t});yield Zc(e,null!=n?n:[])}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving uncaptured transactions.","woocommerce-payments")),yield ei(e,t)}}const ai=e=>(0,ln.useSelect)((t=>{const{getAuthorizationsSummary:n,getAuthorizationsSummaryError:o,isResolving:a}=t(yt);return{authorizationsSummary:n(e),authorizationsSummaryError:o(e),isLoading:a("getAuthorizationsSummary",[e])}})),ri=(e,t,n=!0)=>{const{authorization:o,isRequesting:a,isLoading:r}=(0,ln.useSelect)((t=>{const{getAuthorization:o,getIsRequesting:a,isResolving:r}=t(yt);return{authorization:n?o(e):null,isLoading:r("getAuthorization",[e]),isRequesting:a()}})),{submitCaptureAuthorization:s,submitCancelAuthorization:c}=(0,ln.useDispatch)(yt);return{authorization:o,isLoading:r,isRequesting:a,doCaptureAuthorization:()=>s(e,t),doCancelAuthorization:()=>c(e,t)}};var si;!function(e){e.SET_FILE="SET_FILE",e.SET_ERROR_FOR_FILES="SET_ERROR_FOR_FILES"}(si||(si={}));const ci=si,ii={},li=({files:e},t)=>{const n=null==e?void 0:e[t];return(null==n?void 0:n.data)||{}},mi=({files:e},t)=>{const n=null==e?void 0:e[t];return(null==n?void 0:n.error)||{}};function di(e,t){return{type:ci.SET_FILE,id:e,data:t}}function ui(e,t){return{type:ci.SET_ERROR_FOR_FILES,id:e,error:t}}function*pi(e){try{const t=yield(0,mn.apiFetch)({path:`${_t}/file/${e}/details`});yield di(e,t)}catch(t){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving file.","woocommerce-payments")),yield ui(e,t)}}var _i;!function(e){e.SET_PM_PROMOTIONS="SET_PM_PROMOTIONS",e.SET_ERROR_FOR_PM_PROMOTIONS="SET_ERROR_FOR_PM_PROMOTIONS"}(_i||(_i={}));const yi={pmPromotions:void 0,pmPromotionsError:void 0},hi=e=>{var t,n;return null!==(n=null===(t=e.pmPromotions)||void 0===t?void 0:t.pmPromotions)&&void 0!==n?n:[]},gi=e=>{var t;return null===(t=e.pmPromotions)||void 0===t?void 0:t.pmPromotionsError};function wi(e){return function(e){return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof e.code}(e)?e:{code:"unknown_error"}}function fi(e){return{type:_i.SET_PM_PROMOTIONS,data:e}}function vi(e){return{type:_i.SET_ERROR_FOR_PM_PROMOTIONS,error:e}}function*bi(e){const t=`${_t}/pm-promotions/${e}/activate`;try{yield(0,mn.apiFetch)({path:t,method:"POST"}),yield ln.controls.dispatch("core/notices","createSuccessNotice",(0,V.__)("Promotion activated successfully!","woocommerce-payments")),yield ln.controls.dispatch("wc/payments","invalidateResolution","getPmPromotions",[])}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error activating promotion. Please try again.","woocommerce-payments")),yield ln.controls.dispatch("wc/payments","updateErrorForPmPromotions",wi(e))}}function*Ei(e){const t=`${_t}/pm-promotions/${e}/dismiss`;try{yield(0,mn.apiFetch)({path:t,method:"POST"}),yield ln.controls.dispatch("core/notices","createSuccessNotice",(0,V.__)("Promotion dismissed.","woocommerce-payments")),yield ln.controls.dispatch("wc/payments","invalidateResolution","getPmPromotions",[])}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error dismissing promotion. Please try again.","woocommerce-payments")),yield ln.controls.dispatch("wc/payments","updateErrorForPmPromotions",wi(e))}}function Si(e){if("object"!=typeof e||null===e)return!1;const t=e;return"string"==typeof t.id&&"string"==typeof t.promo_id&&"string"==typeof t.payment_method&&"string"==typeof t.payment_method_title&&"string"==typeof t.type&&("spotlight"===t.type||"badge"===t.type)&&"string"==typeof t.title&&"string"==typeof t.description&&"string"==typeof t.cta_label&&"string"==typeof t.tc_url&&"string"==typeof t.tc_label}function*ki(){const e=`${_t}/pm-promotions`;try{const t=yield(0,mn.apiFetch)({path:e});if(n=t,!Array.isArray(n)||!n.every(Si))throw new Error("Invalid promotions data received from API");yield ln.controls.dispatch("wc/payments","updatePmPromotions",t)}catch(e){yield ln.controls.dispatch("core/notices","createErrorNotice",(0,V.__)("Error retrieving promotions. Please try again later.","woocommerce-payments")),yield ln.controls.dispatch("wc/payments","updateErrorForPmPromotions",(t=e,function(e){return"object"==typeof e&&null!==e&&"code"in e}(t)?t:{code:"unknown_error"}))}var t,n}(0,ln.registerStore)(yt,{reducer:(0,ln.combineReducers)({deposits:(e=pn,{type:t,query:n={},data:o=[],error:a})=>{const r=un(n);switch(t){case dn.SET_DEPOSIT:return{...e,byId:{...e.byId,[o.id]:o}};case dn.SET_ALL_DEPOSITS_OVERVIEWS:return{...e,overviews:{...e.overviews,data:o}};case dn.SET_ERROR_FOR_ALL_DEPOSITS_OVERVIEWS:return{...e,overviews:{...e.overviews,error:a}};case dn.SET_DEPOSITS:return{...e,byId:{...e.byId,...(0,lt.keyBy)(o,"id")},queries:{...e.queries,[r]:{data:(0,lt.map)(o,"id")}}};case dn.SET_DEPOSITS_COUNT:return{...e,count:o};case dn.SET_ERROR_FOR_DEPOSIT_QUERY:return{...e,queries:{...e.queries,[r]:{error:a}}};case dn.SET_DEPOSITS_SUMMARY:return{...e,summary:{...e.summary,[r]:{data:o}}};case dn.SET_ERROR_FOR_DEPOSITS_SUMMARY:return{...e,summary:{...e.summary,[r]:{error:a}}};case dn.SET_INSTANT_DEPOSIT:return{...e,instant:{...e.instant,data:o}}}return e},transactions:(e=io,{type:t,query:n={},data:o=[],error:a,status:r})=>{const s=un(n);switch(t){case co.SET_TRANSACTIONS:return{...e,[s]:{data:o}};case co.SET_ERROR_FOR_TRANSACTIONS:return{...e,[s]:{error:a}};case co.SET_TRANSACTIONS_SUMMARY:return{...e,summary:{...e.summary,[s]:{data:o}}};case co.SET_ERROR_FOR_TRANSACTIONS_SUMMARY:return{...e,summary:{...e.summary,[s]:{error:a}}};case co.SET_FRAUD_OUTCOME_TRANSACTIONS:return{...e,fraudProtection:{...e.fraudProtection,[r]:{...e.fraudProtection?.[r]||{},[s]:{data:o}}}};case co.SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS:return{...e,fraudProtection:{...e.fraudProtection,[r]:{...e.fraudProtection?.[r]||{},[s]:{error:a}}}};case co.SET_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY:return{...e,fraudProtection:{...e.fraudProtection,[r]:{...e.fraudProtection?.[r]||{},summary:{...e.fraudProtection?.[r]?.summary||{},[s]:{data:o}}}}};case co.SET_ERROR_FOR_FRAUD_OUTCOME_TRANSACTIONS_SUMMARY:return{...e,fraudProtection:{...e.fraudProtection,[r]:{...e.fraudProtection?.[r]||{},summary:{...e.fraudProtection?.[r]?.summary||{},[s]:{error:a}}}}}}return e},charges:(e={},{type:t,id:n,data:o,error:a})=>{switch(t){case Bo.SET_CHARGE:e={...e,[n]:{...e[n],data:o}};break;case Bo.SET_ERROR_FOR_CHARGE:e={...e,[n]:{...e[n],error:a}}}return e},timeline:(e={},{type:t,id:n,data:o,error:a})=>{switch(t){case Go.SET_TIMELINE:e={...e,[n]:{data:o}};break;case Go.SET_ERROR_FOR_TIMELINE:e={...e,[n]:{...e[n],error:a}}}return e},disputes:(e=na,{type:t,query:n={},data:o=[],id:a,error:r})=>{const s=un(n);switch(t){case ta.SET_DISPUTE:return{...e,byId:{...e.byId,[o.id]:o}};case ta.SET_ERROR_FOR_DISPUTE:e={...e,byId:{...e.byId,[a]:{error:r}}};break;case ta.SET_DISPUTES:return{...e,cached:{...e.cached,...(0,lt.keyBy)(o,"dispute_id")},queries:{...e.queries,[s]:{data:(0,lt.map)(o,"dispute_id")}}};case ta.SET_DISPUTES_SUMMARY:return{...e,summary:{...e.summary,[s]:{data:o}}}}return e},settings:(e=Ma,{type:t,...n})=>{switch(t){case Pa.SET_SETTINGS:return{...e,data:n.data,isDirty:!1};case Pa.SET_SETTINGS_VALUES:return{...e,savingError:null,isDirty:!0,data:{...e.data,...n.payload}};case Pa.SET_IS_SAVING_SETTINGS:return{...e,isDirty:!(!n.isSaving&&!n.error)&&e.isDirty,isSaving:n.isSaving,savingError:n.error};case Pa.SET_SELECTED_PAYMENT_METHOD:return{...e,isDirty:!0,data:{...e.data,enabled_payment_method_ids:e.data.enabled_payment_method_ids.concat(n.id)}};case Pa.SET_UNSELECTED_PAYMENT_METHOD:return{...e,isDirty:!0,data:{...e.data,enabled_payment_method_ids:e.data.enabled_payment_method_ids.filter((e=>e!==n.id))}}}return e},readers:(e={},{type:t,id:n,data:o,error:a})=>{switch(t){case Vs.SET_CARD_READER_STATS:e={...e,[n]:{...e[n],data:o}};break;case Vs.SET_ERROR_FOR_CARD_READER_STATS:e={...e,[n]:{...e[n],error:a}};break;case Vs.SET_READERS:e={...e,list:o}}return e},capital:(e=tc,t)=>{switch(t.type){case ec.SET_ACTIVE_LOAN_SUMMARY:return Object.assign(Object.assign({},e),{summary:t.data,summaryError:void 0});case ec.SET_ERROR_FOR_ACTIVE_LOAN_SUMMARY:return Object.assign(Object.assign({},e),{summary:void 0,summaryError:t.error});case ec.SET_LOANS:return Object.assign(Object.assign({},e),{loans:t.data,loansError:void 0});case ec.SET_ERROR_FOR_LOANS:return Object.assign(Object.assign({},e),{loans:void 0,loansError:t.error})}return e},documents:(e=_c,{type:t,query:n={},data:o=[],error:a})=>{const r=un(n);switch(t){case pc.SET_DOCUMENTS:return{...e,[r]:{data:o}};case pc.SET_ERROR_FOR_DOCUMENTS:return{...e,[r]:{error:a}};case pc.SET_DOCUMENTS_SUMMARY:return{...e,summary:{...e.summary,[r]:{data:o}}};case pc.SET_ERROR_FOR_DOCUMENTS_SUMMARY:return{...e,summary:{...e.summary,[r]:{error:a}}}}return e},paymentIntents:(e=Ic,t)=>{const{type:n,id:o}=t;switch(n){case ma.SET_PAYMENT_INTENT:return Object.assign(Object.assign({},e),{[o]:Object.assign(Object.assign({},e[o]),{data:t.data})});case ma.SET_ERROR_FOR_PAYMENT_INTENT:return Object.assign(Object.assign({},e),{[o]:Object.assign(Object.assign({},e[o]),{error:t.error})});default:return e}},authorizations:(e=Pc,t)=>{switch(t.type){case jc.SET_AUTHORIZATION:{const{data:n}=t;return Object.assign(Object.assign({},e),{byId:Object.assign(Object.assign({},e.byId),{[n.payment_intent_id]:Object.assign(Object.assign({},e.byId[n.payment_intent_id]),n)})})}case jc.SET_AUTHORIZATIONS:{const{data:n,query:o}=t;return Object.assign(Object.assign({},e),{[un(o)]:{data:n}})}case jc.SET_ERROR_FOR_AUTHORIZATIONS:{const{error:n,query:o}=t;return Object.assign(Object.assign({},e),{[un(o)]:{error:n}})}case jc.SET_AUTHORIZATIONS_SUMMARY:{const{data:n,query:o}=t;return Object.assign(Object.assign({},e),{summary:Object.assign(Object.assign({},e.summary),{[un(o)]:{data:n||{}}})})}case jc.SET_ERROR_FOR_AUTHORIZATIONS_SUMMARY:{const{query:n,error:o}=t;return Object.assign(Object.assign({},e),{summary:Object.assign(Object.assign({},e.summary),{[un(n)]:{error:o||""}})})}case jc.SET_IS_REQUESTING_AUTHORIZATION:{const{data:n}=t;return Object.assign(Object.assign({},e),{isRequesting:n})}}return e},files:(e=ii,t)=>{const{type:n,id:o}=t;switch(n){case ci.SET_FILE:return Object.assign(Object.assign({},e),{[o]:Object.assign(Object.assign({},e[o]),{data:t.data})});case ci.SET_ERROR_FOR_FILES:return Object.assign(Object.assign({},e),{[o]:Object.assign(Object.assign({},e[o]),{error:t.error})});default:return e}},pmPromotions:(e=yi,t)=>{switch(t.type){case _i.SET_PM_PROMOTIONS:return Object.assign(Object.assign({},e),{pmPromotions:t.data,pmPromotionsError:void 0});case _i.SET_ERROR_FOR_PM_PROMOTIONS:return Object.assign(Object.assign({},e),{pmPromotions:void 0,pmPromotionsError:t.error})}return e}}),actions:{...t,...r,...i,...d,...h,...f,...E,...N,...T,..._,...R,...j,...F},controls:mn.controls,selectors:{...e,...a,...c,...m,...p,...w,...b,...k,...C,...I,...A,...D,...M},resolvers:{...o,...s,...l,...u,...g,...v,...S,...x,...O,...y,...L,...P,...B}});const Ni=window.wc.navigation,xi={deposit:(0,V.__)("Payout","woocommerce-payments"),withdrawal:(0,V.__)("Withdrawal","woocommerce-payments")},Ci={paid:(0,V.__)("Completed (paid)","woocommerce-payments"),deducted:(0,V.__)("Completed (deducted)","woocommerce-payments"),pending:(0,V.__)("Pending","woocommerce-payments"),in_transit:(0,V.__)("In transit","woocommerce-payments"),canceled:(0,V.__)("Canceled","woocommerce-payments"),failed:(0,V.__)("Failed","woocommerce-payments")},Ti={insufficient_funds:(0,V.__)("Your account has insufficient funds to cover your negative balance.","woocommerce-payments"),bank_account_restricted:(0,V.__)("The bank account has restrictions on either the type or number of transfers allowed. This normally indicates that the bank account is a savings or other non-checking account.","woocommerce-payments"),debit_not_authorized:(0,V.__)("Debit transactions are not approved on your bank account. Bank accounts need to be set up for both credit and debit transfers.","woocommerce-payments"),invalid_card:(0,V.__)("The card used was invalid. This usually means the card number is invalid or the account has been closed.","woocommerce-payments"),declined:(0,V.__)("The bank has declined this transfer. Please contact the bank for more information.","woocommerce-payments"),invalid_transaction:(0,V.__)("The transfer was refused by the issuing bank because this type of payment is not permitted for this card. Please contact the issuing bank for clarification.","woocommerce-payments"),refer_to_card_issuer:(0,V.__)("The transfer was refused by the card issuer. Please contact the issuing bank for clarification.","woocommerce-payments"),unsupported_card:(0,V.__)("The bank no longer supports transfers to this card.","woocommerce-payments"),lost_or_stolen_card:(0,V.__)("The card used has been reported lost or stolen. Please contact the issuing bank for clarification.","woocommerce-payments"),invalid_issuer:(0,V.__)("The issuer specified by the card number does not exist. Please verify card details.","woocommerce-payments"),expired_card:(0,V.__)("The card used has expired. Please switch to a different card or payment method. Contact the issuing bank for clarification.","woocommerce-payments"),could_not_process:(0,V.__)("The bank or the payment processor could not process this transfer.","woocommerce-payments"),invalid_account_number:(0,V.__)("The bank account details on file are probably incorrect. While the routing number appears correct, the account number is invalid.","woocommerce-payments"),incorrect_account_holder_name:(0,V.__)("The bank account holder name on file appears to be incorrect.","woocommerce-payments"),account_closed:(0,V.__)("The bank account has been closed.","woocommerce-payments"),no_account:(0,V.__)("The bank account details on file are probably incorrect. No bank account could be located with those details.","woocommerce-payments"),exceeds_amount_limit:(0,V.__)("The card issuer has declined the transaction as it will exceed the card limit. Please switch to a different card or payment method. Contact the issuing bank for clarification.","woocommerce-payments"),account_frozen:(0,V.__)("The bank account has been frozen.","woocommerce-payments"),issuer_unavailable:(0,V.__)("The issuing bank is currently unavailable. Our system will automatically try again on your next payout date, or you can switch to a different payout method.","woocommerce-payments"),invalid_currency:(0,V.__)("The bank was unable to process this transfer because of its currency. This is probably because the bank account cannot accept payments in that currency.","woocommerce-payments"),incorrect_account_type:(0,V.__)("The bank account type is incorrect. This value can only be checking or savings in most countries. In Japan, it can only be futsu or toza.","woocommerce-payments"),incorrect_account_holder_details:(0,V.__)("The bank could not process this transfer. Please check that the entered bank account details match the corresponding account bank statement exactly.","woocommerce-payments"),bank_ownership_changed:(0,V.__)("The destination bank account is no longer valid because its branch has changed ownership.","woocommerce-payments"),exceeds_count_limit:(0,V.__)("The selected card has exceeded its card usage frequency limit. Please switch to a different card or payment method. Contact the issuing bank for clarification.","woocommerce-payments"),incorrect_account_holder_address:(0,V.__)("Your bank notified us that the bank account holder address on file is incorrect.","woocommerce-payments"),incorrect_account_holder_tax_id:(0,V.__)("Your bank notified us that the bank account holder tax ID on file is incorrect.","woocommerce-payments"),invalid_account_number_length:(0,V.__)("Your bank notified us that the bank account number is too long.","woocommerce-payments")},Oi=(e,t)=>Et({page:"wc-admin",path:`/payments/${t}/details`,id:e}),Ii=({id:e,parentSegment:t})=>e?Y().createElement(X.Link,{href:Oi(e,t)},Y().createElement(_e.A,{size:18})):null;const Ai=e=>{var{href:t,children:n}=e,o=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["href","children"]);return t?Y().createElement(X.Link,Object.assign({href:t,className:"woocommerce-table__clickable-cell",tabIndex:"-1"},o),n):Y().createElement(Y().Fragment,null,n)},Ri=Object.entries(Ci).filter((([e])=>"deducted"!==e)).map((([e,t])=>"paid"===e?{label:(0,V.__)("Completed","woocommerce-payments"),value:"paid"}:{label:t,value:e})),Li=[{label:(0,V.__)("Payout currency","woocommerce-payments"),param:"store_currency_is",staticParams:["paged","per_page","orderby","order","filter","date_before","date_after","date_between","status_is","status_is_not","match"],showFilters:()=>!1,filters:[{label:(0,V.__)("All","woocommerce-payments"),value:"---"}],defaultValue:"---"},{label:(0,V.__)("Show","woocommerce-payments"),param:"filter",staticParams:["paged","per_page","orderby","order","store_currency_is"],showFilters:()=>!0,filters:[{label:(0,V.__)("All payouts","woocommerce-payments"),value:"all"},{label:(0,V.__)("Advanced filters","woocommerce-payments"),value:"advanced"}]}],Di=(0,va.getSetting)("wcVersion"),ji=parseFloat(Di),Pi={title:ji<7.8?(0,V.__)("Payouts match {{select /}} filters","woocommerce-payments"):(0,V.__)("Payouts match <select /> filters","woocommerce-payments"),filters:{date:{labels:{add:(0,V.__)("Date","woocommerce-payments"),remove:(0,V.__)("Remove payout date filter","woocommerce-payments"),rule:(0,V.__)("Select a payout date filter match","woocommerce-payments"),title:ji<7.8?(0,V.__)("{{title}}Date{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Date</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a payout date","woocommerce-payments")},rules:[{value:"before",label:(0,V.__)("Before","woocommerce-payments")},{value:"after",label:(0,V.__)("After","woocommerce-payments")},{value:"between",label:(0,V.__)("Between","woocommerce-payments")}],input:{component:"Date"}},status:{labels:{add:(0,V.__)("Status","woocommerce-payments"),remove:(0,V.__)("Remove payout status filter","woocommerce-payments"),rule:(0,V.__)("Select a payout status filter match","woocommerce-payments"),title:ji<7.8?(0,V.__)("{{title}}Status{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Status</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a payout status","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","payout status","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","payout status","woocommerce-payments")}],input:{component:"SelectControl",options:Ri}}}},Mi=e=>{return(0,ve.jsx)("div",{className:"woocommerce-filters-deposits",children:(0,ve.jsx)(X.ReportFilters,{filters:(t=Li,t.forEach((t=>{if("store_currency_is"===t.param){const n=e.storeCurrencies||[];t.filters=[t.filters[0],...n.map((e=>({label:An(e),value:e})))],t.filters.length>2&&(t.showFilters=()=>!0)}})),t),advancedFilters:Pi,showDatePicker:!1,path:"/payments/payouts",query:(0,Ni.getQuery)()})});var t},Fi=({isDisabled:e,isBusy:t,onClick:n})=>Y().createElement(Z.Button,{className:"woocommerce-table__download-button",disabled:e,onClick:n,isBusy:t,__next40pxDefaultSize:!0},Y().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},Y().createElement("path",{d:"M18.5 15v5H20v-5h-1.5zM4 15v5h1.5v-5H4zm0 5h16v-1.5H4V20z"}),Y().createElement("path",{d:"M12.25 16L6.5 10.75M12.25 16V3M12.25 16l5.25-5.25",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})),Y().createElement("span",{className:"woocommerce-table__download-button__label"},(0,V.__)("Export","woocommerce-payments"))),Bi=({message:e,type:t="primary",className:n,tooltip:o,icon:a})=>{const r=ue("chip",`chip-${t}`,a&&"chip-has-icon",n),s=Y().createElement(Y().Fragment,null,a&&Y().createElement(Ut,{icon:a,size:16}),e);return o?Y().createElement(Bt,{content:o},Y().createElement("span",{className:r},s)):Y().createElement("span",{className:r},s)},zi={pending:"warning",in_transit:"primary",paid:"success",failed:"alert",canceled:"light"},Ui=({deposit:e})=>{let t=Ci[e.status];return"withdrawal"===e.type&&"paid"===e.status&&(t=Ci.deducted),Y().createElement(Bi,{type:zi[e.status],message:t})};var $i=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const Vi=()=>{const[e,t]=(0,H.useState)(!1),{createNotice:n}=(0,ln.useDispatch)("core/notices"),o=(0,H.useRef)(null),a=(0,H.useRef)(0);function r({checkFileURL:e,userEmail:n,interval:s=1e3}){return $i(this,void 0,void 0,(function*(){o.current=setTimeout((()=>$i(this,void 0,void 0,(function*(){let o;a.current++;try{o=yield G()({path:e,method:"GET"})}catch(e){o={status:"error"}}if("success"===o.status&&o.download_url){const e=document.createElement("a");return e.href=o.download_url+"?force_download=true",e.click(),void t(!1)}a.current<5?r({checkFileURL:e,userEmail:n}):t(!1)}))),s)}))}return(0,H.useEffect)((()=>()=>{o.current&&clearTimeout(o.current)}),[o]),{requestReportExport:function({exportRequestURL:e,exportFileAvailabilityEndpoint:o,userEmail:a}){return $i(this,void 0,void 0,(function*(){try{t(!0);const n=yield G()({path:e,method:"POST"});n.export_id&&r({checkFileURL:`${o}/${n.export_id}`,userEmail:a})}catch(e){t(!1),n("error",(0,V.__)("There was a problem generating your export.","woocommerce-payments"))}}))},isExportInProgress:e}},Wi=window.wc.data;const Hi=(e,t)=>{var n;const o=(0,Wi.useUserPreferences)(),{updateUserPreferences:a}=o,r=null!==(n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(o,["updateUserPreferences"])[e])&&void 0!==n?n:"";return{onColumnsChange:n=>{const o=t.map((e=>e.key)).filter((e=>!n.includes(e)));e&&a({[e]:o})},columnsToDisplay:(0,H.useMemo)((()=>Array.isArray(r)?t.map((e=>Object.assign(Object.assign({},e),{visible:!r.includes(e.key)}))):t),[t,r])}};const Yi=()=>{var e;const{deposits:t,isLoading:n}=so((0,Ni.getQuery)()),{depositsSummary:o,isLoading:a}=(({match:e,store_currency_is:t,date_before:n,date_after:o,date_between:a,status_is:r,status_is_not:s})=>(0,ln.useSelect)((c=>{const{getDepositsSummary:i,isResolving:l}=c(yt),m={match:e,storeCurrencyIs:t,dateBefore:n,dateAfter:o,dateBetween:a,statusIs:r,statusIsNot:s};return{depositsSummary:i(m),isLoading:l("getDepositsSummary",[m])}}),[t,e,n,o,JSON.stringify(a),r,s]))((0,Ni.getQuery)()),{requestReportExport:r,isExportInProgress:s}=Vi(),{createNotice:c}=(0,ln.useDispatch)("core/notices"),i=[{key:"details",label:"",required:!0,cellClassName:"info-button "+(!(0,Ni.getQuery)().orderby||"date"===(0,Ni.getQuery)().orderby?"is-sorted":""),isLeftAligned:!0},{key:"date",label:(0,V.__)("Date","woocommerce-payments"),screenReaderLabel:(0,V.__)("Date","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultOrder:"desc",cellClassName:"date-time",isSortable:!0,defaultSort:!0},{key:"type",label:(0,V.__)("Type","woocommerce-payments"),screenReaderLabel:(0,V.__)("Type","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount","woocommerce-payments"),isNumeric:!0,required:!0,isSortable:!0},{key:"status",label:(0,V.__)("Status","woocommerce-payments"),screenReaderLabel:(0,V.__)("Status","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"bankAccount",label:(0,V.__)("Bank account","woocommerce-payments"),screenReaderLabel:(0,V.__)("Bank account","woocommerce-payments"),isLeftAligned:!0},{key:"bankReferenceId",label:(0,V.__)("Bank reference ID","woocommerce-payments"),screenReaderLabel:(0,V.__)("Bank reference ID","woocommerce-payments")}],{columnsToDisplay:l,onColumnsChange:m}=Hi("wc_payments_payouts_hidden_columns",i),d=o.count||0,u=t.map((e=>{var t;const n=t=>Y().createElement(Ai,{href:Oi(e.id,"payouts"),onClick:()=>ce("wcpay_deposits_row_click")},t),o=Y().createElement(Ii,{id:e.id,parentSegment:"payouts"}),a=Y().createElement(X.Link,{href:Oi(e.id,"payouts"),onClick:()=>ce("wcpay_deposits_row_click")},nn(e.date)),r={details:{value:e.id,display:o},date:{value:e.date,display:a},type:{value:xi[e.type],display:n(xi[e.type])},amount:{value:Dn(e.amount,e.currency),display:n(Mn(e.amount,e.currency))},status:{value:Ci[e.status],display:n(Y().createElement(Ui,{deposit:e}))},bankAccount:{value:e.bankAccount,display:n(e.bankAccount)},bankReferenceId:{value:e.bank_reference_key,display:n(null!==(t=e.bank_reference_key)&&void 0!==t?t:"N/A")}};return l.map((({key:e})=>r[e]||{display:null}))})),p="string"==typeof(0,Ni.getQuery)().store_currency_is,_=2>(o.store_currencies||[]).length;let y;void 0!==o.count&&void 0!==o.total&&!1===a&&(y=[{label:(0,V._n)("payout","payouts",o.count,"woocommerce-payments"),value:`${Tt(o.count)}`}],(_||p)&&y.push({label:(0,V.__)("total","woocommerce-payments"),value:`${Mn(o.total,o.currency)}`}));const h=o.store_currencies||(p?[(0,Ni.getQuery)().store_currency_is]:[]),g=!!u.length,{path:w}=(0,Ni.getQuery)();return Y().createElement(ge,null,Y().createElement(Mi,{storeCurrencies:h}),Y().createElement(X.TableCard,{className:"wcpay-deposits-list woocommerce-report-table",title:(0,V.__)("Payout history","woocommerce-payments"),isLoading:n,rowsPerPage:(0,lt.parseInt)(null!==(e=(0,Ni.getQuery)().per_page)&&void 0!==e?e:"")||25,totalRows:d,headers:l,rows:u,summary:y,query:(0,Ni.getQuery)(),onQueryChange:Ni.onQueryChange,onColumnsChange:m,actions:[g&&Y().createElement(Fi,{key:"download",isDisabled:n||s,isBusy:s,onClick:()=>{return e=void 0,t=void 0,a=function*(){ce("wcpay_csv_export_click",{row_type:"payouts",source:w,exported_row_count:o.count});const e=wcpaySettings.currentUserEmail,t=wcSettings.locale.userLocale,{date_before:n,date_after:a,date_between:s,match:i,status_is:l,status_is_not:m,store_currency_is:u}=(0,Ni.getQuery)(),p=no({userEmail:e,locale:t,dateBefore:n,dateAfter:a,dateBetween:s,match:i,statusIs:l,statusIsNot:m,storeCurrencyIs:u}),_=!!(n||a||s||l||m||u),y=(0,V.sprintf)((0,V.__)("You are about to export %d deposits. If you'd like to reduce the size of your export, you can use one or more filters. Would you like to continue?","woocommerce-payments"),d);(_||d<1e3||window.confirm(y))&&(r({exportRequestURL:p,exportFileAvailabilityEndpoint:to,userEmail:e}),c("success",(0,V.sprintf)((0,V.__)("Were processing your export.  The file will download automatically and be emailed to %s.","woocommerce-payments"),e)))},new((n=void 0)||(n=Promise))((function(o,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function c(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((a=a.apply(e,t||[])).next())}));var e,t,n,a}})]}))},qi=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"m3 12 1 8h1.5l-1-8H3Zm15.8-2h-4.4l.8-3.6c.3-1.3-.7-2.4-1.9-2.4h-.2c-.6 0-1.2.3-1.6.8l-5 6.6c-.3.4-.4.8-.4 1.2v.2l.7 5.4v.2c.2.9 1 1.5 1.9 1.5h8.2c.9 0 1.7-.6 1.9-1.4l1.8-6c.4-1.3-.6-2.6-1.9-2.6Zm.5 2.1-1.8 6c0 .2-.3.4-.5.4H8.8c-.3 0-.5-.2-.5-.4l-.7-5.4v-.4l5-6.6c0-.1.2-.2.4-.2h.2c.3 0 .6.3.5.6l-.8 3.6c-.1.4 0 .9.3 1.3s.7.6 1.2.6h4.4c.3 0 .6.3.5.6Z"})}),Gi=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M19.8 4h-1.5l1 8h1.5l-1-8ZM17 5.8c-.1-1-1-1.8-2-1.8H6.8c-.9 0-1.7.6-1.9 1.4l-1.8 6C2.7 12.7 3.7 14 5 14h4.4l-.8 3.6c-.3 1.3.7 2.4 1.9 2.4h.2c.6 0 1.2-.3 1.6-.8l5-6.6c.3-.4.5-.9.4-1.5L17 5.7Zm-.9 5.9-5 6.6c0 .1-.2.2-.4.2h-.2c-.3 0-.6-.3-.5-.6l.8-3.6c.1-.4 0-.9-.3-1.3s-.7-.6-1.2-.6H4.9c-.3 0-.6-.3-.5-.6l1.8-6c0-.2.3-.4.5-.4h8.2c.3 0 .5.2.5.4l.7 5.4v.4Z"})}),Qi=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M7 7.2h8.2L13.5 9l1.1 1.1 3.6-3.6-3.5-4-1.1 1 1.9 2.3H7c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.2-.5zm13.8 4V11h-1.5v.3c0 1.1 0 3.5-1 4.5-.3.3-.7.5-1.3.5H8.8l1.7-1.7-1.1-1.1L5.9 17l3.5 4 1.1-1-1.9-2.3H17c.9 0 1.7-.3 2.3-.9 1.5-1.4 1.5-4.2 1.5-5.6z"})}),Zi=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68822 16.625L5.5 17.8145L5.5 5.5L18.5 5.5L18.5 16.625L6.68822 16.625ZM7.31 18.125L19 18.125C19.5523 18.125 20 17.6773 20 17.125L20 5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19.5247C4 19.8173 4.16123 20.086 4.41935 20.2237C4.72711 20.3878 5.10601 20.3313 5.35252 20.0845L7.31 18.125ZM16 9.99997H8V8.49997H16V9.99997ZM8 14H13V12.5H8V14Z"})}),Ki=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M15.5 9.5a1 1 0 100-2 1 1 0 000 2zm0 1.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm-2.25 6v-2a2.75 2.75 0 00-2.75-2.75h-4A2.75 2.75 0 003.75 15v2h1.5v-2c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v2h1.5zm7-2v2h-1.5v-2c0-.69-.56-1.25-1.25-1.25H15v-1.5h2.5A2.75 2.75 0 0120.25 15zM9.5 8.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",fillRule:"evenodd"})}),Ji=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})}),Xi=({onRequestClose:e})=>((0,H.useEffect)((()=>{ce("wcpay_merchant_feedback_prompt_positive_modal_view")}),[]),Y().createElement(Z.Modal,{title:(0,V.__)("Share your feedback","woocommerce-payments"),className:"wcpay-merchant-feedback-positive-modal",isDismissible:!0,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,onRequestClose:()=>{ce("wcpay_merchant_feedback_prompt_positive_modal_close_click"),e()}},Y().createElement("p",null,(0,V.__)("Thanks for sharing your feedback on WooPayments! Would you mind leaving us a 5-star rating and a quick review on WordPress.org?","woocommerce-payments")),Y().createElement("p",null,Y().createElement("strong",null,(0,V.__)("Here's why your review matters:","woocommerce-payments"))),Y().createElement(Z.Flex,{justify:"flex-start",align:"flex-start",gap:4},Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement(Ut,{icon:Qi}))),Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement("strong",null,(0,V.__)("Help other businesses succeed","woocommerce-payments"))),Y().createElement("p",null,(0,V.__)("Your insights guide others in choosing the right payment solution.","woocommerce-payments")))),Y().createElement(Z.Flex,{justify:"flex-start",align:"flex-start",gap:4},Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement(Ut,{icon:Zi}))),Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement("strong",null,(0,V.__)("Shape our roadmap","woocommerce-payments"))),Y().createElement("p",null,(0,V.__)("Your feedback inspires us to create new features and refine existing ones to better serve you.","woocommerce-payments")))),Y().createElement(Z.Flex,{justify:"flex-start",align:"flex-start",gap:4},Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement(Ut,{icon:Ki}))),Y().createElement(Z.FlexItem,null,Y().createElement("p",null,Y().createElement("strong",null,(0,V.__)("Supporting the WooCommerce community","woocommerce-payments"))),Y().createElement("p",null,(0,V.__)("Sharing your experience strengthens the tools that empower your fellow entrepreneurs.","woocommerce-payments")))),Y().createElement(Z.Flex,{justify:"flex-end",gap:2},Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>{ce("wcpay_merchant_feedback_prompt_positive_modal_close_click"),e()}},(0,V.__)("Close","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",href:"https://wordpress.org/support/plugin/woocommerce-payments/reviews/#new-post",target:"_blank",onClick:()=>{ce("wcpay_merchant_feedback_prompt_positive_modal_leave_review_click")}},(0,V.__)("Leave a review","woocommerce-payments"),"",Y().createElement(Ut,{icon:Ji,size:16}))))),el=({onRequestClose:e})=>{const t=(0,H.useRef)(null);return(0,H.useEffect)((()=>{ce("wcpay_merchant_feedback_prompt_negative_modal_view")}),[]),Y().createElement(Z.Modal,{title:(0,V.__)("Share your feedback","woocommerce-payments"),className:"wcpay-merchant-feedback-negative-modal",isDismissible:!0,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!0,onRequestClose:()=>{ce("wcpay_merchant_feedback_prompt_negative_modal_close_click"),e()}},Y().createElement("div",{className:"wcpay-merchant-feedback-negative-modal__content"},Y().createElement("p",null,(0,V.__)("Thanks for sharing your feedback on WooPayments! Your feedback helps us to continue to improve and deliver the best tools for your business.","woocommerce-payments")),Y().createElement("p",{className:"wcpay-merchant-feedback-negative-modal__question"},(0,V.__)("Would you mind sharing more about why you chose that option?","woocommerce-payments")),Y().createElement("textarea",{ref:t,className:"wcpay-merchant-feedback-negative-modal__textarea",placeholder:(0,V.__)("Share your feedback here","woocommerce-payments")}),Y().createElement("p",{className:"wcpay-merchant-feedback-negative-modal__privacy"},Oe({mixedString:(0,V.__)("Your feedback will be sent to the WooCommerce team. Your personal information is secure and will not be shared with third parties. For more details, please see our {{a/}}.","woocommerce-payments"),components:{a:Y().createElement(Z.ExternalLink,{href:"https://automattic.com/privacy/"},(0,V.__)("privacy policy","woocommerce-payments"))}})),Y().createElement("p",null,Oe({mixedString:(0,V.__)("Need help with a specific issue? {{a/}} for personalized assistance.","woocommerce-payments"),components:{a:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/my-account/contact-support/?select=5278104",onClick:()=>{ce("wcpay_merchant_feedback_prompt_negative_modal_contact_support_click")}},(0,V.__)("Contact our support team","woocommerce-payments"))}})),Y().createElement("div",{className:"wcpay-merchant-feedback-negative-modal__actions"},Y().createElement("button",{className:"components-button",onClick:()=>{ce("wcpay_merchant_feedback_prompt_negative_modal_close_click"),e()}},(0,V.__)("Close","woocommerce-payments")),Y().createElement("button",{className:"components-button is-primary",onClick:()=>{var n;ce("wcpay_merchant_feedback_prompt_negative_feedback",{feedback:(null===(n=t.current)||void 0===n?void 0:n.value)||""}),(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Thank you for your feedback!","woocommerce-payments")),e()}},(0,V.__)("Send","woocommerce-payments")))))};const tl=({children:e})=>{const t=document.getElementsByClassName("woocommerce-layout__footer")[0];return t?(0,Rt.createPortal)(e,t):null},nl=({dismissPrompt:e,showPositiveFeedbackModal:t,showNegativeFeedbackModal:n})=>{const o=(0,ln.useSelect)((e=>e("core/notices").getNotices())),a=0===(null==o?void 0:o.length);return(0,H.useEffect)((()=>{a&&ce("wcpay_merchant_feedback_prompt_view")}),[a]),a?Y().createElement(tl,null,Y().createElement(Z.SnackbarList,{className:"wcpay-merchant-feedback-prompt-wrap",notices:[{id:"wcpay-merchant-feedback-prompt",className:"wcpay-merchant-feedback-prompt",content:Y().createElement(Z.Flex,{gap:3,align:"center",onClick:e},Y().createElement(Z.FlexItem,null,(0,V.__)("Are you satisfied with WooPayments?","woocommerce-payments")),Y().createElement(Z.FlexItem,null,Y().createElement(Z.Button,{variant:"link",className:"wcpay-merchant-feedback-prompt__action",onClick:()=>{ce("wcpay_merchant_feedback_prompt_yes_click"),t(),e()},__next40pxDefaultSize:!0},Y().createElement(Ut,{icon:qi,"aria-label":(0,V.__)('"Yes" icon',"woocommerce-payments")}),Y().createElement("span",{className:"wcpay-merchant-feedback-prompt__action-label"},(0,V.__)("Yes","woocommerce-payments")))),Y().createElement(Z.FlexItem,null,Y().createElement(Z.Button,{variant:"link",className:"wcpay-merchant-feedback-prompt__action",onClick:()=>{ce("wcpay_merchant_feedback_prompt_no_click"),n(),e()},__next40pxDefaultSize:!0},Y().createElement(Ut,{icon:Gi,"aria-label":(0,V.__)('"No" icon',"woocommerce-payments")}),Y().createElement("span",{className:"wcpay-merchant-feedback-prompt__action-label"},(0,V.__)("No","woocommerce-payments")))),Y().createElement(Z.FlexItem,null,Y().createElement("span",{role:"button","aria-label":(0,V.__)("Dismiss","woocommerce-payments"),tabIndex:0,onClick:()=>{ce("wcpay_merchant_feedback_prompt_dismiss"),e()},onKeyPress:()=>{ce("wcpay_merchant_feedback_prompt_dismiss"),e()}},"")))}]})):null};function ol(){const{isAccountEligible:e,hasUserDismissedPrompt:t,dismissPrompt:n}=(()=>{var e,t;const n=(0,Wi.useUserPreferences)(),{updateUserPreferences:o}=n,a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(n,["updateUserPreferences"]);return{isAccountEligible:null===(t=null===(e=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===e?void 0:e.campaigns)||void 0===t?void 0:t.wporgReview2025,hasUserDismissedPrompt:null==a?void 0:a.wc_payments_wporg_review_2025_prompt_dismissed,dismissPrompt:()=>{const e=Date.now();o({wc_payments_wporg_review_2025_prompt_dismissed:e})}}})(),[o,a]=(0,H.useState)(!1),[r,s]=(0,H.useState)(!1);return o?Y().createElement(Xi,{onRequestClose:()=>a(!1)}):r?Y().createElement(el,{onRequestClose:()=>s(!1)}):t||!e?null:Y().createElement(nl,{dismissPrompt:n,showPositiveFeedbackModal:()=>a(!0),showNegativeFeedbackModal:()=>{window.wcTracks.isEnabled?s(!0):n()}})}const al=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),rl=["primary","success","light","warning","alert"],sl=({badge:e,badgeType:t,heading:n,description:o,footnote:a,image:r,primaryButtonLabel:s,onPrimaryClick:c,secondaryButtonLabel:i,onSecondaryClick:l,onDismiss:m,onView:d,showImmediately:u=!1})=>{const p=(_=t)&&rl.includes(_)?_:"success";var _;const[y,h]=(0,H.useState)(!1),[g,w]=(0,H.useState)(!1),f=(0,H.useRef)(null),v=(0,H.useRef)(null),b=(0,H.useRef)(null);(0,H.useEffect)((()=>{if(u)return h(!0),void w(!0);const e=setTimeout((()=>{h(!0),requestAnimationFrame((()=>{requestAnimationFrame((()=>{w(!0)}))}))}),4e3);return()=>clearTimeout(e)}),[u]),(0,H.useEffect)((()=>()=>{f.current&&clearTimeout(f.current)}),[]),(0,H.useEffect)((()=>{g&&((0,we.speak)((0,V.sprintf)((0,V.__)("Dialog opened: %s","woocommerce-payments"),n),"polite"),d&&d())}),[g]);const E=(0,H.useCallback)(((e=!0)=>{w(!1),f.current=setTimeout((()=>{h(!1),e&&m()}),300)}),[m]);return(0,H.useEffect)((()=>{if(!y||!v.current)return;const e=v.current,t=e.ownerDocument;b.current=t.activeElement,e.focus();const n=n=>{if("Escape"===n.key)return n.preventDefault(),void E();if("Tab"===n.key){const o=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=o[0],r=o[o.length-1],s=t.activeElement;n.shiftKey&&s===a?(n.preventDefault(),null==r||r.focus()):n.shiftKey||s!==r||(n.preventDefault(),null==a||a.focus())}};return t.addEventListener("keydown",n),()=>{var e;t.removeEventListener("keydown",n),null===(e=b.current)||void 0===e||e.focus()}}),[y,E]),y?Y().createElement("div",{className:"wcpay-spotlight "+(g?"wcpay-spotlight--visible":"")},Y().createElement("div",{ref:v,role:"dialog","aria-modal":"true","aria-labelledby":"spotlight-heading",tabIndex:-1,className:"wcpay-spotlight__container"},Y().createElement(Z.Card,{className:"wcpay-spotlight__card "+(r?"has-image":""),elevation:2},r&&Y().createElement(Z.CardMedia,{className:"wcpay-spotlight__image"},"string"==typeof r?Y().createElement("img",{src:r,alt:"","aria-hidden":"true",role:"presentation"}):r),Y().createElement(Z.CardHeader,{isBorderless:!0,size:"small",className:"wcpay-spotlight__header"},Y().createElement(Z.Flex,{className:"wcpay-spotlight__controls",justify:"space-between",align:"center"},!r&&e&&Y().createElement("div",{className:"wcpay-spotlight__badge"},Y().createElement(Bi,{message:e,type:p})),!r&&!e&&Y().createElement("h2",{id:"spotlight-heading",className:"wcpay-spotlight__heading"},n),r&&Y().createElement("span",null),Y().createElement(Z.Button,{className:"wcpay-spotlight__close-btn",label:(0,V.__)("Close","woocommerce-payments"),icon:Y().createElement(Z.Icon,{icon:al,viewBox:"6 4 12 14"}),iconSize:24,onClick:()=>E()}))),Y().createElement(Z.CardBody,{className:"wcpay-spotlight__body",size:"small"},r&&e&&Y().createElement("div",{className:"wcpay-spotlight__badge"},Y().createElement(Bi,{message:e,type:p})),(r||e)&&Y().createElement("h2",{id:"spotlight-heading",className:"wcpay-spotlight__heading"},n),"string"==typeof o?Y().createElement("div",{className:"wcpay-spotlight__description",dangerouslySetInnerHTML:Re(o)}):Y().createElement("div",{className:"wcpay-spotlight__description"},o),a&&("string"==typeof a?Y().createElement("div",{className:"wcpay-spotlight__footnote",dangerouslySetInnerHTML:Re(a)}):Y().createElement("div",{className:"wcpay-spotlight__footnote"},a))),Y().createElement(Z.CardFooter,{isBorderless:!0,size:"small",className:"wcpay-spotlight__footer"},Y().createElement(Z.Flex,{justify:"flex-end",gap:3},i&&Y().createElement(Z.Button,{className:"wcpay-spotlight__secondary-btn",variant:"tertiary",onClick:l},i),Y().createElement(Z.Button,{className:"wcpay-spotlight__primary-btn",variant:"primary",onClick:()=>{c(),E(!1)}},s)))))):null},cl=()=>{const e=window.location.pathname+window.location.search;return e.includes("path=%2Fpayments%2Foverview")?"wcpay-overview":e.includes("path=%2Fpayments%2Fsettings")?"wcpay-settings":e.includes("page=wc-settings")&&e.includes("tab=checkout")?"wc-settings-payments":"unknown"},il=()=>{const{pmPromotions:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getPmPromotions:t,getPmPromotionsError:n,isResolving:o}=e(yt);return{pmPromotions:t(),pmPromotionsError:n(),isLoading:o("getPmPromotions")}})),{activatePmPromotion:n,dismissPmPromotion:o}=(()=>{const{activatePmPromotion:e,dismissPmPromotion:t}=(0,ln.useDispatch)(yt);return{activatePmPromotion:e,dismissPmPromotion:t}})(),a=(0,H.useMemo)((()=>null==e?void 0:e.find((e=>"spotlight"===e.type))),[e]),r=(0,H.useCallback)((()=>({promo_id:null==a?void 0:a.promo_id,payment_method:null==a?void 0:a.payment_method,display_context:"spotlight",source:cl(),path:window.location.pathname+window.location.search})),[null==a?void 0:a.promo_id,null==a?void 0:a.payment_method]),s=(0,H.useCallback)((()=>{ce("wcpay_payment_method_promotion_view",r())}),[r]),c=(0,H.useCallback)((()=>{a&&(ce("wcpay_payment_method_promotion_activate_click",r()),n(a.id))}),[r,n,a]),i=(0,H.useCallback)((()=>{if(a&&(ce("wcpay_payment_method_promotion_link_click",Object.assign(Object.assign({},r()),{link_type:"terms"})),a.tc_url))try{const e=new URL(a.tc_url);"https:"!==e.protocol&&"http:"!==e.protocol||window.open(a.tc_url,"_blank","noopener,noreferrer")}catch(e){}}),[r,a]),l=(0,H.useCallback)((()=>{a&&(ce("wcpay_payment_method_promotion_dismiss_click",r()),o(a.id))}),[r,o,a]);return t?null:e&&0!==e.length&&a?Y().createElement(sl,{badge:a.badge_text,badgeType:a.badge_type,heading:a.title,description:a.description,footnote:a.footnote,image:a.image,primaryButtonLabel:a.cta_label,onPrimaryClick:c,secondaryButtonLabel:a.tc_label,onSecondaryClick:i,onDismiss:l,onView:s}):null},ll=()=>{var e,t;const{overviews:{account:n}}=ro();return{account:n,hasErroredExternalAccount:null!==(t=null===(e=null==n?void 0:n.default_external_accounts)||void 0===e?void 0:e.some((e=>"errored"===e.status)))&&void 0!==t&&t}},ml=()=>{var e,t;const{account:n,hasErroredExternalAccount:o}=ll(),{isNextDepositNoticeDismissed:a,handleDismissNextDepositNotice:r}=(()=>{const[e,t]=(0,H.useState)(wcpaySettings.isNextDepositNoticeDismissed);return{isNextDepositNoticeDismissed:e,handleDismissNextDepositNotice:()=>{t(!0),wcpaySettings.isNextDepositNoticeDismissed=!0,Bs("wcpay_next_deposit_notice_dismissed",!0)}}})(),s="deposits_unrestricted"===(null===(e=wcpaySettings.accountStatus.deposits)||void 0===e?void 0:e.restrictions),c=null===(t=wcpaySettings.accountStatus.deposits)||void 0===t?void 0:t.completed_waiting_period,i=rn(null==n?void 0:n.deposits_schedule.interval);return s&&c&&n&&!a&&i&&!o?Y().createElement(xe,{status:"info",isDismissible:!0,onRemove:r},Y().createElement(cn,{depositsSchedule:n.deposits_schedule})):null},dl=()=>{const{hasErroredExternalAccount:e}=ll(),t=wcpaySettings.accountStatus.accountLink?(0,Q.addQueryArgs)(wcpaySettings.accountStatus.accountLink,{from:"WCPAY_PAYOUTS",source:"wcpay-payout-failure-notice"}):"";return e&&""!==t?Y().createElement(xe,{status:"warning",icon:!0,className:"deposit-failure-notice",isDismissible:!1},Oe({mixedString:(0,V.__)("Payouts are currently paused because a recent payout failed. Please {{updateLink/}}.","woocommerce-payments"),components:{updateLink:Y().createElement(Z.ExternalLink,{onClick:()=>ce("wcpay_account_details_link_clicked",{from:"WCPAY_PAYOUTS",source:"wcpay-payout-failure-notice"}),href:t},(0,V.__)("update your bank account details","woocommerce-payments"))}})):null},ul=()=>($s(),Y().createElement(ge,null,Y().createElement(ol,null),Y().createElement(tn,{currentPage:"deposits"}),Y().createElement(ml,null),Y().createElement(dl,null),Y().createElement(Yi,null),Y().createElement(he,null,Y().createElement(il,null)))),pl=e=>{const t=e.order;return t&&t.number?Y().createElement(X.Link,{href:t.url,type:"external"},t.number):Y().createElement("span",null,"")},_l={normal:(0,V.__)("Normal","woocommerce-payments"),elevated:(0,V.__)("Elevated","woocommerce-payments"),highest:(0,V.__)("Highest","woocommerce-payments"),not_assessed:(0,V.__)("N/A","woocommerce-payments"),unknown:(0,V.__)("N/A","woocommerce-payments")},yl=({type:e="",className:t="",children:n})=>{const o=ue("wcpay-pill"+(["primary","success","alert","danger","light"].includes(e)?"__"+e:""),t);return Y().createElement(X.Pill,{className:o},n)},hl=["normal","elevated","highest"],gl={normal:"success",elevated:"alert",highest:"danger",not_assessed:"light"};function wl(e){return _l[hl[e]]||_l.not_assessed}const fl=({risk:e})=>{const t=hl[e];return Y().createElement(yl,{type:gl[t]},wl(e))},vl={charge:(0,V.__)("Charge","woocommerce-payments"),payment:(0,V.__)("Payment","woocommerce-payments"),payment_failure_refund:(0,V.__)("Payment failure refund","woocommerce-payments"),payment_refund:(0,V.__)("Payment refund","woocommerce-payments"),refund:(0,V.__)("Refund","woocommerce-payments"),refund_failure:(0,V.__)("Refund failure","woocommerce-payments"),dispute:(0,V.__)("Dispute","woocommerce-payments"),dispute_reversal:(0,V.__)("Dispute reversal","woocommerce-payments"),card_reader_fee:(0,V.__)("Reader fee","woocommerce-payments"),financing_payout:(0,V.__)("Loan disbursement","woocommerce-payments"),financing_paydown:(0,V.__)("Loan repayment","woocommerce-payments"),fee_refund:(0,V.__)("Fee refund","woocommerce-payments")},bl={android:(0,V.__)("Android","woocommerce-payments"),ios:(0,V.__)("iPhone","woocommerce-payments")},El={online:(0,V.__)("Online store","woocommerce-payments"),in_person:(0,V.__)("In-Person","woocommerce-payments"),in_person_pos:(0,V.__)("In-Person (POS)","woocommerce-payments")},Sl={0:(0,V.__)("Normal","woocommerce-payments"),1:(0,V.__)("Elevated","woocommerce-payments"),2:(0,V.__)("Highest","woocommerce-payments")},kl=["issuer_declined","invalid"],Nl=["blocked"],xl=(e={})=>e.outcome?e.outcome.type:"",Cl=(e={})=>!0===e.disputed,Tl=(e={})=>0<e.amount_refunded,Ol=(e={})=>!0===e.refunded,Il=(e,t)=>{var n,o;return(null===(n=null==e?void 0:e.order)||void 0===n?void 0:n.fraud_meta_box_type)||(null===(o=null==t?void 0:t.order)||void 0===o?void 0:o.fraud_meta_box_type)||""},Al=(e,t)=>{const n=Il(e,t);return!!n&&"requires_capture"===(null==t?void 0:t.status)&&"review"===n},Rl=(e={},t)=>Al(e,t)?"fraud_outcome_review":((e,t)=>{const n=Il(e,t);return!!n&&["block","review_blocked"].includes(n)})(e,t)?"fraud_outcome_block":((e={})=>"failed"===e.status&&kl.includes(xl(e)))(e)?"failed":((e={})=>"failed"===e.status&&Nl.includes(xl(e)))(e)?"blocked":Cl(e)?"disputed_"+((e={})=>(null==e?void 0:e.status)||"")(e.dispute):((e={})=>Tl(e)&&!Ol(e))(e)?"refunded_partial":Ol(e)?"refunded_full":((e={})=>!1===e.refunded&&(0,lt.get)(e,"refunds.data",[]).length>0)(e)?"refund_failed":((e={})=>"succeeded"===e.status&&!0===e.paid)(e)?((e={})=>!0===e.captured)(e)?"paid":"authorized":e.status,Ll=e=>{switch(e){case"in_person":return(0,V.__)("In-Person","woocommerce-payments");case"in_person_pos":return(0,V.__)("In-Person (POS)","woocommerce-payments");default:return(0,V.__)("Online store","woocommerce-payments")}},Dl=(e,t)=>"card_present"===e||"interac_present"===e?"mobile_pos"===(null==t?void 0:t.ipp_channel)?(0,V.__)("In-Person (POS)","woocommerce-payments"):(0,V.__)("In-Person","woocommerce-payments"):(0,V.__)("Online store","woocommerce-payments"),jl=e=>{var t;const{payment_method_details:n}=e,o=null===(t=null==n?void 0:n.type)||void 0===t?void 0:t.toLowerCase();if("card"===o&&"card"===(null==n?void 0:n.type))return n.card.issuer||null;switch(o){case"affirm":return"Affirm";case"afterpay_clearpay":return"Afterpay / Clearpay";case"klarna":return"Klarna";default:return null}},Pl=({depositId:e,dateAvailable:t})=>{if(e&&t){const n=Et({page:"wc-admin",path:"/payments/payouts/details",id:e}),o=nn(t);return Y().createElement(X.Link,{href:n},o)}return Y().createElement(Y().Fragment,null,(0,V.__)("Future payout","woocommerce-payments"),Y().createElement(zt,{content:Oe({mixedString:(0,V.__)("This transaction will be included in an upcoming automated payout. The date of the payout will be displayed here once it is scheduled. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/payouts/payout-schedule/#pending-funds"})}}),buttonIcon:Y().createElement(_e.A,null)}))};var Ml=n(4015);const Fl=({amount:e,currency:t,baseCurrency:n})=>Y().createElement(Z.Tooltip,{text:(0,V.sprintf)((0,V.__)("Converted from %s","woocommerce-payments"),Mn(e,t,!1,n)),placement:"bottom"},Y().createElement("span",{className:"conversion-indicator","data-testid":"conversion-indicator",style:{height:"18px",width:"18px"}},Y().createElement(Ml.A,{size:18}))),Bl=({amount:e,currency:t,fromAmount:n,fromCurrency:o})=>{const a=Mn(e,t);return t===o?Y().createElement(Y().Fragment,null,a):Y().createElement("div",{className:"converted-amount"},Y().createElement(Fl,{amount:n,currency:o,baseCurrency:t}),a)};function zl(e,t){if(!t)return null;const n=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return-1===n?null:{suggestionBeforeMatch:(0,qt.decodeEntities)(e.substring(0,n)),suggestionMatch:(0,qt.decodeEntities)(e.substring(n,n+t.length)),suggestionAfterMatch:(0,qt.decodeEntities)(e.substring(n+t.length))}}const Ul={name:"transactions",className:"woocommerce-search__transactions-result",options(e){const t=e?{search_term:e}:{};return G()({path:(0,Q.addQueryArgs)("/wc/v3/payments/transactions/search",t)})},isDebounced:!0,getOptionIdentifier:e=>e.label,getOptionKeywords:e=>[e.label],getFreeTextOptions:e=>[{key:"all",label:Y().createElement("span",{key:"name",className:"woocommerce-search__result-name"},Oe({mixedString:(0,V.__)("All transactions with customer names or billing emails that include {{query /}}","woocommerce-payments"),components:{query:Y().createElement("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{label:e}}],getOptionLabel(e,t){const n=zl(e.label,t);return Y().createElement("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.label},null==n?void 0:n.suggestionBeforeMatch,Y().createElement("strong",{className:"components-form-token-field__suggestion-match"},null==n?void 0:n.suggestionMatch),null==n?void 0:n.suggestionAfterMatch)},getOptionCompletion:e=>({key:e.label,label:e.label})},$l=Object.entries(vl).map((([e,t])=>({label:t,value:e}))).filter((function(e){return null!=e})),Vl=("undefined"!=typeof wcpaySettings?wcpaySettings.accountLoans.loans:[]).map((e=>{const t=e.split("|");return{label:(0,V.sprintf)("ID: %s | %s",t[0],"active"===t[1]?(0,V.__)("In Progress","woocommerce-payments"):(0,V.__)("Paid in Full","woocommerce-payments")),value:t[0]}}),[]),Wl=Object.entries(bl).map((([e,t])=>({label:t,value:e}))),Hl=Object.entries(El).map((([e,t])=>({label:t,value:e}))),Yl=Object.entries(Sl).map((([e,t])=>({label:t,value:e}))),ql=Object.entries(wcSettings.countries).map((([e,t])=>({label:t,value:e})));var Gl,Ql;!function(e){e.AFFIRM="affirm",e.AFTERPAY_CLEARPAY="afterpay_clearpay",e.ALIPAY="alipay",e.AU_BECS_DEBIT="au_becs_debit",e.BANCONTACT="bancontact",e.CARD="card",e.CARD_PRESENT="card_present",e.EPS="eps",e.GIROPAY="giropay",e.GRABPAY="grabpay",e.IDEAL="ideal",e.KLARNA="klarna",e.LINK="link",e.MULTIBANCO="multibanco",e.P24="p24",e.SEPA_DEBIT="sepa_debit",e.SOFORT="sofort",e.WECHAT_PAY="wechat_pay"}(Gl||(Gl={})),function(e){e.AMEX="amex",e.CARTES_BANCAIRES="cartes_bancaires",e.DINERS="diners",e.DISCOVER="discover",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa"}(Ql||(Ql={}));const Zl={ach_credit_transfer:(0,V.__)("ACH Credit Transfer","woocommerce-payments"),ach_debit:(0,V.__)("ACH Debit","woocommerce-payments"),acss_debit:(0,V.__)("ACSS Debit","woocommerce-payments"),amex:(0,V.__)("American Express","woocommerce-payments"),card:(0,V.__)("Card Payment","woocommerce-payments"),card_present:(0,V.__)("In-Person Card Payment","woocommerce-payments"),cartes_bancaires:(0,V.__)("Cartes Bancaires","woocommerce-payments"),diners:(0,V.__)("Diners Club","woocommerce-payments"),discover:(0,V.__)("Discover","woocommerce-payments"),jcb:(0,V.__)("JCB","woocommerce-payments"),mastercard:(0,V.__)("Mastercard","woocommerce-payments"),stripe_account:(0,V.__)("Stripe Account","woocommerce-payments"),unionpay:(0,V.__)("Union Pay","woocommerce-payments"),visa:(0,V.__)("Visa","woocommerce-payments")},Kl=(e,t=(null===window||void 0===window?void 0:window.wooPaymentsPaymentMethodsConfig))=>{var n;return(null===(n=null==t?void 0:t[e])||void 0===n?void 0:n.title)||Zl[e]||e},Jl=({storeCurrencies:e,customerCurrencies:t,transactionSources:n})=>{const o=(0,H.useMemo)((()=>((e,t)=>{const n=(0,va.getSetting)("wcVersion"),o=parseFloat(n);return{title:o<7.8?(0,V.__)("Transactions match {{select /}} filters","woocommerce-payments"):(0,V.__)("Transactions match <select /> filters","woocommerce-payments"),filters:{date:{labels:{add:(0,V.__)("Date","woocommerce-payments"),remove:(0,V.__)("Remove transaction date filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction date filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Date{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Date</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction date","woocommerce-payments")},rules:[{value:"before",label:(0,V.__)("Before","woocommerce-payments")},{value:"after",label:(0,V.__)("After","woocommerce-payments")},{value:"between",label:(0,V.__)("Between","woocommerce-payments")}],input:{component:"Date"}},customer_currency:{labels:{add:(0,V.__)("Customer currency","woocommerce-payments"),remove:(0,V.__)("Remove transaction customer currency filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction customer currency filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Customer currency{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Customer currency</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a customer currency","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","transaction customer currency","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","transaction customer currency","woocommerce-payments")}],input:{component:"SelectControl",options:e}},source:{labels:{add:(0,V.__)("Payment method","woocommerce-payments"),remove:(0,V.__)("Remove payment method filter","woocommerce-payments"),rule:(0,V.__)("Select a payment method filter match","woocommerce-payments"),title:(0,V.__)("<title>Payment method</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a payment method","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","payment method","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","payment method","woocommerce-payments")}],input:{component:"SelectControl",options:t}},type:{labels:{add:(0,V.__)("Type","woocommerce-payments"),remove:(0,V.__)("Remove transaction type filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction type filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Type{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Type</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction type","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","transaction type","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","transaction type","woocommerce-payments")}],input:{component:"SelectControl",options:$l}},loan_id_is:{labels:{add:(0,V.__)("Loan","woocommerce-payments"),remove:(0,V.__)("Remove loan filter","woocommerce-payments"),rule:(0,V.__)("Select a loan","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Loan{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Loan</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a loan","woocommerce-payments")},input:{component:"SelectControl",type:"loans",options:Vl}},source_device:{labels:{add:(0,V.__)("Device Type","woocommerce-payments"),remove:(0,V.__)("Remove transaction device type filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction device type filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Device type{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Device type</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction device type","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","Source device","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","Source device","woocommerce-payments")}],input:{component:"SelectControl",options:Wl}},channel:{labels:{add:(0,V.__)("Sales channel","woocommerce-payments"),remove:(0,V.__)("Remove transaction sales channel filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction sales channel filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Sales channel{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Sales channel</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction sales channel","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","Sales channel","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","Sales channel","woocommerce-payments")}],input:{component:"SelectControl",options:Hl}},customer_country:{labels:{add:(0,V.__)("Customer Country","woocommerce-payments"),remove:(0,V.__)("Remove transaction customer country filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction customer country filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Customer country{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Customer country</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction customer country","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","Customer Country","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","Customer Country","woocommerce-payments")}],input:{component:"SelectControl",options:ql}},risk_level:{labels:{add:(0,V.__)("Risk Level","woocommerce-payments"),remove:(0,V.__)("Remove transaction Risk Level filter","woocommerce-payments"),rule:(0,V.__)("Select a transaction Risk Level filter match","woocommerce-payments"),title:o<7.8?(0,V.__)("{{title}}Risk Level{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Risk Level</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a transaction Risk Level","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","Risk Level","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","Risk Level","woocommerce-payments")}],input:{component:"SelectControl",options:Yl}}}}})(t.map((e=>({label:An(e),value:e}))),void 0===n?[]:n.map((e=>({label:Kl(e),value:e}))))),[t,n]),a=(0,H.useMemo)((()=>{return t=e.map((e=>({label:An(e),value:e}))),n=e.length>1,[{label:(0,V.__)("Deposit currency","woocommerce-payments"),param:"store_currency_is",staticParams:["paged","per_page","orderby","order","search","filter","type_is","type_is_not","type_is_in","date_before","date_after","date_between","source_device_is","source_device_is_not","channel_is","channel_is_not","customer_country_is","customer_country_is_not","risk_level_is","risk_level_is_not"],showFilters:()=>n,filters:[{label:(0,V.__)("All currencies","woocommerce-payments"),value:"---"},...t],defaultValue:"---"},{label:(0,V.__)("Show","woocommerce-payments"),param:"filter",staticParams:["paged","per_page","orderby","order","search","store_currency_is"],showFilters:()=>!0,filters:[{label:(0,V.__)("All transactions","woocommerce-payments"),value:"all"},{label:(0,V.__)("Advanced filters","woocommerce-payments"),value:"advanced"}]}];var t,n}),[e]);return Y().createElement("div",{className:"woocommerce-filters-transactions"},Y().createElement(X.ReportFilters,{key:null==t?void 0:t.length,filters:a,advancedFilters:o,showDatePicker:!1,path:"/payments/transactions",query:(0,Ni.getQuery)(),onAdvancedFilterAction:e=>{"filter"===e&&ce("page_view",{path:"payments_transactions",filter:"advanced"})}}))},Xl={alior_bank:"Alior Bank",bank_millennium:"Bank Millenium",bank_nowy_bfg_sa:"Bank Nowy BFG S.A.",bank_pekao_sa:"Bank PEKAO S.A",banki_spbdzielcze:"Banki SpBdzielcze",blik:"Blik via redirect",bnp_paribas:"BNP Paribas",boz:"BOZ",citi_handlowy:"CitiHandlowy",credit_agricole:"Credit Agricole",envelobank:"EnveloBank",etransfer_pocztowy24:"e-Transfer Poctowy24",getin_bank:"Getin Bank",ideabank:"IdeaBank",ing:"ING",inteligo:"inteligo",mbank_mtransfer:"mBank-mtransfer",nest_przelew:"Nest Przelew",noble_pay:"Noble Pay",pbac_z_ipko:"PBac z iPKO (PKO+BP)",plus_bank:"Plus Bank",santander_przelew24:"Santander-przelew24",tmobile_usbugi_bankowe:"T-Mobile Usbugi Bankowe",toyota_bank:"Toyota Bank",volkswagen_bank:"Volkswagen Bank"};const em=e=>{var t;if(!e.source_identifier)return Y().createElement(H.Fragment,null);switch(e.source){case"giropay":return Y().createElement(H.Fragment,null,"",e.source_identifier);case"p24":return Y().createElement(H.Fragment,null,"",null!==(t=Xl[e.source_identifier])&&void 0!==t?t:"");default:return Y().createElement(H.Fragment,null,""," ",e.source_identifier)}},tm=e=>{let t="";return"ios"===e.source_device?t=(0,V.__)("Tap to Pay on iPhone","woocommerce-payments"):"android"===e.source_device&&(t=(0,V.__)("Tap to Pay on Android","woocommerce-payments")),Y().createElement(Bt,{isVisible:!1,content:t},Y().createElement("span",{className:"woocommerce-taptopay__icon"}))},nm=e=>{var t,n,o,a,r,s,c;const{transactions:i,isLoading:l}=(({paged:e,per_page:t,orderby:n,order:o,match:a,date_before:r,date_after:s,date_between:c,type_is:i,type_is_not:l,type_is_in:m,source_device_is:d,source_device_is_not:u,channel_is:p,channel_is_not:_,customer_country_is:y,customer_country_is_not:h,risk_level_is:g,risk_level_is_not:w,store_currency_is:f,customer_currency_is:v,customer_currency_is_not:b,source_is:E,source_is_not:S,loan_id_is:k,search:N},x)=>(0,ln.useSelect)((C=>{const{getTransactions:T,getTransactionsError:O,isResolving:I}=C(yt),A={paged:Number.isNaN(parseInt(null!=e?e:"",10))?"1":e,perPage:Number.isNaN(parseInt(null!=t?t:"",10))?"25":t,orderby:n||"date",order:o||"desc",match:a,dateBefore:r,dateAfter:s,dateBetween:c&&c.sort(((e,t)=>ut()(e).diff(ut()(t)))),typeIs:i,typeIsNot:l,typeIsIn:m,sourceDeviceIs:d,sourceDeviceIsNot:u,storeCurrencyIs:f,customerCurrencyIs:v,customerCurrencyIsNot:b,sourceIs:E,sourceIsNot:S,channelIs:p,channelIsNot:_,customerCountryIs:y,customerCountryIsNot:h,riskLevelIs:g,riskLevelIsNot:w,loanIdIs:k,depositId:x,search:N};return{transactions:T(A),transactionsError:O(A),isLoading:I("getTransactions",[A])}}),[e,t,n,o,a,r,s,JSON.stringify(c),i,l,JSON.stringify(m),d,u,f,v,b,E,S,p,_,y,h,g,w,k,x,JSON.stringify(N)]))((0,Ni.getQuery)(),null!==(t=e.depositId)&&void 0!==t?t:""),{transactionsSummary:m,isLoading:d}=(({match:e,date_before:t,date_after:n,date_between:o,type_is:a,type_is_not:r,type_is_in:s,source_device_is:c,source_device_is_not:i,store_currency_is:l,customer_currency_is:m,customer_currency_is_not:d,source_is:u,source_is_not:p,channel_is:_,channel_is_not:y,customer_country_is:h,customer_country_is_not:g,risk_level_is:w,risk_level_is_not:f,loan_id_is:v,search:b},E)=>(0,ln.useSelect)((S=>{const{getTransactionsSummary:k,isResolving:N}=S(yt),x={match:e,dateBefore:t,dateAfter:n,dateBetween:o,typeIs:a,typeIsNot:r,typeIsIn:s,sourceDeviceIs:c,sourceDeviceIsNot:i,storeCurrencyIs:l,customerCurrencyIs:m,customerCurrencyIsNot:d,sourceIs:u,sourceIsNot:p,channelIs:_,channelIsNot:y,customerCountryIs:h,customerCountryIsNot:g,riskLevelIs:w,riskLevelIsNot:f,loanIdIs:v,depositId:E,search:b};return{transactionsSummary:k(x),isLoading:N("getTransactionsSummary",[x])}}),[e,t,n,JSON.stringify(o),a,r,JSON.stringify(s),c,i,l,m,d,u,p,_,y,h,g,w,f,v,E,JSON.stringify(b)]))((0,Ni.getQuery)(),null!==(n=e.depositId)&&void 0!==n?n:""),{requestReportExport:u,isExportInProgress:p}=Vi(),{createNotice:_}=(0,ln.useDispatch)("core/notices"),{onColumnsChange:y,columnsToDisplay:h}=Hi("wc_payments_transactions_hidden_columns",(g=!e.depositId,w=wcpaySettings.isSubscriptionsActive,[{key:"transaction_id",label:(0,V.__)("Transaction ID","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"date",label:(0,V.__)("Date / Time","woocommerce-payments"),screenReaderLabel:(0,V.__)("Date and time","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultOrder:"desc",cellClassName:"date-time",isSortable:!0,defaultSort:!0},{key:"type",label:(0,V.__)("Type","woocommerce-payments"),screenReaderLabel:(0,V.__)("Type","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"channel",label:(0,V.__)("Sales channel","woocommerce-payments"),screenReaderLabel:(0,V.__)("Sales channel","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"customer_currency",label:(0,V.__)("Paid Currency","woocommerce-payments"),screenReaderLabel:(0,V.__)("Customer Currency","woocommerce-payments"),isSortable:!0,visible:!1},{key:"customer_amount",label:(0,V.__)("Amount Paid","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount in Customer Currency","woocommerce-payments"),isNumeric:!0,isSortable:!0,visible:!1},{key:"currency",label:(0,V.__)("Payout Currency","woocommerce-payments"),screenReaderLabel:(0,V.__)("Payout Currency","woocommerce-payments"),isSortable:!0,visible:!1},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount in Payout Currency","woocommerce-payments"),isNumeric:!0,isSortable:!0},{key:"fees",label:(0,V.__)("Fees","woocommerce-payments"),screenReaderLabel:(0,V.__)("Fees","woocommerce-payments"),isNumeric:!0,isSortable:!0},{key:"net",label:(0,V.__)("Net","woocommerce-payments"),screenReaderLabel:(0,V.__)("Net","woocommerce-payments"),isNumeric:!0,required:!0,isSortable:!0},{key:"order",label:(0,V.__)("Order #","woocommerce-payments"),screenReaderLabel:(0,V.__)("Order number","woocommerce-payments"),required:!0},w&&{key:"subscriptions",label:(0,V.__)("Subscription #","woocommerce-payments"),screenReaderLabel:(0,V.__)("Subscription number","woocommerce-payments")},{key:"source",label:(0,V.__)("Payment Method","woocommerce-payments"),screenReaderLabel:(0,V.__)("Payment Method","woocommerce-payments"),cellClassName:"is-center-aligned"},{key:"customer_name",label:(0,V.__)("Customer","woocommerce-payments"),screenReaderLabel:(0,V.__)("Customer","woocommerce-payments"),isLeftAligned:!0},{key:"customer_email",label:(0,V.__)("Email","woocommerce-payments"),screenReaderLabel:(0,V.__)("Email","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"customer_country",label:(0,V.__)("Country","woocommerce-payments"),screenReaderLabel:(0,V.__)("Country","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"risk_level",label:(0,V.__)("Risk level","woocommerce-payments"),screenReaderLabel:(0,V.__)("Risk level","woocommerce-payments"),visible:!1,isLeftAligned:!0},g&&{key:"deposit_id",label:(0,V.__)("Payout ID","woocommerce-payments"),screenReaderLabel:(0,V.__)("Payout ID","woocommerce-payments"),cellClassName:"deposit",isLeftAligned:!0,visible:!1},g&&{key:"deposit",label:(0,V.__)("Payout date","woocommerce-payments"),screenReaderLabel:(0,V.__)("Payout date","woocommerce-payments"),cellClassName:"deposit",isLeftAligned:!0},g&&{key:"deposit_status",label:(0,V.__)("Payout status","woocommerce-payments"),visible:!1}].filter(Boolean)));var g,w;const f=m.count||0,v=i.map((e=>{var t,n,o;const a=Oi(e.payment_intent_id||e.charge_id,"transactions")+"&transaction_id="+e.transaction_id+"&transaction_type="+(e.metadata&&"card_reader_fee"===e.metadata.charge_type?e.metadata.charge_type:e.type),r="financing_payout"===e.type||"financing_paydown"===e.type&&""===e.charge_id?e=>e:e=>Y().createElement(Ai,{href:a},e),s=e.order?Y().createElement(pl,{order:e.order}):(0,V.__)("N/A","woocommerce-payments"),c=e.order&&e.order.subscriptions,i=wcpaySettings.isSubscriptionsActive&&c?c.map((e=>e.number)).join(", "):"",l=wcpaySettings.isSubscriptionsActive&&c?c.map(((e,t,n)=>[Y().createElement(pl,{key:t,order:e}),t!==n.length-1&&", "])):[],m=Y().createElement(fl,{risk:e.risk_level}),d=e.order&&e.order.customer_url?Y().createElement(X.Link,{href:null!==(t=e.order.customer_url)&&void 0!==t?t:""},e.customer_name):e.customer_name,u=e.order?Y().createElement(X.Link,{href:null!==(n=e.order.customer_url)&&void 0!==n?n:""},e.customer_email):e.customer_email,p=e.currency.toUpperCase(),_=e.metadata?e.metadata.charge_type:e.type,y=-1!==["financing_payout","financing_paydown"].indexOf(e.type),g="card_reader_fee"===_,w=!y&&Y().createElement(Pl,{depositId:e.deposit_id,dateAvailable:e.available_on}),f=e.deposit_status?Ci[e.deposit_status]:"",v=(null===(o=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===o?void 0:o.country)||"US",b={transaction_id:{value:e.transaction_id,display:r(e.transaction_id)},date:{value:e.date,display:r(nn(e.date,{includeTime:!0}))},channel:{value:Ll(e.channel),display:r(Y().createElement(H.Fragment,null,Ll(e.channel),e.source_device&&tm(e)))},type:{value:vl[_],display:r(vl[_]||xt(_))},source:{value:e.source,display:y||g?Y().createElement("span",{className:"payment-method__brand"},""):r(Y().createElement("span",{className:"payment-method-details-list-item"},Y().createElement(Bt,{isVisible:!1,content:Kl(e.source)},Y().createElement("span",{className:`payment-method__brand payment-method__brand--${e.source} account-country--${null==v?void 0:v.toLowerCase()}`,"aria-label":Kl(e.source)})),em(e)))},order:{value:e.order&&e.order.number,display:s},subscriptions:{value:i,display:l},customer_name:{value:e.customer_name,display:y||g?(0,V.__)("N/A","woocommerce-payments"):d},customer_email:{value:e.customer_email,display:y||g?(0,V.__)("N/A","woocommerce-payments"):u},customer_country:{value:e.customer_country,display:r(e.customer_country)},customer_currency:{value:e.customer_currency.toUpperCase(),display:r(e.customer_currency.toUpperCase())},customer_amount:{value:Dn(e.customer_amount,e.customer_currency),display:r(jn(e.customer_amount,e.customer_currency))},currency:{value:e.currency.toUpperCase(),display:r(e.currency.toUpperCase())},amount:(()=>{const t=e.metadata?0:e.amount,n=e.customer_amount?e.customer_amount:0;return{value:Dn(t,p),display:r(Y().createElement(Bl,{amount:t,currency:p,fromAmount:n,fromCurrency:e.customer_currency.toUpperCase()}))}})(),fees:(()=>{const t=e.metadata&&"card_reader_fee"===e.metadata.charge_type;return{value:Dn(t?e.amount:-1*e.fees,p),display:r(jn(t?e.amount:-1*e.fees,p))}})(),net:{value:Dn(e.net,p),display:r(Mn(e.net,p))},risk_level:{value:wl(e.risk_level),display:r(m)},deposit_id:{value:e.deposit_id,display:e.deposit_id},deposit:{value:e.available_on,display:w},deposit_status:{value:f,display:f}};return h.map((({key:e})=>b[e]||{display:null}))})),b=(0,Ni.getQuery)().search&&(null===(o=(0,Ni.getQuery)().search)||void 0===o?void 0:o.map((e=>({key:e,label:e}))));let E=wcpaySettings.isSubscriptionsActive?(0,V.__)("Search by order number, subscription number, customer name, or billing email","woocommerce-payments"):(0,V.__)("Search by order number, customer name, or billing email","woocommerce-payments");const S=(0,V.__)("Transactions","woocommerce-payments"),k=!!v.length,{path:N}=(0,Ni.getQuery)();wcpaySettings.featureFlags.customSearch||(E=(0,V.__)("Search by customer name","woocommerce-payments"));const x="string"==typeof(0,Ni.getQuery)().store_currency_is,C=2>(m.store_currencies||[]).length;let T;void 0!==m.count&&void 0!==m.total&&!1===d&&(T=[{label:(0,V._n)("transaction","transactions",m.count,"woocommerce-payments"),value:`${Tt(m.count)}`}],m.count>0&&(C||x)&&T.push({label:(0,V.__)("total","woocommerce-payments"),value:`${Mn(m.total,m.currency)}`},{label:(0,V.__)("fees","woocommerce-payments"),value:`${jn(null!==(a=m.fees)&&void 0!==a?a:0,m.currency)}`},{label:(0,V.__)("net","woocommerce-payments"),value:`${Mn(null!==(r=m.net)&&void 0!==r?r:0,m.currency)}`}));const O=!e.depositId,I=m.store_currencies||(x?[null!==(s=(0,Ni.getQuery)().store_currency_is)&&void 0!==s?s:""]:[]),A=m.customer_currencies||[],R=m.sources||[];return Y().createElement(ge,null,O&&Y().createElement(Jl,{storeCurrencies:I,customerCurrencies:A,transactionSources:R}),Y().createElement(X.TableCard,{className:"transactions-list woocommerce-report-table has-search",title:S,isLoading:l,rowsPerPage:parseInt(null!==(c=(0,Ni.getQuery)().per_page)&&void 0!==c?c:"",10)||25,totalRows:f,headers:h,rows:v,summary:T,query:(0,Ni.getQuery)(),onQueryChange:Ni.onQueryChange,onColumnsChange:y,actions:[Y().createElement(X.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:e=>{(0,Ni.updateQueryString)({search:e.length?(0,lt.uniq)(e.map((e=>e.label))):void 0})},placeholder:E,selected:b,showClearButton:!0,type:wcpaySettings.featureFlags.customSearch?"custom":"customers",autocompleter:Ul}),k&&Y().createElement(Fi,{key:"download",isDisabled:l||p,isBusy:p,onClick:()=>{return t=void 0,n=void 0,a=function*(){ce("wcpay_csv_export_click",{row_type:"transactions",source:N,exported_row_count:m.count});const t=wcSettings.locale.userLocale,n=wcpaySettings.currentUserEmail,o=e.depositId,{date_after:a,date_before:r,date_between:s,match:c,search:i,type_is:l,type_is_not:d,source_device_is:p,source_device_is_not:y,channel_is:h,channel_is_not:g,customer_country_is:w,customer_country_is_not:v,risk_level_is:b,risk_level_is_not:E,customer_currency_is:S,customer_currency_is_not:k,source_is:x,source_is_not:C}=(0,Ni.getQuery)(),T=Do({userEmail:n,locale:t,dateAfter:a,dateBefore:r,dateBetween:s,match:c,search:i,typeIs:l,typeIsNot:d,sourceDeviceIs:p,sourceDeviceIsNot:y,customerCurrencyIs:S,customerCurrencyIsNot:k,sourceIs:x,sourceIsNot:C,channelIs:h,channelIsNot:g,customerCountryIs:w,customerCountryIsNot:v,riskLevelIs:b,riskLevelIsNot:E,depositId:o}),O=!!(a||r||s||x||C||i||l||d||h||g||w||v||b||E||p||y),I=(0,V.sprintf)((0,V.__)("You are about to export %d transactions. If you'd like to reduce the size of your export, you can use one or more filters. Would you like to continue?","woocommerce-payments"),f);(O||f<1e4||window.confirm(I))&&(u({exportRequestURL:T,exportFileAvailabilityEndpoint:Lo,userEmail:n}),_("success",(0,V.sprintf)((0,V.__)("Were processing your export.  The file will download automatically and be emailed to %s.","woocommerce-payments"),n)))},new((o=void 0)||(o=Promise))((function(e,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function c(e){try{i(a.throw(e))}catch(e){r(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,c)}i((a=a.apply(t,n||[])).next())}));var t,n,o,a}})]}))},om=({textToCopy:e,label:t})=>{const[n,o]=(0,H.useState)(!1);return Y().createElement("button",{type:"button",className:ue("woopayments-copy-button",{"state--copied":n}),"aria-label":t,title:(0,V.__)("Copy to clipboard","woocommerce-payments"),onClick:()=>{navigator.clipboard.writeText(e),o(!0)},onAnimationEnd:()=>o(!1)},Y().createElement("i",null))},am=({deposit:e})=>{let t=Ci;return"withdrawal"===e.type&&(t=Object.assign(Object.assign({},t),{paid:t.deducted})),Y().createElement(X.OrderStatus,{order:{status:e.status},orderStatusMap:t})},rm=({label:e,value:t,valueClass:n,detail:o})=>Y().createElement("li",{className:"woocommerce-summary__item-container"},Y().createElement("div",{className:"woocommerce-summary__item"},Y().createElement("div",{className:"woocommerce-summary__item-label"},e),Y().createElement("div",{className:"woocommerce-summary__item-data"},Y().createElement("div",{className:ue("woocommerce-summary__item-value",n)},t)),o&&Y().createElement("div",{className:"wcpay-summary__item-detail"},o))),sm=({deposit:e})=>{let t=(0,V.__)("Payout date","woocommerce-payments");return e.automatic||(t=(0,V.__)("Instant payout date","woocommerce-payments")),"withdrawal"===e.type&&(t=(0,V.__)("Withdrawal date","woocommerce-payments")),Y().createElement(rm,{key:"depositDate",label:`${t}: `+nn(e.date),value:Y().createElement(am,{deposit:e})})},cm=({deposit:e})=>{if(!e)return Y().createElement(ye,{icon:!0,status:"error",isDismissible:!1},(0,V.__)("The deposit you are looking for cannot be found.","woocommerce-payments"));const t="withdrawal"===e.type;return Y().createElement("div",{className:"wcpay-deposit-overview"},e.automatic?Y().createElement(Z.Card,{className:"wcpay-deposit-automatic"},Y().createElement("ul",null,Y().createElement(sm,{deposit:e}),Y().createElement("li",{className:"wcpay-deposit-amount"},Mn(e.amount,e.currency)))):Y().createElement(X.SummaryList,{label:t?(0,V.__)("Withdrawal overview","woocommerce-payments"):(0,V.__)("Payout overview","woocommerce-payments")},(()=>[Y().createElement(sm,{key:"dateItem",deposit:e}),Y().createElement(rm,{key:"depositAmount",label:t?(0,V.__)("Withdrawal amount","woocommerce-payments"):(0,V.__)("Payout amount","woocommerce-payments"),value:Mn(e.amount+e.fee,e.currency)}),Y().createElement(rm,{key:"depositFees",label:(0,V.sprintf)((0,V.__)("%s service fee","woocommerce-payments"),`${e.fee_percentage}%`),value:jn(e.fee,e.currency),valueClass:0<e.fee&&"wcpay-deposit-fee"}),Y().createElement(rm,{key:"netDepositAmount",label:t?(0,V.__)("Net withdrawal amount","woocommerce-payments"):(0,V.__)("Net payout amount","woocommerce-payments"),value:Mn(e.amount,e.currency),valueClass:"wcpay-deposit-net"})])),"failed"===e.status&&Y().createElement(xe,{status:"error",isDismissible:!1,key:"payout-failure-notice"},Y().createElement("strong",null,(0,V.__)("Failure reason: ","woocommerce-payments")),Ti[e.failure_code]||e.failure_message||(0,V.__)("Unknown","woocommerce-payments")),Y().createElement(Z.Card,null,Y().createElement(Z.CardHeader,null,Y().createElement(Z.__experimentalText,{size:16,weight:600},t?(0,V.__)("Withdrawal details","woocommerce-payments"):(0,V.__)("Payout details","woocommerce-payments"))),Y().createElement(Z.CardBody,null,Y().createElement("div",{className:"woopayments-payout-details-header"},Y().createElement("div",{className:"woopayments-payout-details-header__item"},Y().createElement("h2",null,(0,V.__)("Bank account","woocommerce-payments")),Y().createElement("div",{className:"woopayments-payout-details-header__value"},e.bankAccount)),Y().createElement("div",{className:"woopayments-payout-details-header__item"},Y().createElement("h2",null,(0,V.__)("Bank reference ID","woocommerce-payments")),Y().createElement("div",{className:"woopayments-payout-details-header__value"},e.bank_reference_key?Y().createElement(Y().Fragment,null,Y().createElement("span",{className:"woopayments-payout-details-header__bank-reference-id"},e.bank_reference_key),Y().createElement(om,{textToCopy:e.bank_reference_key,label:(0,V.__)("Copy bank reference ID to clipboard","woocommerce-payments")})):Y().createElement("div",{className:"woopayments-payout-details-header__value"},(0,V.__)("Not available","woocommerce-payments"))))))))},im=({query:{id:e}})=>{const{deposit:t,isLoading:n}=(o=e,(0,ln.useSelect)((e=>{const{getDeposit:t,isResolving:n,hasFinishedResolution:a}=e(yt);return{deposit:t(o),isLoading:!a("getDeposit",[o])||n("getDeposit",[o])}}),[o]));var o;const a=!n&&t&&!t.automatic;return Y().createElement(ge,null,Y().createElement(ol,null),Y().createElement(tn,{currentPage:"deposits",isDetailsView:!0}),Y().createElement(he,null,n?Y().createElement(X.SummaryListPlaceholder,{numberOfItems:2}):Y().createElement(cm,{deposit:t})),t&&Y().createElement(he,null,a?Y().createElement(Z.Card,null,Y().createElement(Z.CardHeader,null,Y().createElement(Z.__experimentalText,{size:16,weight:600,as:"h2"},(0,V.__)("Payout transactions","woocommerce-payments"))),Y().createElement(Z.CardBody,{className:"wcpay-deposit-overview--instant__transactions-list-message"},Oe({mixedString:(0,V.__)("We're unable to show transaction history on instant payouts. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/payouts/instant-payouts/#transactions"})}}))):Y().createElement(nm,{depositId:e})))},lm=({orderId:e,children:t,paymentIntentId:n,buttonIsPrimary:o=!1,buttonIsSmall:a=!0,onClick:r=()=>{}})=>{const{isLoading:s,isRequesting:c,doCaptureAuthorization:i}=ri(n,e),[l,m]=(0,H.useState)(!1);return Y().createElement(Z.Button,{variant:o?"primary":"secondary",isSmall:a,onClick:()=>{r(),m(!0),i()},isBusy:s&&l,disabled:s&&l||c,__next40pxDefaultSize:!0},t||(0,V.__)("Capture","woocommerce-payments"))},mm=()=>{var e;const t=[{key:"created",label:(0,V.__)("Authorized on","woocommerce-payments"),screenReaderLabel:(0,V.__)("Authorized on","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultOrder:"asc",cellClassName:"date-time",isSortable:!0,defaultSort:!0},{key:"capture_by",label:(0,V.__)("Capture by","woocommerce-payments"),screenReaderLabel:(0,V.__)("Capture by","woocommerce-payments"),required:!0,isLeftAligned:!0,cellClassName:"date-time",isSortable:!0},{key:"order",label:(0,V.__)("Order","woocommerce-payments"),screenReaderLabel:(0,V.__)("Order number","woocommerce-payments"),required:!0},{key:"risk_level",label:(0,V.__)("Risk level","woocommerce-payments"),screenReaderLabel:(0,V.__)("Risk level of transaction","woocommerce-payments"),isLeftAligned:!0},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount","woocommerce-payments"),isNumeric:!0,isSortable:!0},{key:"customer_email",label:(0,V.__)("Email","woocommerce-payments"),screenReaderLabel:(0,V.__)("Email","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"customer_country",label:(0,V.__)("Country","woocommerce-payments"),screenReaderLabel:(0,V.__)("Country","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"action",label:(0,V.__)("Action","woocommerce-payments"),screenReaderLabel:(0,V.__)("Action","woocommerce-payments"),visible:!0,required:!0}].filter(Boolean),{columnsToDisplay:n,onColumnsChange:o}=Hi("wc_payments_transactions_uncaptured_hidden_columns",t),{authorizationsSummary:a,isLoading:r}=ai((0,Ni.getQuery)()),{authorizations:s,isLoading:c}=(({paged:e,per_page:t,orderby:n,order:o})=>(0,ln.useSelect)((a=>{const{getAuthorizations:r,getAuthorizationsError:s,isResolving:c}=a(yt),i=Number.isNaN(parseInt(null!=e?e:"",10)),l=Number.isNaN(parseInt(null!=t?t:"",10)),m={paged:i?"1":e,per_page:l?"25":t,orderby:n||"created",order:o||"asc"};return{authorizations:r(m),authorizationsError:s(m),isLoading:c("getAuthorizations",[m])}}),[e,t,n,o]))((0,Ni.getQuery)()),i=s.map((e=>{const t=Y().createElement(fl,{risk:e.risk_level}),o=Oi(e.payment_intent_id,"transactions"),a=e=>Y().createElement(Ai,{href:o},e),r={authorization_id:{value:e.payment_intent_id,display:e.payment_intent_id},created:{value:nn(e.created,{includeTime:!0}),display:a(nn(e.created,{includeTime:!0}))},capture_by:{value:nn(ut().utc(e.created).add(7,"d").toISOString(),{includeTime:!0}),display:a(nn(ut().utc(e.created).add(7,"d").toISOString(),{includeTime:!0}))},order:{value:e.order_id,display:a(`#${e.order_id} ${e.customer_name}`)},risk_level:{value:wl(e.risk_level),display:a(t)},amount:{value:e.amount,display:a(Mn(e.amount,e.currency))},customer_email:{value:e.customer_email,display:a(e.customer_email)},customer_country:{value:e.customer_country,display:a(e.customer_country)},action:{display:Y().createElement(lm,{orderId:e.order_id,paymentIntentId:e.payment_intent_id,buttonIsSmall:!1,onClick:()=>{ce("payments_transactions_uncaptured_list_capture_charge_button_click",{payment_intent_id:e.payment_intent_id})}})}};return n.map((({key:e})=>r[e]||{display:null}))}));let l;const m=void 0!==a.count&&void 0!==a.total&&!1===r,d=a.count||0;return m&&(l=[{label:(0,V.__)("authorization(s)","woocommerce-payments"),value:String(a.count)}],a.count&&a.count>0&&a.all_currencies&&1===a.all_currencies.length&&l.push({label:(0,V.__)("total","woocommerce-payments"),value:`${Mn(a.total,a.currency)}`})),(0,H.useEffect)((()=>{ce("page_view",{path:"payments_transactions_uncaptured"})}),[]),Y().createElement(ge,null,Y().createElement(X.TableCard,{className:"authorizations-list woocommerce-report-table has-search",title:(0,V.__)("Uncaptured transactions","woocommerce-payments"),isLoading:c||r,rowsPerPage:parseInt(null!==(e=(0,Ni.getQuery)().per_page)&&void 0!==e?e:"",10)||25,totalRows:d,headers:n,rows:i,summary:l,query:(0,Ni.getQuery)(),onQueryChange:Ni.onQueryChange,onColumnsChange:o}))},dm=window.wc.csvExport,um={allow:{type:"success",message:(0,V.__)("Succeeded","woocommerce-payments")},review:{type:"alert",message:(0,V.__)("Needs review","woocommerce-payments")},block:{type:"danger",message:(0,V.__)("Payment blocked","woocommerce-payments")}},pm=({status:e})=>{const t=um[e]||{},n=t.message||xt(e),o=t.type||"light";return Y().createElement(yl,{type:o},n)},_m={display:null},ym=(e,t)=>{const n=(e=>{const t=Oi(e.payment_intent.id||e.order_id.toString(),"transactions"),n=nn(e.created,{includeTime:!0}),o=e=>Y().createElement(Ai,{href:t},e);return{status:{value:e.status,display:Y().createElement(pm,{status:"block"})},created:{value:n,display:o(n)},amount:{value:e.amount,display:o(Mn(e.amount,e.currency))},customer:{value:e.customer_name,display:o(e.customer_name)}}})(e);return t.map((({key:e})=>n[e]||_m))};const hm=e=>({name:"transactions",className:"woocommerce-search__transactions-result",options(t){return n=this,o=void 0,r=function*(){const n=t?{search_term:t}:{},o=yield G()({path:(0,Q.addQueryArgs)("/wc/v3/payments/transactions/fraud-outcomes/search",Object.assign({status:e},n))});return t?o.filter((({label:e})=>-1!==e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase()))):o},new((a=void 0)||(a=Promise))((function(e,t){function s(e){try{i(r.next(e))}catch(e){t(e)}}function c(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(s,c)}i((r=r.apply(n,o||[])).next())}));var n,o,a,r},isDebounced:!0,getOptionIdentifier:e=>e.label,getOptionKeywords:e=>[e.label],getOptionLabel(e,t){const n=zl(e.label,t);return Y().createElement("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.label},null==n?void 0:n.suggestionBeforeMatch,Y().createElement("strong",{className:"components-form-token-field__suggestion-match"},null==n?void 0:n.suggestionMatch),null==n?void 0:n.suggestionAfterMatch)},getOptionCompletion:e=>({key:e.label,label:e.label})});const gm=()=>{var e,t,n;const[o,a]=(0,H.useState)(!1),{createNotice:r}=(0,ln.useDispatch)("core/notices"),s=(0,Ni.getQuery)(),c=[{key:"created",label:(0,V.__)("Date / Time","woocommerce-payments"),screenReaderLabel:(0,V.__)("Date / Time","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultOrder:"desc",cellClassName:"date-time",isSortable:!0,defaultSort:!0},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount","woocommerce-payments"),isNumeric:!0,isSortable:!0},{key:"customer",label:(0,V.__)("Customer","woocommerce-payments"),screenReaderLabel:(0,V.__)("Customer","woocommerce-payments"),visible:!0,isLeftAligned:!0},{key:"status",label:(0,V.__)("Status","woocommerce-payments"),screenReaderLabel:(0,V.__)("Status","woocommerce-payments"),visible:!0,isLeftAligned:!0}].filter(Boolean),{columnsToDisplay:i,onColumnsChange:l}=Hi("wc_payments_transactions_blocked_hidden_columns",c),{isLoading:m,transactions:d}=((e,{paged:t,per_page:n,orderby:o,order:a,search:r},s)=>(0,ln.useSelect)((c=>{const{getFraudOutcomeTransactions:i,getFraudOutcomeTransactionsError:l,isResolving:m}=c(yt),d={paged:Number.isNaN(parseInt(null!=t?t:"",10))?"1":t,perPage:Number.isNaN(parseInt(null!=n?n:"",10))?"25":n,orderby:o||"date",order:a||"desc",search:r,additionalStatus:s};return{transactions:i(e,d),transactionsError:l(e,d),isLoading:m("getFraudOutcomeTransactions",[e,d])}}),[t,n,o,a,JSON.stringify(r)]))("block",s),{transactionsSummary:u,isLoading:p}=((e,{search:t},n)=>(0,ln.useSelect)((o=>{const{getFraudOutcomeTransactionsSummary:a,getFraudOutcomeTransactionsSummaryError:r,isResolving:s}=o(yt),c={search:t,additionalStatus:n};return{transactionsSummary:a(e,c),transactionsSummaryError:r(e,c),isLoading:s("getFraudOutcomeTransactionsSummary",[e,c])}}),[e,JSON.stringify(t)]))("block",s),_=d.map((e=>ym(e,i)));let y;const h=(0,V.__)("Blocked transactions","woocommerce-payments"),g=void 0!==u.count&&void 0!==u.total&&!1===p,w=u.count||0;g&&(y=[{label:(0,V.__)("transactions(s)","woocommerce-payments"),value:String(w)}],w>0&&1===(null===(e=u.currencies)||void 0===e?void 0:e.length)&&y.push({label:(0,V.__)("blocked","woocommerce-payments"),value:`${Mn(u.total,u.currencies[0])}`})),(0,H.useEffect)((()=>{ce("page_view",{path:"payments_transactions_blocked"})}),[]);const f=(0,Ni.getQuery)().search&&(null===(t=(0,Ni.getQuery)().search)||void 0===t?void 0:t.map((e=>({key:e,label:e})))),v=(0,V.__)("Search by order number or customer name","woocommerce-payments"),b=!!_.length;return Y().createElement(ge,null,Y().createElement(X.TableCard,{className:"blocked-transactions-list woocommerce-report-table has-search",title:h,isLoading:m,rowsPerPage:parseInt(null!==(n=s.per_page)&&void 0!==n?n:"",10)||25,totalRows:w,headers:i,rows:_,summary:y,query:s,onQueryChange:Ni.onQueryChange,onColumnsChange:l,actions:[Y().createElement(X.Search,{inlineTags:!0,key:"search",onChange:e=>{(0,Ni.updateQueryString)({search:e.length?(0,lt.uniq)(e.map((e=>e.key||e.label))):void 0})},placeholder:v,selected:f,showClearButton:!0,type:wcpaySettings.featureFlags.customSearch?"custom":"customers",autocompleter:hm("block")}),b&&Y().createElement(Fi,{key:"download",isDisabled:m||o,onClick:()=>{return e=void 0,t=void 0,o=function*(){a(!0);const e=(0,Ni.getQuery)(),{page:t,path:n}=e,o=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["page","path"]);try{const{data:e}=yield G()({path:Fo("block",Object.assign(Object.assign({},o),{additionalStatus:"review"})),method:"GET"}),t=e.map((e=>ym(e,i)));(0,dm.downloadCSVFile)((0,dm.generateCSVFileName)(h,o),(0,dm.generateCSVDataFromTable)(i,t)),ce("wcpay_fraud_outcome_transactions_download",{exported_transactions:_.length,total_transactions:u.count})}catch(e){r("error",(0,V.__)("There was a problem generating your export.","woocommerce-payments"))}a(!1)},new((n=void 0)||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}));var e,t,n,o}})]}))},wm=()=>{var e,t;const n=null!==(e=(0,Ni.getQuery)().tab)&&void 0!==e?e:null,o={"transactions-page":Y().createElement(Y().Fragment,null,Y().createElement(nm,null)),"uncaptured-page":Y().createElement(Y().Fragment,null,Y().createElement(mm,null)),"blocked-page":Y().createElement(Y().Fragment,null,Y().createElement(gm,null))},[a]=(()=>{const{updateIsManualCaptureEnabled:e}=(0,ln.useDispatch)(yt);return[(0,ln.useSelect)((e=>e(yt).getIsManualCaptureEnabled())),e]})(),{isLoading:r}=$s(),{authorizationsSummary:s}=ai({}),c=!r&&a||s.total&&s.total>0,i=[{name:"transactions-page",title:(0,V.__)("Transactions","woocommerce-payments"),className:"transactions-list"},{name:"uncaptured-page",title:(0,V.sprintf)((0,V.__)("Uncaptured (%1$s)","woocommerce-payments"),null!==(t=s.count)&&void 0!==t?t:"..."),className:"authorizations-list"},{name:"blocked-page",title:(0,V.__)("Blocked","woocommerce-payments"),className:"blocked-list"}].filter((e=>"uncaptured-page"!==e.name||c));return Y().createElement(ge,{className:"wcpay-transactions-page"},Y().createElement(ol,null),Y().createElement(tn,{currentPage:"transactions"}),Y().createElement(Z.TabPanel,{activeClass:"active-tab",onSelect:e=>{(0,Ni.updateQueryString)({paged:"1",per_page:"25",order:"",orderby:"",tab:e},"/payments/transactions")},initialTabName:n||"transactions-page",tabs:i},(e=>o[e.name]||o["transactions-page"])),Y().createElement(he,null,Y().createElement(il,null)))},fm=()=>Y().createElement(xn.Provider,{value:window.wcpaySettings},Y().createElement(wm,null)),vm=e=>{var t;const n=e.readers,o=e.isLoading,a=[{key:"reader_id",label:(0,V.__)("Reader id","woocommerce-payments"),visible:!0,isLeftAligned:!0},{key:"status",label:(0,V.__)("Status","woocommerce-payments"),visible:!0,isLeftAligned:!0},{key:"count",label:(0,V.__)("Transactions","woocommerce-payments"),visible:!0,isLeftAligned:!0},{key:"fee",label:(0,V.__)("Fee","woocommerce-payments"),visible:!0,isLeftAligned:!0}],r=n.length>0?n.map((e=>[{value:e.reader_id,display:e.reader_id},{value:e.status,display:e.status},{value:e.count,display:e.count},{value:e.fee?Dn(e.fee.amount,e.fee.currency):0,display:e.fee?Mn(e.fee.amount,e.fee.currency):0}])):[],s=!!r.length;return(0,ve.jsxs)(ge,{maxWidth:1032,className:"wcpay-payment-details",children:[(0,ve.jsx)(tn,{currentPage:"payments",isDetailsView:!0}),(0,ve.jsx)(X.TableCard,{className:"transactions-list woocommerce-report-table has-search",title:(0,V.__)("Card readers","woocommerce-payments"),isLoading:o,rowsPerPage:parseInt(null!==(t=(0,Ni.getQuery)().per_page)&&void 0!==t?t:"",10)||25,totalRows:r.length,headers:a,rows:r,actions:[s&&(0,ve.jsx)(Fi,{isDisabled:o,onClick:()=>{const{page:e,path:t,...n}=(0,Ni.getQuery)();(0,dm.downloadCSVFile)((0,dm.generateCSVFileName)("Card Readers",n),(0,dm.generateCSVDataFromTable)(a,r))}},"download")]})]})},bm=e=>{const{readers:t,chargeError:n,isLoading:o}=(a=e.chargeId,r=e.transactionId,(0,ln.useSelect)((e=>{const{getCardReaderStats:t,getCardReaderStatsError:n,isResolving:o}=e(yt);return{readers:t(a,r),chargeError:n(a),isLoading:o("getCardReaderStats",[a,r])}}),[a,r]));var a,r;return!o&&n instanceof Error?(0,ve.jsxs)(ge,{maxWidth:1032,className:"wcpay-payment-details",children:[(0,ve.jsx)(tn,{currentPage:"payments",isDetailsView:!0}),(0,ve.jsx)(Z.Card,{children:(0,ve.jsx)(Z.CardBody,{children:(0,V.__)("Readers details not loaded","woocommerce-payments")})})]}):(0,ve.jsx)(vm,{readers:t,isLoading:o})},Em=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Sm=({children:e,actions:t})=>Y().createElement(Z.CardFooter,{className:"card-notice"},Y().createElement("div",{className:"card-notice__section"},Y().createElement("div",{className:"card-notice__text"},e),Y().createElement("div",{className:"card-notice__button"},t)));function km(e){return!!e}const Nm={warning_needs_response:{type:"warning",message:(0,V.__)("Inquiry: Response needed","woocommerce-payments")},warning_under_review:{type:"primary",message:(0,V.__)("Inquiry: Under review","woocommerce-payments")},warning_closed:{type:"light",message:(0,V.__)("Inquiry: Closed","woocommerce-payments")},needs_response:{type:"warning",message:(0,V.__)("Response needed","woocommerce-payments")},under_review:{type:"primary",message:(0,V.__)("Under review","woocommerce-payments")},charge_refunded:{type:"light",message:(0,V.__)("Charge refunded","woocommerce-payments")},won:{type:"success",message:(0,V.__)("Won","woocommerce-payments")},lost:{type:"light",message:(0,V.__)("Lost","woocommerce-payments")}},xm=Object.entries(Nm).reduce(((e,[t,n])=>(e["disputed_"+t]={type:n.type,message:t.startsWith("warning_")?n.message:(0,V.sprintf)((0,V.__)("Disputed: %s","woocommerce-payments"),n.message)},e)),{}),Cm=Object.assign({refunded_partial:{type:"light",message:(0,V.__)("Partial refund","woocommerce-payments")},refunded_full:{type:"light",message:(0,V.__)("Refunded","woocommerce-payments")},paid:{type:"success",message:(0,V.__)("Paid","woocommerce-payments")},authorized:{type:"primary",message:(0,V.__)("Payment authorized","woocommerce-payments")},refund_failed:{type:"alert",message:(0,V.__)("Refund failure","woocommerce-payments")},failed:{type:"alert",message:(0,V.__)("Payment failed","woocommerce-payments")},blocked:{type:"alert",message:(0,V.__)("Payment blocked","woocommerce-payments")},fraud_outcome_review:{type:"warning",message:(0,V.__)("Needs review","woocommerce-payments")},fraud_outcome_block:{type:"alert",message:(0,V.__)("Payment blocked","woocommerce-payments")}},xm),Tm=({status:e,className:t})=>{const n=Cm[e]||{},o=n.message||xt(e),a=n.type||"light";return Y().createElement(Bi,{className:t,message:o,type:a})},Om=({payment:e})=>{var t;const n=e?e[e.type]:null;if(!(n||e&&"link"===e.type))return Y().createElement("span",null,"");let o=e.type;n&&n.brand&&(o=n.brand),n&&n.network&&(o=n.network);const a=(e=>{var t;const n=e[e.type];switch(e.type){case"card":case"au_becs_debit":case"sepa_debit":case"card_present":case"interac_present":return Y().createElement(H.Fragment,null,"",n.last4);case"p24":return Y().createElement(H.Fragment,null,null!==(t=Xl[n.bank])&&void 0!==t?t:"");case"giropay":return Y().createElement(H.Fragment,null,n.bank_code);case"bancontact":case"ideal":case"eps":case"sofort":return Y().createElement(H.Fragment,null,"",n.iban_last4);default:return Y().createElement(H.Fragment,null)}})(e),r=(null===(t=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===t?void 0:t.country)||"US";return Y().createElement("span",{className:"payment-method-details"},Y().createElement(Bt,{isVisible:!1,content:Kl(o),className:"payment-method-details__brand-tooltip"},Y().createElement("span",{className:`payment-method__brand payment-method__brand--${o} account-country--${r.toLowerCase()}`,"aria-label":Kl(o)})),a)},Im=({items:e})=>Y().createElement(X.List,{className:"woocommerce-list--horizontal",items:e}),Am=({isLoading:e,display:t,placeholder:n,value:o,children:a})=>e?Y().createElement("span",{className:t?`is-loadable-placeholder is-${t}`:"is-loadable-placeholder","aria-busy":"true"},void 0===n?a||o:n):Y().createElement(Y().Fragment,null,a||o),Rm=e=>{const t=Y().createElement("p",{style:{lineHeight:e.numLines}},"Block placeholder");return Y().createElement(Am,Object.assign({},e,{placeholder:t,display:"block"}))},Lm=Am,Dm=e=>{var t,n,o,a;const r=(null===(t=e.billing_details)||void 0===t?void 0:t.name)||(null===(n=e.order_details)||void 0===n?void 0:n.customer_name)||null;if(r){const t=(null===(o=e.billing_details)||void 0===o?void 0:o.email)||(null===(a=e.order_details)||void 0===a?void 0:a.customer_email)||null,n=Et({page:"wc-admin",path:"/payments/transactions",search:[t?`${r} (${t})`:r]});return Y().createElement(X.Link,{href:n,className:e.className},r)}return Y().createElement(Y().Fragment,null,"")},jm=e=>ka.includes(e),Pm=e=>e.startsWith("warning"),Mm=(e,t)=>{const n=(e=>{const t=e.balance_transactions.find((e=>"dispute"===e.reporting_category));if(!e.balance_transactions.find((e=>"dispute_reversal"===e.reporting_category)))return t})(e);if(n)return t?Mn(n.fee,n.currency):jn(n.fee,n.currency)},Fm=({status:e,prefixDisputeType:t,className:n})=>{const o=Nm[e]||{};let a=o.message||xt(e);t&&!e.startsWith("warning")&&(a=(0,V.sprintf)((0,V.__)("Disputed: %s","woocommerce-payments"),a));const r=jm(e);let s=o.type||"light";return r&&(s="alert"),Y().createElement(Bi,{className:n,message:a,type:s})},Bm=({orderId:e,children:t,paymentIntentId:n,isDestructive:o=!0,isSmall:a=!1,onClick:r=()=>{}})=>{const{doCancelAuthorization:s,isLoading:c,isRequesting:i}=ri(n,e),[l,m]=(0,H.useState)(!1);return Y().createElement(Z.Button,{isDestructive:o,isSmall:a,onClick:()=>{r(),m(!0),s()},isBusy:c&&l,disabled:c&&l||i,__next40pxDefaultSize:!0},t||(0,V.__)("Cancel","woocommerce-payments"))},zm=({charge:e,isLoading:t,onButtonClick:n})=>Y().createElement(Y().Fragment,null,Y().createElement(Lm,{isLoading:t,placeholder:""},Y().createElement(Sm,{actions:e.refunded?Y().createElement(Y().Fragment,null):Y().createElement(Z.Button,{variant:"primary",isSmall:!1,onClick:n,__next40pxDefaultSize:!0},(0,V.__)("Refund","woocommerce-payments"))},(0,V.__)("This transaction is not connected to order. ","woocommerce-payments"),e.refunded?(0,V.__)("It has been refunded and is not a subject for disputes.","woocommerce-payments"):(0,V.__)("Investigate this purchase and refund the transaction as needed.","woocommerce-payments")))),Um=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M5.5 12h1.75l-2.5 3-2.5-3H4a8 8 0 113.134 6.35l.907-1.194A6.5 6.5 0 105.5 12zm9.53 1.97l-2.28-2.28V8.5a.75.75 0 00-1.5 0V12a.747.747 0 00.218.529l1.282-.84-1.28.842 2.5 2.5a.75.75 0 101.06-1.061z"})}),$m=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})}),Vm=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z"})}),Wm=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),Hm=({dispute:e,isUrgent:t,paymentMethod:n,bankName:o})=>{var a,r,s,c;const i=null!==(r=null===(a=ba[e.reason])||void 0===a?void 0:a.claim)&&void 0!==r?r:(0,V.__)("The cardholder claims this is an unauthorized charge.","woocommerce-payments"),l=on(null!==(c=null===(s=e.evidence_details)||void 0===s?void 0:s.due_by)&&void 0!==c?c:0,{customFormat:"g:i A \\o\\n F j, Y"});let m="";return m="klarna"===n&&Pm(e.status)?(0,V.__)("Klarna inquiries may mean that the customer is trying to return their item(s).","woocommerce-payments"):Pm(e.status)?o?(0,V.sprintf)((0,V.__)("<strong>%1$s</strong> If you believe this is incorrect, you have until <strong>%2$s to submit evidence to your customer's bank, %3$s.</strong> Alternatively, you can issue a refund.","woocommerce-payments"),i,l,o):(0,V.sprintf)((0,V.__)("<strong>%1$s</strong> If you believe this is incorrect, you have until <strong>%2$s to submit evidence to your customer's bank.</strong> Alternatively, you can issue a refund.","woocommerce-payments"),i,l):"noncompliant"===e.reason?o?(0,V.sprintf)((0,V.__)("Your customers bank, %1$s, claims this payment violates Visas rules. <strong>You can challenge the dispute by %2$s, or accept it.</strong> If you accept the dispute, you will forfeit the funds and pay the dispute fee. Challenging adds an additional $500 USD dispute fee that is only returned to you if you win.","woocommerce-payments"),o,l):(0,V.sprintf)((0,V.__)("Your customers bank claims this payment violates Visas rules. <strong>You can challenge the dispute by %1$s, or accept it.</strong> If you accept the dispute, you will forfeit the funds and pay the dispute fee. Challenging adds an additional $500 USD dispute fee that is only returned to you if you win.","woocommerce-payments"),l):o?(0,V.sprintf)((0,V.__)("<strong>%1$s</strong> If you believe this is incorrect, you have until <strong>%2$s to challenge the dispute with your customer's bank, %3$s.</strong> If you accept the dispute, you will forfeit the funds and pay the dispute fee.","woocommerce-payments"),i,l,o):(0,V.sprintf)((0,V.__)("<strong>%1$s</strong> If you believe this is incorrect, you have until <strong>%2$s to challenge the dispute with your customer's bank.</strong> If you accept the dispute, you will forfeit the funds and pay the dispute fee.","woocommerce-payments"),i,l),Y().createElement(ye,{icon:!0,status:t?"error":"warning",className:"dispute-notice",isDismissible:!1},(0,J.createInterpolateElement)(m,{strong:Y().createElement("strong",null)}))},Ym=(0,ve.jsxs)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,ve.jsx)(fe.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,ve.jsx)(fe.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]});const qm=({evidence:e})=>Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{const t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e],{type:"text/plain"})),t.download="evidence.txt",t.click()},isSmall:!0,icon:Y().createElement(Ut,{icon:Ym})},(0,V.__)("Evidence.txt","woocommerce-payments")),Gm=({fileId:e})=>{const{file:t,isLoading:n}=(o=e,(0,ln.useSelect)((e=>{const t=e(yt),{getFile:n,getFileError:a,isResolving:r,hasFinishedResolution:s}=t;return{file:n(o)||{},error:a(o),isLoading:r("getFile",[o])||!s("getFile",[o])}}),[o]));var o;const{createNotice:a}=(0,ln.useDispatch)("core/notices"),[r,s]=Y().useState(!1);return Y().createElement(Lm,{isLoading:n,placeholder:(0,V.__)("Loading","woocommerce-payments")},t&&t.id?Y().createElement(Z.Button,{variant:"secondary",isBusy:r,disabled:r,isSmall:!0,icon:Y().createElement(Ut,{icon:Ym}),onClick:()=>{return e=void 0,n=void 0,c=function*(){if(t&&t.id&&!r){try{s(!0);const e=yield G()({path:`${_t}/file/${encodeURI(t.id)}/content`,method:"GET"}),n=document.createElement("a");n.href="data:application/octect-stream;base64,"+e.file_content,n.download=t.filename,n.click()}catch(e){a("error",(0,V.__)("Error downloading file","woocommerce-payments"))}s(!1)}},new((o=void 0)||(o=Promise))((function(t,a){function r(e){try{i(c.next(e))}catch(e){a(e)}}function s(e){try{i(c.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,s)}i((c=c.apply(e,n||[])).next())}));var e,n,o,c}},(null==t?void 0:t.title)||t.filename):Y().createElement(Y().Fragment,null))},Qm=({issuerEvidence:e})=>(null==e?void 0:e.some((e=>e.file_evidence.length||e.text_evidence)))?Y().createElement(Z.PanelBody,{className:"dispute-evidence",title:(0,V.__)("Issuer evidence","woocommerce"),initialOpen:!1},Y().createElement("ul",{className:"dispute-evidence__list"},e.map(((e,t)=>Y().createElement("li",{className:"dispute-evidence__list-item",key:`evidence_${t}`},e.text_evidence&&Y().createElement(qm,{evidence:e.text_evidence}),e.file_evidence.map((e=>Y().createElement(Gm,{fileId:e,key:e})))))))):Y().createElement(Y().Fragment,null),Zm=({children:e=[]})=>Y().createElement(Y().Fragment,null,e.map(((e,t)=>Y().createElement("p",{key:t},e)))),Km=({dueBy:e,showRemainingDays:t=!0})=>{const n=Math.floor(ut().unix(e).utc().diff(ut()().utc(),"days",!0)),o=on(e,{customFormat:"F j, Y g:i A"});return Y().createElement("span",{className:"dispute-steps__steps__response-date"},o,t&&Y().createElement("span",{className:ue("dispute-steps__steps__response-date--urgent")},n>0&&(0,V.sprintf)((0,V._n)(" (%d day left to respond)"," (%d days left to respond)",n,"woocommerce-payments"),n),0===n&&(0,V.__)(" (Last day today)","woocommerce-payments"),n<0&&(0,V.__)(" (Past due)","woocommerce-payments")))},Jm=({dispute:e})=>{var t,n;const o=xt((null===(t=ba[e.reason])||void 0===t?void 0:t.display)||e.reason),a=(null===(n=ba[e.reason])||void 0===n?void 0:n.summary)||[],r=[{title:(0,V.__)("Dispute Amount","woocommerce-payments"),content:Mn(e.amount,e.currency)},{title:(0,V.__)("Disputed On","woocommerce-payments"),content:e.created?on(e.created,{separator:", ",includeTime:!1}):""},{title:(0,V.__)("Reason","woocommerce-payments"),content:Y().createElement(Y().Fragment,null,o,a.length>0&&Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more","woocommerce-payments"),content:Y().createElement("div",{className:"dispute-reason-tooltip"},Y().createElement("p",null,o),Y().createElement(Zm,null,a),Y().createElement("p",null,Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments"))))}))},{title:(0,V.__)("Respond By","woocommerce-payments"),content:Y().createElement(Km,{dueBy:e.evidence_details.due_by})}];return Y().createElement("div",{className:"dispute-summary-row"},Y().createElement(Im,{items:r}))},Xm=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M3 7c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Zm2-.5h14c.3 0 .5.2.5.5v1L12 13.5 4.5 7.9V7c0-.3.2-.5.5-.5Zm-.5 3.3V17c0 .3.2.5.5.5h14c.3 0 .5-.2.5-.5V9.8L12 15.4 4.5 9.8Z"})}),ed=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12.9c0 .6.5 1.1 1.1 1.1.3 0 .5-.1.8-.3L8.5 17H18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5H7.9l-2.4 2.4V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v9z"})}),td=window.wp.compose,nd=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),od=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),ad=(0,H.forwardRef)((({children:e},t)=>e?Y().createElement("div",{className:"wcpay-accordion__subtitle",ref:t},e):null));ad.displayName="AccordionSubtitle";const rd=ad;const sd=(0,H.forwardRef)(((e,t)=>{var{isOpened:n,icon:o,title:a,subtitle:r,md:s=!0,lg:c=!1}=e,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["isOpened","icon","title","subtitle","md","lg"]);return a?Y().createElement("h2",{className:"wcpay-accordion__body-title"},Y().createElement(Z.Button,Object.assign({className:ue("wcpay-accordion__body-toggle",{"is-md":s,"is-lg":c}),ref:t},i),Y().createElement("span",{"aria-hidden":"true"},Y().createElement(Z.Icon,{className:"wcpay-accordion__arrow",icon:n?nd:od})),Y().createElement("div",{className:"wcpay-accordion__title-content"},a,r&&Y().createElement(rd,null,r)),o&&Y().createElement(Z.Icon,{icon:o,className:"wcpay-accordion__icon",size:20}))):null}));sd.displayName="AccordionTitle";const cd=sd,id=(0,H.forwardRef)((({buttonProps:e={},children:t,className:n,icon:o,initialOpen:a,onToggle:r=()=>{},opened:s,title:c,subtitle:i,md:l=!0,lg:m=!1,scrollAfterOpen:d=!0},u)=>{const p=void 0===a||a,[_,y]=(0,H.useState)(void 0!==s?s:p),h=void 0!==s,g=h?s:_,w=h?r:y,f=(0,H.useRef)(null),v=(0,H.useRef)();v.current=d,((e,t)=>{const n=(0,H.useRef)(!0);(0,H.useEffect)((()=>{if(!n.current)return(()=>{var e;g&&v.current&&(null===(e=f.current)||void 0===e?void 0:e.scrollIntoView)&&f.current.scrollIntoView({inline:"nearest",block:"nearest",behavior:"smooth"})})();n.current=!1}),t)})(0,[g,"smooth"]);const b=ue("wcpay-accordion__body",n,{"is-opened":g});return Y().createElement("div",{className:b,ref:(0,td.useMergeRefs)([f,u])},Y().createElement(cd,Object.assign({icon:o,isOpened:Boolean(g),onClick:e=>{e.preventDefault(),w(!g)},title:c,subtitle:i,md:l,lg:m},e&&Object.assign(Object.assign({},e),{ref:void 0}))),"function"==typeof t?t({opened:Boolean(g)}):g&&t)}));id.displayName="AccordionBody";const ld=id,md=(0,H.forwardRef)((({className:e,children:t,highDensity:n=!1,defaultExpanded:o=!1},a)=>{const r=ue(e,"wcpay-accordion",{"is-high-density":n}),s=Y().Children.map(t,(e=>Y().isValidElement(e)&&e.type===ld?Y().cloneElement(e,{initialOpen:o}):e));return Y().createElement("div",{className:r,ref:a},s)}));md.displayName="Accordion";const dd=md,ud=(0,H.forwardRef)((({className:e,children:t},n)=>Y().createElement("div",{className:ue("wcpay-accordion__row",e),ref:n},t)));ud.displayName="AccordionRow";const pd=ud,_d=({dispute:e,customer:t,chargeCreated:n,bankName:o})=>{let a;if(null==t?void 0:t.email){const o=on(n),r=on(e.created),s=(0,V.sprintf)((0,V.__)("Problem with your purchase from %1$s on %2$s?","woocommerce-payments"),wcpaySettings.storeName,o),c=(null==t?void 0:t.name)||"",i=(0,V.sprintf)((0,V.__)("Hello %1$s,\n\nWe noticed that on %2$s, you disputed a %3$s charge on %4$s. We wanted to contact you to make sure everything was all right with your purchase and see if there's anything else we can do to resolve any problems you might have had.\n\nAlternatively, if the dispute was a mistake, you can easily withdraw it by calling the number on the back of your card. Thank you so much - we appreciate your business and look forward to working with you.","woocommerce-payments"),c,r,Mn(e.amount,e.currency),o);a=`mailto:${t.email}?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(i)}`}return Y().createElement("div",{className:"dispute-steps"},Y().createElement(dd,null,Y().createElement(ld,{lg:!0,title:(0,V.__)("Steps you can take","woocommerce-payments"),subtitle:(0,V.__)("We recommend reviewing your options before responding by the deadline. ","woocommerce-payments")},Y().createElement(pd,null,Y().createElement("div",{className:"dispute-steps__content"},Y().createElement("div",{className:"dispute-steps__items"},Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Xm})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Contact your customer","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Identify the issue and work towards a resolution where possible.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},(null==t?void 0:t.email)?Y().createElement(Z.Button,{variant:"secondary",href:a,target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Email customer","woocommerce-payments")):null)),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:ed})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Ask for the dispute to be withdrawn","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("If you've managed to resolve the issue with your customer, help them with the withdrawal of their dispute.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},Y().createElement(Z.Button,{variant:"secondary",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#withdrawals",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments")))),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Ym})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Challenge or accept the dispute","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Disagree with the dispute? You can challenge it with the customer's bank. Otherwise, accept it to close the case  the order amount and dispute fee won't be refunded.","woocommerce-payments"))))),Y().createElement("div",{className:"dispute-steps__notice"},Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)(o?(0,V.sprintf)((0,V.__)("<strong>The outcome of this dispute will be determined by %1$s.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),o):(0,V.__)("<strong>The outcome of this dispute will be determined by the cardholder's bank.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)}))))))))},yd=()=>Y().createElement("div",{className:"dispute-steps"},Y().createElement(dd,{defaultExpanded:!0},Y().createElement(ld,{lg:!0,title:(0,V.__)("Steps you can take","woocommerce-payments"),subtitle:(0,V.__)("We recommend reviewing your options before responding by the deadline. ","woocommerce-payments")},Y().createElement(pd,null,Y().createElement("div",{className:"dispute-steps__content"},Y().createElement("div",{className:"dispute-steps__items"},Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Ym})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Accepting the dispute","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Accepting the dispute means youll forfeit the funds, pay the standard dispute fee, and avoid the $500 USD Visa fee.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},Y().createElement(Z.Button,{variant:"secondary",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#visa-compliance-disputes",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments")))),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Xm})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Challenge the dispute","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Challenging the dispute will incur a $500 USD network fee, charged by our partner Stripe when you submit evidence. This fee will be refunded if you win the dispute.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},Y().createElement(Z.Button,{variant:"secondary",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#visa-compliance-disputes",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments"))))),Y().createElement("div",{className:"dispute-steps__notice"},Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)((0,V.__)("<strong>The outcome of this dispute will be determined by Visa.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)})))))))),hd=({dispute:e,customer:t,chargeCreated:n,bankName:o})=>{let a;if(null==t?void 0:t.email){const o=on(n,{includeTime:!0}),r=on(e.created,{includeTime:!0}),s=(0,V.sprintf)((0,V.__)("Problem with your purchase from %1$s on %2$s?","woocommerce-payments"),wcpaySettings.storeName,o),c=(null==t?void 0:t.name)||"",i=(0,V.sprintf)((0,V.__)("Hello %1$s,\n\nWe noticed that on %2$s, you raised a question with your payment provider about a %3$s charge made on %4$s. We wanted to reach out to ensure everything is all right with your purchase and to see if there's anything we can do to resolve any problems you might have had.\n\nAlternatively, if this was a mistake, please contact your payment provider to resolve it. Thank you so much - we appreciate your business and look forward to working with you.","woocommerce-payments"),c,r,Mn(e.amount,e.currency),o);a=`mailto:${t.email}?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(i)}`}return Y().createElement("div",{className:"dispute-steps"},Y().createElement(dd,null,Y().createElement(ld,{lg:!0,title:(0,V.__)("Steps you can take","woocommerce-payments"),subtitle:(0,V.__)("We recommend reviewing your options before responding by the deadline. ","woocommerce-payments")},Y().createElement(pd,null,Y().createElement("div",{className:"dispute-steps__content"},Y().createElement("div",{className:"dispute-steps__items"},Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Xm})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Contact your customer","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Identify the issue and work towards a resolution where possible.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},(null==t?void 0:t.email)?Y().createElement(Z.Button,{variant:"secondary",href:a,target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Email customer","woocommerce-payments")):null)),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Ym})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Submit evidence or issue a refund","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Disagree with the claim? You can challenge it by submitting evidence to the customer's bank. Otherwise, you can settle the inquiry by issuing a refund.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},Y().createElement(Z.Button,{variant:"secondary",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#inquiries",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments"))))),Y().createElement("div",{className:"dispute-steps__notice"},Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)(o?(0,V.sprintf)((0,V.__)("<strong>The outcome of this dispute will be determined by %1$s.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),o):(0,V.__)("<strong>The outcome of this dispute will be determined by the cardholder's bank.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)}))))))))},gd=({dispute:e,customer:t,chargeCreated:n,bankName:o})=>{let a;if(null==t?void 0:t.email){const o=on(n,{includeTime:!0}),r=on(e.created,{includeTime:!0}),s=(0,V.sprintf)((0,V.__)("Problem with your purchase from %1$s on %2$s?","woocommerce-payments"),wcpaySettings.storeName,o),c=(null==t?void 0:t.name)||"",i=(0,V.sprintf)((0,V.__)("Hello %1$s,\n\nWe noticed that on %2$s, you raised a question with your payment provider about a %3$s charge made on %4$s. We wanted to reach out to ensure everything is all right with your purchase and to see if there's anything we can do to resolve any problems you might have had.\n\nAlternatively, if this was a mistake, please contact your payment provider to resolve it. Thank you so much - we appreciate your business and look forward to working with you.","woocommerce-payments"),c,r,Mn(e.amount,e.currency),o);a=`mailto:${t.email}?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(i)}`}return Y().createElement("div",{className:"dispute-steps"},Y().createElement(dd,null,Y().createElement(ld,{lg:!0,title:(0,V.__)("Steps you can take","woocommerce-payments"),subtitle:(0,V.__)("We recommend reviewing your options before responding by the deadline. ","woocommerce-payments")},Y().createElement(pd,null,Y().createElement("div",{className:"dispute-steps__content"},Y().createElement("div",{className:"dispute-steps__items"},Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Xm})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Contact your customer","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Reach out to the customer to check if they're returning the item(s).","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},(null==t?void 0:t.email)?Y().createElement(Z.Button,{variant:"secondary",href:a,target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Email customer","woocommerce-payments")):null)),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Ym})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Issue a refund","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Once you've received the item(s), refund the customer before the deadline to prevent this escalating to a dispute.","woocommerce-payments")))),Y().createElement("div",{className:"dispute-steps__item"},Y().createElement("div",{className:"dispute-steps__item-icon"},Y().createElement(Z.Icon,{icon:Xm})),Y().createElement("div",{className:"dispute-steps__item-content"},Y().createElement("div",{className:"dispute-steps__item-name"},(0,V.__)("Challenge the dispute","woocommerce-payments")),Y().createElement("div",{className:"dispute-steps__item-description"},(0,V.__)("Didn't receive the returned item(s)? Once the inquiry has automatically escalated to a dispute after 21 days, you can submit evidence and challenge the dispute.","woocommerce-payments"))),Y().createElement("div",{className:"dispute-steps__item-action"},Y().createElement(Z.Button,{variant:"secondary",href:"https://woocommerce.com/document/woopayments/payment-methods/buy-now-pay-later/#klarna-inquiries-returns",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments"))))),Y().createElement("div",{className:"dispute-steps__notice"},Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)(o?(0,V.sprintf)((0,V.__)("<strong>The outcome of this dispute will be determined by %1$s.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),o):(0,V.__)("<strong>The outcome of this dispute will be determined by the cardholder's bank.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)}))))))))},wd=({dispute:e,customer:t,chargeCreated:n,orderUrl:o,paymentMethod:a,bankName:r})=>{var s;const{doAccept:c,isLoading:i}=(e=>{const{isLoading:t}=(0,ln.useSelect)((t=>{const{isResolving:n}=t(yt);return{isLoading:n("getDispute",[e.id])}}),[e.id]),{acceptDispute:n}=(0,ln.useDispatch)(yt);return{doAccept:()=>n(e),isLoading:t}})(e),[l,m]=(0,H.useState)(!1),[d,u]=(0,H.useState)(!1),p=null===(s=e.evidence_details)||void 0===s?void 0:s.has_evidence,{createErrorNotice:_}=(0,ln.useDispatch)("core/notices"),{featureFlags:{isDisputeIssuerEvidenceEnabled:y}}=(0,H.useContext)(xn),h="noncompliant"===e.reason||((null==e?void 0:e.enhanced_eligibility_types)||[]).includes("visa_compliance"),g=()=>{i||m(!1)},w=function({dispute:e,isDisputeAcceptRequestPending:t}){var n;return Pm(e.status)?{acceptButtonLabel:(0,V.__)("Issue refund","woocommerce-payments"),acceptButtonTracksEvent:"wcpay_dispute_inquiry_refund_modal_view",modalTitle:(0,V.__)("Issue a refund?","woocommerce-payments"),modalLines:[{icon:Y().createElement(Z.Icon,{icon:Um,size:24}),description:(0,V.__)("Issuing a refund will close the inquiry, returning the amount in question back to the cardholder. No additional fees apply.","woocommerce-payments")},{icon:Y().createElement(Z.Icon,{icon:$m,size:24}),description:(0,V.__)("You will be taken to the order, where you must complete the refund process manually.","woocommerce-payments")}],modalButtonLabel:(0,V.__)("View order to issue refund","woocommerce-payments"),modalButtonTracksEvent:"wcpay_dispute_inquiry_refund_click"}:{acceptButtonLabel:(0,V.__)("Accept dispute","woocommerce-payments"),acceptButtonTracksEvent:"wcpay_dispute_accept_modal_view",modalTitle:(0,V.__)("Accept the dispute?","woocommerce-payments"),modalLines:[{icon:Y().createElement(Z.Icon,{icon:Um,size:24}),description:(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("Accepting the dispute marks it as <em>Lost</em>. The disputed amount and the %s dispute fee will not be returned to you.","woocommerce-payments"),null!==(n=Mm(e,!0))&&void 0!==n?n:"-"),{em:Y().createElement("em",null)})},{icon:Y().createElement(Z.Icon,{icon:Vm,size:24}),description:(0,V.__)("This action is final and cannot be undone.","woocommerce-payments")}],modalButtonLabel:t?(0,V.__)("Accepting","woocommerce-payments"):(0,V.__)("Accept dispute","woocommerce-payments"),modalButtonTracksEvent:"wcpay_dispute_accept_click"}}({dispute:e,isDisputeAcceptRequestPending:i}),f=!("klarna"===a&&Pm(e.status)),v=Pm(e.status)?(0,V.__)("Submit evidence","woocommerce-payments"):(0,V.__)("Challenge dispute","woocommerce-payments"),b=f?Y().createElement(hd,{dispute:e,customer:t,chargeCreated:n,bankName:r}):Y().createElement(gd,{dispute:e,customer:t,chargeCreated:n,bankName:r}),E=h?Y().createElement(yd,null):Y().createElement(_d,{dispute:e,customer:t,chargeCreated:n,bankName:r}),S=Pm(e.status)?b:E;return Y().createElement("div",{className:"transaction-details-dispute-details-wrapper"},Y().createElement(Z.HorizontalRule,null),Y().createElement("h2",{className:"transaction-details-dispute-details-title"},(0,V.__)("Dispute details","woocommerce-payments")),Y().createElement("div",{className:"transaction-details-dispute-details-body"},Y().createElement(Hm,{dispute:e,isUrgent:!0,paymentMethod:a,bankName:r}),p&&Y().createElement(ye,{icon:Wm,isDismissible:!1},(0,V.__)("You initiated a challenge to this dispute. Click 'Continue with challenge' to proceed with your draft response.","woocommerce-payments")),Y().createElement(Jm,{dispute:e}),S,y&&Y().createElement(Qm,{issuerEvidence:e.issuer_evidence}),Y().createElement("div",{className:"transaction-details-dispute-details-body__help-link"},Y().createElement(Z.ExternalLink,{href:Pm(e.status)?"klarna"===a?"https://woocommerce.com/document/woopayments/payment-methods/buy-now-pay-later/#klarna-inquiries-returns":"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#inquiries":h?"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#visa-compliance-disputes":"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#responding",onClick:()=>{ce("wcpay_dispute_help_link_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},Pm(e.status)?"klarna"===a?(0,V.__)("Please see this document for more information","woocommerce-payments"):(0,V.__)("Learn more about payment inquiries","woocommerce-payments"):h?(0,V.__)("Learn more about Visa compliance disputes","woocommerce-payments"):(0,V.__)("Learn more about responding to disputes","woocommerce-payments"))),h&&Y().createElement("div",{className:"transaction-details-dispute-details-body__visa-compliance-checkbox"},Y().createElement(Z.CheckboxControl,{onChange:u,label:(0,V.__)("By checking this box, you acknowledge that challenging this Visa compliance dispute incurs a $500 USD fee, which will be refunded only if you win the case.","woocommerce-payments"),__nextHasNoMarginBottom:!0})),Y().createElement("div",{className:"transaction-details-dispute-details-body__actions"},f&&Y().createElement(X.Link,{href:i?"":Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"primary","data-testid":"challenge-dispute-button",disabled:i||h&&!p&&!d,onClick:()=>{ce("wcpay_dispute_challenge_clicked",{dispute_status:e.status,on_page:"transaction_details"})},__next40pxDefaultSize:!0},p?(0,V.__)("Continue with challenge","woocommerce-payments"):v)),Y().createElement(Z.Button,{variant:f?"tertiary":"primary",disabled:i,"data-testid":"open-accept-dispute-modal-button",onClick:()=>{ce(w.acceptButtonTracksEvent,{dispute_status:e.status,on_page:"transaction_details"}),m(!0)},__next40pxDefaultSize:!0},w.acceptButtonLabel),l&&Y().createElement(Z.Modal,{title:w.modalTitle,onRequestClose:g,className:"transaction-details-dispute-accept-modal"},Y().createElement("p",null,Y().createElement("strong",null,(0,V.__)("Before proceeding, please take note of the following:","woocommerce-payments"))),w.modalLines.map(((e,t)=>Y().createElement(Z.Flex,{justify:"start",key:t},Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-accept-modal__icon"},e.icon),Y().createElement(Z.FlexItem,null,e.description)))),Y().createElement(Z.Flex,{className:"transaction-details-dispute-accept-modal__actions",justify:"end"},Y().createElement(Z.Button,{variant:"tertiary",disabled:i,onClick:g,__next40pxDefaultSize:!0},(0,V.__)("Cancel","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",isBusy:i,disabled:i,"data-testid":"accept-dispute-button",onClick:()=>{ce(w.modalButtonTracksEvent,{dispute_status:e.status,on_page:"transaction_details"}),Pm(e.status)?o?window.location.href=o:_((0,V.__)("Unable to view order. Order not found.","woocommerce-payments")):c()},__next40pxDefaultSize:!0},w.modalButtonLabel))))))},fd=({dispute:e,bankName:t})=>{const n=e.metadata.__evidence_submitted_at?on(parseInt(e.metadata.__evidence_submitted_at,10)):"-";return Y().createElement(Z.CardFooter,{className:"transaction-details-dispute-footer transaction-details-dispute-footer--primary"},Y().createElement(Z.Flex,{justify:"space-between"},Y().createElement(Z.FlexItem,null,(0,J.createInterpolateElement)(t?(0,V.sprintf)((0,V.__)("<strong>The customer's bank, %1$s, is currently reviewing the evidence you submitted on %2$s.</strong> This process can sometimes take more than 60 days  we'll let you know once a decision has been made. <a>Learn more about the dispute process.</a>","woocommerce-payments"),t,n):(0,V.sprintf)((0,V.__)("<strong>The customer's bank is currently reviewing the evidence you submitted on %1$s.</strong> This process can sometimes take more than 60 days  we'll let you know once a decision has been made. <a>Learn more about the dispute process.</a>","woocommerce-payments"),n),{a:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/"}),strong:Y().createElement("strong",null)})),Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-footer__actions"},Y().createElement(X.Link,{href:Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_view_submitted_evidence_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},(0,V.__)("View submitted evidence","woocommerce-payments"))))))},vd=({dispute:e,bankName:t})=>{const n=e.metadata.__dispute_closed_at?on(parseInt(e.metadata.__dispute_closed_at,10)):"-";return Y().createElement(Z.CardFooter,{className:"transaction-details-dispute-footer"},Y().createElement(Z.Flex,{justify:"space-between"},Y().createElement(Z.FlexItem,null,(0,J.createInterpolateElement)(t?(0,V.sprintf)((0,V.__)("<strong>Good news  you've won this dispute! The customer's bank, %1$s, reached this decision on %2$s.</strong> Your account has been credited with the disputed amount and fee. <a>Learn more about preventing disputes.</a>","woocommerce-payments"),t,n):(0,V.sprintf)((0,V.__)("<strong>Good news  you've won this dispute! The customer's bank reached this decision on %1$s.</strong> Your account has been credited with the disputed amount and fee. <a>Learn more about preventing disputes.</a>","woocommerce-payments"),n),{a:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/"}),strong:Y().createElement("strong",null)})),Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-footer__actions"},Y().createElement(X.Link,{href:Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_view_submitted_evidence_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},(0,V.__)("View dispute details","woocommerce-payments"))))))},bd=({dispute:e,bankName:t})=>{var n;const o=!!e.metadata.__evidence_submitted_at,a="1"===e.metadata.__closed_by_merchant,r=null!==(n=Mm(e,!0))&&void 0!==n?n:"-",s=e.metadata.__dispute_closed_at?on(parseInt(e.metadata.__dispute_closed_at,10)):"-";let c=(0,V.sprintf)((0,V.__)("This dispute was lost on %1$s due to non-response.","woocommerce-payments"),s);return a&&(c=(0,V.sprintf)((0,V.__)("<strong>You accepted this dispute on %1$s.</strong>","woocommerce-payments"),s)),o&&(c=(0,V.sprintf)((0,V.__)("This dispute was lost on %1$s.","woocommerce-payments"),s)),o&&(c=t?(0,V.sprintf)((0,V.__)("<strong>Unfortunately, you've lost this dispute. The customer's bank, %1$s, reached this decision on %2$s.</strong>","woocommerce-payments"),t,s):(0,V.sprintf)((0,V.__)("<strong>Unfortunately, you've lost this dispute. The customer's bank reached this decision on %1$s.</strong>","woocommerce-payments"),s)),Y().createElement(Z.CardFooter,{className:"transaction-details-dispute-footer"},Y().createElement(Z.Flex,{justify:"space-between"},Y().createElement(Z.FlexItem,null,(0,J.createInterpolateElement)(c,{strong:Y().createElement("strong",null)})," ",(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("The %1$s fee has been deducted from your account, and the disputed amount has been returned to your customer. <a>Learn more about preventing disputes</a>.","woocommerce-payments"),r),{a:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/"})})),o&&Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-footer__actions"},Y().createElement(X.Link,{href:Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_view_submitted_evidence_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},(0,V.__)("View dispute details","woocommerce-payments"))))))},Ed=({dispute:e,bankName:t})=>{const n=e.metadata.__evidence_submitted_at?on(parseInt(e.metadata.__evidence_submitted_at,10)):"-";return Y().createElement(Z.CardFooter,{className:"transaction-details-dispute-footer transaction-details-dispute-footer--primary"},Y().createElement(Z.Flex,{justify:"space-between"},Y().createElement(Z.FlexItem,null,(0,J.createInterpolateElement)(t?(0,V.sprintf)((0,V.__)("You submitted evidence for this inquiry on %1$s. <strong>%2$s</strong> is reviewing the case, which can take 120 days or more. You will be alerted when they make their final decision. <a>Learn more</a>.","woocommerce-payments"),n,t):(0,V.sprintf)((0,V.__)("You submitted evidence for this inquiry on %s. The <strong>cardholders bank</strong> is reviewing the case, which can take 120 days or more. You will be alerted when they make their final decision. <a>Learn more</a>.","woocommerce-payments"),n),{a:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#inquiries"}),strong:Y().createElement("strong",null)})),Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-footer__actions"},Y().createElement(X.Link,{href:Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_view_submitted_evidence_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},(0,V.__)("View submitted evidence","woocommerce-payments"))))))},Sd=({dispute:e})=>{const t=!!e.metadata.__evidence_submitted_at,n=e.metadata.__dispute_closed_at?on(parseInt(e.metadata.__dispute_closed_at,10)):"-";return Y().createElement(Z.CardFooter,{className:"transaction-details-dispute-footer"},Y().createElement(Z.Flex,{justify:"space-between"},Y().createElement(Z.FlexItem,null,(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("This inquiry was closed on %s. <a>Learn more about preventing disputes</a>.","woocommerce-payments"),n),{a:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/"})})),t&&Y().createElement(Z.FlexItem,{className:"transaction-details-dispute-footer__actions"},Y().createElement(X.Link,{href:Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e.id})},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_view_submitted_evidence_clicked",{dispute_status:e.status,on_page:"transaction_details"})}},(0,V.__)("View submitted evidence","woocommerce-payments"))))))},kd=({dispute:e,bankName:t})=>"under_review"===e.status?Y().createElement(fd,{dispute:e,bankName:t}):"won"===e.status?Y().createElement(vd,{dispute:e,bankName:t}):"lost"===e.status?Y().createElement(bd,{dispute:e,bankName:t}):"warning_under_review"===e.status?Y().createElement(Ed,{dispute:e,bankName:t}):"warning_closed"===e.status?Y().createElement(Sd,{dispute:e}):null;const Nd=e=>{var{children:t,actions:n,className:o}=e,a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["children","actions","className"]);return Y().createElement(Z.Modal,Object.assign({className:ue("wcpay-confirmation-modal",o)},a),t,Y().createElement(fe.HorizontalRule,{className:"wcpay-confirmation-modal__separator"}),Y().createElement("div",{className:"wcpay-confirmation-modal__footer"},n))};const xd=({charge:e,formattedAmount:t,onModalClose:n})=>{const[o,a]=(0,J.useState)(null),[r,s]=(0,J.useState)(!1),{doRefund:c}=Dc(e.payment_intent),i=()=>{n()};return Y().createElement(Nd,{className:"missing-order-notice-modal",title:(0,V.__)("Refund transaction","woocommerce-payments"),actions:Y().createElement(Y().Fragment,null,Y().createElement(Z.Button,{onClick:i,variant:"secondary",__next40pxDefaultSize:!0},(0,V.__)("Cancel","woocommerce-payments")),Y().createElement(Z.Button,{onClick:()=>{return t=void 0,n=void 0,r=function*(){ce("payments_transactions_details_refund_full",{payment_intent_id:e.payment_intent}),s(!0),yield c(e,"other"===o?null:o),s(!1),i()},new((a=void 0)||(a=Promise))((function(e,o){function s(e){try{i(r.next(e))}catch(e){o(e)}}function c(e){try{i(r.throw(e))}catch(e){o(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(s,c)}i((r=r.apply(t,n||[])).next())}));var t,n,a,r},variant:"primary",isBusy:r,disabled:r,__next40pxDefaultSize:!0},(0,V.__)("Refund transaction","woocommerce-payments"))),onRequestClose:i},Y().createElement("p",null,Oe({mixedString:(0,V.sprintf)((0,V.__)("This will issue a full refund of {{strong}}%s{{/strong}} to the customer.","woocommerce-payments"),t),components:{strong:Y().createElement("strong",null)}})),Y().createElement(Z.RadioControl,{className:"missing-order-notice-modal__reason",label:(0,V.__)("Select a reason (Optional)","woocommerce-payments"),selected:o||void 0,options:[{label:(0,V.__)("Duplicate order","woocommerce-payments"),value:"duplicate"},{label:(0,V.__)("Fraudulent","woocommerce-payments"),value:"fraudulent"},{label:(0,V.__)("Requested by customer","woocommerce-payments"),value:"requested_by_customer"},{label:(0,V.__)("Other","woocommerce-payments"),value:"other"}],onChange:e=>a(e)}))},Cd={amount:0,currency:"USD",net:0,fee:0,refunded:null},Td=({charge:e={},metadata:t={}})=>{var n,o,a,r,s,c;return[{title:(0,V.__)("Date","woocommerce-payments"),content:e.created?on(e.created,{separator:", ",includeTime:!0}):""},{title:(0,V.__)("Sales channel","woocommerce-payments"),content:Y().createElement("span",null,(c=null==t?void 0:t.reader_model,"COTS_DEVICE"===c||"TAP_TO_PAY_DEVICE"===c?(s=null==t?void 0:t.platform,"ios"===s?(0,V.__)("Tap to Pay on iPhone","woocommerce-payments"):"android"===s?(0,V.__)("Tap to Pay on Android","woocommerce-payments"):(0,V.__)("Tap to Pay","woocommerce-payments")):Dl(null===(n=e.payment_method_details)||void 0===n?void 0:n.type,t)))},{title:(0,V.__)("Customer","woocommerce-payments"),content:Y().createElement(Dm,{billing_details:e.billing_details,order_details:e.order})},{title:(0,V.__)("Order","woocommerce-payments"),content:Y().createElement(pl,{order:e.order})},wcpaySettings.isSubscriptionsActive&&{title:(0,V.__)("Subscription","woocommerce-payments"),content:(null===(a=null===(o=e.order)||void 0===o?void 0:o.subscriptions)||void 0===a?void 0:a.length)?e.order.subscriptions.map(((e,t,n)=>[Y().createElement(pl,{key:t,order:e}),t!==n.length-1&&", "])):Y().createElement(pl,{order:null})},{title:(0,V.__)("Payment method","woocommerce-payments"),content:Y().createElement(Om,{payment:e.payment_method_details})},{title:(0,V.__)("Risk evaluation","woocommerce-payments"),content:(null===(r=e.outcome)||void 0===r?void 0:r.risk_level)?_l[e.outcome.risk_level]:""}].filter(km)},Od=({charge:e={}})=>{var t,n,o;return[{title:(0,V.__)("Date","woocommerce-payments"),content:e.created?on(e.created,{customFormat:"F j, Y g:i A"}):""},{title:(0,V.__)("Customer","woocommerce-payments"),content:Y().createElement(Dm,{billing_details:e.billing_details,order_details:e.order})},{title:(0,V.__)("Order","woocommerce-payments"),content:Y().createElement(pl,{order:e.order})},wcpaySettings.isSubscriptionsActive&&{title:(0,V.__)("Subscription","woocommerce-payments"),content:(null===(n=null===(t=e.order)||void 0===t?void 0:t.subscriptions)||void 0===n?void 0:n.length)?e.order.subscriptions.map(((e,t,n)=>[Y().createElement(pl,{key:t,order:e}),t!==n.length-1&&", "])):Y().createElement(pl,{order:null})},{title:(0,V.__)("Payment method","woocommerce-payments"),content:Y().createElement(Om,{payment:e.payment_method_details})},{title:(0,V.__)("Risk evaluation","woocommerce-payments"),content:(null===(o=e.outcome)||void 0===o?void 0:o.risk_level)?_l[e.outcome.risk_level]:""}].filter(km)},Id=({charge:e={},metadata:t={},isLoading:n,paymentIntent:o})=>{var a,r,s,c,i,l;const m=e.amount?(e=>{var t,n,o;const a=e.balance_transaction?{currency:e.balance_transaction.currency,amount:e.balance_transaction.amount,fee:e.balance_transaction.fee,refunded:0,net:0}:{currency:e.currency,amount:e.amount,fee:e.application_fee_amount,refunded:0,net:0};return Tl(e)&&(a.refunded-=(0,lt.sumBy)(null===(t=e.refunds)||void 0===t?void 0:t.data,"balance_transaction.amount")),Cl(e)&&void 0!==e.dispute&&(a.fee+=(0,lt.sumBy)(null===(n=e.dispute)||void 0===n?void 0:n.balance_transactions,"fee"),a.refunded-=(0,lt.sumBy)(null===(o=e.dispute)||void 0===o?void 0:o.balance_transactions,"amount")),a.net=a.amount-a.fee-a.refunded,a})(e):Cd,d=e.currency&&m.currency!==e.currency,u=!e.captured&&"failed"!==e.status&&0===e.amount_refunded,{authorization:p}=ri(e.payment_intent,null===(a=e.order)||void 0===a?void 0:a.id,u),_=Al(e,o),y=e.dispute&&Mm(e.dispute),h=!e.dispute||(g=e.dispute.status,Pm(g)||"won"===g);var g;const w=e.order&&e.order.number,f=e.amount_refunded>0,v=e.captured&&!e.refunded&&h,b=e.balance_transaction?{fee:e.balance_transaction.fee,currency:e.balance_transaction.currency}:{fee:e.application_fee_amount,currency:e.currency};ut().updateLocale("en",{relativeTime:{s:(0,V.__)("a second","woocommerce-payments"),ss:(0,V.__)("%d seconds","woocommerce-payments"),m:(0,V.__)("a minute","woocommerce-payments"),mm:(0,V.__)("%d minutes","woocommerce-payments"),h:(0,V.__)("an hour","woocommerce-payments"),hh:(0,V.__)("%d hours","woocommerce-payments"),d:(0,V.__)("a day","woocommerce-payments"),dd:(0,V.__)("%d days","woocommerce-payments")}});const E=jn(e.amount,e.currency,m.currency),[S,k]=(0,H.useState)(!1),N=jl(e);return Y().createElement(Z.Card,null,Y().createElement(Z.CardBody,null,Y().createElement(Z.Flex,{direction:"row",align:"start"},Y().createElement("div",{className:"payment-details-summary"},Y().createElement("div",{className:"payment-details-summary__section"},Y().createElement("div",{className:"payment-details-summary__amount-wrapper"},Y().createElement("p",{className:"payment-details-summary__amount"},Y().createElement(Lm,{isLoading:n,placeholder:(0,V.__)("Amount placeholder","woocommerce-payments")},E,Y().createElement("span",{className:"payment-details-summary__amount-currency"},e.currency||"USD"))),e.dispute?Y().createElement(Fm,{className:"payment-details-summary__status",status:e.dispute.status,prefixDisputeType:!0}):Y().createElement(Tm,{className:"payment-details-summary__status",status:Rl(e,o)})),Y().createElement("div",{className:"payment-details-summary__breakdown"},d?Y().createElement("p",{className:"payment-details-summary__breakdown__settlement-currency"},Mn(m.amount,m.currency)):null,m.refunded?Y().createElement("p",null,`${y?(0,V.__)("Deducted","woocommerce-payments"):(0,V.__)("Refunded","woocommerce-payments")}: `,Mn(-m.refunded,m.currency)):"",Y().createElement("p",null,Y().createElement(Lm,{isLoading:n,placeholder:(0,V.__)("Fee amount","woocommerce-payments")},`${(0,V.__)("Fees","woocommerce-payments")}: `,jn(-m.fee,m.currency),y&&Y().createElement(zt,{className:"payment-details-summary__breakdown__fee-tooltip",buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Fee breakdown","woocommerce-payments"),content:Y().createElement(Y().Fragment,null,Y().createElement(Z.Flex,null,Y().createElement("label",null,(0,V.__)("Transaction fee","woocommerce-payments")),Y().createElement("span",{"aria-label":(0,V.__)("Transaction fee","woocommerce-payments")},jn(b.fee,b.currency))),Y().createElement(Z.Flex,null,Y().createElement("label",null,(0,V.__)("Dispute fee","woocommerce-payments")),Y().createElement("span",{"aria-label":(0,V.__)("Dispute fee","woocommerce-payments")},y)),Y().createElement(Z.Flex,null,Y().createElement("label",null,(0,V.__)("Total fees","woocommerce-payments")),Y().createElement("span",{"aria-label":(0,V.__)("Total fees","woocommerce-payments")},jn(m.fee,m.currency))))}))),e.paydown?Y().createElement("p",null,`${(0,V.__)("Loan repayment","woocommerce-payments")}: `,Mn(e.paydown.amount,m.currency)):"",Y().createElement("p",null,Y().createElement(Lm,{isLoading:n,placeholder:(0,V.__)("Net amount","woocommerce-payments")},`${(0,V.__)("Net","woocommerce-payments")}: `,Mn(e.paydown?m.net-Math.abs(e.paydown.amount):m.net,m.currency))))),Y().createElement("div",{className:"payment-details-summary__section"},!n&&_&&Y().createElement("div",{className:"payment-details-summary__fraud-outcome-action"},Y().createElement(Bm,{orderId:(null===(r=e.order)||void 0===r?void 0:r.id)||0,paymentIntentId:e.payment_intent||"",onClick:()=>{ce("wcpay_fraud_protection_transaction_reviewed_merchant_blocked",{payment_intent_id:e.payment_intent}),ce("payments_transactions_details_cancel_charge_button_click",{payment_intent_id:e.payment_intent})}},(0,V.__)("Block transaction")),Y().createElement(lm,{buttonIsPrimary:!0,orderId:(null===(s=e.order)||void 0===s?void 0:s.id)||0,paymentIntentId:e.payment_intent||"",buttonIsSmall:!1,onClick:()=>{ce("wcpay_fraud_protection_transaction_reviewed_merchant_approved",{payment_intent_id:e.payment_intent}),ce("payments_transactions_details_capture_charge_button_click",{payment_intent_id:e.payment_intent})}},(0,V.__)("Approve Transaction","woocommerce-payments"))),Y().createElement("div",{className:"payment-details-summary__id"},Y().createElement(Lm,{isLoading:n,placeholder:"Payment ID: pi_xxxxxxxxxxxxxxxxxxxxxxxx"},e.payment_intent&&Y().createElement("div",{className:"payment-details-summary__id_wrapper"},Y().createElement("span",{className:"payment-details-summary__id_label"},`${(0,V.__)("Payment ID","woocommerce-payments")}: `),Y().createElement("span",{className:"payment-details-summary__id_value"},e.payment_intent)),e.id&&Y().createElement("div",{className:"payment-details-summary__id_wrapper"},Y().createElement("span",{className:"payment-details-summary__id_label"},`${(0,V.__)("Charge ID","woocommerce-payments")}: `),Y().createElement("span",{className:"payment-details-summary__id_value"},e.id)))))),Y().createElement("div",{className:"payment-details__refund-controls"},v&&Y().createElement(Lm,{isLoading:n,placeholder:Em},Y().createElement(Z.DropdownMenu,{icon:Em,label:(0,V.__)("Transaction actions","woocommerce-payments"),popoverProps:{position:"bottom left"},className:"refund-controls__dropdown-menu"},(({onClose:t})=>Y().createElement(Z.MenuGroup,null,!f&&Y().createElement(Z.MenuItem,{onClick:()=>{k(!0),ce("payments_transactions_details_refund_modal_open",{payment_intent_id:e.payment_intent}),t()}},(0,V.__)("Refund in full","woocommerce-payments")),w&&Y().createElement(Z.MenuItem,{onClick:()=>{var t,n;ce("payments_transactions_details_partial_refund",{payment_intent_id:e.payment_intent,order_id:null===(t=e.order)||void 0===t?void 0:t.id}),window.location=null===(n=e.order)||void 0===n?void 0:n.url}},(0,V.__)("Partial refund","woocommerce-payments"))))))))),Y().createElement(Z.CardDivider,null),Y().createElement(Z.CardBody,null,Y().createElement(Rm,{isLoading:n,numLines:4},Y().createElement(Im,{items:e.dispute?Od({charge:e}):Td({charge:e,metadata:t})}))),e.dispute&&Y().createElement(he,null,jm(e.dispute.status)?Y().createElement(wd,{dispute:e.dispute,customer:e.billing_details,chargeCreated:e.created,orderUrl:null===(c=e.order)||void 0===c?void 0:c.url,paymentMethod:null===(i=e.payment_method_details)||void 0===i?void 0:i.type,bankName:N}):Y().createElement(kd,{dispute:e.dispute,bankName:N})),S&&Y().createElement(xd,{charge:e,formattedAmount:E,onModalClose:()=>{k(!1),ce("payments_transactions_details_refund_modal_close",{payment_intent_id:e.payment_intent})}}),!mt().isEmpty(e)&&!e.order&&!n&&Y().createElement(zm,{charge:e,isLoading:n,onButtonClick:()=>k(!0)}),p&&!p.captured&&Y().createElement(Lm,{isLoading:n,placeholder:""},Y().createElement(Sm,{actions:_?Y().createElement(Y().Fragment,null):Y().createElement(lm,{orderId:(null===(l=e.order)||void 0===l?void 0:l.id)||0,paymentIntentId:e.payment_intent||"",buttonIsPrimary:!0,buttonIsSmall:!1,onClick:()=>{ce("payments_transactions_details_capture_charge_button_click",{payment_intent_id:e.payment_intent})}})},(0,J.createInterpolateElement)((0,V.__)("You must <a>capture</a> this charge within the next","woocommerce-payments"),{a:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/settings-guide/authorize-and-capture/#capturing-authorized-orders"})})," ",Y().createElement("abbr",{title:nn(ut().utc(p.created).add(7,"days").toISOString(),{includeTime:!0})},Y().createElement("b",null,ut().utc(p.created).add(7,"days").fromNow(!0))),_&&`. ${(0,V.__)("Approving this transaction will capture the charge.","woocommerce-payments")}`)))},Ad=e=>Y().createElement(xn.Provider,{value:window.wcpaySettings},Y().createElement(Id,Object.assign({},e)));var Rd=n(1064),Ld=n(2294),Dd=n(9774);const jd=e=>Number((100*e).toFixed(3)),Pd=e=>(0,ve.jsx)(fe.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",...e,children:(0,ve.jsx)(fe.Path,{d:["M12 15.8c-3.7 0-6.8-3-6.8-6.8s3-6.8 6.8-6.8c3.7 0 6.8 3 6.8 6.8s-3.1 6.8-6.8 6.8zm0-12C9.1 3.8 ","6.8 6.1 6.8 9s2.4 5.2 5.2 5.2c2.9 0 5.2-2.4 5.2-5.2S14.9 3.8 12 3.8zM8 17.5h8V19H8zM10 20.5h4V22h-4z"].join(" ")})}),Md=e=>Y().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},e),Y().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0.175781L15.75 3.24396V7.81781C15.75 11.7168 13.2458 15.4084 9.7147 16.573C9.25069 16.726 8.74931 16.726 8.2853 16.573C4.75416 15.4084 2.25 11.7168 2.25 7.81781V3.24396L9 0.175781ZM3.75 4.20983V7.81781C3.75 11.1307 5.89514 14.2052 8.75512 15.1485C8.914 15.2009 9.086 15.2009 9.24488 15.1485C12.1049 14.2052 14.25 11.1307 14.25 7.81781V4.20983L9 1.82347L3.75 4.20983Z",fill:"white"})),Fd={[Ua]:{[$a]:(0,V.__)("Place in review if the AVS verification fails","woocommerce-payments"),[Va]:(0,V.__)("Place in review if the shipping address country differs from the billing address country","woocommerce-payments"),[Wa]:(0,V.__)("Place in review if the country resolved from customer IP is not listed in your selling countries","woocommerce-payments"),[Ha]:(0,V.__)("Place in review if the order originates from a country different from the shipping address country","woocommerce-payments"),[Ya]:(0,V.__)("Place in review if the items count is not in your defined range","woocommerce-payments"),[qa]:(0,V.__)("Place in review if the purchase price is not in your defined range","woocommerce-payments")},[za]:{[$a]:(0,V.__)("Block if the AVS verification fails","woocommerce-payments"),[Va]:(0,V.__)("Block if the shipping address differs from the billing address","woocommerce-payments"),[Wa]:(0,V.__)("Block if the country resolved from customer IP is not listed in your selling countries","woocommerce-payments"),[Ha]:(0,V.__)("Block if the order originates from a country different from the shipping address country","woocommerce-payments"),[Ya]:(0,V.__)("Block if the items count is not in your defined range","woocommerce-payments"),[qa]:(0,V.__)("Block if the purchase price is not in your defined range","woocommerce-payments")}},Bd={card_declined:(0,V.__)("The card was declined by the bank","woocommerce-payments"),expired_card:(0,V.__)("The card has expired","woocommerce-payments"),incorrect_cvc:(0,V.__)("The security code is incorrect","woocommerce-payments"),incorrect_number:(0,V.__)("The card number is incorrect","woocommerce-payments"),incorrect_zip:(0,V.__)("The postal code is incorrect","woocommerce-payments"),invalid_cvc:(0,V.__)("The security code is invalid","woocommerce-payments"),invalid_expiry_month:(0,V.__)("The expiration month is invalid","woocommerce-payments"),invalid_expiry_year:(0,V.__)("The expiration year is invalid","woocommerce-payments"),invalid_number:(0,V.__)("The card number is invalid","woocommerce-payments"),processing_error:(0,V.__)("An error occurred while processing the card","woocommerce-payments"),authentication_required:(0,V.__)("The payment requires authentication","woocommerce-payments"),insufficient_funds:(0,V.__)("The card has insufficient funds to complete the purchase","woocommerce-payments"),default:(0,V.__)("The payment was declined","woocommerce-payments")},zd={"AT VAT":(0,V.__)("AT VAT","woocommerce-payments"),"BE VAT":(0,V.__)("BE VAT","woocommerce-payments"),"BG VAT":(0,V.__)("BG VAT","woocommerce-payments"),"CY VAT":(0,V.__)("CY VAT","woocommerce-payments"),"CZ VAT":(0,V.__)("CZ VAT","woocommerce-payments"),"DE VAT":(0,V.__)("DE VAT","woocommerce-payments"),"DK VAT":(0,V.__)("DK VAT","woocommerce-payments"),"EE VAT":(0,V.__)("EE VAT","woocommerce-payments"),"ES VAT":(0,V.__)("ES VAT","woocommerce-payments"),"FI VAT":(0,V.__)("FI VAT","woocommerce-payments"),"FR VAT":(0,V.__)("FR VAT","woocommerce-payments"),"GB VAT":(0,V.__)("UK VAT","woocommerce-payments"),"GR VAT":(0,V.__)("GR VAT","woocommerce-payments"),"HR VAT":(0,V.__)("HR VAT","woocommerce-payments"),"HU VAT":(0,V.__)("HU VAT","woocommerce-payments"),"IE VAT":(0,V.__)("IE VAT","woocommerce-payments"),"IT VAT":(0,V.__)("IT VAT","woocommerce-payments"),"LT VAT":(0,V.__)("LT VAT","woocommerce-payments"),"LU VAT":(0,V.__)("LU VAT","woocommerce-payments"),"LV VAT":(0,V.__)("LV VAT","woocommerce-payments"),"MT VAT":(0,V.__)("MT VAT","woocommerce-payments"),"NO VAT":(0,V.__)("NO VAT","woocommerce-payments"),"NL VAT":(0,V.__)("NL VAT","woocommerce-payments"),"PL VAT":(0,V.__)("PL VAT","woocommerce-payments"),"PT VAT":(0,V.__)("PT VAT","woocommerce-payments"),"RO VAT":(0,V.__)("RO VAT","woocommerce-payments"),"SE VAT":(0,V.__)("SE VAT","woocommerce-payments"),"SI VAT":(0,V.__)("SI VAT","woocommerce-payments"),"SK VAT":(0,V.__)("SK VAT","woocommerce-payments"),"AU GST":(0,V.__)("AU GST","woocommerce-payments"),"NZ GST":(0,V.__)("NZ GST","woocommerce-payments"),"SG GST":(0,V.__)("SG GST","woocommerce-payments"),"CH VAT":(0,V.__)("CH VAT","woocommerce-payments"),"JP JCT":(0,V.__)("JP JCT","woocommerce-payments"),default:(0,V.__)("Tax","woocommerce-payments")},Ud=(e,t)=>({date:new Date(1e3*e.datetime),icon:(0,ve.jsx)(Ml.A,{}),headline:(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("Payment status changed to <strong>%s</strong>.","woocommerce-payments"),t),{strong:(0,ve.jsx)("strong",{})}),body:[]}),$d=(e,t,n,o=[])=>{let a="";if(e.deposit){a=(0,V.sprintf)(n?(0,V.__)("%1$s was added to your <a>%2$s payout</a>.","woocommerce-payments"):(0,V.__)("%1$s was deducted from your <a>%2$s payout</a>.","woocommerce-payments"),t,on(e.deposit.arrival_date));const o=Et({page:"wc-admin",path:"/payments/payouts/details",id:e.deposit.id});a=(0,J.createInterpolateElement)(a,{a:(0,ve.jsx)(X.Link,{href:o})})}else a=(0,V.sprintf)(n?(0,V.__)("%s will be added to a future payout.","woocommerce-payments"):(0,V.__)("%s will be deducted from a future payout.","woocommerce-payments"),t);return{date:new Date(1e3*e.datetime),icon:n?(0,ve.jsx)(Rd.A,{}):(0,ve.jsx)(Ld.A,{}),headline:a,body:o}},Vd=(e,t,n)=>{let o="";if(e.deposit){o=(0,V.sprintf)((0,V.__)("%1$s was subtracted from your <a>%2$s payout</a>.","woocommerce-payments"),t,on(e.deposit.arrival_date));const n=Et({page:"wc-admin",path:"/payments/payouts/details",id:e.deposit.id});o=(0,J.createInterpolateElement)(o,{a:(0,ve.jsx)(X.Link,{href:n})})}else o=(0,V.sprintf)((0,V.__)("%s will be subtracted from a future payout.","woocommerce-payments"),t);return{date:new Date(1e3*e.datetime),icon:(0,ve.jsx)(Ld.A,{}),headline:o,body:n}},Wd=(e,t,n,o=[])=>({date:new Date(1e3*e.datetime),headline:t,icon:n,body:o}),Hd=(e={})=>{const{transaction_details:t={}}=e,{customer_currency:n,store_currency:o}=t;return n&&o&&n!==o},Yd=(e,t,n)=>{if(!Hd(n)||!n.fee_rates?.fee_exchange_rate)return jn(-Math.abs(e),t);const{rate:o,fromCurrency:a}=n.fee_rates.fee_exchange_rate,r=n.transaction_details.store_currency,s=t===a?e*o:e/o;return jn(-Math.abs(s),r)},qd=e=>{if(!e.fee_rates)return!1;const t=e.fee_rates.history;return 1===t?.length&&"base"===t[0].type},Gd=e=>{const{amount_captured:t,fee:n,currency:o,transaction_details:{store_amount_captured:a,store_fee:r,store_currency:s}}=e;return Hd(e)?Mn(a-r,s):Mn(t-n,o)},Qd=e=>(0,V.sprintf)((0,V.__)("Net payout: %s","woocommerce-payments"),Gd(e)),Zd=e=>{const t=e.fee_rates?.tax;if(!t||0===t.amount)return"";const n=t.description?` ${(e=>e in zd?zd[e]:zd.default)(t.description)}`:"",o=t.percentage_rate?` (${(100*t.percentage_rate).toFixed(2)}%)`:"",a=Yd(t.amount,t.currency,e);return(0,V.sprintf)((0,V.__)("Tax%1$s%2$s: %3$s","woocommerce-payments"),n,o,a)},Kd=e=>{if(!e.fee_rates)return(0,V.sprintf)((0,V.__)("Fee: %s","woocommerce-payments"),jn(e.fee,e.currency));const{percentage:t,fixed:n,fixed_currency:o,history:a}=e.fee_rates,r=qd(e)?(0,V.__)("Base fee","woocommerce-payments"):(0,V.__)("Fee","woocommerce-payments");let s,c,i,l;Hd(e)?(s=e.fee_rates?.before_tax?.amount||e.transaction_details.store_fee,c=e.fee_rates?.before_tax?.currency||e.transaction_details.store_currency,i=n||0,l=o||c):(s=e.fee_rates.before_tax?e.fee_rates.before_tax.amount:e.fee,c=e.fee_rates.before_tax?e.fee_rates.before_tax.currency:e.currency,i=n,l=o);const m=Yd(s,c,e);if(qd(e)&&a[0]?.capped)return(0,V.sprintf)("%1$s (capped at %2$s): %3$s",r,jn(i,l),m);const d=Un(e.transaction_details.store_currency,e.transaction_details.customer_currency);return(0,V.sprintf)("%1$s (%2$f%% + %3$s%4$s): %5$s%6$s",r,jd(t),jn(i,l),d?` ${l}`:"",m,d?` ${c}`:"")},Jd=e=>{if(!Hd(e))return;const{transaction_details:{customer_currency:t,customer_amount:n,customer_amount_captured:o,store_currency:a,store_amount:r,store_amount_captured:s}}=e;return((e,t,n)=>{if(!e.currency||!t.currency)return;const o=Ln(e.currency)?1:100;return`${Mn(o,e.currency,!0)}  ${function(e,t,n){const{currencyData:o}=wcpaySettings;let a="number"==typeof t.amount&&"number"==typeof e.amount&&0!==e.amount?Math.abs(t.amount/e.amount):0;"number"==typeof n&&(a=n),Ln(t.currency)&&(a*=100),Ln(e.currency)&&(a/=100);const r=(0,lt.find)(o,{code:t.currency.toUpperCase()}),s=a<1?6:5,c=Ln(t.currency);r||(0,V.sprintf)(c?"%i %s":"%.5f %s",a,t.currency.toUpperCase());const i=On()({...r,precision:s});return Pn(function(e=""){return e.split(" ").map((e=>(0,lt.endsWith)(e,"0")?(0,lt.trimEnd)(e,"0"):e)).join(" ")}(Fn(i.formatAmount(a))),t.currency.toUpperCase())}(e,t,n)}: ${Mn(Math.abs(t.amount),t.currency)}`})({currency:t,amount:null!=o?o:n},{currency:a,amount:null!=s?s:r})},Xd=e=>"available"===e.acquirer_reference_number_status?(0,V.sprintf)((0,V.__)("Acquirer Reference Number (ARN) %s","woocommerce-payments"),e.acquirer_reference_number):"",eu=e=>{switch(e.failure_reason){case"expired_or_canceled_card":return(0,V.__)("the card being expired or canceled.","woocommerce-payments");case"lost_or_stolen_card":case"unknown":return(0,V.__)("the card being lost or stolen.","woocommerce-payments")}},tu=e=>{const t=(e=>{if(!e?.fee_rates?.history)return;if(qd(e))return;const{fee_rates:{history:t}}=e,n={};return t.forEach((t=>{let o=t.type;t.additional_type&&(o+=`-${t.additional_type}`);const{percentage_rate:a,fixed_rate:r,currency:s,capped:c}=t,i=jd(a),l=`${jn(r,s)}${Un(e.transaction_details.store_currency,e.transaction_details.customer_currency)?` ${s.toUpperCase()}`:""}`,m=(0,V.sprintf)(((e,t)=>({base:t?(0,V.__)("Base fee: capped at %2$s","woocommerce-payments"):0!==e?(0,V.__)("Base fee: %1$s%% + %2$s","woocommerce-payments"):(0,V.__)("Base fee: %1$s%%","woocommerce-payments"),"additional-international":0!==e?(0,V.__)("International card fee: %1$s%% + %2$s","woocommerce-payments"):(0,V.__)("International card fee: %1$s%%","woocommerce-payments"),"additional-fx":0!==e?(0,V.__)("Currency conversion fee: %1$s%% + %2$s","woocommerce-payments"):(0,V.__)("Currency conversion fee: %1$s%%","woocommerce-payments"),"additional-wcpay-subscription":0!==e?(0,V.__)("Subscription transaction fee: %1$s%% + %2$s","woocommerce-payments"):(0,V.__)("Subscription transaction fee: %1$s%%","woocommerce-payments"),"additional-device":0!==e?(0,V.__)("Tap to pay transaction fee: %1$s%% + %2$s","woocommerce-payments"):(0,V.__)("Tap to pay transaction fee: %1$s%%","woocommerce-payments"),discount:(0,V.__)("Discount","woocommerce-payments")}))(r,c)[o],i,l);n[o]="discount"===o?{label:m,variable:(0,V.sprintf)((0,V.__)("Variable fee: %s","woocommerce-payments"),i)+"%",fixed:(0,V.sprintf)((0,V.__)("Fixed fee: %s","woocommerce-payments"),l)}:m})),n})(e);if("object"!=typeof t)return;const n=Object.keys(t).map((e=>{const n=t[e];return(0,ve.jsxs)("li",{children:["discount"===e?n.label:n,"discount"===e&&(o=n,(0,ve.jsxs)("ul",{className:"discount-split-list",children:[(0,ve.jsx)("li",{children:o.variable},"variable"),(0,ve.jsx)("li",{children:o.fixed},"fixed")]}))]},e);var o}));return(0,ve.jsxs)("ul",{className:"fee-breakdown-list",children:[" ",n," "]})},nu=(e,t)=>{const n="block"===t,o=n?(0,V.__)("Payment was blocked by <a>%s</a>","woocommerce-payments"):(0,V.__)("Payment was approved by <a>%s</a>","woocommerce-payments"),a=n?(0,ve.jsx)(Dd.A,{className:"is-error"}):(0,ve.jsx)(pe.A,{className:"is-success"});return[Wd(e,(0,J.createInterpolateElement)((0,V.sprintf)(o,e.user.username),{a:(0,ve.jsx)("a",{href:(0,Q.addQueryArgs)("user-edit.php",{user_id:e.user.id}),tabIndex:-1})}),a)]},ou=e=>Object.entries(e.ruleset_results||{}).filter((([,e])=>"allow"!==e)).map((([e,t])=>(0,ve.jsx)("p",{className:"fraud-outcome-ruleset-item",children:Fd[t][e]},e))),au=(e,t)=>{const n="block"===t,o=n?(0,V.__)("Payment was screened by your fraud filters and blocked.","woocommerce-payments"):(0,V.__)("Payment was screened by your fraud filters and placed in review.","woocommerce-payments"),a=n?(0,ve.jsx)(Dd.A,{className:"is-error"}):(0,ve.jsx)(Md,{className:"is-fraud-outcome-review"});return[Wd(e,o,a,ou(e))]},ru=({paymentIntentId:e,bankName:t})=>{const{timeline:n,timelineError:o,isLoading:a}=ea(e),r=((e,t=null)=>e?(0,lt.flatMap)(e,(e=>((e,t=null)=>{const{type:n}=e,o=(t,n,o=!1)=>(0,V.sprintf)(t,o?Mn(n,e.currency):jn(n,e.currency));switch(n){case"started":return[Ud(e,(0,V.__)("Started","woocommerce-payments"))];case"authorized":return[Ud(e,(0,V.__)("Authorized","woocommerce-payments")),Wd(e,o((0,V.__)("A payment of %s was successfully authorized.","woocommerce-payments"),e.amount,!0),(0,ve.jsx)(pe.A,{className:"is-warning"}))];case"authorization_voided":return[Ud(e,(0,V.__)("Authorization voided","woocommerce-payments")),Wd(e,o((0,V.__)("Authorization for %s was voided.","woocommerce-payments"),e.amount,!0),(0,ve.jsx)(pe.A,{className:"is-warning"}))];case"authorization_expired":return[Ud(e,(0,V.__)("Authorization expired","woocommerce-payments")),Wd(e,o((0,V.__)("Authorization for %s expired.","woocommerce-payments"),e.amount,!0),(0,ve.jsx)(Dd.A,{className:"is-error"}))];case"captured":const a=Gd(e),r=[Jd(e),Kd(e),tu(e),0!==e?.fee_rates?.tax?.amount?Zd(e):null,Qd(e)].filter(Boolean);return[Ud(e,(0,V.__)("Paid","woocommerce-payments")),$d(e,a,!0),Wd(e,o((0,V.__)("A payment of %s was successfully charged.","woocommerce-payments"),e.amount_captured,!0),(0,ve.jsx)(pe.A,{className:"is-success"}),r)];case"partial_refund":case"full_refund":const s=Mn(e.amount_refunded,e.currency),c=Hd(e)?Mn(e.transaction_details.store_amount,e.transaction_details.store_currency):s;return[Ud(e,"full_refund"===n?(0,V.__)("Refunded","woocommerce-payments"):(0,V.__)("Partial refund","woocommerce-payments")),$d(e,c,!1),Wd(e,(0,V.sprintf)((0,V.__)("A payment of %s was successfully refunded.","woocommerce-payments"),s),(0,ve.jsx)(pe.A,{className:"is-success"}),[Jd(e),Xd(e)])];case"refund_failed":const i=Mn(e.amount_refunded,e.currency);return[Wd(e,(0,V.sprintf)((0,V.__)("%s refund was attempted but failed due to %s","woocommerce-payments"),i,eu(e)),(0,ve.jsx)(ee.A,{className:"is-error"}),[Xd(e)])];case"failed":const l=Bd[e.reason]||Bd.default;return[Ud(e,(0,V.__)("Failed","woocommerce-payments")),Wd(e,(0,V.sprintf)((0,V.__)("A payment of %1$s failed: %2$s.","woocommerce-payments"),Mn(e.amount,e.currency),l),(0,ve.jsx)(Dd.A,{className:"is-error"}))];case"dispute_needs_response":let m,d=(0,V.__)("Payment disputed","woocommerce-payments");if(ba[e.reason]&&(d=(0,V.sprintf)((0,V.__)("Payment disputed as %s.","woocommerce-payments"),ba[e.reason].display)),null===e.amount)m={date:new Date(1e3*e.datetime),icon:(0,ve.jsx)(_e.A,{}),headline:(0,V.__)("No funds have been withdrawn yet.","woocommerce-payments"),body:[(0,V.__)("The cardholder's bank is requesting more information to decide whether to return these funds to the cardholder.","woocommerce-payments")]};else{const t=Mn(Math.abs(e.amount)+Math.abs(e.fee),e.currency),n=Hd(e)?jn(e.transaction_details.customer_amount,e.transaction_details.customer_currency):jn(e.amount,e.currency);m=$d(e,t,!1,[(0,V.sprintf)((0,V.__)("Disputed amount: %s","woocommerce-payments"),n),Jd(e),(0,V.sprintf)((0,V.__)("Fee: %s","woocommerce-payments"),jn(e.fee,e.currency))])}return[Ud(e,(0,V.__)("Disputed: Needs response","woocommerce-payments")),m,Wd(e,d,(0,ve.jsx)(Dd.A,{className:"is-error"}))];case"dispute_in_review":return[Ud(e,(0,V.__)("Disputed: In review","woocommerce-payments")),Wd(e,(0,V.__)("Challenge evidence submitted.","woocommerce-payments"),(0,ve.jsx)(pe.A,{className:"is-success"}))];case"dispute_won":const u=Mn(Math.abs(e.amount)+Math.abs(e.fee),e.currency);return[Ud(e,(0,V.__)("Disputed: Won","woocommerce-payments")),$d(e,u,!0,[(0,V.sprintf)((0,V.__)("Dispute reversal: %s","woocommerce-payments"),jn(e.amount,e.currency)),(0,V.sprintf)((0,V.__)("Fee refund: %s","woocommerce-payments"),jn(Math.abs(e.fee),e.currency))]),Wd(e,(0,V.__)("Dispute won! The bank ruled in your favor.","woocommerce-payments"),(0,ve.jsx)(ee.A,{className:"is-success"}))];case"dispute_lost":return[Ud(e,(0,V.__)("Disputed: Lost","woocommerce-payments")),Wd(e,(0,J.createInterpolateElement)(t?(0,V.sprintf)((0,V.__)("<strong>Dispute lost.</strong> Your customer's bank, <strong>%s</strong>, reviewed the evidence and decided in the customer's favor.","woocommerce-payments"),t):(0,V.__)("<strong>Dispute lost.</strong> Your customer's bank reviewed the evidence and decided in the customer's favor.","woocommerce-payments"),{strong:(0,ve.jsx)("strong",{})}),(0,ve.jsx)(Dd.A,{className:"is-error"}))];case"dispute_warning_closed":return[Wd(e,(0,V.__)("Dispute inquiry closed. The bank chose not to pursue this dispute.","woocommerce-payments"),(0,ve.jsx)(ee.A,{className:"is-success"}))];case"dispute_charge_refunded":return[Wd(e,(0,V.__)("The disputed charge has been refunded.","woocommerce-payments"),(0,ve.jsx)(ee.A,{className:"is-success"}))];case"financing_paydown":return[Vd(e,jn(Math.abs(e.amount)),[(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("Loan repayment: <a>Loan %s</a>","woocommerce-payments"),e.loan_id),{a:(0,ve.jsx)(X.Link,{href:Et({page:"wc-admin",path:"/payments/transactions",type:"charge",filter:"advanced",loan_id_is:e.loan_id})})})])];case"fraud_outcome_manual_approve":return nu(e,"allow");case"fraud_outcome_manual_block":return nu(e,"block");case"fraud_outcome_review":return au(e,"review");case"fraud_outcome_block":return au(e,"block");default:return[]}})(e,t))):[])(n,t);return(0,ve.jsxs)(Z.Card,{size:"large",children:[(0,ve.jsx)(Z.CardHeader,{children:(0,ve.jsx)(Lm,{isLoading:a,value:(0,V.__)("Timeline","woocommerce-payments")})}),(0,ve.jsxs)(Z.CardBody,{children:[(0,ve.jsx)(Rm,{isLoading:a,numLines:3,children:o instanceof Error?(0,V.__)("Error while loading timeline","woocommerce-payments"):(0,ve.jsx)(X.Timeline,{items:r})}),(0,ve.jsx)(Rm,{isLoading:a,numLines:3}),(0,ve.jsx)(Rm,{isLoading:a,numLines:3}),(0,ve.jsx)(Rm,{isLoading:a,numLines:3})]})]})},su=e=>{const{label:t,children:n,isLoading:o}=e;return(0,ve.jsxs)("div",{className:"payment-method-detail",children:[(0,ve.jsx)("h4",{className:"payment-method-detail__label",children:(0,ve.jsx)(Lm,{isLoading:o,display:"block",value:t})}),(0,ve.jsx)("p",{className:"payment-method-detail__value",children:(0,ve.jsx)(Lm,{isLoading:o,value:n})})]})},cu={bankName:"bank name placeholder",bic:"bic placeholder",id:"id placeholder",verifiedName:"verified name placeholder",name:"name placeholder",email:"email placeholder",formattedAddress:"address placeholder",country:"country placeholder"},iu={bsb:"000000",last4:"0000",fingerprint:"fingerprint placeholder",id:"id placeholder",name:"name placeholder",email:"email placeholder",formattedAddress:"address placeholder"},lu=e=>{const{checked:t}=e;switch(t){case"pass":return(0,V.__)("Passed","woocommerce-payments");case"fail":return(0,V.__)("Failed","woocommerce-payments");case"unavailable":return(0,V.__)("Unavailable","woocommerce-payments");default:return(0,V.__)("Not checked","woocommerce-payments")}},mu={last4:"0000",fingerprint:(0,V.__)("fingerprint placeholder","woocommerce-payments"),date:(0,V.__)("date placeholder","woocommerce-payments"),cardType:(0,V.__)("card type placeholder","woocommerce-payments"),id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments"),cvcCheck:null,line1Check:null,postalCodeCheck:null},du={last4:"0000",fingerprint:(0,V.__)("fingerprint placeholder","woocommerce-payments"),date:(0,V.__)("date placeholder","woocommerce-payments"),cardType:(0,V.__)("card type placeholder","woocommerce-payments"),id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments")},uu={arzte_und_apotheker_bank:"rzte- und Apothekerbank",austrian_anadi_bank_ag:"Austrian Anadi Bank AG",bank_austria:"Bank Austria",bankhaus_carl_spangler:"Bankhaus Carl Spngler &amp; Co.AG",bankhaus_schelhammer_und_schattera_ag:"Bankhaus Schelhammer &amp; Schattera AG",bawag_psk_ag:"BAWAG P.S.K. AG",bks_bank_ag:"BKS Bank AG",brull_kallmus_bank_ag:"Brll Kallmus Bank AG",btv_vier_lander_bank:"BTV VIER LNDER BANK",capital_bank_grawe_gruppe_ag:"Capital Bank Grawe Gruppe AG",dolomitenbank:"Dolomitenbank",easybank_ag:"Easybank AG",erste_bank_und_sparkassen:"Erste Bank und Sparkassen",hypo_alpeadriabank_international_ag:"Hypo Alpe-Adria-Bank International AG",hypo_noe_lb_fur_niederosterreich_u_wien:"HYPO NOE LB fr Niedersterreich u. Wien",hypo_oberosterreich_salzburg_steiermark:"HYPO Obersterreich,Salzburg,Steiermark",hypo_tirol_bank_ag:"Hypo Tirol Bank AG",hypo_vorarlberg_bank_ag:"Hypo Vorarlberg Bank AG",hypo_bank_burgenland_aktiengesellschaft:"HYPO-BANK BURGENLAND Aktiengesellschaft",marchfelder_bank:"Marchfelder Bank",oberbank_ag:"Oberbank AG",raiffeisen_bankengruppe_osterreich:"Raiffeisen Bankengruppe sterreich",schoellerbank_ag:"Schoellerbank AG",sparda_bank_wien:"Sparda-Bank Wien",volksbank_gruppe:"Volksbank Gruppe",volkskreditbank_ag:"Volkskreditbank AG",vr_bank_braunau:"VR-Bank Braunau"},pu={id:(0,V.__)("id placeholder","woocommerce-payments"),bank:(0,V.__)("bank name placeholder","woocommerce-payments"),verifiedName:(0,V.__)("verified_name placeholder","woocommerce-payments"),customerName:(0,V.__)("customer_name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments")},_u={bankName:(0,V.__)("bank name placeholder","woocommerce-payments"),bic:(0,V.__)("bic placeholder","woocommerce-payments"),id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments")},yu={id:(0,V.__)("id placeholder","woocommerce-payments"),bankName:(0,V.__)("bank name placeholder","woocommerce-payments"),bic:(0,V.__)("bic placeholder","woocommerce-payments"),last4:"0000",verifiedName:(0,V.__)("verified name placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments")},hu={id:"id placeholder",name:"name placeholder",email:"email placeholder",formattedAddress:"address placeholder",paymentMethodCategory:"category placeholder",preferredLocale:"locale placeholder"},gu={id:(0,V.__)("id placeholder","woocommerce-payments"),bank:(0,V.__)("bank name placeholder","woocommerce-payments"),reference:(0,V.__)("reference placeholder","woocommerce-payments"),verifiedName:(0,V.__)("verified_name placeholder","woocommerce-payments"),customerName:(0,V.__)("customer_name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments")},wu={last4:"0000",fingerprint:(0,V.__)("fingerprint placeholder","woocommerce-payments"),id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments")},fu={bankCode:(0,V.__)("bank code placeholder","woocommerce-payments"),bankName:(0,V.__)("bank name placeholder","woocommerce-payments"),bic:(0,V.__)("bic placeholder","woocommerce-payments"),last4:"0000",verifiedName:(0,V.__)("verified name placeholder","woocommerce-payments"),fingerprint:(0,V.__)("fingerprint placeholder","woocommerce-payments"),id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments"),country:(0,V.__)("country placeholder","woocommerce-payments")},vu={id:(0,V.__)("id placeholder","woocommerce-payments"),name:(0,V.__)("name placeholder","woocommerce-payments"),email:(0,V.__)("email placeholder","woocommerce-payments"),formattedAddress:(0,V.__)("address placeholder","woocommerce-payments")},bu=({charge:e,isLoading:t})=>{const{id:n,name:o,email:a,formattedAddress:r}=e&&e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{name:o,email:a,formatted_address:r}=t;return{id:n,name:o,email:a,formattedAddress:r}})(e):vu;return Y().createElement("div",{className:"payment-method-details"},Y().createElement("div",{className:"payment-method-details__column"},Y().createElement(su,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments")},n||"")),Y().createElement("div",{className:"payment-method-details__column"},Y().createElement(su,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments")},o||""),Y().createElement(su,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments")},a||""),Y().createElement(su,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments")},Y().createElement("span",{dangerouslySetInnerHTML:{__html:r||""}}))))},Eu={affirm:bu,alipay:bu,afterpay_clearpay:bu,au_becs_debit:({charge:e={},isLoading:t})=>{const n=e&&e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bsb_number:o,last4:a,fingerprint:r}=e.payment_method_details.au_becs_debit,{name:s,email:c,formatted_address:i}=t;return{bsb:o,last4:a,fingerprint:r,id:n,name:s,email:c,formattedAddress:i}})(e):iu,{bsb:o,last4:a,id:r,name:s,email:c,formattedAddress:i}=n,l=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("BSB","woocommerce-payments"),children:o}),(0,ve.jsxs)(l,{isLoading:t,label:(0,V.__)("Account","woocommerce-payments"),children:["",a]}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:r})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:s}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:c}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})})]})]})},bancontact:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank_name:o,bic:a,verified_name:r}=e.payment_method_details.bancontact,{name:s,email:c,formatted_address:i}=t;return{id:n,bankName:o,bic:a,verifiedName:r,name:s,email:c,formattedAddress:i}})(e):cu,{id:o,bankName:a,bic:r,verifiedName:s,name:c,email:i,formattedAddress:l}=n,m=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:a}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("BIC","woocommerce-payments"),children:r}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:o})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Verified name","woocommerce-payments"),children:s}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:c}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:i}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:l}})})]})]})},card:({charge:e={},isLoading:t})=>{const n=e&&e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{last4:o,fingerprint:a,exp_month:r,exp_year:s,funding:c,network:i,country:l,checks:m}=e.payment_method_details.card,{name:d,email:u,formatted_address:p}=t,{cvc_check:_,address_line1_check:y,address_postal_code_check:h}=m||{},g=r&&s?r+" / "+s:void 0,w={credit:(0,V.__)("credit","woocommerce-payments"),debit:(0,V.__)("debit","woocommerce-payments"),prepaid:(0,V.__)("prepaid","woocommerce-payments"),unknown:(0,V.__)("unknown","woocommerce-payments")};return{last4:o,fingerprint:a,date:g,cardType:i?(0,V.sprintf)((0,V.__)("%1$s %2$s card","woocommerce-payments"),"jcb"===i?i.toUpperCase():i.charAt(0).toUpperCase()+i.slice(1),w[c]):void 0,id:n,name:d,email:u,country:wcSettings.countries[l],cvcCheck:_,line1Check:y,postalCodeCheck:h,formattedAddress:p}})(e):mu,{last4:o,date:a,cardType:r,id:s,name:c,email:i,country:l,cvcCheck:m,line1Check:d,postalCodeCheck:u,formattedAddress:p}=n,_=su,y=lu;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Number","woocommerce-payments"),children:o?(0,ve.jsxs)(ve.Fragment,{children:["",o]}):""}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Expires","woocommerce-payments"),children:null!=a?a:""}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Type","woocommerce-payments"),children:null!=r?r:""}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:s||""})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:c}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:i}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:p}})}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Origin","woocommerce-payments"),children:l}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("CVC check","woocommerce-payments"),children:(0,ve.jsx)(y,{checked:m})}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Street check","woocommerce-payments"),children:(0,ve.jsx)(y,{checked:d})}),(0,ve.jsx)(_,{isLoading:t,label:(0,V.__)("Postal code check","woocommerce-payments"),children:(0,ve.jsx)(y,{checked:u})})]})]})},card_present:({charge:e={},isLoading:t})=>{const n=e&&e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{last4:o,fingerprint:a,exp_month:r,exp_year:s,funding:c,network:i,country:l}=e.payment_method_details.card_present,{name:m,email:d,formatted_address:u}=t,p=r+" / "+s,_={credit:(0,V.__)("credit","woocommerce-payments"),debit:(0,V.__)("debit","woocommerce-payments"),prepaid:(0,V.__)("prepaid","woocommerce-payments"),unknown:(0,V.__)("unknown","woocommerce-payments")};return{last4:o,fingerprint:a,date:p,cardType:(0,V.sprintf)((0,V.__)("%1$s %2$s card","woocommerce-payments"),i.charAt(0).toUpperCase()+i.slice(1),_[c]),id:n,name:m,email:d,country:wcSettings.countries[l],formattedAddress:u}})(e):du,{last4:o,date:a,cardType:r,id:s,name:c,email:i,country:l,formattedAddress:m}=n,d=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsxs)(d,{isLoading:t,label:(0,V.__)("Number","woocommerce-payments"),children:["",o]}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Expires","woocommerce-payments"),children:a}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Type","woocommerce-payments"),children:r}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:s})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:c}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:i}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:m}})}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Origin","woocommerce-payments"),children:l})]})]})},eps:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank:o,verified_name:a}=e.payment_method_details.eps,{name:r,email:s,formatted_address:c}=t;return{id:n,bank:o,verifiedName:a,customerName:r,email:s,formattedAddress:c}})(e):pu,{id:o,bank:a,verifiedName:r,customerName:s,email:c,formattedAddress:i}=n,l=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:uu[a]}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:o}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Verified name","woocommerce-payments"),children:r})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:s}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:c}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})})]})]})},giropay:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank_name:o,bic:a}=e.payment_method_details.giropay,{name:r,email:s,formatted_address:c}=t;return{id:n,bankName:o,bic:a,name:r,email:s,formattedAddress:c}})(e):_u,{id:o,bankName:a,bic:r,name:s,email:c,formattedAddress:i}=n,l=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:a}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("BIC","woocommerce-payments"),children:r}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:o})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:s}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:c}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})})]})]})},grabpay:bu,ideal:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank:o,bic:a,country:r,iban_last4:s,verified_name:c}=e.payment_method_details.ideal,{name:i,email:l,formatted_address:m}=t;return{bankName:o,bic:a,last4:s,verifiedName:c,id:n,name:i,email:l,country:wcSettings.countries[r],formattedAddress:m}})(e):yu,{bankName:o,bic:a,last4:r,verifiedName:s,id:c,name:i,email:l,formattedAddress:m}=n,d=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:c}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:o}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("BIC","woocommerce-payments"),children:a}),(0,ve.jsxs)(d,{isLoading:t,label:(0,V.__)("IBAN","woocommerce-payments"),children:["",r]})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Verified name","woocommerce-payments"),children:s}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:i}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:l}),(0,ve.jsx)(d,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:m}})})]})]})},klarna:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{payment_method_category:o,preferred_locale:a}=e.payment_method_details.klarna,r={pay_later:(0,V.__)("pay_later","woocommerce-payments"),pay_now:(0,V.__)("pay_now","woocommerce-payments"),pay_with_financing:(0,V.__)("pay_with_financing","woocommerce-payments"),pay_in_installments:(0,V.__)("pay_in_installments","woocommerce-payments")},{name:s,email:c,formatted_address:i}=t;return{id:n,name:s,email:c,formattedAddress:i,paymentMethodCategory:r[o],preferredLocale:a}})(e):hu,{id:o,name:a,email:r,formattedAddress:s,paymentMethodCategory:c,preferredLocale:i}=n;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:o}),(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("Category","woocommerce-payments"),children:c}),(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("Preferred Locale","woocommerce-payments"),children:i})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:a}),(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:r}),(0,ve.jsx)(su,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})})]})]})},p24:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank:o,reference:a,verified_name:r}=e.payment_method_details.p24,{name:s,email:c,formatted_address:i}=t;return{id:n,bank:o,reference:a,verifiedName:r,customerName:s,email:c,formattedAddress:i}})(e):gu,{id:o,bank:a,reference:r,verifiedName:s,customerName:c,email:i,formattedAddress:l}=n,m=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:Xl[a]}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Reference","woocommerce-payments"),children:r}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:o}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Verified name","woocommerce-payments"),children:s})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:c}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:i}),(0,ve.jsx)(m,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:l}})})]})]})},sepa_debit:({charge:e={},isLoading:t})=>{const n=e&&e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{last4:o,fingerprint:a,country:r}=e.payment_method_details.sepa_debit,{name:s,email:c,formatted_address:i}=t;return{last4:o,fingerprint:a,id:n,name:s,email:c,country:wcSettings.countries[r],formattedAddress:i}})(e):wu,{last4:o,id:a,name:r,email:s,country:c,formattedAddress:i}=n,l=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsxs)(l,{isLoading:t,label:(0,V.__)("IBAN","woocommerce-payments"),children:["",o]}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:a})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:r}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:s}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})}),(0,ve.jsx)(l,{isLoading:t,label:(0,V.__)("Origin","woocommerce-payments"),children:c})]})]})},sofort:({charge:e={},isLoading:t})=>{const n=e.payment_method_details?(e=>{const{billing_details:t,payment_method:n}=e,{bank_code:o,bank_name:a,bic:r,country:s,iban_last4:c,verified_name:i}=e.payment_method_details.sofort,{name:l,email:m,formatted_address:d}=t;return{bankCode:o,bankName:a,bic:r,last4:c,verifiedName:i,id:n,name:l,email:m,country:wcSettings.countries[s],formattedAddress:d}})(e):fu,{bankCode:o,bankName:a,bic:r,last4:s,verifiedName:c,id:i,name:l,email:m,country:d,formattedAddress:u}=n,p=su;return(0,ve.jsxs)("div",{className:"payment-method-details",children:[(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("ID","woocommerce-payments"),children:i}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Bank code","woocommerce-payments"),children:o}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Bank name","woocommerce-payments"),children:a}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("BIC","woocommerce-payments"),children:r}),(0,ve.jsxs)(p,{isLoading:t,label:(0,V.__)("IBAN","woocommerce-payments"),children:["",s]})]}),(0,ve.jsxs)("div",{className:"payment-method-details__column",children:[(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Verified name","woocommerce-payments"),children:c}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Owner","woocommerce-payments"),children:l}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Owner email","woocommerce-payments"),children:m}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Address","woocommerce-payments"),children:(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:u}})}),(0,ve.jsx)(p,{isLoading:t,label:(0,V.__)("Origin","woocommerce-payments"),children:d})]})]})},multibanco:bu,wechat_pay:bu},Su=({charge:e={},isLoading:t})=>{if(!e.payment_method_details||!e.payment_method_details.type)return null;const n=e.payment_method_details.type;if(!(n in Eu))return null;const o=Eu[n];return(0,ve.jsxs)(Z.Card,{size:"large",children:[(0,ve.jsx)(Z.CardHeader,{children:(0,ve.jsx)(Lm,{isLoading:t,value:(0,V.__)("Payment method","woocommerce-payments")})}),(0,ve.jsx)(Z.CardBody,{children:(0,ve.jsx)(o,{isLoading:t,charge:e})})]})},ku=({paymentIntentId:e})=>{const{timeline:t,isLoading:n}=ea(e);return(e=>{(0,H.useMemo)((()=>{if(void 0===e)return null;const{transaction_details:t}=e;if(!t)return null;const n=`${jn(t.store_amount,t.store_currency)} ${t.store_currency}`,o=`${jn(t.customer_amount,t.customer_currency,t.store_currency)} ${t.customer_currency}`,a=t.store_currency!==t.customer_currency;return{formattedStoreAmount:n,formattedCustomerAmount:o,isMultiCurrency:a,formattedAmount:`${o}${a?`  ${n}`:""}`}}),[e])})((0,lt.find)(t,(e=>"captured"===e.type))),null},Nu=({id:e,error:t,charge:n={},metadata:o={},isLoading:a,showTimeline:r=!0,paymentIntent:s})=>{if(!a&&t instanceof Error)return Y().createElement(ge,{maxWidth:1032,className:"wcpay-payment-details"},Y().createElement(tn,{currentPage:"payments",isDetailsView:!0}),Y().createElement(Z.Card,null,Y().createElement(Z.CardBody,null,(0,V.__)("Payment details not loaded","woocommerce-payments"))));const c=n?jl(n):null;return Y().createElement(ge,{maxWidth:1032,className:"wcpay-payment-details"},Y().createElement(ol,null),Y().createElement(tn,{currentPage:"payments",isDetailsView:!0}),Y().createElement(he,null,Y().createElement(Ad,{charge:n,metadata:o,isLoading:a,paymentIntent:s})),r&&wcpaySettings.featureFlags.paymentTimeline&&Y().createElement(he,null,Y().createElement(ru,{paymentIntentId:e,bankName:c})),Y().createElement(he,null,Y().createElement(ku,{paymentIntentId:e})),Y().createElement(he,null,Y().createElement(Su,{charge:n,isLoading:a})))},xu=({id:e})=>{const{data:t,isLoading:n}=(e=>(0,ln.useSelect)((t=>{const{getChargeFromOrder:n,isResolving:o,getChargeFromOrderError:a,hasFinishedResolution:r}=t(yt);return{data:n(e),error:a(e),isLoading:o("getChargeFromOrder",[e])||!r("getChargeFromOrder",[e])}}),[e]))(e),o=!!t.payment_intent,a=n||o;return(0,H.useEffect)((()=>{if(t&&o){const e=Et({page:"wc-admin",path:"/payments/transactions/details",id:t.payment_intent});window.location.href=e}}),[t,o]),Y().createElement(Nu,{id:e,charge:t,isLoading:a,showTimeline:!o})},Cu=e=>void 0!==e.charge,Tu=({id:e})=>{const{data:t,error:n,isLoading:o}=Dc(e),a=Cu(t)?t:{},r=Lc(e),s=r||o,c=(Cu(t)?t.charge:t)||{},i=Cu(t)?t.metadata:{};return(0,H.useEffect)((()=>{if((e=>void 0===e.charge)(t)&&r&&t.payment_intent){const e=Et({page:"wc-admin",path:"/payments/transactions/details",id:t.payment_intent});(0,Ni.getHistory)().replace(e)}}),[t,r]),Y().createElement(Nu,{id:e,error:n,charge:c,metadata:i,isLoading:s,showTimeline:!r,paymentIntent:a})},Ou=({query:e})=>{const{id:t,transaction_id:n,transaction_type:o}=e||{},{status_is:a,type_is:r}=(0,Ni.getQuery)();return a&&r&&(ce("wcpay_fraud_protection_order_details_link_clicked",{status:a,type:r}),(0,Ni.updateQueryString)({status_is:void 0,type_is:void 0})),"card_reader_fee"===o?Y().createElement(bm,{chargeId:t,transactionId:n}):/^\d+$/.test(t)?Y().createElement(xu,{id:t}):Y().createElement(Tu,{id:t})},Iu=({storeCurrencies:e})=>{return Y().createElement("div",{className:"woocommerce-filters-disputes"},Y().createElement(X.ReportFilters,{filters:(t=Na,t.forEach((t=>{if("store_currency_is"===t.param){const n=e||[];t.filters=[t.filters[0],...n.map((e=>({label:An(e),value:e})))],2<t.filters.length&&(t.showFilters=()=>!0)}})),t),advancedFilters:Ta,showDatePicker:!1,path:"/payments/disputes",query:(0,Ni.getQuery)()}));var t};const Au=e=>{if(""===e.due_by||!jm(e.status))return"";const t=ut()().utc(),n=ut().utc(e.due_by),o=n.diff(t,"hours",!1),a=n.diff(t,"days",!1);return o<=0?"":o<=72?Y().createElement("span",{className:"due-soon"},o<=24?(0,V.__)("Last day today","woocommerce-payments"):(0,V.sprintf)((0,V._n)("%s day left","%s days left",a,"woocommerce-payments"),a),Y().createElement(ee.A,{className:"due-soon-icon"})):nn(e.due_by,{includeTime:!0})},Ru=()=>{var e,t,n;$s();const{disputes:o,isLoading:a}=ja((0,Ni.getQuery)()),{disputesSummary:r,isLoading:s}=(({paged:e,per_page:t,match:n,store_currency_is:o,date_before:a,date_after:r,date_between:s,filter:c,status_is:i,status_is_not:l})=>(0,ln.useSelect)((m=>{const{getDisputesSummary:d,isResolving:u}=m(yt),p={paged:Number.isNaN(parseInt(null!=e?e:"",10))?"1":e,perPage:Number.isNaN(parseInt(null!=t?t:"",10))?"25":t,match:n,storeCurrencyIs:o,dateBefore:a,dateAfter:r,dateBetween:s,filter:c,statusIs:i,statusIsNot:l};return{disputesSummary:d(p),isLoading:u("getDisputesSummary",[p])}}),[e,t,o,n,a,r,JSON.stringify(s),c,i,l]))((0,Ni.getQuery)()),{requestReportExport:c,isExportInProgress:i}=Vi(),{createNotice:l}=(0,ln.useDispatch)("core/notices"),m=(d=(0,Ni.getQuery)().orderby,[{key:"details",label:"",required:!0,cellClassName:ue("info-button",{"is-sorted":"amount"===d}),isLeftAligned:!0},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount","woocommerce-payments"),required:!0,isSortable:!0,isLeftAligned:!0},{key:"currency",label:(0,V.__)("Currency","woocommerce-payments"),visible:!1,required:!0},{key:"status",label:(0,V.__)("Status","woocommerce-payments"),screenReaderLabel:(0,V.__)("Status","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"reason",label:(0,V.__)("Reason","woocommerce-payments"),screenReaderLabel:(0,V.__)("Reason","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"source",label:(0,V.__)("Source","woocommerce-payments"),screenReaderLabel:(0,V.__)("Source","woocommerce-payments"),required:!0,cellClassName:"is-center-aligned"},{key:"order",label:(0,V.__)("Order #","woocommerce-payments"),screenReaderLabel:(0,V.__)("Order #","woocommerce-payments"),required:!0},{key:"customerName",label:(0,V.__)("Customer","woocommerce-payments"),screenReaderLabel:(0,V.__)("Customer","woocommerce-payments"),isLeftAligned:!0},{key:"customerEmail",label:(0,V.__)("Email","woocommerce-payments"),screenReaderLabel:(0,V.__)("Email","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"customerCountry",label:(0,V.__)("Country","woocommerce-payments"),screenReaderLabel:(0,V.__)("Country","woocommerce-payments"),visible:!1,isLeftAligned:!0},{key:"created",label:(0,V.__)("Disputed on","woocommerce-payments"),screenReaderLabel:(0,V.__)("Disputed on","woocommerce-payments"),isLeftAligned:!0,isSortable:!0,defaultSort:!0,defaultOrder:"desc",visible:!1},{key:"dueBy",label:(0,V.__)("Respond by","woocommerce-payments"),screenReaderLabel:(0,V.__)("Respond by","woocommerce-payments"),required:!0,isLeftAligned:!0,isSortable:!0},{key:"action",label:(0,V.__)("Action","woocommerce-payments"),screenReaderLabel:(0,V.__)("Action","woocommerce-payments"),isLeftAligned:!1,isNumeric:!0,required:!0,visible:!0}]);var d;const{columnsToDisplay:u,onColumnsChange:p}=Hi("wc_payments_disputes_hidden_columns",m),_=r.count||0,y=o.map((e=>{var t,n,o,a,r,s;const c=t=>{t.preventDefault(),ce("wcpay_disputes_row_action_click"),(0,Ni.getHistory)().push(Oi(e.charge_id,"transactions"))},i=t=>Y().createElement(Ai,{href:Oi(e.charge_id,"transactions"),onClick:c},t),l=Y().createElement(Ii,{id:e.charge_id,parentSegment:"transactions"}),d=ba[e.reason],u=d?d.display:xt(e.reason),p=jm(e.status),_={amount:{value:Dn(e.amount,e.currency),display:i(Mn(e.amount,e.currency))},currency:{value:e.currency,display:i(e.currency)},status:{value:e.status,display:i(Y().createElement(Fm,{status:e.status}))},reason:{value:u,display:i(u)},source:{value:null!==(t=e.source)&&void 0!==t?t:"",display:i(Y().createElement("span",{className:`payment-method__brand payment-method__brand--${null!==(n=e.source)&&void 0!==n?n:""}`}))},created:{value:e.created,display:i(nn(e.created,{includeTime:!0}))},dueBy:{value:e.due_by,display:i(Au(e))},order:{value:null!==(o=e.order_number)&&void 0!==o?o:"",display:Y().createElement(pl,{order:e.order})},customerName:{value:null!==(a=e.customer_name)&&void 0!==a?a:"",display:e.order&&e.order.customer_url?Y().createElement(X.Link,{href:e.order.customer_url},e.customer_name):i(e.customer_name)},customerEmail:{value:null!==(r=e.customer_email)&&void 0!==r?r:"",display:i(e.customer_email)},customerCountry:{value:null!==(s=e.customer_country)&&void 0!==s?s:"",display:i(e.customer_country)},details:{value:e.dispute_id,display:l},action:{value:"",display:Y().createElement(Z.Button,{variant:p?"secondary":"tertiary",href:Oi(e.charge_id,"transactions"),onClick:c},p?(0,V.__)("Respond","woocommerce-payments"):(0,V.__)("See details","woocommerce-payments"))}};return m.map((({key:e})=>_[e]||{value:void 0,display:null}))})),h=!!y.length;let g;void 0!==r.count&&!s&&(g=[{label:(0,V._n)("dispute","disputes",null!==(e=r.count)&&void 0!==e?e:0,"woocommerce-payments"),value:`${Tt(r.count)}`}]);const w="string"==typeof(0,Ni.getQuery)().store_currency_is,f=r.currencies||(w?[null!==(t=(0,Ni.getQuery)().store_currency_is)&&void 0!==t?t:""]:[]);return Y().createElement(ge,null,Y().createElement(ol,null),Y().createElement(tn,{currentPage:"disputes"}),Y().createElement(Iu,{storeCurrencies:f}),Y().createElement(X.TableCard,{className:"wcpay-disputes-list",title:(0,V.__)("Disputes","woocommerce-payments"),isLoading:a,rowsPerPage:parseInt(null!==(n=(0,Ni.getQuery)().per_page)&&void 0!==n?n:"",10)||25,totalRows:_,headers:u,rows:y,summary:g,query:(0,Ni.getQuery)(),onQueryChange:Ni.onQueryChange,onColumnsChange:p,actions:[h&&Y().createElement(Fi,{key:"download",isDisabled:a||i,isBusy:i,onClick:()=>{return e=void 0,t=void 0,o=function*(){const e=(0,Ni.getQuery)(),{page:t,path:n}=e,o=(function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}}(e,["page","path"]),wcpaySettings.currentUserEmail),a=wcSettings.locale.userLocale;ce("wcpay_csv_export_click",{row_type:"disputes",source:n,exported_row_count:r.count});const{date_before:s,date_after:i,date_between:m,match:d,filter:u,status_is:p,status_is_not:y}=(0,Ni.getQuery)(),h=Aa({userEmail:o,locale:a,dateAfter:i,dateBefore:s,dateBetween:m,match:d,filter:u,statusIs:p,statusIsNot:y}),g=!!(s||i||m||p||y),w=(0,V.sprintf)((0,V.__)("You are about to export %d disputes. If you'd like to reduce the size of your export, you can use one or more filters. Would you like to continue?","woocommerce-payments"),_);(g||_<1e3||window.confirm(w))&&(c({exportRequestURL:h,exportFileAvailabilityEndpoint:Ia,userEmail:o}),l("success",(0,V.sprintf)((0,V.__)("Were processing your export.  The file will download automatically and be emailed to %s.","woocommerce-payments"),o)))},new((n=void 0)||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}));var e,t,n,o}})]}),Y().createElement(he,null,Y().createElement(il,null)))},Lu=Y().createElement(fe.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y().createElement(fe.Path,{d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",stroke:"#F0B849",strokeWidth:"1.5"}),Y().createElement(fe.Path,{d:"M13 7H11V13H13V7Z",fill:"#F0B849"}),Y().createElement(fe.Path,{d:"M13 15H11V17H13V15Z",fill:"#F0B849"})),Du=({query:{id:e}})=>{const{dispute:t,error:n,isLoading:o}=(e=>{const{dispute:t,error:n,isLoading:o}=(0,ln.useSelect)((t=>{const{getDispute:n,getDisputeError:o,isResolving:a}=t(yt);return{dispute:n(e),error:o(e),isLoading:a("getDispute",[e])}}),[e]);return{dispute:t,isLoading:o,error:n}})(e);return(0,H.useEffect)((()=>{if(!o&&(null==t?void 0:t.charge)){const e=t.charge,n=Et({page:"wc-admin",path:"/payments/transactions/details",id:e.payment_intent,transaction_id:e.balance_transaction,type:"dispute"});(0,Ni.getHistory)().replace(n)}}),[t,o]),Y().createElement(ge,null,Y().createElement(Z.Flex,{direction:"column",className:"wcpay-dispute-detail-legacy-redirect"},n?Y().createElement(Y().Fragment,null,Y().createElement(Z.FlexItem,null,Y().createElement(Z.Icon,{icon:Lu,type:"warning",size:32})),Y().createElement(Z.FlexItem,null,Y().createElement("div",null,Y().createElement("b",null,(0,V.__)("Error retrieving dispute","woocommerce-payments"))),Y().createElement("div",null,(0,V.__)("Please check your network and try again.","woocommerce-payments")))):Y().createElement(Y().Fragment,null,Y().createElement(Z.FlexItem,null,Y().createElement(Z.Spinner,null)),Y().createElement(Z.FlexItem,null,Y().createElement("div",null,Y().createElement("b",null,(0,V.__)("One moment please","woocommerce-payments"))),Y().createElement("div",null,(0,V.__)("Redirecting to payment details","woocommerce-payments"))))))},ju=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})}),Pu=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),Mu={RECEIPT:"receipt",CUSTOMER_COMMUNICATION:"customer_communication",CUSTOMER_SIGNATURE:"customer_signature",UNCATEGORIZED_FILE:"uncategorized_file",REFUND_POLICY:"refund_policy",DUPLICATE_CHARGE_DOCUMENTATION:"duplicate_charge_documentation",CANCELLATION_POLICY:"cancellation_policy",ACCESS_ACTIVITY_LOG:"access_activity_log",SERVICE_DOCUMENTATION:"service_documentation",SHIPPING_DOCUMENTATION:"shipping_documentation"},Fu=()=>{var e,t,n,o,a,r,s,c,i,l,m,d,u,p,_;const y=(null===(n=null===(t=null===(e=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===e?void 0:e.preloadSettings)||void 0===t?void 0:t.general)||void 0===n?void 0:n.woocommerce_default_country)||":",[h,g]=y.split(":");return{name:(null===wcSettings||void 0===wcSettings?void 0:wcSettings.siteTitle)||"<Your Business Name>",support_address_city:(null===(r=null===(a=null===(o=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===o?void 0:o.preloadSettings)||void 0===a?void 0:a.general)||void 0===r?void 0:r.woocommerce_store_city)||"",support_address_country:h,support_address_line1:(null===(i=null===(c=null===(s=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===s?void 0:s.preloadSettings)||void 0===c?void 0:c.general)||void 0===i?void 0:i.woocommerce_store_address)||"",support_address_line2:(null===(d=null===(m=null===(l=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===l?void 0:l.preloadSettings)||void 0===m?void 0:m.general)||void 0===d?void 0:d.woocommerce_store_address_2)||"",support_address_postal_code:(null===(_=null===(p=null===(u=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===u?void 0:u.preloadSettings)||void 0===p?void 0:p.general)||void 0===_?void 0:_.woocommerce_store_postcode)||"",support_address_state:g}},Bu=e=>`${e.support_address_line1}, ${e.support_address_line2}, ${e.support_address_city}, ${e.support_address_state} ${e.support_address_postal_code} ${e.support_address_country}`,zu=e=>"string"==typeof e,Uu=(e,t,n)=>`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer and legitimate cardholder, %1$s, ordered %2$s on %3$s.","woocommerce-payments"),e.customerName,e.product,e.orderDate)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let me know if any further details are required.","woocommerce-payments")}`,$u=(e,t,n)=>`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer, %1$s, ordered %2$s on %3$s and received it on %4$s.","woocommerce-payments"),e.customerName,e.product,e.orderDate,e.deliveryDate)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`,Vu={product_not_received:(e,t,n)=>`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer, %1$s, ordered %2$s on %3$s and received it on %4$s.","woocommerce-payments"),e.customerName,e.product,e.orderDate,e.deliveryDate)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`,credit_not_processed:(e,t,n)=>{var o;return"refund_has_been_issued"===e.refundStatus?`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer, %1$s, was refunded on %2$s for the amount of %3$s. The refund was processed through our payment provider and should be visible on the customer's statement within 7 - 10 business days.","woocommerce-payments"),e.customerName,e.orderDate,t.amount?`${(t.amount/100).toFixed(2)} ${null===(o=t.currency)||void 0===o?void 0:o.toUpperCase()}`:(0,V.__)("[Refund Amount]","woocommerce-payments"))}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`:`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n${(0,V.__)("The customer requested a refund outside of the eligible window outlined in our refund policy, which was clearly presented on the website and on the order confirmation.","woocommerce-payments")}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`},product_unacceptable:(e,t,n)=>`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer, %1$s, ordered %2$s on %3$s. The product matched the description provided at the time of sale, and we did not receive any indication from the customer that it was defective or not as described.","woocommerce-payments"),e.customerName,e.product,e.orderDate)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`,subscription_canceled:(e,t,n)=>`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n\n${(0,V.sprintf)((0,V.__)("Our records indicate that the customer, %1$s, subscribed to %2$s and was billed according to the terms accepted at the time of signup. The customer's account remained active and no cancellation was recorded prior to the billing date.","woocommerce-payments"),e.customerName,e.product)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`,duplicate:(e,t,n)=>{var o;return"is_duplicate"===e.duplicateStatus?`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n${(0,V.sprintf)((0,V.__)("Our records indicate that this charge was a duplicate of a previous transaction. A refund has already been issued to the customer on %1$s for the amount of %2$s. This refund should be visible on the customer's statement within 7 - 10 business days.","woocommerce-payments"),e.orderDate,t.amount?`${(t.amount/100).toFixed(2)} ${null===(o=t.currency)||void 0===o?void 0:o.toUpperCase()}`:(0,V.__)("[Refund Amount]","woocommerce-payments"))}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`:`${(0,V.sprintf)((0,V.__)("We are submitting evidence in response to chargeback #%1$s for transaction #%2$s on %3$s.","woocommerce-payments"),e.caseNumber,e.transactionId,e.transactionDate)}\n${(0,V.sprintf)((0,V.__)("Our records show that the customer placed two distinct orders: %1$s and %2$s. Both transactions were legitimate, fulfilled independently, and are not duplicates.","woocommerce-payments"),e.caseNumber,e.transactionId)}\n\n${(0,V.__)("To support our case, we are providing the following documentation:","woocommerce-payments")}\n${n}\n\n${(0,V.__)("Based on this information, we respectfully request that the chargeback be reversed. Please let us know if any further details are required.","woocommerce-payments")}`},fraudulent:Uu,unrecognized:Uu},Wu=(e,t,n,o,a,r)=>{var s,c,i,l,m,d,u,p,_;const y=on(Math.floor(Date.now()/1e3),{separator:", ",includeTime:!1}),h={merchantAddress:Bu(t),merchantName:t.name,merchantEmail:(null==n?void 0:n.account_business_support_email)||(0,V.__)("<business@email.com>","woocommerce-payments"),merchantPhone:(null==n?void 0:n.account_business_support_phone)||(0,V.__)("<Business Phone Number>","woocommerce-payments"),today:y,acquiringBank:o||(0,V.__)("<Bank Name>","woocommerce-payments"),caseNumber:(null==e?void 0:e.id)||(0,V.__)("<Case Number>","woocommerce-payments"),transactionId:(null===(s=null==e?void 0:e.charge)||void 0===s?void 0:s.id)||(0,V.__)("<Transaction ID>","woocommerce-payments"),transactionDate:(null==e?void 0:e.created)?on(e.created,{separator:", ",includeTime:!0}):(0,V.__)("<Transaction Date>","woocommerce-payments"),customerName:(null===(i=null===(c=null==e?void 0:e.charge)||void 0===c?void 0:c.billing_details)||void 0===i?void 0:i.name)||(0,V.__)("<Customer Name>","woocommerce-payments"),product:(null===(l=null==e?void 0:e.evidence)||void 0===l?void 0:l.product_description)&&zu(e.evidence.product_description)?e.evidence.product_description:(null===(u=null===(d=null===(m=null==e?void 0:e.charge)||void 0===m?void 0:m.level3)||void 0===d?void 0:d.line_items)||void 0===u?void 0:u.map((e=>e.product_description)).filter(Boolean).join(", "))||(0,V.__)("<Product>","woocommerce-payments"),orderDate:(null===(p=null==e?void 0:e.charge)||void 0===p?void 0:p.created)?on(e.charge.created,{separator:", ",includeTime:!0}):(0,V.__)("<Order Date>","woocommerce-payments"),deliveryDate:(S=(null===(_=null==e?void 0:e.evidence)||void 0===_?void 0:_.shipping_date)&&zu(e.evidence.shipping_date)?e.evidence.shipping_date:void 0,S?on(Math.floor(new Date(S).getTime()/1e3),{separator:", ",includeTime:!1}):(0,V.__)("<Delivery/Service Date>","woocommerce-payments")),refundStatus:a,duplicateStatus:r},g=(e=>{const t=[];let n=0;return[{key:Mu.RECEIPT,label:(0,V.__)("Order receipt","woocommerce-payments")},{key:Mu.CUSTOMER_COMMUNICATION,label:(0,V.__)("Customer communication","woocommerce-payments")},{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments")},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments")},{key:Mu.SHIPPING_DOCUMENTATION,label:(0,V.__)("Proof of shipping","woocommerce-payments")},{key:Mu.SERVICE_DOCUMENTATION,label:(0,V.__)("Item condition","woocommerce-payments")},{key:Mu.CANCELLATION_POLICY,label:(0,V.__)("Cancellation policy","woocommerce-payments")},{key:Mu.ACCESS_ACTIVITY_LOG,label:(0,V.__)("Proof of active subscription","woocommerce-payments")},{key:Mu.UNCATEGORIZED_FILE,label:(0,V.__)("Other documents","woocommerce-payments")}].forEach((({key:o,label:a})=>{var r;const s=null===(r=e.evidence)||void 0===r?void 0:r[o];s&&zu(s)&&(n++,t.push((0,V.sprintf)((0,V.__)(" %1$s (Attachment %2$s)","woocommerce-payments"),a,String.fromCharCode(64+n))))})),0===t.length?`${(0,V.sprintf)((0,V.__)(" <Attachment description> (Attachment %s)","woocommerce-payments"),"A")}\n${(0,V.sprintf)((0,V.__)(" <Attachment description> (Attachment %s)","woocommerce-payments"),"B")}`:t.join("\n")})(e),w=(e=>`${e.merchantName}\n${e.merchantAddress}\n${e.merchantEmail}\n${e.merchantPhone}\n${e.today}`)(h),f=(e=>`${(0,V.sprintf)((0,V.__)("To: %s","woocommerce-payments"),e.acquiringBank)}\n${(0,V.sprintf)((0,V.__)("Subject: Chargeback Dispute  Case #%s","woocommerce-payments"),e.caseNumber)}`)(h),v=(0,V.__)("Dear Dispute Resolution Team,","woocommerce-payments"),b=((e,t,n)=>(Vu[t.reason]||$u)(e,t,n))(h,e,g),E=(e=>`${(0,V.__)("Thank you,","woocommerce-payments")}\n${e.merchantName}`)(h);var S;return`${w}\n\n${f}\n\n${v}\n\n${b}\n\n${E}`},Hu=({dispute:e})=>{var t,n,o,a,r;if(!e)return null;const s="object"==typeof e.charge&&null!==e.charge?e.charge:null,c=(null===(t=null==s?void 0:s.billing_details)||void 0===t?void 0:t.name)||"-",i=(null===(n=null==s?void 0:s.billing_details)||void 0===n?void 0:n.phone)||"-",l=(null===(o=null==s?void 0:s.billing_details)||void 0===o?void 0:o.email)||"-",m=(null===(a=e.order)||void 0===a?void 0:a.ip_address)||"-",d=null===(r=null==s?void 0:s.billing_details)||void 0===r?void 0:r.address,u=`${(null==d?void 0:d.line1)||""}, ${(null==d?void 0:d.line2)||""}, ${(null==d?void 0:d.city)||""}, ${(null==d?void 0:d.state)||""}, ${(null==d?void 0:d.postal_code)||""}, ${(null==d?void 0:d.country)||""}`;return Y().createElement("section",{className:"wcpay-dispute-evidence-customer-details"},Y().createElement("h3",{className:"wcpay-dispute-evidence-customer-details__heading"},(0,V.__)("Customer details","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__row"},Y().createElement("div",null,Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__label"},(0,V.__)("NAME","woocommerce-payments")),"-"!==c?Y().createElement(Dm,{className:"wcpay-dispute-evidence-customer-details__link",billing_details:(null==s?void 0:s.billing_details)||null,order_details:(null==s?void 0:s.order)||null}):Y().createElement("span",null,c)),Y().createElement("div",null,Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__label"},(0,V.__)("PHONE","woocommerce-payments")),Y().createElement("span",{className:"wcpay-dispute-evidence-customer-details__phone-number"},i)),Y().createElement("div",null,Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__label"},(0,V.__)("EMAIL","woocommerce-payments")),"-"!==l?Y().createElement("a",{href:`mailto:${l}`,className:"wcpay-dispute-evidence-customer-details__link"},l):Y().createElement("span",null,l)),Y().createElement("div",null,Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__label"},(0,V.__)("IP ADDRESS","woocommerce-payments")),Y().createElement("span",{className:"wcpay-dispute-evidence-customer-details__ip-address"},m))),Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__billing"},Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__billing-label"},(0,V.__)("BILLING ADDRESS","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-customer-details__billing-value"},u)))},Yu=({productType:e,onProductTypeChange:t,productDescription:n,onProductDescriptionChange:o,readOnly:a=!1})=>Y().createElement("section",{className:"wcpay-dispute-evidence-product-details"},Y().createElement("h3",{className:"wcpay-dispute-evidence-product-details__heading"},(0,V.__)("Product details","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-product-details__subheading"},(0,V.__)("Please ensure the product type and description have been entered accurately.","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-product-details__field-group"},Y().createElement(Z.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,V.__)("PRODUCT TYPE","woocommerce-payments"),value:e,onChange:t,"data-testid":"dispute-challenge-product-type-selector",options:[{label:(0,V.__)("Physical products","woocommerce-payments"),value:"physical_product"},{label:(0,V.__)("Digital products","woocommerce-payments"),value:"digital_product_or_service"},{label:(0,V.__)("Offline service","woocommerce-payments"),value:"offline_service"},{label:(0,V.__)("Multiple product types","woocommerce-payments"),value:"multiple"}],disabled:a})),Y().createElement("div",{className:"wcpay-dispute-evidence-product-details__field-group"},Y().createElement(Z.TextareaControl,{__nextHasNoMarginBottom:!0,label:(0,V.__)("PRODUCT DESCRIPTION","woocommerce-payments"),value:n,onChange:o,disabled:a}))),qu=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{d:"M17.3 10.1C17.3 7.60001 15.2 5.70001 12.5 5.70001C10.3 5.70001 8.4 7.10001 7.9 9.00001H7.7C5.7 9.00001 4 10.7 4 12.8C4 14.9 5.7 16.6 7.7 16.6H9.5V15.2H7.7C6.5 15.2 5.5 14.1 5.5 12.9C5.5 11.7 6.5 10.5 7.7 10.5H9L9.3 9.40001C9.7 8.10001 11 7.20001 12.5 7.20001C14.3 7.20001 15.8 8.50001 15.8 10.1V11.4L17.1 11.6C17.9 11.7 18.5 12.5 18.5 13.4C18.5 14.4 17.7 15.2 16.8 15.2H14.5V16.6H16.7C18.5 16.6 19.9 15.1 19.9 13.3C20 11.7 18.8 10.4 17.3 10.1Z M14.1245 14.2426L15.1852 13.182L12.0032 10L8.82007 13.1831L9.88072 14.2438L11.25 12.8745V18H12.75V12.8681L14.1245 14.2426Z"})}),Gu=(e,t)=>{const n=e.lastIndexOf("."),o=-1!==n?e.substring(n):"",a=-1!==n?e.substring(0,n):e,r=(e=>{const t=e/1048576,n=e/1024;return t>=1?t%1==0?`${t}MB`:`${t.toFixed(1)}MB`:n%1==0?`${n}KB`:`${n.toFixed(1)}KB`})(t);return{namePart:a,extensionSizePart:o?`${o} (${r})`:` (${r})`}};function Qu(){return{width:window.innerWidth,height:window.innerHeight}}function Zu(e){return Qu().width<e}function Ku(e){return Qu().width>=e}const Ju=({fileName:e="",fileSize:t,description:n,onFileChange:o,onFileRemove:a,disabled:r=!1,isDone:s=!1,isBusy:c=!1,accept:i=".pdf, image/png, image/jpeg",label:l})=>{const{isVerySmallMobile:m}=function(){const[e,t]=(0,H.useState)(Qu());return(0,H.useEffect)((()=>{const e=(0,lt.throttle)((()=>{t(Qu())}),300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),{viewportSize:e,isVerySmallMobile:Zu(385),isMobile:Zu(480),isTablet:Ku(480)&&Zu(800),isDesktop:Ku(800)}}(),d=()=>s&&e?Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__chip"},Y().createElement("span",{className:"wcpay-dispute-evidence-file-upload-control__chip-filename"},t?Y().createElement(Y().Fragment,null,Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__chip-filename-name"},Gu(e,t).namePart),Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__chip-filename-extension"},Gu(e,t).extensionSizePart)):e),Y().createElement(Z.Button,{className:"wcpay-dispute-evidence-file-upload-control__chip-action",icon:al,onClick:a,disabled:r,"aria-label":(0,V.__)("Remove file","woocommerce-payments"),variant:"tertiary"})):null;return Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control"},Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__info"},Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__info-header"},Y().createElement("label",{className:"wcpay-dispute-evidence-file-upload-control__label"},l),!m&&d()),n&&Y().createElement("p",{className:"wcpay-dispute-evidence-file-upload-control__info-description"},n),m&&d()),Y().createElement("div",{className:"wcpay-dispute-evidence-file-upload-control__actions"},Y().createElement(Z.FormFileUpload,{accept:i,onChange:e=>{e.target.files&&e.target.files[0]&&(o(e.target.files[0]),e.target.value="")},render:({openFileDialog:e})=>Y().createElement(Z.Button,{className:"wcpay-dispute-evidence-file-upload-control__upload",icon:qu,iconSize:24,onClick:e,disabled:r||c,isBusy:c,"aria-label":(0,V.__)("Upload file","woocommerce-payments"),variant:"primary"})})))};var Xu=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const ep=({fields:e,readOnly:t=!1})=>Y().createElement("section",{className:"wcpay-dispute-evidence-recommended-documents"},Y().createElement("h3",{className:"wcpay-dispute-evidence-recommended-documents__heading"},(0,V.__)("Recommended documents","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-recommended-documents__subheading"},(0,V.__)("While optional, we strongly recommend providing as many of these documents as possible. The following file types are supported: PDF, JPEG, and PNG.","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-recommended-documents__helper-link"},Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#challenge-or-accept"},(0,V.__)("Learn more about documents","woocommerce-payments"))),Y().createElement("ul",{className:"wcpay-dispute-evidence-recommended-documents__list"},e.map((e=>Y().createElement("li",{key:e.key,className:"wcpay-dispute-evidence-recommended-documents__item"},Y().createElement(Ju,{label:e.label,fileName:e.fileName||"",fileSize:e.fileSize,description:e.description,onFileChange:t=>Xu(void 0,void 0,void 0,(function*(){return e.onFileChange(e.key,t)})),onFileRemove:()=>Xu(void 0,void 0,void 0,(function*(){return e.onFileRemove()})),disabled:t||e.readOnly,isDone:!!e.uploaded,isBusy:e.isBusy,accept:".pdf, image/png, image/jpeg"})))))),tp=({shippingCarrier:e,shippingDate:t,shippingTrackingNumber:n,shippingAddress:o,readOnly:a=!1,onShippingCarrierChange:r,onShippingDateChange:s,onShippingTrackingNumberChange:c,onShippingAddressChange:i})=>Y().createElement("section",{className:"wcpay-dispute-evidence-shipping-details"},Y().createElement("h3",{className:"wcpay-dispute-evidence-shipping-details__heading"},(0,V.__)("Delivery details","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-shipping-details__subheading"},(0,V.__)("Please ensure all prefilled information is correct and complete any missing details.","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-shipping-details__field-group"},Y().createElement(Z.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,V.__)("SHIPPING CARRIER","woocommerce-payments"),onChange:r,value:e,disabled:a})),Y().createElement("div",{className:"wcpay-dispute-evidence-shipping-details__field-group"},Y().createElement(Z.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,V.__)("SHIPPING DATE","woocommerce-payments"),onChange:s,type:"date",value:t?new Date(t).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],disabled:a})),Y().createElement("div",{className:"wcpay-dispute-evidence-shipping-details__field-group"},Y().createElement(Z.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,V.__)("TRACKING NUMBER","woocommerce-payments"),onChange:c,value:n,disabled:a})),Y().createElement("div",{className:"wcpay-dispute-evidence-shipping-details__field-group"},Y().createElement(Z.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,V.__)("SHIPPING ADDRESS","woocommerce-payments"),onChange:i,value:o.replace(/\n/g," "),disabled:a}))),np=({value:e,onChange:t,readOnly:n=!1})=>Y().createElement("section",{className:"wcpay-dispute-evidence-cover-letter"},Y().createElement(Z.TextareaControl,{label:(0,V.__)("COVER LETTER","woocommerce-payments"),value:e,onChange:t,rows:30,className:"wcpay-dispute-evidence-cover-letter__textarea",readOnly:n,__nextHasNoMarginBottom:!0}),Y().createElement(Z.Button,{className:"wcpay-dispute-evidence-cover-letter__print",variant:"primary",onClick:()=>{const t=`\n\t\t\t<!DOCTYPE html>\n\t\t\t<html>\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t<title>${(0,V.__)("Cover Letter","woocommerce-payments")}</title>\n\t\t\t\t<style>\n\t\t\t\t\tbody {\n\t\t\t\t\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n\t\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\t\tmax-width: 120ch;\n\t\t\t\t\t\tmargin: 40px auto;\n\t\t\t\t\t\tpadding: 20px;\n\t\t\t\t\t\ttext-align: justify;\n\t\t\t\t\t}\n\t\t\t\t\tpre {\n\t\t\t\t\t\twhite-space: pre-wrap;\n\t\t\t\t\t\tword-wrap: break-word;\n\t\t\t\t\t\tword-break: break-word;\n\t\t\t\t\t\toverflow-wrap: break-word;\n\t\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t@media print {\n\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\tpadding: 20px;\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpre {\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.no-print {\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.print-button-container {\n\t\t\t\t\t\tposition: fixed;\n\t\t\t\t\t\tbottom: 20px;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform: translateX(-50%);\n\t\t\t\t\t\tbackground: white;\n\t\t\t\t\t\tpadding: 10px;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\t\t\t\t}\n\t\t\t\t\t@media print {\n\t\t\t\t\t\t.print-button-container {\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<pre>${e}</pre>\n\t\t\t\t<div class="print-button-container no-print">\n\t\t\t\t\t<button onclick="window.print()" style="\n\t\t\t\t\t\tpadding: 8px 16px;\n\t\t\t\t\t\tbackground: #3B5AFB;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t">\n\t\t\t\t\t\t${(0,V.__)("Print Cover Letter","woocommerce-payments")}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</body>\n\t\t\t</html>\n\t\t`,n=new Blob([t],{type:"text/html"}),o=URL.createObjectURL(n),a=window.open(o,"_blank");a&&(a.onload=()=>{URL.revokeObjectURL(o)})},iconPosition:"right",iconSize:24,icon:Ji,__next40pxDefaultSize:!0},(0,V.__)("Preview cover letter","woocommerce-payments"))),op=(0,H.createContext)(null);const ap=e=>{var{children:t}=e,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["children"]);const o=function(e){return e.reduce(((e,t,n)=>{var o;return Y().isValidElement(t)&&(e[null!==(o=t.props.name)&&void 0!==o?o:n]=t),e}),{})}(t),a=(({steps:e,initialStep:t,onStepChange:n,onComplete:o,onExit:a})=>{const r=Object.keys(e),[s,c]=(0,H.useState)(null!=t?t:r[0]),i=(r.indexOf(s)+1)/r.length;return{currentStep:s,progress:i,nextStep:()=>{const e=r.indexOf(s),t=r[e+1];t?(c(t),null==n||n(t)):null==o||o()},prevStep:()=>{const e=r.indexOf(s),t=r[e-1];t?(c(t),null==n||n(t)):null==a||a()},exit:()=>null==a?void 0:a()}})(Object.assign({steps:o},n)),r=o[a.currentStep];return Y().createElement(op.Provider,{value:a},r)},rp=()=>{const e=(0,H.useContext)(op);if(!e)throw new Error("useStepperContext() must be used within <Stepper>");return e},sp=({steps:e,currentStep:t,onStepClick:n})=>Y().createElement("div",{className:"stepper-panel"},e.map(((o,a)=>{const r=a<t,s=a===t,c="function"==typeof n,i=c?"button":"div",l=()=>{c&&n&&n(a)};return Y().createElement("div",{key:o,className:ue("stepper-step",{active:s,complete:r,clickable:c})},Y().createElement(i,{className:"stepper-circle",onClick:l,disabled:!c},r?Y().createElement(Z.Icon,{icon:be,size:36}):a+1),Y().createElement(i,{className:"stepper-label",onClick:l,disabled:!c},o),a<e.length-1&&Y().createElement("div",{className:"stepper-line"}))}))),cp=({refundStatus:e,onRefundStatusChange:t,readOnly:n=!1})=>Y().createElement("section",{className:"wcpay-dispute-evidence-refund-status"},Y().createElement("h3",{className:"wcpay-dispute-evidence-refund-status__heading"},(0,V.__)("Refund status","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-refund-status__field-group"},Y().createElement(Z.RadioControl,{selected:e,options:[{label:(0,V.__)("Refund has been issued","woocommerce-payments"),value:"refund_has_been_issued"},{label:(0,V.__)("Refund was not owed","woocommerce-payments"),value:"refund_was_not_owed"}],onChange:e=>{n||t(e)},disabled:n}))),ip=({duplicateStatus:e,onDuplicateStatusChange:t,readOnly:n=!1})=>Y().createElement("section",{className:"wcpay-dispute-evidence-duplicate-status"},Y().createElement("h3",{className:"wcpay-dispute-evidence-duplicate-status__heading"},(0,V.__)("Was this charge a duplicate?","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-duplicate-status__field-group"},Y().createElement(Z.RadioControl,{selected:e,options:[{description:(0,V.__)("A refund has been issued","woocommerce-payments"),label:(0,V.__)("It was a duplicate","woocommerce-payments"),value:"is_duplicate"},{description:(0,V.__)("No refund needed","woocommerce-payments"),label:(0,V.__)("It was not a duplicate","woocommerce-payments"),value:"is_not_duplicate"}],onChange:e=>{n||t(e)},disabled:n}))),lp=n.p+"../assets/images/dispute-evidence-submitted.svg?ver=80c013e0963a8d8d35ba",mp=({disputeId:e,bankName:t})=>((0,H.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation"},Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation__wrapper"},Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation__content"},Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation__illustration"},Y().createElement("img",{src:lp,alt:(0,V.__)("Evidence submitted successfully","woocommerce-payments"),className:"wcpay-dispute-evidence-confirmation__illustration-image"})),Y().createElement("h2",{className:"wcpay-dispute-evidence-confirmation__title"},(0,V.__)("Thanks for sharing your response!","woocommerce-payments")),Y().createElement("p",{className:"wcpay-dispute-evidence-confirmation__subtitle"},(0,V.__)("Your evidence has been sent to the cardholder's bank for review.","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation__next-steps"},Y().createElement("h3",null,(0,V.__)("Whats next?","woocommerce-payments")),Y().createElement("ul",null,Y().createElement("li",null,(0,V.__)("The cardholders bank will review your response. Please be patient  this usually takes a few weeks, but in some cases it can take up to 3 months.","woocommerce-payments")),Y().createElement("li",null,(0,J.createInterpolateElement)((0,V.__)("You'll be informed of any updates via email, or you can check the status of your case at any time in your <disputesPageLink>Disputes area</disputesPageLink>.","woocommerce-payments"),{disputesPageLink:Y().createElement("a",{href:Et({page:"wc-admin",path:"/payments/disputes"})},(0,V.__)("Disputes page","woocommerce-payments"))})),Y().createElement("li",null,(0,J.createInterpolateElement)((0,V.__)("Want to know more about how disputes work? <learnMoreLink>Check out our resources</learnMoreLink>","woocommerce-payments"),{learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/#how-they-work"},(0,V.__)("Learn more about disputes","woocommerce-payments"))})))),Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"wcpay-dispute-evidence-confirmation__notice"},(0,J.createInterpolateElement)(t?(0,V.sprintf)((0,V.__)("<strong>The outcome of this dispute will be determined by %1$s.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),t):(0,V.__)("<strong>The outcome of this dispute will be determined by the cardholder's bank.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)})),Y().createElement("div",{className:"wcpay-dispute-evidence-confirmation__actions"},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{window.location.href=Et({page:"wc-admin",path:"/payments/disputes"})}},(0,V.__)("Return to disputes","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",onClick:()=>{window.location.href=Et({page:"wc-admin",path:"/payments/disputes/challenge",id:e})}},(0,V.__)("View submitted dispute","woocommerce-payments")))))));var dp=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const up=["duplicate","subscription_canceled","credit_not_processed"],pp=[{heading:"Let's gather the basics",subheading:"The more info you can provide, the stronger your case will be. To speed things up, we've prefilled some fields for you  please check for accuracy and upload any relevant documents."},{heading:"Add your shipping details",subheading:"We've prefilled some of this for you  please check that it's correct and upload the recommended document."},{heading:"Review your cover letter",subheading:"Using the information you've provided, we've automatically generated a cover letter for you. Before submitting to your customer's bank, please check all of the details are correct and make any required changes."}],_p=({query:e})=>{var t;const n=`/wc/v3/payments/disputes/${e.id}`,[o,a]=(0,H.useState)(),[r,s]=(0,H.useState)({}),[c,i]=(0,H.useState)(""),[l,m]=(0,H.useState)(!0),[d,u]=(0,H.useState)(0),[p,_]=(0,H.useState)(!0),[y,h]=(0,H.useState)(""),[g,w]=(0,H.useState)(""),[f,v]=(0,H.useState)(!1),[b,E]=(0,H.useState)(""),[S,k]=(0,H.useState)(""),[N,x]=(0,H.useState)(""),[C,T]=(0,H.useState)(""),[O,I]=(0,H.useState)({}),[A,R]=(0,H.useState)({}),[L,D]=(0,H.useState)({}),{createSuccessNotice:j,createErrorNotice:P,createInfoNotice:M}=(0,ln.useDispatch)("core/notices"),{updateDispute:F}=(()=>{const{updateDispute:e}=(0,ln.useDispatch)(yt);return{updateDispute:e}})(),B=Us(),z=(null==o?void 0:o.charge)?jl(o.charge):null,[U,$]=(0,H.useState)("refund_has_been_issued"),[W,q]=(0,H.useState)("is_duplicate"),Q=(0,H.useRef)({}),[K,X]=(0,H.useState)(!1);(0,H.useEffect)((()=>{dp(void 0,void 0,void 0,(function*(){var e,t,o,r,c,l,d,u,p,_,y,g,f,b,S,N,C,O,I,A,R,L,D,j,M,F;try{m(!0);const P=yield G()({path:n});a(P);const $=(null===(e=P.metadata)||void 0===e?void 0:e.__product_type)||(null===(t=P.order)||void 0===t?void 0:t.suggested_product_type)||"";i($);const V=null===(c=null===(r=null===(o=P.charge)||void 0===o?void 0:o.level3)||void 0===r?void 0:r.line_items)||void 0===c?void 0:c.map((e=>e.product_description)).filter(Boolean).join(", ");h((null===(l=P.evidence)||void 0===l?void 0:l.product_description)||V||""),E((null===(d=P.evidence)||void 0===d?void 0:d.shipping_carrier)||""),k((null===(u=P.evidence)||void 0===u?void 0:u.shipping_date)||""),x((null===(p=P.evidence)||void 0===p?void 0:p.shipping_tracking_number)||""),T((null===(_=P.evidence)||void 0===_?void 0:_.shipping_address)||""),s((e=>{var t,n,o,a,r,s,c,i,l,m;return Object.assign(Object.assign({},e),{receipt:(null===(t=P.evidence)||void 0===t?void 0:t.receipt)||"",customer_communication:(null===(n=P.evidence)||void 0===n?void 0:n.customer_communication)||"",customer_signature:(null===(o=P.evidence)||void 0===o?void 0:o.customer_signature)||"",refund_policy:(null===(a=P.evidence)||void 0===a?void 0:a.refund_policy)||"",duplicate_charge_documentation:(null===(r=P.evidence)||void 0===r?void 0:r.duplicate_charge_documentation)||"",shipping_documentation:(null===(s=P.evidence)||void 0===s?void 0:s.shipping_documentation)||"",service_documentation:(null===(c=P.evidence)||void 0===c?void 0:c.service_documentation)||"",cancellation_policy:(null===(i=P.evidence)||void 0===i?void 0:i.cancellation_policy)||"",access_activity_log:(null===(l=P.evidence)||void 0===l?void 0:l.access_activity_log)||"",uncategorized_file:(null===(m=P.evidence)||void 0===m?void 0:m.uncategorized_file)||""})}));const H=null===(y=P.evidence)||void 0===y?void 0:y.uncategorized_text;if(H){w(H);const e=Object.assign(Object.assign({},P),{evidence:Object.assign(Object.assign({},P.evidence),{product_description:(null===(g=P.evidence)||void 0===g?void 0:g.product_description)||"",receipt:(null===(f=P.evidence)||void 0===f?void 0:f.receipt)||"",customer_communication:(null===(b=P.evidence)||void 0===b?void 0:b.customer_communication)||"",customer_signature:(null===(S=P.evidence)||void 0===S?void 0:S.customer_signature)||"",refund_policy:(null===(N=P.evidence)||void 0===N?void 0:N.refund_policy)||"",duplicate_charge_documentation:(null===(C=P.evidence)||void 0===C?void 0:C.duplicate_charge_documentation)||"",shipping_documentation:(null===(O=P.evidence)||void 0===O?void 0:O.shipping_documentation)||"",service_documentation:(null===(I=P.evidence)||void 0===I?void 0:I.service_documentation)||"",cancellation_policy:(null===(A=P.evidence)||void 0===A?void 0:A.cancellation_policy)||"",access_activity_log:(null===(R=P.evidence)||void 0===R?void 0:R.access_activity_log)||"",uncategorized_file:(null===(L=P.evidence)||void 0===L?void 0:L.uncategorized_file)||"",shipping_carrier:(null===(D=P.evidence)||void 0===D?void 0:D.shipping_carrier)||"",shipping_date:(null===(j=P.evidence)||void 0===j?void 0:j.shipping_date)||"",shipping_tracking_number:(null===(M=P.evidence)||void 0===M?void 0:M.shipping_tracking_number)||"",shipping_address:(null===(F=P.evidence)||void 0===F?void 0:F.shipping_address)||""})}),t=Wu(e,Fu(),B,z,U,W);v(H!==t)}else{const e=Wu(P,Fu(),B,z,U,W);w(e),v(!1)}}catch(e){P(String(e))}finally{m(!1)}}))}),[n,P,B,z,U,W]),(0,H.useEffect)((()=>{dp(void 0,void 0,void 0,(function*(){const e=Object.values(Mu).filter((e=>{var t;return null===(t=null==o?void 0:o.evidence)||void 0===t?void 0:t[e]}));if(0===e.length)return;if(Object.keys(L).length>0)return;const t=yield Promise.all(e.map((e=>dp(void 0,void 0,void 0,(function*(){var t;const n=null===(t=null==o?void 0:o.evidence)||void 0===t?void 0:t[e];if(!n)return null;const a=yield G()({path:`/wc/v3/payments/file/${n}/details`});return{fileKey:e,filename:a.filename,size:a.size}}))))),n=t.filter((e=>null!==e));D((e=>Object.assign(Object.assign({},e),Object.fromEntries(n.map((e=>[null==e?void 0:e.fileKey,null==e?void 0:e.filename])))))),R((e=>Object.assign(Object.assign({},e),Object.fromEntries(n.map((e=>[null==e?void 0:e.fileKey,null==e?void 0:e.size]))))))}))}),[null==o?void 0:o.evidence]),(0,H.useEffect)((()=>{if(!o||!B)return;const e=Object.assign(Object.assign({},o),{evidence:Object.assign(Object.assign({},o.evidence),{product_description:y,receipt:r.receipt,customer_communication:r.customer_communication,customer_signature:r.customer_signature,refund_policy:r.refund_policy,duplicate_charge_documentation:r.duplicate_charge_documentation,shipping_documentation:r.shipping_documentation,service_documentation:r.service_documentation,cancellation_policy:r.cancellation_policy,access_activity_log:r.access_activity_log,uncategorized_file:r.uncategorized_file,shipping_carrier:b,shipping_date:S,shipping_tracking_number:N,shipping_address:C})}),t=Wu(e,Fu(),B,z,U,W);f&&g!==t||(w(t),v(!1))}),[o,B,z,f,r,y,b,S,N,C,U,W,g]);const ee=null==o?void 0:o.reason,te=function(e,t=""){return"digital_product_or_service"!==t&&!up.includes(e||"")}(ee,c),ne=te?["Purchase info","Shipping details","Review"]:["Purchase info","Review"];(0,H.useEffect)((()=>{_(0===d)}),[d]),(0,H.useEffect)((()=>{te||(E(""),k(""),x(""),T(""),s((e=>Object.assign(Object.assign({},e),{shipping_documentation:""}))))}),[te]);const oe=(e,t=!0)=>dp(void 0,void 0,void 0,(function*(){var i;if(Object.values(O).some(Boolean))M((0,V.__)("Please wait until file upload is finished","woocommerce-payments"));else try{ce(e?"wcpay_dispute_submit_evidence_clicked":"wcpay_dispute_save_evidence_clicked");const l=Object.assign(Object.assign({},o.evidence),{product_description:y,receipt:r.receipt,customer_communication:r.customer_communication,customer_signature:r.customer_signature,refund_policy:r.refund_policy,duplicate_charge_documentation:r.duplicate_charge_documentation,service_documentation:r.service_documentation,cancellation_policy:r.cancellation_policy,access_activity_log:r.access_activity_log,uncategorized_file:r.uncategorized_file,uncategorized_text:g,customer_purchase_ip:null===(i=o.order)||void 0===i?void 0:i.ip_address});te?(l.shipping_documentation=r.shipping_documentation,l.shipping_carrier=b,l.shipping_date=S,l.shipping_tracking_number=N,l.shipping_address=C):(l.shipping_documentation="",l.shipping_carrier="",l.shipping_date="",l.shipping_tracking_number="",l.shipping_address="");const m=["shipping_documentation","shipping_carrier","shipping_date","shipping_tracking_number","shipping_address"],d=Object.fromEntries(Object.entries(l).filter((([e,t])=>!!m.includes(e)||t&&""!==t))),u=Object.assign(Object.assign({},o.metadata),{__product_type:c}),p=yield G()({path:n,method:"post",data:{evidence:d,metadata:u,submit:e}});a(p),t&&(e=>{const t=e?(0,V.__)("Evidence submitted!","woocommerce-payments"):(0,V.__)("Evidence saved!","woocommerce-payments");ce(e?"wcpay_dispute_submit_evidence_success":"wcpay_dispute_save_evidence_success"),j(t,{id:e?"evidence-submitted":`evidence-saved-${o.id}`}),e&&X(!0)})(e),F(p),e&&s({})}catch(t){((e,t)=>{ce(t?"wcpay_dispute_submit_evidence_failed":"wcpay_dispute_save_evidence_failed");const n=t?(0,V.__)("Failed to submit evidence. (%s)","woocommerce-payments"):(0,V.__)("Failed to save evidence. (%s)","woocommerce-payments");P((0,V.sprintf)(n,e instanceof Error?e.message:String(e)))})(t,e)}})),ae=o&&"needs_response"!==o.status&&"warning_needs_response"!==o.status,re=o&&("noncompliant"===o.reason||((null==o?void 0:o.enhanced_eligibility_types)||[]).includes("visa_compliance")),se=(0,H.useMemo)((()=>{var e,t,n,a;if(!o)return[];const r=(null===(e=ba[ee])||void 0===e?void 0:e.summary)||[];return[{title:(0,V.__)("Dispute Amount","woocommerce-payments"),content:Mn(o.amount,o.currency)},{title:(0,V.__)("Disputed On","woocommerce-payments"),content:o.created?on(o.created,{separator:", ",includeTime:!1}):""},{title:(0,V.__)("Reason","woocommerce-payments"),content:Y().createElement(Y().Fragment,null,(null===(t=ba[ee])||void 0===t?void 0:t.display)||ee,r.length>0&&Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more","woocommerce-payments"),content:Y().createElement("div",{className:"dispute-reason-tooltip"},Y().createElement("p",null,(null===(n=ba[ee])||void 0===n?void 0:n.display)||ee),Y().createElement(Zm,null,r),Y().createElement("p",null,Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/managing-disputes/",target:"_blank",rel:"noopener noreferrer"},(0,V.__)("Learn more","woocommerce-payments"))))}))},{title:(0,V.__)("Respond By","woocommerce-payments"),content:Y().createElement(Km,{dueBy:null===(a=o.evidence_details)||void 0===a?void 0:a.due_by})},{title:(0,V.__)("Order","woocommerce-payments"),content:Y().createElement(pl,{order:o.order})}]}),[o,ee]);if((0,H.useEffect)((()=>{const e=setTimeout((()=>{const e=Q.current[d];e&&e.focus()}),100);return()=>clearTimeout(e)}),[d]),l)return Y().createElement(ge,null,Y().createElement(he,null,Y().createElement(Z.Flex,{direction:"column",align:"center",justify:"center",className:"wcpay-dispute-evidence-new__loading","aria-busy":"true","aria-live":"polite","data-testid":"new-evidence-loading"},Y().createElement(Z.FlexItem,null,Y().createElement(Z.Spinner,null)),Y().createElement(Z.FlexItem,null,Y().createElement("div",null,(0,V.__)("Loading dispute","woocommerce-payments"))))));const ie=e=>dp(void 0,void 0,void 0,(function*(){ae||(yield oe(!1,!1)),u(e),window.scrollTo({top:0,behavior:"smooth"})})),le=e=>{u(e),window.scrollTo({top:0,behavior:"smooth"})},me=e=>{ce("wcpay_dispute_product_selected",{selection:e}),i(e)},de=e=>{h(e),s((t=>Object.assign(Object.assign({},t),{product_description:e})))},ue=e=>{E(e),s((t=>Object.assign(Object.assign({},t),{shipping_carrier:e})))},pe=e=>{k(e),s((t=>Object.assign(Object.assign({},t),{shipping_date:e})))},_e=e=>{x(e),s((t=>Object.assign(Object.assign({},t),{shipping_tracking_number:e})))},we=e=>{T(e),s((t=>Object.assign(Object.assign({},t),{shipping_address:e})))},fe=(e,t)=>dp(void 0,void 0,void 0,(function*(){if(!t)return;if(n=t.size,45e5<Object.values(A).reduce(((e,t)=>e+t),0)+n&&(M((0,V.__)("The files you've attached to this dispute as evidence will exceed the limit for a dispute's total size. Try using smaller files as evidence. Hint: if you've attached images, you might want to try providing them in lower resolutions.","woocommerce-payments")),1))return;var n;ce("wcpay_dispute_file_upload_started",{type:e});const o=new FormData;o.append("file",t),o.append("purpose","dispute_evidence"),I((t=>Object.assign(Object.assign({},t),{[e]:!0}))),s((t=>Object.assign(Object.assign({},t),{[e]:""})));try{const t=yield G()({path:"/wc/v3/payments/file",method:"post",body:o});s((n=>Object.assign(Object.assign({},n),{[e]:t.id}))),D((n=>Object.assign(Object.assign({},n),{[e]:t.filename}))),R((n=>Object.assign(Object.assign({},n),{[e]:t.size}))),ce("wcpay_dispute_file_upload_success",{type:e})}catch(t){ce("wcpay_dispute_file_upload_failed",{message:t instanceof Error?t.message:String(t)}),P((0,V.sprintf)((0,V.__)("Failed to upload file. (%s)","woocommerce-payments"),t instanceof Error?t.message:String(t))),s((t=>Object.assign(Object.assign({},t),{[e]:""})))}finally{I((t=>Object.assign(Object.assign({},t),{[e]:!1})))}})),ve=e=>{s((t=>Object.assign(Object.assign({},t),{[e]:""}))),R((t=>Object.assign(Object.assign({},t),{[e]:0}))),D((t=>Object.assign(Object.assign({},t),{[e]:""})))},be=((e,t,n)=>{const o=[{key:Mu.RECEIPT,label:(0,V.__)("Order receipt","woocommerce-payments"),description:(0,V.__)("A copy of the customer's receipt, which can be found in the receipt history for this transaction.","woocommerce-payments"),order:10},{key:Mu.CUSTOMER_COMMUNICATION,label:(0,V.__)("Customer communication","woocommerce-payments"),description:(0,V.__)("Any correspondence with the customer regarding this purchase.","woocommerce-payments"),order:20},{key:Mu.UNCATEGORIZED_FILE,label:(0,V.__)("Other documents","woocommerce-payments"),description:(0,V.__)("Any other relevant documents that will support your case.","woocommerce-payments"),order:100}],a={credit_not_processed:"refund_was_not_owed"===t?[{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40}]:[{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments"),description:(0,V.__)("Any relevant documents showing the customer's signature, such as signed proof of delivery.","woocommerce-payments"),order:30},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40},{key:Mu.SERVICE_DOCUMENTATION,label:(0,V.__)("Item condition","woocommerce-payments"),description:(0,V.__)("A screenshot of the item condition.","woocommerce-payments"),order:50}],duplicate:"is_duplicate"===n?[{key:Mu.ACCESS_ACTIVITY_LOG,label:(0,V.__)("Proof of active subscription","woocommerce-payments"),description:(0,V.__)("Any documents showing the billing history, subscription status, or cancellation logs, for example.","woocommerce-payments"),order:30},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40},{key:Mu.CANCELLATION_POLICY,label:(0,V.__)("Terms of service","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's terms of service.","woocommerce-payments"),order:50}]:[{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:30}],subscription_canceled:[{key:Mu.ACCESS_ACTIVITY_LOG,label:(0,V.__)("Proof of active subscription","woocommerce-payments"),description:(0,V.__)("Any documents showing the billing history, subscription status, or cancellation logs, for example.","woocommerce-payments"),order:30},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40},{key:Mu.CANCELLATION_POLICY,label:(0,V.__)("Terms of service","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's terms of service.","woocommerce-payments"),order:50}],fraudulent:[{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments"),description:(0,V.__)("Any relevant documents showing the customer's signature, such as signed proof of delivery.","woocommerce-payments"),order:30},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40}],product_not_received:[{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments"),description:(0,V.__)("Any relevant documents showing the customer's signature, such as signed proof of delivery.","woocommerce-payments"),order:30},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:40}],product_unacceptable:[{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments"),description:(0,V.__)("Any relevant documents showing the customer's signature, such as signed proof of delivery.","woocommerce-payments"),order:30},{key:Mu.SERVICE_DOCUMENTATION,label:(0,V.__)("Item condition","woocommerce-payments"),description:(0,V.__)("A screenshot of the item condition.","woocommerce-payments"),order:40},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:50}],unrecognized:[{key:Mu.CUSTOMER_SIGNATURE,label:(0,V.__)("Customer's signature","woocommerce-payments"),description:(0,V.__)("Any relevant documents showing the customer's signature, such as signed proof of delivery.","woocommerce-payments"),order:30},{key:Mu.ACCESS_ACTIVITY_LOG,label:(0,V.__)("Proof of active subscription","woocommerce-payments"),description:(0,V.__)("Such as billing history, subscription status, or cancellation logs.","woocommerce-payments"),order:40}],general:[{key:Mu.ACCESS_ACTIVITY_LOG,label:(0,V.__)("Proof of active subscription","woocommerce-payments"),description:(0,V.__)("Such as billing history, subscription status, or cancellation logs.","woocommerce-payments"),order:40},{key:Mu.REFUND_POLICY,label:(0,V.__)("Store refund policy","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's refund policy.","woocommerce-payments"),order:50},{key:Mu.SERVICE_DOCUMENTATION,label:(0,V.__)("Terms of service","woocommerce-payments"),description:(0,V.__)("A screenshot of your store's terms of service.","woocommerce-payments"),order:60}]};return[...o,...a[e]||a.general].sort(((e,t)=>e.order-t.order)).map((({key:e,label:t,description:n})=>({key:e,label:t,description:n,order:0})))})(ee,"credit_not_processed"===ee?U:void 0,"duplicate"===ee?W:void 0),Ee=[{key:Mu.SHIPPING_DOCUMENTATION,label:(0,V.__)("Proof of shipping","woocommerce-payments"),description:(0,V.__)("A receipt from the shipping carrier or a tracking number, for example.","woocommerce-payments"),order:0}],Se=be.map((e=>({key:e.key,label:e.label,description:e.description,fileName:L[e.key]||r[e.key]||"",fileSize:A[e.key]||0,uploaded:!!r[e.key],isLoading:O[e.key]||!1,onFileChange:(t,n)=>ae?Promise.resolve():Promise.resolve(fe(e.key,n)),onFileRemove:()=>ae?Promise.resolve():Promise.resolve(ve(e.key)),isBusy:O[e.key]||!1,readOnly:ae}))),ke=Ee.map((e=>({key:e.key,label:e.label,description:e.description,fileName:L[e.key]||r[e.key]||"",fileSize:A[e.key]||0,uploaded:!!r[e.key],isLoading:O[e.key]||!1,onFileChange:(t,n)=>ae?Promise.resolve():Promise.resolve(fe(e.key,n)),onFileRemove:()=>ae?Promise.resolve():Promise.resolve(ve(e.key)),isBusy:O[e.key]||!1,readOnly:ae}))),Ne=e=>Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)(e?(0,V.sprintf)((0,V.__)("<strong>The outcome of this dispute will be determined by %1$s.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),e):(0,V.__)("<strong>The outcome of this dispute will be determined by the cardholder's bank.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)})),xe=()=>Y().createElement(ye,{icon:!0,isDismissible:!1,status:"info",className:"dispute-steps__notice-content"},(0,J.createInterpolateElement)((0,V.__)("<strong>The outcome of this dispute will be determined by Visa.</strong> WooPayments has no influence over the decision and is not liable for any chargebacks.","woocommerce-payments"),{strong:Y().createElement("strong",null)}));return Y().createElement(ge,{maxWidth:1032,className:"wcpay-dispute-evidence"},Y().createElement(tn,{currentPage:"disputes",isDetailsView:!0}),Y().createElement(he,null,Y().createElement("div",{className:"wcpay-dispute-evidence-new"},Y().createElement(dd,{highDensity:!0},Y().createElement(ld,{title:(0,V.__)("Challenge dispute","woocommerce-payments"),opened:p,onToggle:_},Y().createElement(pd,null,Y().createElement("div",{className:"evidence-summary__body"},o&&Y().createElement(Hm,{dispute:o,isUrgent:!0,paymentMethod:(null===(t=o.payment_method_details)||void 0===t?void 0:t.type)||null,bankName:z}),Y().createElement(Im,{items:se}))))),K?Y().createElement(mp,{disputeId:e.id,bankName:z}):Y().createElement("div",{className:"wcpay-dispute-evidence-new__stepper-section"},Y().createElement(sp,{steps:ne,currentStep:d,onStepClick:e=>{ie(e)}}),Y().createElement(Z.HorizontalRule,{className:"wcpay-dispute-evidence-new__stepper-divider"}),Y().createElement("div",{className:"wcpay-dispute-evidence-new__stepper-content"},(()=>{if(0===d)return Y().createElement(Y().Fragment,null,Y().createElement("h2",{className:"wcpay-dispute-evidence-new__stepper-title",ref:e=>Q.current[0]=e,tabIndex:-1},pp[0].heading),Y().createElement("p",{className:"wcpay-dispute-evidence-new__stepper-subheading"},pp[0].subheading),Y().createElement(Hu,{dispute:o}),Y().createElement(Yu,{productType:c,onProductTypeChange:me,productDescription:y,onProductDescriptionChange:de,readOnly:ae}),"credit_not_processed"===ee&&Y().createElement(cp,{refundStatus:U,onRefundStatusChange:$,readOnly:ae}),"duplicate"===ee&&Y().createElement(ip,{duplicateStatus:W,onDuplicateStatusChange:q,readOnly:ae}),Y().createElement(ep,{fields:Se,readOnly:ae}),re?xe():Ne(z));if(te&&1===d)return Y().createElement(Y().Fragment,null,Y().createElement("h2",{className:"wcpay-dispute-evidence-new__stepper-title",ref:e=>Q.current[1]=e,tabIndex:-1},pp[1].heading),Y().createElement("p",{className:"wcpay-dispute-evidence-new__stepper-subheading"},pp[1].subheading),Y().createElement(tp,{shippingCarrier:b,shippingDate:S,shippingTrackingNumber:N,shippingAddress:C,readOnly:ae,onShippingCarrierChange:ue,onShippingDateChange:pe,onShippingTrackingNumberChange:_e,onShippingAddressChange:we}),Y().createElement(ep,{fields:ke,readOnly:ae}),re?xe():Ne(z));const e=te?2:1;return d===e?Y().createElement(Y().Fragment,null,Y().createElement("h2",{className:"wcpay-dispute-evidence-new__stepper-title",ref:t=>Q.current[e]=t,tabIndex:-1},pp[2].heading),Y().createElement("p",{className:"wcpay-dispute-evidence-new__stepper-subheading"},pp[2].subheading),f&&Y().createElement(ye,{icon:!0,isDismissible:!1,status:"warning",className:"wcpay-dispute-evidence-new__cover-letter-warning"},(0,V.__)("You've made some manual edits to your cover letter. If you update your evidence again, those changes won't be reflected here automatically  but you can always make further edits yourself.","woocommerce-payments")),Y().createElement(np,{value:g,onChange:e=>{if(ae)return;const t=Object.assign(Object.assign({},o),{evidence:Object.assign(Object.assign({},o.evidence),{product_description:y,receipt:r.receipt,customer_communication:r.customer_communication,customer_signature:r.customer_signature,refund_policy:r.refund_policy,duplicate_charge_documentation:r.duplicate_charge_documentation,shipping_documentation:r.shipping_documentation,service_documentation:r.service_documentation,cancellation_policy:r.cancellation_policy,access_activity_log:r.access_activity_log,uncategorized_file:r.uncategorized_file,shipping_carrier:b,shipping_date:S,shipping_tracking_number:N,shipping_address:C})});if(""===e.trim()){const e=Wu(t,Fu(),B,z,U,W);return w(e),void v(!1)}const n=Wu(t,Fu(),B,z,U,W);w(e),v(e!==n)},readOnly:ae}),re?xe():Ne(z)):null})(),(()=>{const e=te?2:1;return 0===d?Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-row"},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>window.location.href=Et({page:"wc-admin",path:"/payments/disputes/details",id:null==o?void 0:o.id}),__next40pxDefaultSize:!0},(0,V.__)("Cancel","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-group-right"},!ae&&Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>oe(!1),"data-testid":"save-for-later-button",__next40pxDefaultSize:!0},(0,V.__)("Save for later","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",onClick:()=>ie(d+1),icon:ju,iconPosition:"right",__next40pxDefaultSize:!0},(0,V.__)("Next","woocommerce-payments")))):d<e?Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-row"},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>le(d-1),icon:Pu,iconPosition:"left",__next40pxDefaultSize:!0},(0,V.__)("Back","woocommerce-payments")),Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-group-right"},!ae&&Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>oe(!1),"data-testid":"save-for-later-button",__next40pxDefaultSize:!0},(0,V.__)("Save for later","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",icon:ju,iconPosition:"right",onClick:()=>ie(d+1),__next40pxDefaultSize:!0},(0,V.__)("Next","woocommerce-payments")))):Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-row"},Y().createElement(Z.Button,{variant:"secondary",icon:Pu,iconPosition:"left",onClick:()=>le(d-1),__next40pxDefaultSize:!0},(0,V.__)("Back","woocommerce-payments")),!ae&&Y().createElement("div",{className:"wcpay-dispute-evidence-new__button-group-right"},Y().createElement(Z.Button,{variant:"tertiary",onClick:()=>oe(!1),"data-testid":"save-for-later-button",__next40pxDefaultSize:!0},(0,V.__)("Save for later","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",onClick:()=>{window.confirm((0,V.__)("Are you sure you're ready to submit this evidence? Evidence submissions are final.","woocommerce-payments"))&&oe(!0)},"data-testid":"submit-evidence-button",__next40pxDefaultSize:!0},(0,V.__)("Submit","woocommerce-payments"))))})())))))};const yp=e=>{var{className:t}=e,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["className"]);const{isActive:o}=(0,H.useContext)(Cn);return Y().createElement("div",Object.assign({className:ue("task-collapsible-body",t,{"is-active":o})},n))},hp=(0,H.createContext)({activeTask:"",setActiveTask:()=>null,completedTasks:{},setCompletedTasks:()=>null}),gp=({children:e,defaultActiveTask:t="",defaultCompletedTasks:n={}})=>{const[o,a]=(0,H.useState)(t),[r,s]=(0,H.useState)(n),c=(0,H.useMemo)((()=>({activeTask:o,setActiveTask:a,completedTasks:r,setCompletedTasks:s})),[o,a,r]);return(0,ve.jsx)(hp.Provider,{value:c,children:e})},wp=({children:e,id:t=""})=>{const{activeTask:n,completedTasks:o,setActiveTask:a,setCompletedTasks:r}=(0,H.useContext)(hp),s=(0,H.useMemo)((()=>({isActive:t===n,setActive:()=>a(t),setCompleted:(e=!0,n="")=>{r((n=>({...n,[t]:e}))),n&&a(n)},taskId:t,isCompleted:Boolean(o[t])})),[a,r,n,o,t]);return(0,ve.jsx)(Cn.Provider,{value:s,children:e})},fp=({children:e,title:t,index:n,className:o,visibleDescription:a})=>{const{isCompleted:r,isActive:s}=(0,H.useContext)(Cn);return Y().createElement("li",{className:ue("wcpay-wizard-task",o,{"is-completed":r,"is-active":s})},Y().createElement("div",{className:"wcpay-wizard-task__top-border"}),Y().createElement("div",{className:"wcpay-wizard-task__headline",tabIndex:-1},Y().createElement("div",{className:"wcpay-wizard-task__icon-wrapper"},Y().createElement("div",{className:"wcpay-wizard-task__icon-text"},n),Y().createElement(Ut,{icon:be,className:"wcpay-wizard-task__icon-checkmark"})),Y().createElement("span",{className:"wcpay-wizard-task__title"},t)),a&&!s&&Y().createElement("span",{className:ue("wcpay-wizard-task__visible-description-element","is-muted-color")},a),Y().createElement("div",{className:"wcpay-wizard-task__body"},e))},vp=({children:e})=>{const t=(0,H.useRef)(!0),n=(0,H.useRef)(null),{activeTask:o}=(0,H.useContext)(hp);return(0,H.useLayoutEffect)((()=>{if(!0===t.current)return void(t.current=!1);if(!n.current)return;const e=n.current.querySelector(".wcpay-wizard-task.is-active .wcpay-wizard-task__headline");e&&e.focus()}),[o]),(0,ve.jsx)("div",{ref:n,children:(0,ve.jsx)("ul",{children:e})})},bp=({children:e})=>(0,ve.jsx)("div",{className:"wcpay-settings-layout",children:e}),Ep=({description:e=()=>null,children:t,className:n,id:o})=>Y().createElement("div",{className:ue("settings-section",n),id:o},Y().createElement("div",{className:"settings-section__details"},Y().createElement(e,null)),Y().createElement("div",{className:"settings-section__controls"},t)),Sp="/wc/v3/payments",kp="wc/payments/multi-currency",Np={SET_CURRENCIES:"SET_CURRENCIES",SET_AVAILABLE_CURRENCIES:"SET_AVAILABLE_CURRENCIES",SET_ENABLED_CURRENCIES:"SET_ENABLED_CURRENCIES",SET_DEFAULT_CURRENCY:"SET_DEFAULT_CURRENCY",SET_CURRENCY_SETTINGS:"SET_CURRENCY_SETTINGS",SET_STORE_SETTINGS:"SET_STORE_SETTINGS"},xp={},Cp=e=>e&&e||{},Tp=e=>Cp(e).currencies||{},Op=e=>Tp(e).available||{},Ip=e=>Tp(e).enabled||{},Ap=e=>Tp(e).default||{},Rp=e=>Cp(e).currency_settings||{},Lp=e=>Cp(e).settings||{};function Dp(e){return{type:Np.SET_CURRENCIES,data:e}}function jp(e){return{type:Np.SET_AVAILABLE_CURRENCIES,data:e}}function Pp(e){return{type:Np.SET_ENABLED_CURRENCIES,data:e}}function Mp(e){return{type:Np.SET_DEFAULT_CURRENCY,data:e}}function Fp(e,t){return{type:Np.SET_CURRENCY_SETTINGS,data:{code:e,data:t}}}function Bp(e){return{type:Np.SET_STORE_SETTINGS,data:e}}function*zp(e){const t=Object.keys((0,ln.select)(kp).getEnabledCurrencies()),n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));try{const t=yield(0,mn.apiFetch)({path:`${Sp}/multi-currency/update-enabled-currencies`,method:"POST",data:{enabled:e}});yield Dp(t),yield(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Enabled currencies updated.","woocommerce-payments")),ce("wcpay_multi_currency_enabled_currencies_updated",{added_currencies:n,removed_currencies:o})}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error updating enabled currencies.","woocommerce-payments"))}}function*Up(e,t){try{const n=yield(0,mn.apiFetch)({path:`${Sp}/multi-currency/currencies/${e}`,method:"POST",data:t});yield Fp(e,n),yield(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Currency settings updated.","woocommerce-payments"))}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error updating currency settings.","woocommerce-payments"))}}function*$p(e,t,n=!1){try{const o=yield(0,mn.apiFetch)({path:`${Sp}/multi-currency/update-settings`,method:"POST",data:{wcpay_multi_currency_enable_auto_currency:e?"yes":"no",wcpay_multi_currency_enable_storefront_switcher:t?"yes":"no"}});if(yield Bp(o),n)return;yield(0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Store settings saved.","woocommerce-payments"))}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error saving store settings.","woocommerce-payments"))}}function Vp(e,t){G()({path:`${Sp}/settings/${e}`,method:"post",data:{value:t}}).catch((()=>{(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error saving option","woocommerce-payments"))}))}function*Wp(){const e=`${Sp}/multi-currency/currencies`;try{const t=yield(0,mn.apiFetch)({path:e});yield Dp(t)}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error retrieving currencies.","woocommerce-payments"))}}function*Hp(e){const t=`${Sp}/multi-currency/currencies/${e}`;try{const n=yield(0,mn.apiFetch)({path:t});yield Fp(e,n)}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error retrieving single currency settings.","woocommerce-payments"))}}function*Yp(){const e=`${Sp}/multi-currency/get-settings`;try{const t=yield(0,mn.apiFetch)({path:e});yield Bp(t)}catch(e){yield(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("Error retrieving store settings.","woocommerce-payments"))}}const qp=()=>{const{storeSettings:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getStoreSettings:t,isResolving:n}=e(kp);return{storeSettings:t(),isLoading:n("getStoreSettings",[])}})),{submitStoreSettingsUpdate:n}=(0,ln.useDispatch)(kp);return{storeSettings:e,isLoading:t,submitStoreSettingsUpdate:n}},Gp=()=>(0,ln.useSelect)((e=>{const{getDefaultCurrency:t}=e(kp);return t()}));(0,ln.registerStore)(kp,{reducer:(e=xp,{type:t,data:n=[]})=>{switch(t){case Np.SET_CURRENCIES:return{...e,currencies:n,available:n.available,enabled:n.enabled,default:n.default};case Np.SET_AVAILABLE_CURRENCIES:return{...e,currencies:{...e,available:n.available},available:n.available};case Np.SET_ENABLED_CURRENCIES:return{...e,currencies:{...e,enabled:n.enabled},enabled:n.enabled};case Np.SET_DEFAULT_CURRENCY:return{...e,currencies:{...e,default:n.default},default:n.default};case Np.SET_CURRENCY_SETTINGS:return{...e,currency_settings:{...e.currency_settings,[n.code]:n.data}};case Np.SET_STORE_SETTINGS:return{...e,settings:{enable_auto_currency:n.wcpay_multi_currency_enable_auto_currency,enable_storefront_switcher:n.wcpay_multi_currency_enable_storefront_switcher,site_theme:n.site_theme,date_format:n.date_format,time_format:n.time_format,store_url:n.store_url}}}return e},actions:{...U},controls:mn.controls,selectors:{...z},resolvers:{...$}});const Qp=({isPreviewModalOpen:e,setPreviewModalOpen:t,isStorefrontSwitcherEnabledValue:n,isAutomaticSwitchEnabledValue:o})=>{const{storeSettings:a}=qp();return e&&(0,ve.jsx)(Z.Modal,{title:(0,V.__)("Preview","woocommerce-payments"),isDismissible:!0,className:"multi-currency-store-settings-preview-modal",shouldCloseOnClickOutside:!1,onRequestClose:()=>{t(!1)},children:(0,ve.jsx)("iframe",{title:(0,V.__)("Preview","woocommerce-payments"),className:"multi-currency-store-settings-preview-iframe",src:"/"+a.store_url+"?is_mc_onboarding_simulation=1&enable_storefront_switcher="+n+"&enable_auto_currency="+o})})},Zp=()=>{const{storeSettings:e,submitStoreSettingsUpdate:t}=qp(),{saveSettings:n,isSaving:o}=$s(),[a,r]=(()=>{const{updateIsMultiCurrencyEnabled:e}=(0,ln.useDispatch)(yt);return[(0,ln.useSelect)((e=>e(yt).getIsMultiCurrencyEnabled())),e]})(),[s,c]=(0,H.useState)(!1),[i,l]=(0,H.useState)(!1),[m,d]=(0,H.useState)(!1),[u,p]=(0,H.useState)(!1);(0,H.useEffect)((()=>{Object.keys(e).length&&(d(e.enable_storefront_switcher),l(e.enable_auto_currency))}),[l,d,e]);const{setCompleted:_}=(0,H.useContext)(Cn);return(0,ve.jsx)(fp,{title:Oe({mixedString:(0,V.__)("{{wrapper}}Review store settings{{/wrapper}}","woocommerce-payments"),components:{wrapper:(0,ve.jsx)("span",{})}}),visibleDescription:(0,V.__)("These settings can be changed any time by visiting the Multi-Currency settings","woocommerce-payments"),index:2,children:(0,ve.jsxs)(yp,{className:"multi-currency-settings-task__body",children:[(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:(0,V.__)("These settings can be changed any time by visiting the Multi-Currency settings","woocommerce-payments")}),(0,ve.jsx)(Z.Card,{className:"multi-currency-settings-task__wrapper",children:(0,ve.jsx)(Z.CardBody,{children:(0,ve.jsxs)(Z.Flex,{direction:"column",gap:4,children:[(0,ve.jsx)(Z.FlexItem,{children:(0,ve.jsx)(Z.CheckboxControl,{checked:i,onChange:e=>{l(e)},"data-testid":"enable_auto_currency",label:(0,V.__)("Automatically switch customers to their local currency if it has been enabled","woocommerce-payments"),help:(0,V.__)("Customers will be notified via store alert banner.","woocommerce-payments"),__nextHasNoMarginBottom:!0})}),"Storefront"===e.site_theme?(0,ve.jsx)(Z.FlexItem,{children:(0,ve.jsx)(Z.CheckboxControl,{checked:m,onChange:e=>{d(e)},"data-testid":"enable_storefront_switcher",label:(0,V.__)("Add a currency switcher to the Storefront theme on breadcrumb section.","woocommerce-payments"),help:(0,V.__)("A currency switcher is also available in your widgets.","woocommerce-payments"),__nextHasNoMarginBottom:!0})}):null]})})}),(0,ve.jsx)(Z.Button,{isBusy:s||o,disabled:s||o,onClick:()=>{c(!0),a||(r(!0),n()),t(i,m,!a),c(!1),_(!0,"setup-complete")},variant:"primary",__next40pxDefaultSize:!0,children:(0,V.__)("Continue","woocommerce-payments")}),(0,ve.jsx)(Z.Button,{isBusy:s||o,disabled:s||o,onClick:()=>{p(!0)},className:"multi-currency-setup-preview-button",variant:"tertiary",__next40pxDefaultSize:!0,children:(0,V.__)("Preview","woocommerce-payments")}),(0,ve.jsx)(Qp,{isPreviewModalOpen:u,setPreviewModalOpen:p,isStorefrontSwitcherEnabledValue:m,isAutomaticSwitchEnabledValue:i})]})})},Kp=()=>{const{isActive:e}=(0,J.useContext)(Cn),t=Gp();return(0,J.useEffect)((()=>{e&&(Vp("wcpay_multi_currency_setup_completed",!0),window.wcpaySettings.multiCurrencySetup.isSetupCompleted="yes")}),[e]),(0,ve.jsx)(fp,{title:(0,V.__)("Setup complete","woocommerce-payments"),index:3,children:(0,ve.jsxs)(yp,{children:[(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:(0,V.__)("You're ready to begin accepting payments using foreign currencies!","woocommerce-payments")}),(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:(0,V.sprintf)((0,V.__)("Your product prices are automatically converted from your default currency (%s) based on the currency exchange rate and formatting rules for each currency.","woocommerce-payments"),t&&t.name)}),(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:(0,V.__)("To enter your own exchange rates or update the formatting rules for each currency, visit the Multi-Currency settings.","woocommerce-payments")}),(0,ve.jsx)("br",{}),(0,ve.jsxs)("div",{className:"setup-complete-task__buttons",children:[(0,ve.jsx)(Z.Button,{href:"admin.php?page=wc-admin",variant:"primary",__next40pxDefaultSize:!0,children:(0,V.__)("Back to home","woocommerce-payments")}),(0,ve.jsx)(Z.Button,{href:"admin.php?page=wc-settings&tab=wcpay_multi_currency",variant:"tertiary",__next40pxDefaultSize:!0,children:(0,V.__)("View Multi-Currency settings","woocommerce-payments")})]})]})})},Jp=({children:e})=>(0,ve.jsx)("ul",{children:e}),Xp=({onChange:e,checked:t=!1,currency:{flag:n,symbol:o,code:a,name:r},testId:s=null})=>{const c=(0,J.useCallback)((t=>{e(a,t)}),[a,e]);return(0,ve.jsx)("li",{className:"enabled-currency-checkbox","data-testid":s,children:(0,ve.jsx)(Z.CheckboxControl,{code:a,checked:t,onChange:c,label:Oe({mixedString:"{{flag /}} {{name /}} {{code /}}",components:{flag:(0,ve.jsx)("span",{className:"enabled-currency-checkbox__flag",children:""!==n?n:(0,ve.jsx)("div",{className:"enabled-currency-checkbox__flag-text",children:(0,ve.jsx)("span",{children:a})})}),name:(0,ve.jsx)("span",{children:r}),code:(0,ve.jsxs)("span",{className:"enabled-currency-checkbox__code",children:["(",o,o!==a&&" "+a,")"]})}}),__nextHasNoMarginBottom:!0})})},e_=[(0,V.__)("any","woocommerce-payments"),(0,V.__)("one","woocommerce-payments"),(0,V.__)("two","woocommerce-payments"),(0,V.__)("three","woocommerce-payments"),(0,V.__)("four","woocommerce-payments"),(0,V.__)("five","woocommerce-payments"),(0,V.__)("six","woocommerce-payments"),(0,V.__)("seven","woocommerce-payments"),(0,V.__)("eight","woocommerce-payments"),(0,V.__)("nine","woocommerce-payments")],t_=["USD","EUR","JPY","GBP","AUD","CAD","INR"],n_=e=>{if(e&&e.name&&e.symbol&&e.code){const t=e.name,n=e.code===e.symbol?e.code:(0,V.sprintf)("%s %s",e.symbol,e.code);return(0,V.sprintf)("%s (%s)",t,n)}return""},o_=(e,t,n)=>{const o=e.filter((e=>e!==t&&n[e])).map((e=>n_(n[e])));if(0===o.length)return"";if(1===o.length)return o[0];const a=o.pop(),r=o.join(", ");return(0,V.sprintf)((0,V._n)("%1$s and %2$s","%1$s, and %2$s",o.length,"woocommerce-payments"),r,a)},a_=({enabledCurrencyCodes:e,selectedCurrencyCodes:t,selectedCurrencyCodesLength:n,isSaving:o,submitEnabledCurrenciesUpdate:a,setCompleted:r,setSaving:s})=>{const c=e.length<=1&&n<1;return(0,ve.jsx)(Z.Button,{isBusy:o,disabled:o||c,onClick:()=>{n>0&&(s(!0),a([...e,...t].sort()),s(!1)),r({initialCurrencies:e},"multi-currency-settings")},variant:"primary",__next40pxDefaultSize:!0,children:0===n?e.length>1?(0,V.__)("Continue","woocommerce-payments"):(0,V.__)("Add currencies","woocommerce-payments"):(0,V.sprintf)((0,V._n)("Add %s currency","Add %s currencies",n,"woocommerce-payments"),n)})},r_=()=>{const{isLoading:e}=(0,ln.useSelect)((e=>{const{getCurrencies:t,isResolving:n}=e(kp);return{currencies:t(),isLoading:n("getCurrencies",[])}}),[]),[t,n]=(0,H.useState)(!1),{isActive:o,setCompleted:a}=(0,H.useContext)(Cn),{enabledCurrencies:r,submitEnabledCurrenciesUpdate:s}=(()=>{const e=(0,ln.useSelect)((e=>{const{getEnabledCurrencies:t}=e(kp);return t()})),{submitEnabledCurrenciesUpdate:t}=(0,ln.useDispatch)(kp);return{enabledCurrencies:e,submitEnabledCurrenciesUpdate:t}})(),c=(0,ln.useSelect)((e=>{const{getAvailableCurrencies:t}=e(kp);return t()})),i=Gp(),l=Object.keys(c),m=Object.keys(r),d=i.code,u=l.filter((e=>!m.includes(e))),p=t_.filter((e=>u.includes(e))),[_,y]=(0,H.useState)(p);(0,H.useEffect)((()=>{o&&y(p)}),[p.length]);const h=_.length,g=(e,t)=>{y(t?[..._,e]:mt().without(_,e))},[w,f]=(0,H.useState)(""),v=w?u.filter((e=>{const{symbol:t,name:n}=c[e];return`${t} ${e} ${n}`.toLocaleLowerCase().indexOf(w.toLocaleLowerCase())>-1})):u.filter((e=>!t_.includes(e))),b=(e,t="")=>l.length&&(0,ve.jsx)(Xp,{checked:_.includes(e),onChange:g,currency:c[e],testId:mt().isString(t)?t:null},"currency-checkbox-"+c[e].id);return(0,ve.jsx)(fp,{className:"add-currencies-task",title:(0,V.__)("Add currencies","woocommerce-payments"),visibleDescription:(0,V.sprintf)((0,V._n)("%s currency added","%s currencies added",h,"woocommerce-payments"),h<10?mt().capitalize(e_[h]):h),index:1,children:(0,ve.jsxs)(yp,{children:[(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:!e&&Oe({mixedString:(0,V.__)("Add currencies so international customers can shop and pay in their local currency. Your store's default currency is {{storeCurrencyText /}}.","woocommerce-payments"),components:{storeCurrencyText:(0,ve.jsx)("strong",{children:n_(i)})}})}),m.length>1&&(0,ve.jsx)("p",{className:"wcpay-wizard-task__description-element is-muted-color",children:Oe({mixedString:(0,V.__)("You've already added {{enabledCurrenciesText /}} to your store.","woocommerce-payments"),components:{enabledCurrenciesText:(0,ve.jsx)("strong",{children:o_(m,d,c)})}})}),(0,ve.jsx)(Z.Card,{className:"add-currencies-task__currency-selector-wrapper",children:(0,ve.jsxs)(Z.CardBody,{children:[(0,ve.jsx)("div",{className:"add-currencies-task__search",children:(0,ve.jsx)(Z.SearchControl,{__nextHasNoMarginBottom:!0,value:w,onChange:f,placeholder:(0,V.__)("Search currencies","woocommerce-payments")})}),(0,ve.jsx)("div",{className:"add-currencies-task__separator"}),w&&(0,ve.jsx)("h4",{children:(0,V.sprintf)((0,V.__)("Search results (%1$d currencies)","woocommerce-payments"),v.length)}),(0,ve.jsx)(Rm,{numLines:30,isLoading:e&&c,children:(0,ve.jsx)("div",{className:"add-currencies-task__content",children:(0,ve.jsxs)(Jp,{children:[!w&&p.length?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("li",{children:(0,ve.jsx)("h4",{children:(0,V.__)("Recommended currencies","woocommerce-payments")})}),p.map((e=>b(e,"recommended-currency"))),(0,ve.jsx)("li",{className:"add-currencies-task__separator"})]}):"",!w&&(0,ve.jsx)("li",{className:"add-currencies-task__available-currencies",children:(0,ve.jsx)("h4",{children:(0,V.__)("All currencies","woocommerce-payments")})}),v.map(b)]})})})]})}),(0,ve.jsx)(Rm,{numLines:5,isLoading:e&&c,children:(0,ve.jsx)(a_,{enabledCurrencyCodes:m,selectedCurrencyCodes:_,selectedCurrencyCodesLength:h,isSaving:t,submitEnabledCurrenciesUpdate:s,setCompleted:a,setSaving:n})})]})})},s_=({isSetupCompleted:e})=>"yes"===e?(window.location.assign("admin.php?page=wc-settings&tab=wcpay_multi_currency"),null):(0,ve.jsx)(Z.Card,{className:"multi-currency-setup-wizard",children:(0,ve.jsx)(Z.CardBody,{children:(0,ve.jsx)(gp,{defaultActiveTask:"add-currencies",children:(0,ve.jsxs)(vp,{children:[(0,ve.jsx)(wp,{id:"add-currencies",children:(0,ve.jsx)(r_,{})}),(0,ve.jsx)(wp,{id:"multi-currency-settings",children:(0,ve.jsx)(Zp,{})}),(0,ve.jsx)(wp,{id:"setup-complete",children:(0,ve.jsx)(Kp,{})})]})})})}),c_=()=>{const{isSetupCompleted:e}=window.wcpaySettings.multiCurrencySetup;return(0,ve.jsx)(ge,{children:(0,ve.jsx)(xn.Provider,{value:window.wcpaySettings,children:(0,ve.jsx)(s_,{isSetupCompleted:e})})})},i_=({children:e,numLines:t})=>{const{isLoading:n}=$s();return(0,ve.jsx)(Rm,{isLoading:n,numLines:t,children:e})},l_=({reader:e})=>{const{id:t,device_type:n,is_active:o}=e,a=o?(0,V.__)("Active","woocommerce-payments"):(0,V.__)("Inactive","woocommerce-payments");return Y().createElement("li",{className:ue("card-readers-item",t)},Y().createElement("div",{className:"card-readers-item__id"},Y().createElement("span",null,t)),Y().createElement("div",{className:"card-readers-item__type"},Y().createElement("span",null,n)),Y().createElement("div",{className:"card-readers-item__status"},Y().createElement("span",{className:o?"active":"inactive"},a)))},m_=()=>Y().createElement(Y().Fragment,null,Y().createElement("h2",null,(0,V.__)("Connected card readers","woocommerce-payments")),Y().createElement("p",null,(0,V.sprintf)((0,V.__)("Card readers are marked as active if theyve processed one or more transactions during the current billing cycle. To connect or disconnect card readers, use the %s mobile application.","woocommerce-payments"),"WooCommerce"))),d_=()=>{const{readers:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getCardReaders:t,isResolving:n}=e(yt),o={limit:10};return{readers:t(o),isLoading:n("getCardReaders",[o])}}),[10]);return Y().createElement(bp,null,Y().createElement(Ep,{description:m_},Y().createElement(i_,{numLines:20},Y().createElement(Z.Card,{className:"card-readers-list__wrapper"},Y().createElement(Z.CardBody,{className:"card-readers-list__header"},Y().createElement("div",{className:"card-readers-list__header-id"},(0,V.__)("Reader ID","woocommerce-payments")),Y().createElement("div",{className:"card-readers-list__header-model"},(0,V.__)("Model","woocommerce-payments")),Y().createElement("div",{className:"card-readers-list__header-status"},(0,V.__)("Status","woocommerce-payments"))),Y().createElement(Z.CardDivider,null),Y().createElement(Z.CardBody,{className:"card-readers-list__body"},Y().createElement("ul",null,!t&&Object.entries(e).map((([e,t])=>Y().createElement(l_,{key:e,reader:t})))))))))},u_=()=>Y().createElement(ge,null,Y().createElement(Z.TabPanel,{className:"wcpay-card-readers-page",activeClass:"active-tab",tabs:[{name:"connected-readers",title:(0,V.__)("Connected readers","woocommerce-payments"),className:"connected-readers-list"}]},(()=>Y().createElement(d_,null)))),p_=({title:e,children:t})=>Y().createElement(Z.FlexBlock,{className:"wcpay-loan-summary-block"},Y().createElement("div",{className:"wcpay-loan-summary-block__title"},e),Y().createElement("div",{className:"wcpay-loan-summary-block__value"},t)),__=()=>Y().createElement(Z.Card,null,Y().createElement(Z.CardHeader,{size:"medium",className:"wcpay-loan-summary-header"},Y().createElement(Z.FlexItem,null,(0,V.__)("Active loan overview","woocommerce-payments"))),Y().createElement(Z.CardBody,{className:"wcpay-loan-summary-body"},Y().createElement(Z.Flex,{align:"normal",className:"wcpay-loan-summary-row"},Y().createElement(p_,{title:(0,V.__)("Total repaid","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:(0,V.__)("Total repaid placeholder","woocommerce-payments")})),Y().createElement(p_,{title:(0,V.__)("Repaid this period","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:(0,V.__)("Repaid this period placeholder","woocommerce-payments")}))),Y().createElement(Z.Flex,{align:"normal",className:"wcpay-loan-summary-row is-bottom-row"},Y().createElement(p_,{title:(0,V.__)("Loan disbursed","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:"Date disbursed"})),Y().createElement(p_,{title:(0,V.__)("Loan amount","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:"Loan amount"})),Y().createElement(p_,{title:(0,V.__)("Fixed fee","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:"Fixed fee"})),Y().createElement(p_,{title:(0,V.__)("Withhold rate","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:"Rate"})),Y().createElement(p_,{title:(0,V.__)("First paydown","woocommerce-payments")},Y().createElement(Lm,{isLoading:!0,display:"inline",placeholder:(0,V.__)("First paydown","woocommerce-payments")}))))),y_=()=>{for(const e in wcpaySettings.accountLoans.loans){const[t,n]=wcpaySettings.accountLoans.loans[e].split("|");if("active"===n)return t}return null},h_=()=>{const{summary:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getActiveLoanSummary:t,getActiveLoanSummaryError:n,isResolving:o}=e(yt);return{summary:t(),summaryError:n(),isLoading:o("getActiveLoanSummary")}}));if(t||!e)return Y().createElement(__,null);const{details:n}=e;return Y().createElement(Z.Card,null,Y().createElement(Z.CardHeader,{size:"medium",className:"wcpay-loan-summary-header"},Y().createElement(Z.FlexItem,null,(0,V.__)("Active loan overview","woocommerce-payments")),Y().createElement(Z.FlexItem,null,y_()&&Y().createElement(Z.Button,{variant:"link",href:Et({page:"wc-admin",path:"/payments/transactions",type:"charge",filter:"advanced",loan_id_is:y_()}),__next40pxDefaultSize:!0},(0,V.__)("View transactions","woocommerce-payments")))),Y().createElement(Z.CardBody,{className:"wcpay-loan-summary-body"},Y().createElement(Z.Flex,{align:"normal",className:"wcpay-loan-summary-row"},Y().createElement(p_,{title:(0,V.__)("Total repaid","woocommerce-payments")},(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("<big>%s</big> of %s","woocommerce-payments"),Mn(n.paid_amount,n.currency),Mn(n.fee_amount+n.advance_amount,n.currency)),{big:Y().createElement("span",{className:"is-big"})})),Y().createElement(p_,{title:(0,V.sprintf)((0,V.__)("Repaid this period (until %s)","woocommerce-payments"),on(n.current_repayment_interval.due_at))},(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("<big>%s</big> of %s minimum","woocommerce-payments"),Mn(n.current_repayment_interval.paid_amount,n.currency),Mn(n.current_repayment_interval.paid_amount+n.current_repayment_interval.remaining_amount,n.currency)),{big:Y().createElement("span",{className:"is-big"})}))),Y().createElement(Z.Flex,{align:"normal",className:"wcpay-loan-summary-row is-bottom-row"},Y().createElement(p_,{title:(0,V.__)("Loan disbursed","woocommerce-payments")},on(n.advance_paid_out_at)),Y().createElement(p_,{title:(0,V.__)("Loan amount","woocommerce-payments")},Mn(n.advance_amount,n.currency)),Y().createElement(p_,{title:(0,V.__)("Fixed fee","woocommerce-payments")},Mn(n.fee_amount,n.currency)),Y().createElement(p_,{title:(0,V.__)("Withhold rate","woocommerce-payments")},100*n.withhold_rate,"%"),Y().createElement(p_,{title:(0,V.__)("First paydown","woocommerce-payments")},on(n.repayments_begin_at)))))},g_=[{key:"paid_out_at",label:(0,V.__)("Disbursed","woocommerce-payments"),screenReaderLabel:(0,V.__)("Disbursed","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultSort:!0},{key:"status",label:(0,V.__)("Status","woocommerce-payments"),screenReaderLabel:(0,V.__)("Status","woocommerce-payments"),required:!0,cellClassName:"is-center-aligned"},{key:"amount",label:(0,V.__)("Amount","woocommerce-payments"),screenReaderLabel:(0,V.__)("Amount","woocommerce-payments"),required:!0,isLeftAligned:!1,isNumeric:!0},{key:"fee_amount",label:(0,V.__)("Fixed fee","woocommerce-payments"),screenReaderLabel:(0,V.__)("Fixed fee","woocommerce-payments"),required:!0,isLeftAligned:!1,isNumeric:!0},{key:"withhold_rate",label:(0,V.__)("Withhold rate","woocommerce-payments"),screenReaderLabel:(0,V.__)("Withhold rate","woocommerce-payments"),required:!0,isLeftAligned:!1,isNumeric:!0},{key:"first_paydown_at",label:(0,V.__)("First paydown","woocommerce-payments"),screenReaderLabel:(0,V.__)("First paydown","woocommerce-payments"),required:!0,isLeftAligned:!1,isNumeric:!0}],w_=e=>e.fully_paid_at?(0,V.sprintf)((0,V.__)("Paid off: %s","woocommerce-payments"),nn(e.fully_paid_at)):(0,V.__)("Active","woocommerce-payments"),f_=e=>Y().createElement(Bi,{message:w_(e),type:e.fully_paid_at?"primary":"warning"}),v_=e=>e.map((e=>{const t=t=>Y().createElement(Ai,{href:Et({page:"wc-admin",path:"/payments/transactions",type:"charge",filter:"advanced",loan_id_is:e.stripe_loan_id})},t),n={paid_out_at:{value:e.paid_out_at,display:t(nn(e.paid_out_at))},status:{value:w_(e),display:t(f_(e))},amount:{value:Ln(e.currency)?e.amount:e.amount/100,display:t(Mn(e.amount,e.currency.toUpperCase()))},fee_amount:{value:Ln(e.currency)?e.fee_amount:e.fee_amount/100,display:t(Mn(e.fee_amount,e.currency.toUpperCase()))},withhold_rate:{value:e.withhold_rate,display:t(+(100*e.withhold_rate).toFixed(2)+"%")},first_paydown_at:{value:e.first_paydown_at,display:t(e.first_paydown_at?nn(e.first_paydown_at):"-")}};return g_.map((({key:e})=>n[e]))})),b_=e=>{if(!e.length)return[];const t=[{label:(0,V._n)("loan","loans",e.length,"woocommerce-payments"),value:String(e.length)}],n=Array.from(new Set(e.map((e=>e.currency))));return 1===n.length&&(t.push({label:(0,V.__)("total","woocommerce-payments"),value:Mn(e.reduce(((e,t)=>e+t.amount),0),n[0])}),t.push({label:(0,V.__)("fixed fees","woocommerce-payments"),value:Mn(e.reduce(((e,t)=>e+t.fee_amount),0),n[0])})),t},E_=()=>{const{loans:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getLoans:t,getLoansError:n,isResolving:o}=e(yt);return{loans:t(),loansError:n(),isLoading:o("getLoans")}}));return Y().createElement(ge,null,Y().createElement(ol,null),Y().createElement(tn,{currentPage:"loans"}),wcpaySettings.accountLoans.has_active_loan&&Y().createElement(he,null,Y().createElement(h_,null)),Y().createElement(X.TableCard,{className:"wcpay-loans-list",title:(0,V.__)("All loans","woocommerce-payments"),isLoading:t,totalRows:e.length,headers:g_,rows:v_(e),rowsPerPage:e.length,summary:b_(e),showMenu:!1}))},S_=({id:e,title:t,currencyCode:n,tooltip:o,amount:a=0,isLoading:r=!1})=>Y().createElement("div",{className:"wcpay-account-balances__balances__item"},Y().createElement("p",{id:e,className:"wcpay-account-balances__balances__item__title"},Y().createElement("span",null,t),!r&&o),Y().createElement("p",{className:"wcpay-account-balances__balances__item__amount","aria-labelledby":e},Y().createElement(Lm,{isLoading:r,display:"inline",placeholder:"loading amount",value:jn(a,n)}))),k_=({instantBalance:{amount:e,fee:t,net:n,fee_percentage:o},onClose:a,onSubmit:r,inProgress:s})=>{const c=`${o}%`,i=(0,J.createInterpolateElement)((0,V.sprintf)((0,V.__)("Need cash in a hurry? Instant payouts are available within 30 minutes for a nominal %s service fee. <a>Learn more</a>","woocommerce-payments"),c),{a:Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/payouts/instant-payouts/",target:"_blank",rel:"noopener noreferrer"})});return Y().createElement(Z.Modal,{title:(0,V.__)("Instant payout","woocommerce-payments"),onRequestClose:a,className:"wcpay-instant-payout-modal"},Y().createElement("p",null,i),Y().createElement("ul",null,Y().createElement("li",{className:"wcpay-instant-payout-modal__balance"},(0,V.__)("Balance available for instant payout: ","woocommerce-payments"),Y().createElement("span",null,jn(e))),Y().createElement("li",{className:"wcpay-instant-payout-modal__fee"},(0,V.sprintf)((0,V.__)("%s service fee: ","woocommerce-payments"),c),Y().createElement("span",null,"-",jn(t))),Y().createElement("li",{className:"wcpay-instant-payout-modal__net"},(0,V.__)("Net payout amount: ","woocommerce-payments"),Y().createElement("span",null,Mn(n)))),Y().createElement("div",{className:"wcpay-instant-payout-modal__footer"},Y().createElement(Z.Button,{variant:"secondary",onClick:a,__next40pxDefaultSize:!0},(0,V.__)("Cancel","woocommerce-payments")),Y().createElement(Z.Button,{variant:"primary",onClick:r,isBusy:s,disabled:s,__next40pxDefaultSize:!0},(0,V.sprintf)((0,V.__)("Pay out %s now","woocommerce-payments"),Mn(n)))))},N_=({instantBalance:e})=>{const[t,n]=(0,J.useState)(!1),o=(e=>{let t=!1;return 0===e.amount&&(t=!0),t})(e),{inProgress:a,submit:r}=(e=>{const{deposit:t,inProgress:n}=(0,ln.useSelect)((t=>{const{getInstantDeposit:n,isResolving:o}=t(yt);return{deposit:n([e]),inProgress:o("getInstantDeposit",[e])}})),{submitInstantDeposit:o}=(0,ln.useDispatch)(yt);return{deposit:t,inProgress:n,submit:()=>o(e)}})(e.currency);return Y().createElement(Y().Fragment,null,Y().createElement(Z.Button,{variant:"primary",disabled:o,onClick:()=>n(!0),__next40pxDefaultSize:!0},(0,V.sprintf)((0,V.__)("Get %s now","woocommerce-payments"),jn(e.amount,e.currency))),(t||a)&&Y().createElement(k_,{instantBalance:e,inProgress:a,onSubmit:()=>{n(!1),r()},onClose:()=>{n(!1)}}))},x_=n.p+"../assets/images/icons/send-money.svg?ver=62733158594b203e44de",C_={available:(0,V.__)("Available funds","woocommerce-payments"),total:(0,V.__)("Total balance","woocommerce-payments")},T_="https://woocommerce.com/document/woopayments/payouts/payout-schedule/",O_="https://woocommerce.com/document/woopayments/fees/account-showing-negative-balance/",I_=({balance:e})=>{const t=e<0;return Y().createElement(zt,{className:"wcpay-account-balances__balances__item__tooltip",buttonIcon:Y().createElement(At.A,null),buttonLabel:`${C_.total} tooltip`,maxWidth:"315px",content:Y().createElement(Y().Fragment,null,Y().createElement(Y().Fragment,null,Oe({mixedString:(0,V.__)("{{bold}}Total balance{{/bold}} combines both pending funds (transactions under processing) and available funds (ready for payout). {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{bold:Y().createElement("b",null),learnMoreLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:T_})}})),Y().createElement(ye,{className:"wcpay-account-balances__balances-total-balance-tooltip-notice",isDismissible:!1},(0,V.__)("Total balance = Available funds + Pending funds","woocommerce-payments")),Y().createElement(Y().Fragment,null,t&&Oe({mixedString:(0,V.__)("Negative account balance? {{discoverWhyLink}}Discover why.{{/discoverWhyLink}}","woocommerce-payments"),components:{discoverWhyLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:O_})}})))})},A_=({balance:e})=>{const t=e<0;return Y().createElement(zt,{className:"wcpay-account-balances__balances__item__tooltip",buttonIcon:Y().createElement(At.A,null),buttonLabel:`${C_.available} tooltip`,maxWidth:t?"280px":void 0,content:Y().createElement(Y().Fragment,null,Y().createElement("p",null,Oe({mixedString:(0,V.__)("{{bold}}Available funds{{/bold}} have completed processing and are ready to be dispatched to your bank account. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{bold:Y().createElement("b",null),learnMoreLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:T_})}})),Y().createElement("p",null,t&&Oe({mixedString:(0,V.__)("Negative account balance? {{discoverWhyLink}}Discover why.{{/discoverWhyLink}}","woocommerce-payments"),components:{discoverWhyLink:Y().createElement(Z.ExternalLink,{href:O_})}})))})},R_=()=>({setSelectedCurrency:e=>{(0,Ni.updateQueryString)({selected_currency:e})},selectedCurrency:(0,Ni.getQuery)().selected_currency}),L_=()=>{const{overviews:e,isLoading:t}=ro(),{selectedCurrency:n}=R_(),{isInstantDepositNoticeDismissed:o,handleDismissInstantDepositNotice:a}=(()=>{const[e,t]=(0,H.useState)(wcpaySettings.isInstantDepositNoticeDismissed);return{isInstantDepositNoticeDismissed:e,handleDismissInstantDepositNotice:()=>{t(!0),wcpaySettings.isInstantDepositNoticeDismissed=!0,Bs("wcpay_instant_deposit_notice_dismissed",!0)}}})();if(!t&&0===e.currencies.length)return null;if(t){const e={name:"loading",currencyCode:wcpaySettings.accountDefaultCurrency,availableFunds:0,pendingFunds:0,delayDays:0};return Y().createElement(Z.Card,{className:"wcpay-account-balances"},Y().createElement(Z.CardHeader,null,(0,V.__)("Balance","woocommerce-payments")),Y().createElement(Z.CardBody,{className:"wcpay-account-balances__balances"},Y().createElement(S_,{id:`wcpay-account-balances-${e.currencyCode}-total`,title:C_.total,amount:0,currencyCode:e.currencyCode,isLoading:!0}),Y().createElement(S_,{id:`wcpay-account-balances-${e.currencyCode}-available`,title:C_.available,amount:0,currencyCode:e.currencyCode,isLoading:!0})))}const{currencies:r,account:s}=e,c=r.map((e=>{var t,n,o,a,r;return{name:e.currency,currencyCode:e.currency,availableFunds:null!==(n=null===(t=e.available)||void 0===t?void 0:t.amount)&&void 0!==n?n:0,pendingFunds:null!==(a=null===(o=e.pending)||void 0===o?void 0:o.amount)&&void 0!==a?a:0,delayDays:null!==(r=null==s?void 0:s.deposits_schedule.delay_days)&&void 0!==r?r:0,instantBalance:e.instant}})),i=c.find((e=>e.name===n))||c[0],l=i.availableFunds+i.pendingFunds;return Y().createElement(Y().Fragment,null,Y().createElement(Z.Card,{className:"wcpay-account-balances"},Y().createElement(Z.CardHeader,null,(0,V.__)("Balance","woocommerce-payments")),Y().createElement(Z.CardBody,{className:"wcpay-account-balances__balances"},Y().createElement(S_,{id:`wcpay-account-balances-${i.currencyCode}-total`,title:C_.total,amount:l,currencyCode:i.currencyCode,tooltip:Y().createElement(I_,{balance:l})}),Y().createElement(S_,{id:`wcpay-account-balances-${i.currencyCode}-available`,title:C_.available,amount:i.availableFunds,currencyCode:i.currencyCode,tooltip:Y().createElement(A_,{balance:i.availableFunds})}))),i.instantBalance&&i.instantBalance.amount>0&&Y().createElement(Z.Flex,{gap:0,className:"wcpay-account-balances__instant-deposit",direction:"column",align:"start"},!o&&Y().createElement(ye,{className:"wcpay-account-balances__instant-deposit-notice",icon:Y().createElement("img",{src:x_,alt:""}),isDismissible:!0,onRemove:()=>a()},(0,V.sprintf)((0,V.__)("Get %1$s via instant payout. Funds are typically in your bank account within 30 mins. Fee: %2$s%%.","woocommerce-payments"),jn(i.instantBalance.amount,i.instantBalance.currency),i.instantBalance.fee_percentage)),Y().createElement(Z.Flex,{justify:"flex-start"},Y().createElement(N_,{instantBalance:i.instantBalance}),o&&Y().createElement(zt,{buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about instant payouts","woocommerce-payments"),content:Oe({mixedString:(0,V.sprintf)((0,V.__)("With {{strong}}instant payout{{/strong}} you can receive requested funds in your bank account within 30 mins for a %s%% fee. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),i.instantBalance.fee_percentage),components:{strong:Y().createElement("strong",null),learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/payouts/instant-payouts/"})}})}))))},D_=({progressLabel:e,totalLabel:t,progress:n})=>{const o=.5<n;return Y().createElement("div",{className:"progressbar"},Y().createElement("div",{className:"progressbar__container"},Y().createElement("div",{className:"progressbar__inner",style:{width:100*n+"%"}},o&&Y().createElement("span",{className:"progressbar__inner-progress-label"},e)),!o&&Y().createElement("span",{className:"progressbar__outer-progress-label"},e)),Y().createElement("span",{className:"progressbar__total-label"},t))},j_=({feeData:{volume_allowance:e,current_volume:t,...n}})=>{var o;if(!e)return null;const a=null!==(o=n.volume_currency)&&void 0!==o?o:n.currency;return(0,ve.jsx)(D_,{progressLabel:jn(t,a),totalLabel:jn(e,a),progress:t/e})},P_=({feeData:{volume_allowance:e,end_time:t,...n}})=>{var o;const a=null!==(o=n.volume_currency)&&void 0!==o?o:n.currency;let r;if(e&&t)r=(0,V.sprintf)((0,V.__)("Discounted base fee expires after the first %1$s of total payment volume or on %2$s.","woocommerce-payments"),jn(e,a),nn(t));else if(e)r=(0,V.sprintf)((0,V.__)("Discounted base fee expires after the first %1$s of total payment volume.","woocommerce-payments"),jn(e,a));else{if(!t)return null;r=(0,V.sprintf)((0,V.__)("Discounted base fee expires on %1$s.","woocommerce-payments"),nn(t))}return(0,ve.jsx)("p",{className:"description",children:r})},M_=e=>e.discount.length?e.discount[0]:e.base,F_=e=>{switch(e){case"card":return(0,V.__)("Card transactions","woocommerce-payments");case"card_present":return(0,V.__)("In-person transactions","woocommerce-payments")}const t=wooPaymentsPaymentMethodsConfig[e];return(null==t?void 0:t.title)?(0,V.sprintf)((0,V.__)("%s transactions","woocommerce-payments"),t.title):(0,V.__)("Unknown transactions","woocommerce-payments")},B_=e=>{const{accountFee:t,paymentMethod:n}=e,o=t.base,a=Rn(o.currency),r=An(o.currency),s=a?.getCurrencyConfig()?.code,c=((e,t={})=>{const n=e.base,o=M_(e),a=Object.assign({fee:(0,V.__)("%1$f%% + %2$s per transaction","woocommerce-payments"),discount:(0,V.__)("(%f%% discount)","woocommerce-payments"),displayBaseFeeIfDifferent:!0},t),r=(0,V.sprintf)(a.fee,jd(n.percentage_rate),jn(n.fixed_rate,n.currency));if(o.percentage_rate!==n.percentage_rate||o.fixed_rate!==n.fixed_rate||o.currency!==n.currency){const e=o;let t,s;e.discount?(t=n.percentage_rate*(1-e.discount),s=n.fixed_rate*(1-e.discount)):(t=o.percentage_rate,s=o.fixed_rate);let c=(0,V.sprintf)(a.fee,jd(t),jn(s,n.currency));a.displayBaseFeeIfDifferent&&(c=(0,V.sprintf)((0,V.__)("<s>%1$s</s> %2$s","woocommerce-payments"),r,c)),e.discount&&0<a.discount.length&&(c+=" "+(0,V.sprintf)(a.discount,jd(e.discount)));const i={s:Y().createElement("s",null)};return(0,J.createInterpolateElement)(c,i)}return r})(t),i=M_(t);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)("p",{children:[F_(n),":"]}),r?`${r} `:null,s?`(${s}) `:null,c,(0,ve.jsx)(j_,{feeData:i}),(0,ve.jsx)(P_,{feeData:i})]})},z_=e=>{const{accountFees:t}=e;let n=!1;const o=Object.entries(t).map((([e,t])=>0===t.fee.discount.length?null:(n=!0,(0,ve.jsx)(B_,{paymentMethod:t.payment_method,accountFee:t.fee},e))));return(0,ve.jsxs)(ve.Fragment,{children:[n&&(0,ve.jsxs)("div",{className:"account-fees",children:[(0,ve.jsx)(Z.CardDivider,{}),(0,ve.jsx)("h4",{children:(0,V.__)("Active discounts","woocommerce-payments")})]}),o]})},U_=({label:e,align:t,value:n,children:o})=>(0,ve.jsxs)(Z.Flex,{direction:"row",align:t||"center",justify:"left",gap:3,className:"woocommerce-account-status-item",children:[(0,ve.jsx)(Z.FlexItem,{className:"item-label",children:e}),(0,ve.jsx)(Z.FlexBlock,{className:"item-value",children:o||n||null})]});var $_=n(2467);const V_=({iconSize:e,interval:t})=>{const n=(e=>{switch(e){case"daily":case"weekly":case"monthly":return(0,V.__)("Automatic","woocommerce-payments");case"manual":return(0,V.__)("Manual","woocommerce-payments");default:return(0,V.__)("Unknown","woocommerce-payments")}})(t);return Y().createElement("span",{className:"account-status__info__green"},Y().createElement($_.A,{size:e}),n)},W_=({iconSize:e})=>Y().createElement("span",{className:"account-status__info__red"},Y().createElement(Se.A,{size:e}),(0,V.__)("Disabled","woocommerce-payments")),H_=({iconSize:e})=>{const t=(0,V.__)("Under Review","woocommerce-payments");return Y().createElement("span",{className:"account-status__info__yellow"},Y().createElement(Se.A,{size:e}),t,Y().createElement(zt,{maxWidth:"300px",buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("Learn more about payouts suspended","woocommerce-payments"),content:Oe({mixedString:(0,V.sprintf)((0,V.__)("While the account is under review payouts may remain suspended. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),"WooPayments"),components:{learnMoreLink:Y().createElement("a",{href:"https://woocommerce.com/document/woopayments/payouts/why-payouts-suspended/",target:"_blank",rel:"noreferrer",type:"external"})}})}))},Y_=({iconSize:e})=>Y().createElement("span",{className:"account-status__info__gray"},Y().createElement(Se.A,{size:e}),(0,V.__)("Pending verification","woocommerce-payments")),q_=({status:e,interval:t,accountStatus:n,iconSize:o})=>"blocked"===e||"under_review"===n?Y().createElement(H_,{iconSize:o,interval:t}):"pending_verification"===n?Y().createElement(Y_,{iconSize:o,interval:t}):"disabled"===e?Y().createElement(W_,{iconSize:o,interval:t}):Y().createElement(V_,{iconSize:o,interval:t}),G_=({iconSize:e})=>Y().createElement("span",{className:"account-status__info__green"},Y().createElement($_.A,{size:e}),(0,V.__)("Enabled","woocommerce-payments")),Q_=({iconSize:e})=>Y().createElement("span",{className:"account-status__info__red"},Y().createElement(Se.A,{size:e}),(0,V.__)("Disabled","woocommerce-payments")),Z_=({iconSize:e})=>Y().createElement("span",{className:"account-status__info__gray"},Y().createElement(Se.A,{size:e}),(0,V.__)("Pending verification","woocommerce-payments")),K_=({paymentsEnabled:e,accountStatus:t,iconSize:n})=>e?Y().createElement(G_,{iconSize:n}):"pending_verification"===t?Y().createElement(Z_,{iconSize:n}):Y().createElement(Q_,{iconSize:n}),J_=e=>{const{accountStatus:t}=e;let n=(0,V.__)("Unknown","woocommerce-payments"),o="light",a="";return"complete"===t?(n=(0,V.__)("Complete","woocommerce-payments"),o="success"):"enabled"===t?(n=(0,V.__)("Enabled","woocommerce-payments"),o="primary"):"restricted_soon"===t?(n=(0,V.__)("Restricted soon","woocommerce-payments"),o="warning"):"pending_verification"===t?(n=(0,V.__)("Pending","woocommerce-payments"),o="light",a=(0,V.__)("Payouts are pending while Stripe verifies details on your account.","woocommerce-payments")):"restricted_partially"===t?(n=(0,V.__)("Restricted partially","woocommerce-payments"),o="warning"):"restricted"===t?(n=(0,V.__)("Restricted","woocommerce-payments"),o="alert"):t.startsWith("rejected")?(n=(0,V.__)("Rejected","woocommerce-payments"),o="light"):"under_review"===t&&(n=(0,V.__)("Under review","woocommerce-payments"),o="light"),(0,ve.jsx)(Bi,{message:n,type:o,tooltip:a})},X_={title:(0,V.__)("Account Tools","woocommerce-payments"),description:vt()?(0,V.__)("You are using a test account. If you are experiencing problems completing account setup, or wish to test with a different email/country associated with your account, you can reset your account and start from the beginning.","woocommerce-payments"):(0,V.__)("Payments and payouts are disabled until account setup is completed. If you are experiencing problems completing account setup, or need to change the email/country associated with your account, you can reset your account and start from the beginning.","woocommerce-payments"),reset:(0,V.__)("Reset account","woocommerce-payments")},ey=()=>{window.location.href=(0,Q.addQueryArgs)(wcpaySettings.connectUrl,{"wcpay-reset-account":"true",source:"wcpay-reset-account"})},ty=()=>{const[e,t]=(0,H.useState)(!1);return vt()?Y().createElement(Y().Fragment,null,Y().createElement("div",{className:"account-tools"},Y().createElement(Z.CardDivider,null),Y().createElement("h4",null,X_.title),Y().createElement("p",null,X_.description),Y().createElement("div",{className:"account-tools__actions"},Y().createElement(Z.Button,{variant:"secondary",onClick:()=>t(!0),__next40pxDefaultSize:!0},X_.reset))),Y().createElement(It,{isVisible:e,onDismiss:()=>t(!1),onSubmit:ey})):null},ny=e=>{const{title:t,children:n,value:o}=e;return(0,ve.jsxs)(Z.Card,{isMedium:!0,children:[(0,ve.jsx)(Z.CardHeader,{className:"woocommerce-account-status__header",direction:"row",align:"center",justify:"left",gap:3,expanded:!0,children:t}),(0,ve.jsx)(Z.CardBody,{children:n||o||null})]})},oy=()=>{const e=(0,V.__)("Account details","woocommerce-payments");return(0,ve.jsx)(ny,{title:e,children:(0,V.__)("Error determining the connection status.","woocommerce-payments")})},ay=e=>{const{accountStatus:t,accountFees:n}=e,o=!!t.accountLink&&(0,Q.addQueryArgs)(t.accountLink,{from:"WCPAY_ACCOUNT_DETAILS",source:"wcpay-account-details"}),a=(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Z.FlexItem,{className:"account-details",children:(0,V.__)("Account details","woocommerce-payments")}),(0,ve.jsx)(Z.FlexBlock,{className:"account-status",children:(0,ve.jsx)(J_,{accountStatus:t.status})}),o&&(0,ve.jsx)(Z.FlexItem,{className:"edit-details",children:(0,ve.jsx)(Z.Button,{variant:"link",onClick:()=>ce("wcpay_account_details_link_clicked",{from:"WCPAY_ACCOUNT_DETAILS",source:"wcpay-account-details"}),href:o,target:"_blank",__next40pxDefaultSize:!0,children:(0,V.__)("Edit details","woocommerce-payments")})})]});return(0,ve.jsxs)(ny,{title:a,children:[(0,ve.jsx)(U_,{label:(0,V.__)("Payments:","woocommerce-payments"),children:(0,ve.jsx)(K_,{paymentsEnabled:t.paymentsEnabled,accountStatus:t.status,iconSize:24})}),(0,ve.jsx)(U_,{label:(0,V.__)("Payouts:","woocommerce-payments"),children:(0,ve.jsx)(q_,{status:t.deposits?.status,interval:t.deposits?.interval,accountStatus:t.status,iconSize:24})}),(0,ve.jsx)(ty,{}),n.length>0&&(0,ve.jsx)(z_,{accountFees:n})]})},ry=e=>{const{accountStatus:t}=e;return t.error?(0,ve.jsx)(oy,{}):(0,ve.jsx)(ay,{...e})},sy=(0,ve.jsx)(fe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm11.53-1.47-1.06-1.06L11 12.94l-1.47-1.47-1.06 1.06L11 15.06l4.53-4.53Z"})}),cy=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-.75 12v-1.5h1.5V16h-1.5Zm0-8v5h1.5V8h-1.5Z"})}),iy=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.218 5.377a.25.25 0 0 0-.436 0l-7.29 12.96a.25.25 0 0 0 .218.373h14.58a.25.25 0 0 0 .218-.372l-7.29-12.96Zm-1.743-.735c.669-1.19 2.381-1.19 3.05 0l7.29 12.96a1.75 1.75 0 0 1-1.525 2.608H4.71a1.75 1.75 0 0 1-1.525-2.608l7.29-12.96ZM12.75 17.46h-1.5v-1.5h1.5v1.5Zm-1.5-3h1.5v-5h-1.5v5Z"})}),ly=e=>{switch(e){case"green":return"success";case"yellow":return"warning";case"red":return"alert";case"blue":default:return"primary";case"gray":return"light"}},my=e=>{var t;return null!==(t={published:sy,caution:cy,error:iy,info:Ee,check:be}[null!=e?e:"info"])&&void 0!==t?t:Ee},dy=e=>{switch(e){case"green":return"success";case"blue":default:return"info";case"yellow":return"warning";case"red":return"error"}},uy=({banner:e})=>e?Y().createElement(ye,{status:dy(e.background_color),icon:my(e.icon),className:"woopayments-account-details__banner",isDismissible:!1},Y().createElement(Y().Fragment,null,e.text,e.cta_text&&e.cta_link&&Y().createElement(Y().Fragment,null," ",Y().createElement(Z.ExternalLink,{href:e.cta_link},e.cta_text)))):null,py=({payoutStatus:e})=>{const t=ly(e.background_color);return Y().createElement(Z.Flex,{align:"center",gap:0,justify:"flex-start"},Y().createElement(Bi,{type:t,message:e.text}),e.popover&&Y().createElement(zt,{className:"payout-click-tooltip",buttonIcon:Y().createElement(At.A,null),buttonLabel:(0,V.__)("More information about payout status","woocommerce-payments"),buttonSize:24,maxWidth:"300px",content:Y().createElement("div",null,e.popover.text,e.popover.cta_text&&e.popover.cta_link&&Y().createElement(Y().Fragment,null," ",Y().createElement(Z.ExternalLink,{className:"payout-tooltip-external-link",href:e.popover.cta_link},e.popover.cta_text)))}))},_y=({payoutStatus:e})=>Y().createElement(Z.Flex,{direction:"row",align:"center",justify:"left",gap:3,className:"woopayments-account-details__payout-status-item"},Y().createElement(Z.FlexItem,{className:"item-label"},(0,V.__)("Payouts:","woocommerce-payments")),Y().createElement(Z.FlexBlock,{className:"item-value"},Y().createElement(py,{payoutStatus:e}))),yy=({accountStatus:e,accountLink:t})=>Y().createElement(Y().Fragment,null,Y().createElement(Z.FlexItem,{className:"account-details"},(0,V.__)("Account details","woocommerce-payments")),Y().createElement(Z.FlexBlock,{className:"account-status"},Y().createElement(Bi,{message:e.text,type:ly(e.background_color)})),t&&Y().createElement(Z.FlexItem,{className:"edit-details"},Y().createElement(Z.Button,{variant:"link",onClick:()=>ce("wcpay_account_details_link_clicked",{from:"WCPAY_ACCOUNT_DETAILS",source:"wcpay-account-details"}),href:t,target:"_blank",__next40pxDefaultSize:!0},(0,V.__)("Edit details","woocommerce-payments")))),hy=({title:e,children:t})=>Y().createElement(Z.Card,{size:"medium"},Y().createElement(Z.CardHeader,{className:"woopayments-account-details__header"},e),Y().createElement(Z.CardBody,null,t)),gy=()=>{const e=(0,V.__)("Account details","woocommerce-payments");return Y().createElement(hy,{title:e},(0,V.__)("Error loading account details.","woocommerce-payments"))},wy=({accountDetails:e,accountFees:t,accountLink:n})=>{const o=n?(0,Q.addQueryArgs)(n,{from:"WCPAY_ACCOUNT_DETAILS",source:"wcpay-account-details"}):null,a=Y().createElement(Y().Fragment,null,Y().createElement(yy,{accountStatus:e.account_status,accountLink:o}),Y().createElement(uy,{banner:e.banner}));return Y().createElement(hy,{title:a},Y().createElement(_y,{payoutStatus:e.payout_status}),Y().createElement(ty,null),t&&t.length>0&&Y().createElement(z_,{accountFees:t}))},fy=({accountDetails:e,accountFees:t=[],accountLink:n})=>null===e?Y().createElement(gy,null):Y().createElement(wy,{accountDetails:e,accountFees:t,accountLink:n}),vy={button:(0,V.__)("Dismiss","woocommerce-payments"),heading:(0,V.__)("You're ready to accept payments!","woocommerce-payments"),description:(0,V.sprintf)((0,V.__)("Great news  your %s account has been activated. You can now start accepting payments on your store.","woocommerce-payments"),"WooPayments")};const by=()=>{const[e,t]=Y().useState(wcpaySettings.isConnectionSuccessModalDismissed),n=()=>{return e=void 0,n=void 0,a=function*(){t(!0),Bs("wcpay_connection_success_modal_dismissed",!0)},new((o=void 0)||(o=Promise))((function(t,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function c(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,c)}i((a=a.apply(e,n||[])).next())}));var e,n,o,a};return Y().createElement(Y().Fragment,null,!e&&Y().createElement(Z.Modal,{title:vy.heading,className:"woopayments-connection-success-modal",isDismissible:!0,onRequestClose:n},Y().createElement("div",{className:"woopayments-connection-success-modal__content"},vy.description),Y().createElement("div",{className:"woopayments-connection-success-modal__actions"},Y().createElement(Z.Button,{variant:"primary",isBusy:!1,disabled:!1,onClick:n,__next40pxDefaultSize:!0},vy.button))))},Ey=(0,ve.jsx)(fe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(fe.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V7h15v12zM9 10H7v2h2v-2zm0 4H7v2h2v-2zm4-4h-2v2h2v-2zm4 0h-2v2h2v-2zm-4 4h-2v2h2v-2zm4 0h-2v2h2v-2z"})}),Sy=({deposits:e})=>{if(0===e.length)return null;const t="wcpay-deposits-overview__table",n=e.map((e=>Y().createElement(Z.Flex,{className:`${t}__row`,key:e.id},Y().createElement(Z.FlexItem,{className:`${t}__cell`},Y().createElement(Z.Icon,{icon:Ey,size:17}),Y().createElement(X.Link,{href:Oi(e.id,"payouts")},(e=>e?nn(null==e?void 0:e.date):"")(e))),Y().createElement(Z.FlexItem,{className:`${t}__cell`},Y().createElement(Ui,{deposit:e})),Y().createElement(Z.FlexItem,{className:`${t}__cell`},jn(e.amount,e.currency)))));return Y().createElement(Y().Fragment,null,Y().createElement(Z.CardBody,{className:`${t}__container`},Y().createElement(Z.Flex,{className:`${t}__row__header`},Y().createElement(Z.FlexItem,{className:`${t}__cell`},(0,V.__)("Dispatch date","woocommerce-payments")),Y().createElement(Z.FlexItem,{className:`${t}__cell`},(0,V.__)("Status","woocommerce-payments")),Y().createElement(Z.FlexItem,{className:`${t}__cell`},(0,V.__)("Amount","woocommerce-payments")))),Y().createElement(Z.CardDivider,null),Y().createElement(Z.CardBody,{className:`${t}__container`},n))},ky=()=>Y().createElement(ye,{className:"wcpay-deposits-overview__suspended-notice",icon:!0,isDismissible:!1,status:"warning"},Oe({mixedString:(0,V.__)("Your payouts are {{strong}}temporarily suspended{{/strong}}. {{suspendLink}}Learn more{{/suspendLink}}","woocommerce-payments"),components:{strong:Y().createElement("strong",null),suspendLink:Y().createElement(X.Link,{href:"https://woocommerce.com/document/woopayments/payouts/why-payouts-suspended/"})}})),Ny=()=>Y().createElement(ye,{status:"warning",icon:!0,className:"new-account-waiting-period-notice",isDismissible:!1},Oe({mixedString:(0,V.__)("Payout scheduling becomes available after the standard 7-day waiting period for new accounts is complete. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{learnMoreLink:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/payouts/payout-schedule/#new-accounts"})}})),xy=()=>Y().createElement(ye,{status:"warning",icon:!0,className:"negative-balance-deposits-paused-notice",isDismissible:!1},Oe({mixedString:(0,V.sprintf)((0,V.__)("Payouts may be interrupted while your %s balance remains negative. {{whyLink}}Why?{{/whyLink}}","woocommerce-payments"),"WooPayments"),components:{whyLink:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/fees/account-showing-negative-balance/"})}})),Cy=({minimumDepositAmountFormatted:e})=>Y().createElement(ye,{status:"warning",icon:!0,isDismissible:!1},Oe({mixedString:(0,V.sprintf)((0,V.__)("Payouts are paused while your available funds balance remains below %s. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),e),components:{learnMoreLink:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/payouts/payout-schedule/#minimum-payout-amounts"})}})),Ty=()=>Y().createElement(ye,{status:"warning",icon:!0,isDismissible:!1},Oe({mixedString:(0,V.__)("You have no funds available. {{whyLink}}Why?{{/whyLink}}","woocommerce-payments"),components:{whyLink:Y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://woocommerce.com/document/woopayments/payouts/payout-schedule/#pending-funds"})}})),Oy=({updateAccountLink:e})=>{const t=e?(0,Q.addQueryArgs)(e,{from:"WCPAY_PAYOUTS",source:"wcpay-payout-failure-notice"}):"";return""!==e?Y().createElement(ye,{status:"warning",icon:!0,className:"deposit-failure-notice",isDismissible:!1},Oe({mixedString:(0,V.__)("Payouts are currently paused because a recent payout failed. Please {{updateLink}}update your bank account details{{/updateLink}}.","woocommerce-payments"),components:{updateLink:Y().createElement(Z.ExternalLink,{onClick:()=>ce("wcpay_account_details_link_clicked",{from:"WCPAY_PAYOUTS",source:"wcpay-payout-failure-notice"}),href:t})}})):null},Iy=()=>{var e,t,n,o,a,r,s,c,i,l,m,d;const{account:u,overview:p,isLoading:_}=(()=>{const{overviews:e,isLoading:t}=ro(),{currencies:n,account:o}=e,{selectedCurrency:a}=R_();return{account:o,overview:n.some((e=>e.currency===a))?n.find((e=>e.currency===a)):n[0],isLoading:t}})(),y="deposits_unrestricted"===(null===(e=wcpaySettings.accountStatus.deposits)||void 0===e?void 0:e.restrictions),h=(null==p?void 0:p.currency)||wcpaySettings.accountDefaultCurrency,{isLoading:g,deposits:w}=(e=>{const t=so({store_currency_is:e,orderby:"date",order:"desc",per_page:"3"});return{deposits:t.deposits,isLoading:t.isLoading}})(h),f=_||g,v=null!==(n=null===(t=null==p?void 0:p.available)||void 0===t?void 0:t.amount)&&void 0!==n?n:0,b=null!==(a=null===(o=null==p?void 0:p.pending)||void 0===o?void 0:o.amount)&&void 0!==a?a:0,E=v+b,S=null!==(c=null===(s=null===(r=wcpaySettings.accountStatus.deposits)||void 0===r?void 0:r.minimum_scheduled_deposit_amounts)||void 0===s?void 0:s[h])&&void 0!==c?c:0,k=v>=S,N=E<0,x=0===v&&b>0,C=null===(i=wcpaySettings.accountStatus.deposits)||void 0===i?void 0:i.completed_waiting_period,T=!(null==u?void 0:u.deposits_blocked)&&C,O=!f&&(null==w?void 0:w.length)>0&&!!u,I=rn(null===(l=null==u?void 0:u.deposits_schedule)||void 0===l?void 0:l.interval),A=null!==(d=null===(m=null==u?void 0:u.default_external_accounts)||void 0===m?void 0:m.some((e=>e.currency===h&&"errored"===e.status)))&&void 0!==d&&d;return f?Y().createElement(Z.Card,{className:"wcpay-deposits-overview"},Y().createElement(Z.CardHeader,null,(0,V.__)("Payouts","woocommerce-payments")),Y().createElement(Z.CardBody,{className:"wcpay-deposits-overview__schedule__container"},Y().createElement(Lm,{isLoading:!0,placeholder:Y().createElement(cn,{depositsSchedule:{delay_days:0,interval:"daily",monthly_anchor:1,weekly_anchor:"monday"}})}))):C||0!==v||0!==b?Y().createElement(Z.Card,{className:"wcpay-deposits-overview"},Y().createElement(Z.CardHeader,null,(0,V.__)("Payouts","woocommerce-payments")),y&&!!u&&I&&Y().createElement(Z.CardBody,{className:"wcpay-deposits-overview__schedule__container"},Y().createElement(cn,{depositsSchedule:u.deposits_schedule})),Y().createElement(Z.CardBody,{className:"wcpay-deposits-overview__notices__container"},(null==u?void 0:u.deposits_blocked)?Y().createElement(ky,null):Y().createElement(Y().Fragment,null,!C&&Y().createElement(Ny,null),C&&x&&Y().createElement(Ty,null),N&&Y().createElement(xy,null),A&&Y().createElement(Oy,{updateAccountLink:wcpaySettings.accountStatus.accountLink}),v>0&&!k&&Y().createElement(Cy,{minimumDepositAmountFormatted:Mn(S,h)}))),O&&Y().createElement(Y().Fragment,null,Y().createElement(Z.CardBody,{className:"wcpay-deposits-overview__heading"},Y().createElement("span",{className:"wcpay-deposits-overview__heading__title"},(0,V.__)("Payout history","woocommerce-payments"))),Y().createElement(Sy,{deposits:w})),(O||T)&&Y().createElement(Z.CardFooter,{className:"wcpay-deposits-overview__footer"},O&&Y().createElement(Z.Button,{variant:"secondary",onClick:()=>{ce("wcpay_overview_deposits_view_history_click"),(0,Ni.getHistory)().push(Et({page:"wc-admin",path:"/payments/payouts"}))},__next40pxDefaultSize:!0},(0,V.__)("View full payout history","woocommerce-payments")),T&&Y().createElement(Z.Button,{variant:"tertiary",href:Et({page:"wc-settings",tab:"checkout",section:"woocommerce_payments"})+"#payout-schedule",onClick:()=>ce("wcpay_overview_deposits_change_schedule_click"),__next40pxDefaultSize:!0},(0,V.__)("Change payout schedule","woocommerce-payments")))):null},Ay=()=>wcpaySettings.hasOwnProperty("isJetpackIdcActive")&&wcpaySettings.isJetpackIdcActive&&Y().createElement(Z.Notice,{status:"error",isDismissible:!1,className:"wcpay-jetpack-idc-notice"},(0,V.__)("Your site is currently in Safe Mode.","woocommerce-payments"),Y().createElement("span",null,""),Y().createElement("a",{href:Nt()},(0,V.__)("Please take action","woocommerce-payments")));var Ry=n(5556),Ly=n.n(Ry);function Dy(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function jy(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Py(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return jy(n.overflowY,t)||jy(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function My(e,t,n,o,a,r,s,c){return r<e&&s>t||r>e&&s<t?0:r<=e&&c<=n||s>=t&&c>=n?r-e-o:s>t&&c<n||r<e&&c>n?s-t+a:0}n(4363);var Fy=function(){return Fy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Fy.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;let By=0;function zy(){}function Uy(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function $y(e,t){let n;function o(){n&&clearTimeout(n)}function a(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];o(),n=setTimeout((()=>{n=null,e(...r)}),t)}return a.cancel=o,a}function Vy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t.some((t=>(t&&t(e,...o),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault)))}}function Wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"==typeof t?t(e):t&&(t.current=e)}))}}function Hy(){return String(By++)}function Yy(e,t){return Object.keys(e).reduce(((n,o)=>(n[o]=function(e,t){return void 0!==e[t]}(t,o)?t[o]:e[o],n)),{})}function qy(e){const{key:t,keyCode:n}=e;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?`Arrow${t}`:t}function Gy(e,t,n,o,a){if(void 0===a&&(a=!0),0===n)return-1;const r=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:r+1);let s=t+e;s<0?s=a?r:0:s>r&&(s=a?0:r);const c=Qy(e,s,n,o,a);return-1===c?t>=n?-1:t:c}function Qy(e,t,n,o,a){const r=o(t);if(!r||!r.hasAttribute("disabled"))return t;if(e>0){for(let e=t+1;e<n;e++)if(!o(e).hasAttribute("disabled"))return e}else for(let e=t-1;e>=0;e--)if(!o(e).hasAttribute("disabled"))return e;return a?e>0?Qy(1,0,n,o,!1):Qy(-1,n-1,n,o,!1):-1}function Zy(e,t,n,o){return void 0===o&&(o=!0),t.some((t=>t&&(Uy(t,e,n)||o&&Uy(t,n.document.activeElement,n))))}const Ky=$y((e=>{Jy(e).textContent=""}),500);function Jy(e){void 0===e&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}const Xy={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};const eh=$y(((e,t)=>{!function(e,t){const n=Jy(t);e&&(n.textContent=e,Ky(t))}(e(),t)}),200),th="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?H.useLayoutEffect:H.useEffect;function nh(e){return/^\S{1}$/.test(e)}function oh(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function ah(e){const t=(0,H.useRef)(e);return t.current=e,t}function rh(e,t,n){const o=(0,H.useRef)(),a=(0,H.useRef)(),r=(0,H.useCallback)(((t,n)=>{a.current=n,t=Yy(t,n.props);const o=e(t,n);return n.props.stateReducer(t,{...n,changes:o})}),[e]),[s,c]=(0,H.useReducer)(r,t),i=ah(n),l=(0,H.useCallback)((e=>c({props:i.current,...e})),[i]),m=a.current;return(0,H.useEffect)((()=>{m&&o.current&&o.current!==s&&function(e,t,n){const{props:o,type:a}=e,r={};Object.keys(t).forEach((o=>{!function(e,t,n,o){const{props:a,type:r}=t,s=`on${oh(e)}Change`;a[s]&&void 0!==o[e]&&o[e]!==n[e]&&a[s]({type:r,...o})}(o,e,t,n),n[o]!==t[o]&&(r[o]=n[o])})),o.onStateChange&&Object.keys(r).length&&o.onStateChange({type:a,...r})}(m,Yy(o.current,m.props),s),o.current=s}),[s,n,m]),[s,l]}const sh={itemToString:function(e){return e?String(e):""},stateReducer:function(e,t){return t.changes},getA11ySelectionMessage:function(e){const{selectedItem:t,itemToString:n}=e;return t?`${n(t)} has been selected.`:""},scrollIntoView:function(e,t){if(!e)return;const n=function(e,t){var n=window,o=t.scrollMode,a=t.block,r=t.inline,s=t.boundary,c=t.skipOverflowHiddenElements,i="function"==typeof s?s:function(e){return e!==s};if(!Dy(e))throw new TypeError("Invalid target");for(var l,m,d=document.scrollingElement||document.documentElement,u=[],p=e;Dy(p)&&i(p);){if((p=null==(m=(l=p).parentElement)?l.getRootNode().host||null:m)===d){u.push(p);break}null!=p&&p===document.body&&Py(p)&&!Py(document.documentElement)||null!=p&&Py(p,c)&&u.push(p)}for(var _=n.visualViewport?n.visualViewport.width:innerWidth,y=n.visualViewport?n.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,w=e.getBoundingClientRect(),f=w.height,v=w.width,b=w.top,E=w.right,S=w.bottom,k=w.left,N="start"===a||"nearest"===a?b:"end"===a?S:b+f/2,x="center"===r?k+v/2:"end"===r?E:k,C=[],T=0;T<u.length;T++){var O=u[T],I=O.getBoundingClientRect(),A=I.height,R=I.width,L=I.top,D=I.right,j=I.bottom,P=I.left;if("if-needed"===o&&b>=0&&k>=0&&S<=y&&E<=_&&b>=L&&S<=j&&k>=P&&E<=D)return C;var M=getComputedStyle(O),F=parseInt(M.borderLeftWidth,10),B=parseInt(M.borderTopWidth,10),z=parseInt(M.borderRightWidth,10),U=parseInt(M.borderBottomWidth,10),$=0,V=0,W="offsetWidth"in O?O.offsetWidth-O.clientWidth-F-z:0,H="offsetHeight"in O?O.offsetHeight-O.clientHeight-B-U:0,Y="offsetWidth"in O?0===O.offsetWidth?0:R/O.offsetWidth:0,q="offsetHeight"in O?0===O.offsetHeight?0:A/O.offsetHeight:0;if(d===O)$="start"===a?N:"end"===a?N-y:"nearest"===a?My(g,g+y,y,B,U,g+N,g+N+f,f):N-y/2,V="start"===r?x:"center"===r?x-_/2:"end"===r?x-_:My(h,h+_,_,F,z,h+x,h+x+v,v),$=Math.max(0,$+g),V=Math.max(0,V+h);else{$="start"===a?N-L-B:"end"===a?N-j+U+H:"nearest"===a?My(L,j,A,B,U+H,N,N+f,f):N-(L+A/2)+H/2,V="start"===r?x-P-F:"center"===r?x-(P+R/2)+W/2:"end"===r?x-D+z+W:My(P,D,R,F,z+W,x,x+v,v);var G=O.scrollLeft,Q=O.scrollTop;N+=Q-($=Math.max(0,Math.min(Q+$/q,O.scrollHeight-A/q+H))),x+=G-(V=Math.max(0,Math.min(G+V/Y,O.scrollWidth-R/Y+W)))}C.push({el:O,top:$,left:V})}return C}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach((e=>{let{el:t,top:n,left:o}=e;t.scrollTop=n,t.scrollLeft=o}))},circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function ch(e,t,n){void 0===n&&(n=Xy);const o=e[`default${oh(t)}`];return void 0!==o?o:n[t]}function ih(e,t,n){void 0===n&&(n=Xy);const o=e[t];if(void 0!==o)return o;const a=e[`initial${oh(t)}`];return void 0!==a?a:ch(e,t,n)}function lh(e,t,n,o){const{items:a,initialHighlightedIndex:r,defaultHighlightedIndex:s}=e,{selectedItem:c,highlightedIndex:i}=t;return 0===a.length?-1:void 0!==r&&i===r?r:void 0!==s?s:c?0===n?a.indexOf(c):Gy(n,a.indexOf(c),a.length,o,!1):0===n?-1:n<0?a.length-1:0}function mh(e,t,n){let{isInitialMount:o,highlightedIndex:a,items:r,environment:s,...c}=n;(0,H.useEffect)((()=>{o||eh((()=>e({highlightedIndex:a,highlightedItem:r[a],resultCount:r.length,...c})),s.document)}),t)}let dh=zy;function uh(e){for(var t=e.keysSoFar,n=e.highlightedIndex,o=e.items,a=e.itemToString,r=e.getItemNodeFromIndex,s=t.toLowerCase(),c=0;c<o.length;c++){var i=(c+n+1)%o.length,l=o[i];if(void 0!==l&&a(l).toLowerCase().startsWith(s)){var m=r(i);if(!(null==m?void 0:m.hasAttribute("disabled")))return i}}return n}Ly().array.isRequired,Ly().func,Ly().func,Ly().func,Ly().bool,Ly().number,Ly().number,Ly().number,Ly().bool,Ly().bool,Ly().bool,Ly().any,Ly().any,Ly().any,Ly().string,Ly().string,Ly().string,Ly().func,Ly().string,Ly().func,Ly().func,Ly().func,Ly().func,Ly().func,Ly().shape({addEventListener:Ly().func,removeEventListener:Ly().func,document:Ly().shape({getElementById:Ly().func,activeElement:Ly().any,body:Ly().any})});var ph=Fy(Fy({},sh),{getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,o=e.previousResultCount;return t?n?n!==o?"".concat(n," result").concat(1===n?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}}),_h=zy;const yh=0,hh=1,gh=2,wh=3,fh=4,vh=5,bh=6,Eh=7,Sh=8,kh=11,Nh=13,xh=14,Ch=15,Th=20;var Oh=Object.freeze({__proto__:null,MenuKeyDownArrowDown:yh,MenuKeyDownArrowUp:hh,MenuKeyDownEscape:gh,MenuKeyDownHome:wh,MenuKeyDownEnd:fh,MenuKeyDownEnter:vh,MenuKeyDownSpaceButton:bh,MenuKeyDownCharacter:Eh,MenuBlur:Sh,MenuMouseLeave:9,ItemMouseMove:10,ItemClick:kh,ToggleButtonClick:12,ToggleButtonKeyDownArrowDown:Nh,ToggleButtonKeyDownArrowUp:xh,ToggleButtonKeyDownCharacter:Ch,FunctionToggleMenu:16,FunctionOpenMenu:17,FunctionCloseMenu:18,FunctionSetHighlightedIndex:19,FunctionSelectItem:Th,FunctionSetInputValue:21,FunctionReset:22});function Ih(e,t){const{type:n,props:o,shiftKey:a}=t;let r;switch(n){case kh:r={isOpen:ch(o,"isOpen"),highlightedIndex:ch(o,"highlightedIndex"),selectedItem:o.items[t.index]};break;case Ch:{const n=t.key,a=`${e.inputValue}${n}`,s=uh({keysSoFar:a,highlightedIndex:e.selectedItem?o.items.indexOf(e.selectedItem):-1,items:o.items,itemToString:o.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});r={inputValue:a,...s>=0&&{selectedItem:o.items[s]}}}break;case Nh:r={highlightedIndex:lh(o,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case xh:r={highlightedIndex:lh(o,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case vh:case bh:r={isOpen:ch(o,"isOpen"),highlightedIndex:ch(o,"highlightedIndex"),...e.highlightedIndex>=0&&{selectedItem:o.items[e.highlightedIndex]}};break;case wh:r={highlightedIndex:Qy(1,0,o.items.length,t.getItemNodeFromIndex,!1)};break;case fh:r={highlightedIndex:Qy(-1,o.items.length-1,o.items.length,t.getItemNodeFromIndex,!1)};break;case gh:case Sh:r={isOpen:!1,highlightedIndex:-1};break;case Eh:{const n=t.key,a=`${e.inputValue}${n}`,s=uh({keysSoFar:a,highlightedIndex:e.highlightedIndex,items:o.items,itemToString:o.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});r={inputValue:a,...s>=0&&{highlightedIndex:s}}}break;case yh:r={highlightedIndex:Gy(a?5:1,e.highlightedIndex,o.items.length,t.getItemNodeFromIndex,o.circularNavigation)};break;case hh:r={highlightedIndex:Gy(a?-5:-1,e.highlightedIndex,o.items.length,t.getItemNodeFromIndex,o.circularNavigation)};break;case Th:r={selectedItem:t.selectedItem};break;default:return function(e,t,n){const{type:o,props:a}=t;let r;switch(o){case n.ItemMouseMove:r={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:r={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:lh(a,e,0)};break;case n.FunctionOpenMenu:r={isOpen:!0,highlightedIndex:lh(a,e,0)};break;case n.FunctionCloseMenu:r={isOpen:!1};break;case n.FunctionSetHighlightedIndex:r={highlightedIndex:t.highlightedIndex};break;case n.FunctionSetInputValue:r={inputValue:t.inputValue};break;case n.FunctionReset:r={highlightedIndex:ch(a,"highlightedIndex"),isOpen:ch(a,"isOpen"),selectedItem:ch(a,"selectedItem"),inputValue:ch(a,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return{...e,...r}}(e,t,Oh)}return{...e,...r}}function Ah(e){void 0===e&&(e={}),_h(e,Ah);const t={...ph,...e},{items:n,scrollIntoView:o,environment:a,initialIsOpen:r,defaultIsOpen:s,itemToString:c,getA11ySelectionMessage:i,getA11yStatusMessage:l}=t,m=function(e){const t=ih(e,"selectedItem"),n=ih(e,"isOpen"),o=ih(e,"highlightedIndex"),a=ih(e,"inputValue");return{highlightedIndex:o<0&&t&&n?e.items.indexOf(t):o,isOpen:n,selectedItem:t,inputValue:a}}(t),[d,u]=function(e,t,n){const[o,a]=rh(e,t,n);return[Yy(o,n),a]}(Ih,m,t),{isOpen:p,highlightedIndex:_,selectedItem:y,inputValue:h}=d,g=(0,H.useRef)(null),w=(0,H.useRef)(null),f=(0,H.useRef)({}),v=(0,H.useRef)(!0),b=(0,H.useRef)(null),E=function(e){let{id:t=`downshift-${Hy()}`,labelId:n,menuId:o,getItemId:a,toggleButtonId:r,inputId:s}=e;return(0,H.useRef)({labelId:n||`${t}-label`,menuId:o||`${t}-menu`,getItemId:a||(e=>`${t}-item-${e}`),toggleButtonId:r||`${t}-toggle-button`,inputId:s||`${t}-input`}).current}(t),S=(0,H.useRef)(),k=(0,H.useRef)(!0),N=ah({state:d,props:t}),x=(0,H.useCallback)((e=>f.current[E.getItemId(e)]),[E]);mh(l,[p,_,h,n],{isInitialMount:k.current,previousResultCount:S.current,items:n,environment:a,itemToString:c,...d}),mh(i,[y],{isInitialMount:k.current,previousResultCount:S.current,items:n,environment:a,itemToString:c,...d});const C=function(e){let{highlightedIndex:t,isOpen:n,itemRefs:o,getItemNodeFromIndex:a,menuElement:r,scrollIntoView:s}=e;const c=(0,H.useRef)(!0);return th((()=>{t<0||!n||!Object.keys(o.current).length||(!1===c.current?c.current=!0:s(a(t),r))}),[t]),c}({menuElement:w.current,highlightedIndex:_,isOpen:p,itemRefs:f,scrollIntoView:o,getItemNodeFromIndex:x});(0,H.useEffect)((()=>(b.current=$y((e=>{e({type:21,inputValue:""})}),500),()=>{b.current.cancel()})),[]),(0,H.useEffect)((()=>{h&&b.current(u)}),[u,h]),dh({isInitialMount:k.current,props:t,state:d}),(0,H.useEffect)((()=>{k.current?(r||s||p)&&w.current&&w.current.focus():p?w.current&&w.current.focus():a.document.activeElement===w.current&&g.current&&(v.current=!1,g.current.focus())}),[p]),(0,H.useEffect)((()=>{k.current||(S.current=n.length)}));const T=function(e,t,n,o){const a=(0,H.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,H.useEffect)((()=>{const r=()=>{a.current.isMouseDown=!0},s=r=>{a.current.isMouseDown=!1,e&&!Zy(r.target,t.map((e=>e.current)),n)&&o()},c=()=>{a.current.isTouchMove=!1},i=()=>{a.current.isTouchMove=!0},l=r=>{!e||a.current.isTouchMove||Zy(r.target,t.map((e=>e.current)),n,!1)||o()};return n.addEventListener("mousedown",r),n.addEventListener("mouseup",s),n.addEventListener("touchstart",c),n.addEventListener("touchmove",i),n.addEventListener("touchend",l),function(){n.removeEventListener("mousedown",r),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",c),n.removeEventListener("touchmove",i),n.removeEventListener("touchend",l)}}),[e,n]),a}(p,[w,g],a,(()=>{u({type:Sh})})),O=zy;(0,H.useEffect)((()=>{k.current=!1}),[]),(0,H.useEffect)((()=>{p||(f.current={})}),[p]);const I=(0,H.useMemo)((()=>({ArrowDown(e){e.preventDefault(),u({type:Nh,getItemNodeFromIndex:x,shiftKey:e.shiftKey})},ArrowUp(e){e.preventDefault(),u({type:xh,getItemNodeFromIndex:x,shiftKey:e.shiftKey})}})),[u,x]),A=(0,H.useMemo)((()=>({ArrowDown(e){e.preventDefault(),u({type:yh,getItemNodeFromIndex:x,shiftKey:e.shiftKey})},ArrowUp(e){e.preventDefault(),u({type:hh,getItemNodeFromIndex:x,shiftKey:e.shiftKey})},Home(e){e.preventDefault(),u({type:wh,getItemNodeFromIndex:x})},End(e){e.preventDefault(),u({type:fh,getItemNodeFromIndex:x})},Escape(){u({type:gh})},Enter(e){e.preventDefault(),u({type:vh})}," "(e){e.preventDefault(),u({type:bh})}})),[u,x]),R=(0,H.useCallback)((()=>{u({type:16})}),[u]),L=(0,H.useCallback)((()=>{u({type:18})}),[u]),D=(0,H.useCallback)((()=>{u({type:17})}),[u]),j=(0,H.useCallback)((e=>{u({type:19,highlightedIndex:e})}),[u]),P=(0,H.useCallback)((e=>{u({type:Th,selectedItem:e})}),[u]),M=(0,H.useCallback)((()=>{u({type:22})}),[u]),F=(0,H.useCallback)((e=>{u({type:21,inputValue:e})}),[u]),B=(0,H.useCallback)((e=>({id:E.labelId,htmlFor:E.toggleButtonId,...e})),[E]),z=(0,H.useCallback)((function(e,t){let{onMouseLeave:n,refKey:o="ref",onKeyDown:a,onBlur:r,ref:s,...c}=void 0===e?{}:e,{suppressRefError:i=!1}=void 0===t?{}:t;const l=N.current.state;return O("getMenuProps",i,o,w),{[o]:Wy(s,(e=>{w.current=e})),id:E.menuId,role:"listbox","aria-labelledby":E.labelId,tabIndex:-1,...l.isOpen&&l.highlightedIndex>-1&&{"aria-activedescendant":E.getItemId(l.highlightedIndex)},onMouseLeave:Vy(n,(()=>{u({type:9})})),onKeyDown:Vy(a,(e=>{const t=qy(e);t&&A[t]?A[t](e):nh(t)&&u({type:Eh,key:t,getItemNodeFromIndex:x})})),onBlur:Vy(r,(()=>{!1!==v.current?!T.current.isMouseDown&&u({type:Sh}):v.current=!0})),...c}}),[u,N,A,T,O,E,x]);return{getToggleButtonProps:(0,H.useCallback)((function(e,t){let{onClick:n,onKeyDown:o,refKey:a="ref",ref:r,...s}=void 0===e?{}:e,{suppressRefError:c=!1}=void 0===t?{}:t;const i={[a]:Wy(r,(e=>{g.current=e})),id:E.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":N.current.state.isOpen,"aria-labelledby":`${E.labelId} ${E.toggleButtonId}`,...s};return s.disabled||(i.onClick=Vy(n,(()=>{u({type:12})})),i.onKeyDown=Vy(o,(e=>{const t=qy(e);t&&I[t]?I[t](e):nh(t)&&u({type:Ch,key:t,getItemNodeFromIndex:x})}))),O("getToggleButtonProps",c,a,g),i}),[u,N,I,O,E,x]),getLabelProps:B,getMenuProps:z,getItemProps:(0,H.useCallback)((function(e){let{item:t,index:n,onMouseMove:o,onClick:a,refKey:r="ref",ref:s,disabled:c,...i}=void 0===e?{}:e;const{state:l,props:m}=N.current,d=function(e,t,n){return void 0!==e?e:0===n.length?-1:n.indexOf(t)}(n,t,m.items);if(d<0)throw new Error("Pass either item or item index in getItemProps!");const p={disabled:c,role:"option","aria-selected":`${d===l.highlightedIndex}`,id:E.getItemId(d),[r]:Wy(s,(e=>{e&&(f.current[E.getItemId(d)]=e)})),...i};return c||(p.onClick=Vy(a,(()=>{u({type:kh,index:n})}))),p.onMouseMove=Vy(o,(()=>{n!==l.highlightedIndex&&(C.current=!1,u({type:10,index:n,disabled:c}))})),p}),[u,N,C,E]),toggleMenu:R,openMenu:D,closeMenu:L,setHighlightedIndex:j,selectItem:P,reset:M,setInputValue:F,highlightedIndex:_,isOpen:p,selectedItem:y,inputValue:h}}Ah.stateChangeTypes=Oh,Ly().array.isRequired,Ly().func,Ly().func,Ly().func,Ly().bool,Ly().number,Ly().number,Ly().number,Ly().bool,Ly().bool,Ly().bool,Ly().any,Ly().any,Ly().any,Ly().string,Ly().string,Ly().string,Ly().string,Ly().string,Ly().string,Ly().func,Ly().string,Ly().string,Ly().func,Ly().func,Ly().func,Ly().func,Ly().func,Ly().func,Ly().shape({addEventListener:Ly().func,removeEventListener:Ly().func,document:Ly().shape({getElementById:Ly().func,activeElement:Ly().any,body:Ly().any})}),Ly().array,Ly().array,Ly().array,Ly().func,Ly().func,Ly().func,Ly().number,Ly().number,Ly().number,Ly().func,Ly().func,Ly().string,Ly().string,Ly().shape({addEventListener:Ly().func,removeEventListener:Ly().func,document:Ly().shape({getElementById:Ly().func,activeElement:Ly().any,body:Ly().any})});const Rh=e=>(null==e?void 0:e.name)||"",Lh=({selectedItem:e},{type:t,changes:n,props:{items:o}})=>{switch(t){case Ah.stateChangeTypes.ToggleButtonKeyDownArrowDown:return{selectedItem:o[e?Math.min(o.indexOf(e)+1,o.length-1):0]};case Ah.stateChangeTypes.ToggleButtonKeyDownArrowUp:return{selectedItem:o[e?Math.max(o.indexOf(e)-1,0):o.length-1]};default:return n}},Dh=function({name:e,className:t,label:n,describedBy:o,options:a,onChange:r,value:s,placeholder:c,children:i}){var l;const{getLabelProps:m,getToggleButtonProps:d,getMenuProps:u,getItemProps:p,isOpen:_,highlightedIndex:y,selectedItem:h}=Ah({initialSelectedItem:a[0],items:a,itemToString:Rh,onSelectedItemChange:r,selectedItem:s||{},stateReducer:Lh}),g=Rh(h),w=u({className:"wcpay-filter components-custom-select-control__menu","aria-hidden":!_}),f=(0,J.useCallback)((e=>{var t;e.stopPropagation(),null===(t=null==w?void 0:w.onKeyDown)||void 0===t||t.call(w,e)}),[w]);return(null===(l=w["aria-activedescendant"])||void 0===l?void 0:l.startsWith("downshift-null"))&&delete w["aria-activedescendant"],Y().createElement("div",{className:ue("wcpay-filter components-custom-select-control",t)},Y().createElement(Z.Button,Object.assign({},d({"aria-label":n,"aria-labelledby":void 0,"aria-describedby":o||(g?(0,V.sprintf)((0,V.__)("Currently selected: %s"),g):(0,V.__)("No selection")),className:ue("wcpay-filter components-custom-select-control__button",{placeholder:!g}),name:e})),Y().createElement("label",Object.assign({},m({className:"wcpay-filter components-custom-select-control__label"})),n),Y().createElement("span",{className:"wcpay-filter components-custom-select-control__button-value"},g||c),Y().createElement(Ut,{icon:od,className:"wcpay-filter components-custom-select-control__button-icon"})),Y().createElement("ul",Object.assign({},w,{onKeyDown:f}),_&&a.map(((e,t)=>Y().createElement("li",Object.assign({},p({item:e,index:t,key:e.key,className:ue(e.className,"wcpay-filter components-custom-select-control__item",{"is-highlighted":t===y}),style:e.style})),Y().createElement(Ut,{icon:be,className:"wcpay-filter components-custom-select-control__item-icon",visibility:e===h?"visible":"hidden"}),i?i(e):e.name,e.hint&&Y().createElement("span",{className:"wcpay-filter components-custom-select-control__item-hint"},e.hint))))))},jh=e=>{var t;const{code:n,symbol:o}=(null===(t=Rn(e))||void 0===t?void 0:t.getCurrencyConfig())||{},a=(0,qt.decodeEntities)(o||"");return n&&o&&a!==n?{name:`${n} ${a}`,key:e}:{name:e.toUpperCase(),key:e}},Ph=({depositCurrencies:e})=>{const t=e.map(jh),{selectedCurrency:n,setSelectedCurrency:o}=(e=>{const{selectedCurrency:t,setSelectedCurrency:n}=R_();return(0,H.useEffect)((()=>{(!t||!e.find((e=>e.toLowerCase()===t.toLowerCase())))&&e.length>0&&n(e[0].toLowerCase())}),[e,t,n]),{selectedCurrency:t,setSelectedCurrency:n}})(e);return Y().createElement(Dh,{label:(0,V.__)("Currency","woocommerce-payments"),value:t.find((e=>e.key===n)),options:t,onChange:({selectedItem:e})=>{if(!e)return;const t=e.key.toLowerCase();o(t),ce("wcpay_overview_currency_select_change",{selected_currency:t})}})},Mh={withName:{morning:(0,V.__)("Good morning, %s","woocommerce-payments"),afternoon:(0,V.__)("Good afternoon, %s","woocommerce-payments"),evening:(0,V.__)("Good evening, %s","woocommerce-payments")},withoutName:{morning:(0,V.__)("Good morning","woocommerce-payments"),afternoon:(0,V.__)("Good afternoon","woocommerce-payments"),evening:(0,V.__)("Good evening","woocommerce-payments")}},Fh=()=>{const{user:e}=(()=>{const{user:e,isLoading:t}=(0,ln.useSelect)((e=>{const{getCurrentUser:t,isResolving:n}=e("core");return{user:t(),isLoading:!!n("getCurrentUser")}}));return{user:e,isLoading:t}})(),t=((e,t=new Date)=>{const n=((e=new Date)=>{const t=e.getHours();return t>=5&&t<12?"morning":t>=12&&t<17?"afternoon":"evening"})(t);let o=Mh.withoutName[n];return e&&(o=(0,V.sprintf)(Mh.withName[n],e)),o+=" ",o})(null==e?void 0:e.first_name),{overviews:n}=ro(),o=(null==n?void 0:n.currencies.map((e=>e.currency)))||[],a=o.length>1;return Y().createElement(Z.CardHeader,{className:"wcpay-welcome"},Y().createElement(Z.Flex,{align:"center",justify:"space-between",className:"wcpay-welcome__flex"},Y().createElement(Z.FlexItem,{className:"wcpay-welcome__flex__greeting"},t),a&&Y().createElement(Z.FlexItem,null,Y().createElement(Ph,{depositCurrencies:o}))))};function Bh(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;n[o]=e[o]}return n}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zh.apply(null,arguments)}function Uh(e,t){return Uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uh(e,t)}function $h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Uh(e,t)}const Vh=Y().createContext(null);function Wh(e,t){var n=Object.create(null);return e&&H.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,H.isValidElement)(e)?t(e):e}(e)})),n}function Hh(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Yh(e,t,n){var o=Wh(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var o,a=Object.create(null),r=[];for(var s in e)s in t?r.length&&(a[s]=r,r=[]):r.push(s);var c={};for(var i in t){if(a[i])for(o=0;o<a[i].length;o++){var l=a[i][o];c[a[i][o]]=n(l)}c[i]=n(i)}for(o=0;o<r.length;o++)c[r[o]]=n(r[o]);return c}(t,o);return Object.keys(a).forEach((function(r){var s=a[r];if((0,H.isValidElement)(s)){var c=r in t,i=r in o,l=t[r],m=(0,H.isValidElement)(l)&&!l.props.in;!i||c&&!m?i||!c||m?i&&c&&(0,H.isValidElement)(l)&&(a[r]=(0,H.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:Hh(s,"exit",e),enter:Hh(s,"enter",e)})):a[r]=(0,H.cloneElement)(s,{in:!1}):a[r]=(0,H.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Hh(s,"exit",e),enter:Hh(s,"enter",e)})}})),a}var qh=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Gh=function(e){function t(t,n){var o,a=(o=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}$h(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,o,a=t.children,r=t.handleExited;return{children:t.firstRender?(n=e,o=r,Wh(n.children,(function(e){return(0,H.cloneElement)(e,{onExited:o.bind(null,e),in:!0,appear:Hh(e,"appear",n),enter:Hh(e,"enter",n),exit:Hh(e,"exit",n)})}))):Yh(e,a,r),firstRender:!1}},n.handleExited=function(e,t){var n=Wh(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=zh({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,o=Bh(e,["component","childFactory"]),a=this.state.contextValue,r=qh(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===t?Y().createElement(Vh.Provider,{value:a},r):Y().createElement(Vh.Provider,{value:a},Y().createElement(t,o,r))},t}(Y().Component);Gh.propTypes={},Gh.defaultProps={component:"div",childFactory:function(e){return e}};const Qh=Gh;function Zh(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Kh=function(e){return e.scrollTop},Jh="unmounted",Xh="exited",eg="entering",tg="entered",ng="exiting",og=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var a,r=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?r?(a=Xh,o.appearStatus=eg):a=tg:a=t.unmountOnExit||t.mountOnEnter?Jh:Xh,o.state={status:a},o.nextCallback=null,o}$h(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Jh?{status:Xh}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==eg&&n!==tg&&(t=eg):n!==eg&&n!==tg||(t=ng)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===eg){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Lt().findDOMNode(this);n&&Kh(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Xh&&this.setState({status:Jh})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,a=this.props.nodeRef?[o]:[Lt().findDOMNode(this),o],r=a[0],s=a[1],c=this.getTimeouts(),i=o?c.appear:c.enter;e||n?(this.props.onEnter(r,s),this.safeSetState({status:eg},(function(){t.props.onEntering(r,s),t.onTransitionEnd(i,(function(){t.safeSetState({status:tg},(function(){t.props.onEntered(r,s)}))}))}))):this.safeSetState({status:tg},(function(){t.props.onEntered(r)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:Lt().findDOMNode(this);t?(this.props.onExit(o),this.safeSetState({status:ng},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Xh},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:Xh},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Lt().findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=a[0],s=a[1];this.props.addEndListener(r,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Jh)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Bh(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return Y().createElement(Vh.Provider,{value:null},"function"==typeof n?n(e,o):Y().cloneElement(Y().Children.only(n),o))},t}(Y().Component);function ag(){}og.contextType=Vh,og.propTypes={},og.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ag,onEntering:ag,onEntered:ag,onExit:ag,onExiting:ag,onExited:ag},og.UNMOUNTED=Jh,og.EXITED=Xh,og.ENTERING=eg,og.ENTERED=tg,og.EXITING=ng;const rg=og;var sg=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return o=t,void((n=e).classList?n.classList.remove(o):"string"==typeof n.className?n.className=Zh(n.className,o):n.setAttribute("class",Zh(n.className&&n.className.baseVal||"",o)));var n,o}))},cg=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var o=t.resolveArguments(e,n),a=o[0],r=o[1];t.removeClasses(a,"exit"),t.addClass(a,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=t.resolveArguments(e,n),a=o[0],r=o[1]?"appear":"enter";t.addClass(a,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=t.resolveArguments(e,n),a=o[0],r=o[1]?"appear":"enter";t.removeClasses(a,r),t.addClass(a,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,a=o?(o&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:o?a+"-active":n[e+"Active"],doneClassName:o?a+"-done":n[e+"Done"]}},t}$h(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(o+=" "+a),"active"===n&&e&&Kh(e),o&&(this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return o=t,void((n=e).classList?n.classList.add(o):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,o)||("string"==typeof n.className?n.className=n.className+" "+o:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+o)));var n,o}))}(e,o))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,a=n.active,r=n.done;this.appliedClasses[t]={},o&&sg(e,o),a&&sg(e,a),r&&sg(e,r)},n.render=function(){var e=this.props,t=(e.classNames,Bh(e,["classNames"]));return Y().createElement(rg,zh({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Y().Component);cg.defaultProps={classNames:""},cg.propTypes={};const ig=cg,lg={page:1,per_page:Wi.QUERY_DEFAULTS.pageSize,status:"unactioned",type:Wi.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",source:"woocommerce-payments",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted","source"]},mg=(e,t)=>{ce("wcpay_inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})},dg=({hasNotes:e,batchUpdating:t,lastRead:n,notes:o,onDismiss:a,onNoteActionClick:r})=>{if(t)return;if(!e)return(0,ve.jsx)("section",{className:"woocommerce-empty-activity-card",children:(0,V.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce-admin")});const s=e=>{ce("wcpay_inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type})},c=Object.keys(o).map((e=>o[e]));return(0,ve.jsx)(Qh,{role:"menu",children:c.map((e=>{const{id:t,is_deleted:o}=e;return o?null:(0,ve.jsx)(ig,{timeout:500,classNames:"wcpay-inbox-message",children:(0,ve.jsx)(K.InboxNoteCard,{note:e,lastRead:n,onDismiss:a,onNoteActionClick:r,onBodyLinkClick:mg,onNoteVisible:s},t)},t)}))})},ug=()=>{const{createNotice:e}=(0,ln.useDispatch)("core/notices"),{batchUpdateNotes:t,removeNote:n,updateNote:o,triggerNoteAction:a}=(0,ln.useDispatch)(Wi.NOTES_STORE_NAME),{isError:r,resolving:s,batchUpdating:c,notes:i,overviewInboxLastRead:l}=(0,ln.useSelect)((e=>{const{getNotes:t,getNotesError:n,isResolving:o,isNotesRequesting:a}=e(Wi.NOTES_STORE_NAME),{getCurrentUser:r}=e("core"),s=r(),c=s?s.woocommerce_meta:{};return{notes:t(lg),isError:Boolean(n("getNotes",[lg])),resolving:o("getNotes",[lg]),batchUpdating:a("batchUpdateNotes"),overviewInboxLastRead:c.wc_payments_overview_inbox_last_read?JSON.parse(c.wc_payments_overview_inbox_last_read):void 0}})),[m,d]=(0,J.useState)(),u=(0,J.useRef)(l);if(!u.current&&l&&(u.current=l),(0,J.useEffect)((()=>{!async function(e){if(!e||0===Object.keys(e).length)return;const t=await(0,ln.select)("core").getCurrentUser(),n=Object.keys(e).reduce(((t,n)=>{let o=e[n];return"string"!=typeof o&&(o=JSON.stringify(o)),{...t,[n]:o}}),{}),o=await(0,ln.dispatch)("core").saveUser({id:t.id,woocommerce_meta:{...t.woocommerce_meta,...n}});if(void 0===o)return{error:await(0,ln.select)("core").getLastEntitySaveError("root","user",t.id),updatedUser:o};o.woocommerce_meta}({wc_payments_overview_inbox_last_read:Date.now()})}),[]),r){const e=(0,V.__)("There was an error getting your inbox. Please try again.","woocommerce-admin"),t=(0,V.__)("Reload","woocommerce-admin"),n=()=>{window.location.reload()};return(0,ve.jsx)(X.EmptyContent,{title:e,actionLabel:t,actionURL:null,actionCallback:n})}const p=async(a=!1)=>{const r="all"===m.type;if(ce("wcpay_inbox_action_dismissed",{note_name:m.note.name,note_title:m.note.title,note_name_dismiss_all:r,note_name_dismiss_confirmation:a}),a){const a=m.note.id,s=!a||r;try{let r=[];if(s)await t(i.map((e=>e.id)),{is_deleted:1}),r=[...i];else{const e=await n(a);r=[e]}d(void 0),e("success",r.length>1?(0,V.__)("All messages dismissed","woocommerce-admin"):(0,V.__)("Message dismissed","woocommerce-admin"),{actions:[{label:(0,V.__)("Undo","woocommerce-admin"),onClick:()=>{r.length>1?t(r.map((e=>e.id)),{is_deleted:0}):o(a,{is_deleted:0})}}]})}catch(t){const n=s?i.length:1;e("error",(0,V._n)("Message could not be dismissed","Messages could not be dismissed",n,"woocommerce-admin")),d(void 0)}}else d(void 0)},_=function(e){return 0!==e.filter((({is_deleted:e})=>!e)).length}(i);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)("div",{className:"wcpay-overview-screen-notes-wrapper",children:[(s||c)&&(0,ve.jsx)(X.Section,{children:(0,ve.jsx)(K.InboxNotePlaceholder,{className:"banner message-is-unread"})}),(0,ve.jsx)(X.Section,{children:!s&&!c&&dg({hasNotes:_,batchUpdating:c,lastRead:u.current,notes:i,onDismiss:(e,t)=>{d({note:e,type:t})},onNoteActionClick:(e,t)=>{a(e.id,t.id)}})}),m&&(0,ve.jsx)(K.InboxDismissConfirmationModal,{onClose:p,onDismiss:()=>p(!0)})]})})};var pg;!function(e){e[e.DAY_IN_MS=864e5]="DAY_IN_MS"}(pg||(pg={}));const _g=({overviewTasksVisibility:e,tasks:t})=>{const{createNotice:n}=(0,ln.useDispatch)("core/notices"),[o,a]=(0,J.useState)(t),{deletedTodoTasks:r,dismissedTodoTasks:s,remindMeLaterTodoTasks:c}=e,i=(0,J.useCallback)((()=>{const e=Date.now();return t.filter((t=>!r.includes(t.key)&&!s.includes(t.key)&&(!c[t.key]||c[t.key]<e)))}),[r,s,c,t]);(0,J.useEffect)((()=>{a(i())}),[t,i]);const l=(e,t)=>{(async({task:e,dismissedTasks:t,noticeMessage:o,optionName:r})=>{const{key:c,onDismiss:l}=e;t.push(c),a(i()),Bs(r,[...t]),n("success",o,{actions:[{label:(0,V.__)("Undo","woocommerce-payments"),onClick:()=>(async(e,t,n)=>{const o=t.filter((t=>t!==e));t.splice(s.indexOf(e),1),a(i()),Bs(n,o)})(c,t,r)}]}),l&&l()})("dismiss"===t?{task:e,dismissedTasks:s,noticeMessage:(0,V.__)("Task dismissed","woocommerce-payments"),optionName:"woocommerce_dismissed_todo_tasks"}:{task:e,dismissedTasks:r,noticeMessage:(0,V.__)("Task deleted","woocommerce-payments"),optionName:"woocommerce_deleted_todo_tasks"})};return o.length?(0,ve.jsx)(K.CollapsibleList,{className:"wcpay-task-list",collapsed:!1,show:5,collapseLabel:(0,V.__)("Hide tasks","woocommerce-payments"),expandLabel:(0,V.__)("Show tasks","woocommerce-payments"),children:o.map((e=>(0,ve.jsx)(K.TaskItem,{"data-key":e.key,...e.dataAttrs||{},title:e.title,actionLabel:e.actionLabel,completed:e.completed,content:e.content,additionalInfo:e.additionalInfo,showActionButton:e.showActionButton,expandable:e.expandable,expanded:e.expanded,enter:void 0!==e.enter&&e.enter,action:void 0!==e.action?e.action:e.onClick,onClick:e.onClick,time:e.time,level:e.level,onDelete:e.isDeletable&&e.completed?()=>l(e,"delete"):void 0,onDismiss:e.isDismissable?()=>l(e,"dismiss"):void 0,onSnooze:e.allowSnooze?()=>(async({key:e,onDismiss:t})=>{const o=Date.now()+pg.DAY_IN_MS;c[e]=o,a(i()),Bs("woocommerce_remind_me_later_todo_tasks",{...c,[e]:o}),n("success",(0,V.__)("Task postponed until tomorrow","woocommerce-payments"),{actions:[{label:(0,V.__)("Undo","woocommerce-payments"),onClick:()=>(async e=>{const{[e]:t,...n}=c;delete c[e],a(i()),Bs("woocommerce_remind_me_later_todo_tasks",n)})(e)}]}),t&&t()})(e):void 0},e.key)))}):(0,ve.jsx)("div",{})},yg={errors:{invalid_address_city_state_postal_code:(0,V.__)("The combination of the city, state, and postal code in the provided address could not be validated.","woocommerce-payments"),invalid_street_address:(0,V.__)("The street name and/or number for the provided address could not be validated.","woocommerce-payments"),invalid_tos_acceptance:(0,J.createInterpolateElement)((0,V.__)("The existing terms of service signature has been invalidated because the accounts tax ID has changed. The account needs to accept the terms of service again. For more information, see <a>this documentation</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/update-verified-information",target:"_blank",rel:"noopener noreferrer"})}),invalid_representative_country:(0,V.__)("The representative must have an address in the same country as the company.","woocommerce-payments"),verification_document_address_mismatch:(0,V.__)("The address on the document did not match the address on the account. Upload a document with a matching address or update the address on the account.","woocommerce-payments"),verification_document_address_missing:(0,V.__)("The company address was missing on the document. Upload a document that includes the address.","woocommerce-payments"),verification_document_corrupt:(0,V.__)("The uploaded file for the document was invalid or corrupt. Upload a new file of the document.","woocommerce-payments"),verification_document_country_not_supported:(0,V.__)("The provided document was from an unsupported country.","woocommerce-payments"),verification_document_dob_mismatch:(0,V.__)("The date of birth (DOB) on the document did not match the DOB on the account. Upload a document with a matching DOB or update the DOB on the account.","woocommerce-payments"),verification_document_duplicate_type:(0,V.__)("The same type of document was used twice. Two unique types of documents are required for verification. Upload two different documents.","woocommerce-payments"),verification_document_expired:(0,V.__)("The document could not be used for verification because it has expired. If its an identity document, its expiration date must be after the date the document was submitted. If its an address document, the issue date must be within the last six months.","woocommerce-payments"),verification_document_failed_copy:(0,V.__)("The document could not be verified because it was detected as a copy (e.g., photo or scan). Upload the original document.","woocommerce-payments"),verification_document_failed_greyscale:(0,V.__)("The document could not be used for verification because it was in greyscale. Upload a color copy of the document.","woocommerce-payments"),verification_document_failed_other:(0,J.createInterpolateElement)((0,V.__)("The document could not be verified for an unknown reason. Ensure that the document follows the <a>guidelines for document uploads</a>","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/identity-verification-api#acceptable-verification-documents",target:"_blank",rel:"noopener noreferrer"})}),verification_document_failed_test_mode:(0,J.createInterpolateElement)((0,V.__)("A test data helper was supplied to simulate verification failure. Refer to the documentation for <a>test file tokens</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/testing#test-file-tokens",target:"_blank",rel:"noopener noreferrer"})}),verification_document_fraudulent:(0,V.__)("The document was identified as altered or falsified.","woocommerce-payments"),verification_document_id_number_mismatch:(0,V.__)("The company ID number on the account could not be verified. Correct any errors in the ID number field or upload a document that includes the ID number.","woocommerce-payments"),verification_document_id_number_missing:(0,V.__)("The company ID number was missing on the document. Upload a document that includes the ID number.","woocommerce-payments"),verification_document_incomplete:(0,V.__)("The document was cropped or missing important information. Upload a complete scan of the document.","woocommerce-payments"),verification_document_invalid:(0,J.createInterpolateElement)((0,V.__)("The uploaded file was not one of the valid document types. Ensure that the document follows the <a>guidelines for document uploads</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/identity-verification-api#acceptable-verification-documents",target:"_blank",rel:"noopener noreferrer"})}),verification_document_issue_or_expiry_date_missing:(0,V.__)("The issue or expiry date is missing on the document. Upload a document that includes the issue and expiry dates."),verification_document_manipulated:(0,V.__)("The document was identified as altered or falsified.","woocommerce-payments"),verification_document_missing_back:(0,V.__)("The uploaded file was missing the back of the document. Upload a complete scan of the document.","woocommerce-payments"),verification_document_missing_front:(0,V.__)("The uploaded file was missing the front of the document. Upload a complete scan of the document.","woocommerce-payments"),verification_document_name_mismatch:(0,V.__)("The name on the document did not match the name on the account. Upload a document with a matching name or update the name on the account.","woocommerce-payments"),verification_document_name_missing:(0,V.__)("The company name was missing on the document. Upload a document that includes the company name.","woocommerce-payments"),verification_document_nationality_mismatch:(0,V.__)("The nationality on the document did not match the persons stated nationality. Update the persons stated nationality, or upload a document that matches it.","woocommerce-payments"),verification_document_not_readable:(0,J.createInterpolateElement)((0,V.__)("The document could not be read. Ensure that the document follows the <a>guidelines for document uploads</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/identity-verification-api#acceptable-verification-documents",target:"_blank",rel:"noopener noreferrer"})}),verification_document_not_signed:(0,V.__)("A valid signature is missing on the document. Upload a document that includes a valid signature.","woocommerce-payments"),verification_document_not_uploaded:(0,V.__)("No document was uploaded. Upload the document again.","woocommerce-payments"),verification_document_photo_mismatch:(0,V.__)("The document was identified as altered or falsified.","woocommerce-payments"),verification_document_too_large:(0,V.__)("The uploaded file exceeded the 10 MB size limit. Resize the document and upload the new file.","woocommerce-payments"),verification_document_type_not_supported:(0,J.createInterpolateElement)((0,V.__)("The provided document type was not accepted. Ensure that the document follows the <a>guidelines for document uploads</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://stripe.com/docs/connect/identity-verification-api#acceptable-verification-documents",target:"_blank",rel:"noopener noreferrer"})}),verification_failed_address_match:(0,V.__)("The address on the account could not be verified. Correct any errors in the address field or upload a document that includes the address.","woocommerce-payments"),verification_failed_business_iec_number:(0,V.__)("The Importer Exporter Code (IEC) number could not be verified. Correct any errors in the companys IEC number field. (India only)","woocommerce-payments"),verification_failed_document_match:(0,V.__)("The document could not be verified. Upload a document that includes the company name, ID number, and address fields.","woocommerce-payments"),verification_failed_id_number_match:(0,V.__)("The company ID number on the account could not be verified. Correct any errors in the ID number field or upload a document that includes the ID number.","woocommerce-payments"),verification_failed_keyed_identity:(0,V.__)("The persons keyed-in identity information could not be verified. Correct any errors or upload a document that matches the identity fields (e.g., name and date of birth) entered.","woocommerce-payments"),verification_failed_keyed_match:(0,V.__)("The keyed-in information on the account could not be verified. Correct any errors in the company name, ID number, or address fields. You can also upload a document that includes those fields.","woocommerce-payments"),verification_failed_name_match:(0,V.__)("The company name on the account could not be verified. Correct any errors in the company name field or upload a document that includes the company name.","woocommerce-payments"),verification_failed_residential_address:(0,V.__)("We could not verify that the person resides at the provided address. The address must be a valid physical address where the individual resides and cannot be a P.O. Box.","woocommerce-payments"),verification_failed_tax_id_match:(0,V.__)("The tax ID on the account cannot be verified by the IRS. Either correct any possible errors in the company name or tax ID, or upload a document that contains those fields.","woocommerce-payments"),verification_failed_tax_id_not_issued:(0,J.createInterpolateElement)((0,V.__)("The tax ID on the account was not recognized by the IRS. Refer to the support article for <a>newly-issued tax ID numbers</a>.","woocommerce-payments"),{a:Y().createElement("a",{href:"https://support.stripe.com/questions/newly-issued-us-tax-id-number-tin-not-verifying",target:"_blank",rel:"noopener noreferrer"})}),verification_failed_other:(0,V.__)("Verification failed for an unknown reason. Correct any errors and resubmit the required fields.","woocommerce-payments"),verification_missing_owners:(0,V.__)("We have identified owners that havent been added on the account. Add any missing owners to the account.","woocommerce-payments"),verification_missing_executives:(0,V.__)("We have identified executives that havent been added on the account. Add any missing executives to the account.","woocommerce-payments"),verification_requires_additional_memorandum_of_associations:(0,V.__)("We have identified holding companies with significant percentage ownership. Upload a Memorandum of Association for each of the holding companies.","woocommerce-payments"),invalid_dob_age_under_18:(0,V.__)("Underage. Age must be at least 18.","woocommerce-payments")},tasks:{go_live:{title:(0,V.__)("Activate payments","woocommerce-payments"),time:(0,V.__)("10 minutes","woocommerce-payments")}}},hg=(e,t)=>e.filter((e=>(({dueBy:e,days:t})=>{if(!e)return!1;const n="number"==typeof e?ut().unix(e):ut().utc(e,!0);if(!n.isValid())return!1;const o=ut()().utc(),a=n.diff(o,"days",!0)<=t,r=o.isAfter(n);return a&&!r})({dueBy:e.due_by,days:t}))),gg=e=>{const t=(e=[...e].filter((e=>""!==e.due_by)).sort(((e,t)=>ut()(e.due_by).diff(ut()(t.due_by))))).length;if(0===t)return null;const n=hg(e,1).length,o=hg(e,3).length,a={key:`dispute-resolution-task-${e.map((e=>e.dispute_id)).join("-")}`,title:"",content:"",level:1,completed:!1,expanded:!0,expandable:!0,isDismissable:!1,showActionButton:!0,actionLabel:(0,V.__)("Respond now","woocommerce-payments"),action:()=>{ce("wcpay_overview_task_click",{task:"dispute-resolution-task",active_dispute_count:t});const n=(0,Ni.getHistory)();if(1===t){const t=e[0].charge_id;n.push(Et({page:"wc-admin",path:"/payments/transactions/details",id:t}))}else n.push(Et({page:"wc-admin",path:"/payments/disputes",filter:"awaiting_response"}))},onClick:()=>{},dataAttrs:{"data-urgent":!!(o>=1)}};if(1===t){const t=e[0],o=jn(t.amount,t.currency);return a.title=n>=1?(0,V.sprintf)((0,V.__)("Respond to a dispute for %s  Last day","woocommerce-payments"),o):(0,V.sprintf)((0,V.__)("Respond to a dispute for %s","woocommerce-payments"),o),a.content=n>=1?(0,V.sprintf)((0,V.__)("Respond today by %s","woocommerce-payments"),nn(t.due_by,{customFormat:"g:i A"})):(0,V.sprintf)((0,V.__)("By %s  %s left to respond","woocommerce-payments"),nn(t.due_by),ut().utc(t.due_by).fromNow(!0)),a}const r=e.reduce(((e,t)=>{const{currency:n}=t;return e.includes(n)?e:[...e,n]}),[]);if(r.length>1)a.title=(0,V.sprintf)((0,V.__)("Respond to %d active disputes","woocommerce-payments"),t);else{const n=e.reduce(((e,t)=>e+t.amount),0);a.title=(0,V.sprintf)((0,V.__)("Respond to %d active disputes for a total of %s","woocommerce-payments"),t,jn(n,r[0]))}const s=hg(e,7).length;return a.content=n>=1?(0,V.sprintf)((0,V.__)("Final day to respond to %d of the disputes","woocommerce-payments"),n):(0,V.sprintf)((0,V.__)("Last week to respond to %d of the disputes","woocommerce-payments"),s),a.actionLabel=(0,V.__)("See disputes","woocommerce-payments"),a},wg=e=>{const t=()=>{ce("wcpay_overview_task_click",{task:"reconnect-wpcom",source:"wcpay-reconnect-wpcom-task"}),window.location.href=(0,Q.addQueryArgs)(e,{from:"WCPAY_OVERVIEW",source:"wcpay-reconnect-wpcom-user-task"})};return{key:"reconnect-wpcom-user",level:1,content:"",title:(0,V.sprintf)((0,V.__)("Reconnect %s","woocommerce-payments"),"WooPayments"),additionalInfo:(0,V.sprintf)((0,V.__)("%s is missing a connected WordPress.com account. Some functionality will be limited without a connected account.","woocommerce-payments"),"WooPayments"),completed:!1,onClick:t,action:t,actionLabel:(0,V.__)("Reconnect","woocommerce-payments"),expandable:!0,expanded:!0,showActionButton:!0}},fg={button:(0,V.__)("Finish setup","woocommerce-payments"),heading:(0,V.sprintf)((0,V.__)("Update %s business details","woocommerce-payments"),"WooPayments"),restrictedDescription:(0,V.__)("Payments and payouts are disabled for this account until missing information is updated. Please update the following information in the Stripe dashboard.","woocommerce-payments"),restrictedSoonDescription:(0,V.__)("Additional information is required to verify your business. Update by %s to avoid a disruption in payouts.","woocommerce-payments"),updateBusinessDetails:(0,V.__)("Update business details","woocommerce-payments "),cancel:(0,V.__)("Cancel","woocommerce-payments")},vg=({errorMessages:e,accountStatus:t,accountLink:n,currentDeadline:o})=>{const[a,r]=(0,H.useState)(!0),s=()=>{r(!1)};return Y().createElement(Y().Fragment,null,a&&Y().createElement(Z.Modal,{title:fg.updateBusinessDetails,isDismissible:!0,className:"wcpay-update-business-details-modal",shouldCloseOnClickOutside:!1,onRequestClose:s},Y().createElement("div",{className:"wcpay-update-business-details-modal__wrapper"},Y().createElement("div",{className:"wcpay-update-business-details-modal__body"},Y().createElement("p",null,"restricted_soon"===t&&o?(0,V.sprintf)(fg.restrictedSoonDescription,on(o,{customFormat:"ga M j, Y"})):fg.restrictedDescription),e.map(((e,t)=>Y().createElement(Z.Notice,{key:t,status:"warning",isDismissible:!1},e))))),Y().createElement("hr",null),Y().createElement("div",{className:"wcpay-update-business-details-modal__footer"},Y().createElement(Z.Button,{variant:"secondary",onClick:s,__next40pxDefaultSize:!0},fg.cancel),Y().createElement(Z.Button,{variant:"primary",onClick:()=>{ce("wcpay_account_details_link_clicked",{source:"wcpay-update-business-details-task"}),window.open(n,"_blank")},__next40pxDefaultSize:!0},fg.updateBusinessDetails))))},bg=(e,t,n,o,a,r)=>{const s="restricted_soon"===t,c="restricted"===t&&a,i=1<e.length,l=1===e.length,m=n?(0,Q.addQueryArgs)(n,{from:"WCPAY_OVERVIEW",source:"wcpay-update-business-details-task"}):"";let d,u,p="";s&&o?(u=(0,V.sprintf)((0,V.__)("Update by %s to avoid a disruption in payouts.","woocommerce-payments"),on(o,{customFormat:"ga M j, Y"})),l?(d=e[0],p=Y().createElement(Y().Fragment,null,d," ",u)):p=u):c&&(p=l?e[0]:r?(0,V.__)("Payments and payouts are disabled for this account until missing business information is updated.","woocommerce-payments"):(0,V.__)("Payments and payouts are disabled for this account until setup is completed.","woocommerce-payments"));const _=()=>{if("complete"!==t&&"enabled"!==t)if(i)(()=>{let a=document.querySelector("#wcpay-update-business-details-container");a||(a=document.createElement("div"),a.id="wcpay-update-business-details-container",document.body.appendChild(a)),(0,J.render)(Y().createElement(vg,{key:Date.now(),errorMessages:e,accountStatus:t,accountLink:n,currentDeadline:o}),a)})();else{let e="wcpay-update-business-details-task";r||(e="wcpay-finish-setup-task"),ce("wcpay_account_details_link_clicked",{source:e}),r?window.open(m,"_blank"):window.location.href=Et({page:"wc-settings",tab:"checkout",path:"/woopayments/onboarding",source:"wcpay-finish-setup-task",from:"WCPAY_OVERVIEW"})}};let y;return y=i?(0,V.__)("More details","woocommerce-payments"):r?(0,V.__)("Update","woocommerce-payments"):(0,V.__)("Finish setup","woocommerce-payments"),{key:r?"update-business-details":"complete-setup",level:1,title:r?(0,V.sprintf)((0,V.__)("Update %s business details","woocommerce-payments"),"WooPayments"):(0,V.sprintf)((0,V.__)("Finish setting up %s","woocommerce-payments"),"WooPayments"),content:p,completed:"complete"===t||"enabled"===t,onClick:_,action:_,actionLabel:y,expandable:!0,expanded:!0,showActionButton:!0}},Eg=()=>{const[e,t]=(0,H.useState)(!0);return e?Y().createElement(Ht,{from:"WCPAY_GO_LIVE_TASK",source:"wcpay-go-live-task",onClose:()=>t(!1)}):Y().createElement(Y().Fragment,null)},Sg=()=>{const e=()=>{ce("wcpay_overview_task_click",{task:"go-live",source:"wcpay-go-live-task"});const e=document.createElement("div");e.id="wcpay-golivemodal-container",document.body.appendChild(e),(0,Gt.H)(e).render(Y().createElement(Eg,null))};return{key:"go-live-payments",level:3,content:"",title:yg.tasks.go_live.title,time:yg.tasks.go_live.time,completed:!1,onClick:e,action:e,expandable:!1,showActionButton:!1}},kg=["invalid_value_other"],Ng=({showUpdateDetailsTask:e,wpcomReconnectUrl:t,activeDisputes:n=[],showGoLiveTask:o=!1})=>{var a;const{status:r,currentDeadline:s,pastDue:c,accountLink:i,requirements:l,detailsSubmitted:m}=wcpaySettings.accountStatus,d=(()=>{var e;const t=yg.errors,n=null===(e=null==l?void 0:l.errors)||void 0===e?void 0:e.filter((e=>!kg.includes(e.code))),o=null==n?void 0:n.map((e=>t[e.code]||e.reason));return Array.from(new Set(o||[]))})(),u=e,p=!!n&&0<hg(n,7).length,_=wcpaySettings.isAccountConnected&&vt(!1)&&o;return[u&&bg(d,null!=r?r:"",null!=i?i:"",null!==(a=Number(s))&&void 0!==a?a:null,null!=c&&c,null==m||m),t&&wg(t),p&&gg(n),_&&Sg()].filter(Boolean).filter((e=>null!==e))},xg=(e,t)=>{if(e.completed||t.completed)return e.completed?1:-1;const n=e.level||3,o=t.level||3;return n===o?0:n>o?1:-1},Cg=()=>Y().createElement("svg",{className:"stripe-spinner",width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y().createElement("path",{d:"M14.3308 28.3333C14.0453 28.3333 13.7714 28.2199 13.5695 28.018C13.3675 27.816 13.2541 27.5422 13.2541 27.2566C13.2541 26.971 13.3675 26.6972 13.5695 26.4952C13.7714 26.2933 14.0453 26.1799 14.3308 26.1799C17.4727 26.1799 20.4859 24.9317 22.7076 22.7101C24.9293 20.4884 26.1774 17.4752 26.1774 14.3333C26.1774 11.1914 24.9293 8.17821 22.7076 5.95655C20.4859 3.73489 17.4727 2.48677 14.3308 2.48677C12.5754 2.48495 10.8416 2.87419 9.25541 3.62623C7.66923 4.37826 6.27049 5.4742 5.16082 6.83441C5.07124 6.94388 4.96097 7.03464 4.83631 7.1015C4.71165 7.16836 4.57504 7.21001 4.43428 7.22407C4.15001 7.25248 3.8661 7.16679 3.645 6.98587C3.42391 6.80494 3.28374 6.54359 3.25534 6.25932C3.22694 5.97505 3.31262 5.69114 3.49355 5.47005C4.80533 3.86303 6.45849 2.56827 8.33301 1.67977C10.2075 0.791267 12.2564 0.331321 14.3308 0.333319C22.0626 0.333319 28.3308 6.6015 28.3308 14.3333C28.3308 22.0651 22.0626 28.3333 14.3308 28.3333Z",fill:"#4F575D"})),Tg={setOnLoadError:e=>{},setOnLoaderStart:e=>{}},Og={"account-onboarding":{setFullTermsOfServiceUrl:e=>{},setRecipientTermsOfServiceUrl:e=>{},setPrivacyPolicyUrl:e=>{},setSkipTermsOfServiceCollection:e=>{},setCollectionOptions:e=>{},setOnExit:e=>{},setOnStepChange:e=>{}},"account-management":{setCollectionOptions:e=>{}},"notification-banner":{setCollectionOptions:e=>{},setOnNotificationsChange:e=>{}},"issuing-card":{setDefaultCard:e=>{},setCardSwitching:e=>{},setFetchEphemeralKey:e=>{},setShowSpendControls:e=>{}},"issuing-cards-list":{setFetchEphemeralKey:e=>{},setShowSpendControls:e=>{},setIssuingProgram:e=>{}},"financial-account":{setFinancialAccount:e=>{}},"financial-account-transactions":{setFinancialAccount:e=>{}},payments:{setDefaultFilters:e=>{}},"payment-details":{setPayment:e=>{},setOnClose:e=>{}},"payment-disputes":{setPayment:e=>{},setOnDisputesLoaded:e=>{}},"tax-settings":{setHideProductTaxCodeSelector:e=>{},setDisplayHeadOfficeCountries:e=>{},setOnTaxSettingsUpdated:e=>{}},"tax-registrations":{setOnAfterTaxRegistrationAdded:e=>{},setDisplayCountries:e=>{}}},Ig={"account-onboarding":"stripe-connect-account-onboarding","disputes-list":"stripe-connect-disputes-list",payments:"stripe-connect-payments","payment-details":"stripe-connect-payment-details","payment-disputes":"stripe-connect-payment-disputes",payouts:"stripe-connect-payouts","payouts-list":"stripe-connect-payouts-list",balances:"stripe-connect-balances","account-management":"stripe-connect-account-management","notification-banner":"stripe-connect-notification-banner","issuing-card":"stripe-connect-issuing-card","issuing-cards-list":"stripe-connect-issuing-cards-list","financial-account":"stripe-connect-financial-account","financial-account-transactions":"stripe-connect-financial-account-transactions",documents:"stripe-connect-documents","tax-registrations":"stripe-connect-tax-registrations","tax-settings":"stripe-connect-tax-settings"},Ag="loadConnect was called but an existing Connect.js script already exists in the document; existing script parameters will be used",Rg="https://connect-js.stripe.com/v1.0/connect.js";let Lg=null;const Dg=e=>!(!e||"object"!=typeof e||!("init"in e)||"function"!=typeof e.init),jg=(e,t)=>{var n;const o=(()=>{try{return t.fetchClientSecret()}catch(e){return Promise.reject(e)}})(),a=null!==(n=t.metaOptions)&&void 0!==n?n:{},r=e.then((e=>e.initialize(Object.assign(Object.assign({},t),{metaOptions:Object.assign(Object.assign({},a),{eagerClientSecretPromise:o})}))));return{create:e=>{let t=Ig[e];t||(t=e);const n=document.createElement(t),o=(e=>e in Og)(e)?Og[e]:{},a=Object.assign(Object.assign({},o),Tg);for(const e in a)n[e]=function(t){r.then((()=>{this[`${e}InternalOnly`](t)}))};return r.then((t=>{if(!n.isConnected&&!n.setConnector){const e=n.style.display;n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n.style.display=e}if(!n||!n.setConnector)throw new Error(`Element ${e} was not transformed into a custom element. Are you using a documented component? See https://docs.stripe.com/connect/supported-embedded-components for a list of supported components`);n.setConnector(t.connect)})),n},update:e=>{r.then((t=>{t.update(e)}))},debugInstance:()=>r,logout:()=>r.then((e=>e.logout()))}},Pg=e=>{window.StripeConnect=window.StripeConnect||{},window.StripeConnect.optimizedLoading=!0;const t={initialize:t=>{var n;const o=null!==(n=t.metaOptions)&&void 0!==n?n:{};return e.init(Object.assign(Object.assign({},t),{metaOptions:Object.assign(Object.assign({},o),{sdk:!0,sdkOptions:{sdkVersion:"3.3.24"}})}))}};return t},Mg=Promise.resolve().then((()=>(null!==Lg||(Lg=new Promise(((e,t)=>{if("undefined"!=typeof window)if(Dg(window.StripeConnect)){console.warn(Ag);const t=Pg(window.StripeConnect);e(t)}else try{let n=document.querySelectorAll(`script[src="${Rg}"]`)[0]||document.querySelectorAll('script[src="https://connect-js.stripe.com/v0.1/connect.js"]')[0]||null;n?console.warn(Ag):n||(n=(()=>{const e=document.createElement("script");if(e.src=Rg,!document.head)throw new Error("Expected document.head not to be null. Connect.js requires a <head> element.");return document.head.appendChild(e),e})()),n.addEventListener("load",(()=>{if(Dg(window.StripeConnect)){const t=Pg(window.StripeConnect);e(t)}else t(new Error("Connect.js did not load the necessary objects"))})),n.addEventListener("error",(()=>{t(new Error("Failed to load Connect.js"))}))}catch(e){t(e)}else t("ConnectJS won't load when rendering code in the server - it can only be loaded on a browser. This error is expected when loading ConnectJS in SSR environments, like NextJS. It will have no impact in the UI, however if you wish to avoid it, you can switch to the `pure` version of the connect.js loader: https://github.com/stripe/connect-js#importing-loadconnect-without-side-effects.")}))),Lg)));let Fg=!1;function Bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Mg.catch((e=>{Fg||console.warn(e)}));var zg=H.createContext(null);zg.displayName="ConnectComponents";var Ug,$g=function(e){var t=e.connectInstance,n=e.children;return H.createElement(zg.Provider,{value:{connectInstance:t}},n)},Vg=function(e){var t,n,o=(t=H.useState(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,s,c=[],i=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{if(!i&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Bg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bg(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],r=o[1],s=function(){var e=H.useContext(zg);if(!e)throw new Error("Could not find Components context; You need to wrap the part of your app in an <ConnectComponentsProvider> provider.");return e}(),c=s.connectInstance,i=H.useRef(null),l=H.createElement("div",{style:{width:"100%"},ref:i});return H.useLayoutEffect((function(){if(null!==i.current&&null===a){var t=c.create(e);if(r(t),null!==t){try{t.setAttribute("reactSdkAnalytics","3.3.22")}catch(e){console.log("Error setting React Sdk version with error message: ",e)}for(;i.current.firstChild;)i.current.removeChild(i.current.firstChild);i.current.appendChild(t)}}}),[c,e]),{wrapper:l,component:a}},Wg=function(e,t,n){Y().useEffect((function(){if(e)try{n(e,t)}catch(e){return void console.error("Error when calling setter! ",e)}}),[e,t,n])},Hg=function(e){var t=e.onExit,n=e.recipientTermsOfServiceUrl,o=e.fullTermsOfServiceUrl,a=e.privacyPolicyUrl,r=e.skipTermsOfServiceCollection,s=e.collectionOptions,c=e.onLoadError,i=e.onLoaderStart,l=e.onStepChange,m=Vg("account-onboarding"),d=m.wrapper,u=m.component;return Wg(u,n,(function(e,t){return e.setRecipientTermsOfServiceUrl(t)})),Wg(u,o,(function(e,t){return e.setFullTermsOfServiceUrl(t)})),Wg(u,a,(function(e,t){return e.setPrivacyPolicyUrl(t)})),Wg(u,r,(function(e,t){return e.setSkipTermsOfServiceCollection(t)})),Wg(u,s,(function(e,t){return e.setCollectionOptions(t)})),Wg(u,t,(function(e,t){return e.setOnExit(t)})),Wg(u,i,(function(e,t){e.setOnLoaderStart(t)})),Wg(u,c,(function(e,t){e.setOnLoadError(t)})),Wg(u,l,(function(e,t){return e.setOnStepChange(t)})),d},Yg=function(e){var t=e.collectionOptions,n=e.onNotificationsChange,o=e.onLoadError,a=e.onLoaderStart,r=Vg("notification-banner"),s=r.wrapper,c=r.component;return Wg(c,t,(function(e,t){return e.setCollectionOptions(t)})),Wg(c,n,(function(e,t){return e.setOnNotificationsChange(t)})),Wg(c,a,(function(e,t){e.setOnLoaderStart(t)})),Wg(c,o,(function(e,t){e.setOnLoadError(t)})),s};!function(e){e.exit="exit",e.close="close",e.instantPayoutCreated="instantpayoutcreated"}(Ug||(Ug={}));const qg={generic:{individual:(0,V.__)("Select if you run your own business as an individual and are self-employed","woocommerce-payments"),company:(0,V.__)("Select if you filed documentation to register your business with a government agency","woocommerce-payments"),non_profit:(0,V.__)("Select if you run a non-business entity","woocommerce-payments"),government_entity:(0,V.__)("Select if your business is classed as a government entity","woocommerce-payments")},US:{individual:(0,V.__)("Select if you run your own business as an individual and are self-employed","woocommerce-payments"),company:(0,V.__)("Select if you filed documentation to register your business with a government agency","woocommerce-payments"),non_profit:(0,V.__)("Select if you have been granted tax-exempt status by the Internal Revenue Service (IRS)","woocommerce-payments"),government_entity:(0,V.__)("Select if your business is classed as a government entity","woocommerce-payments")}};var Gg=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const Qg={variables:{colorPrimary:"#873EFF",colorBackground:"#FFFFFF",buttonPrimaryColorBackground:"#3858E9",buttonPrimaryColorBorder:"#3858E9",buttonPrimaryColorText:"#FFFFFF",buttonSecondaryColorBackground:"#FFFFFF",buttonSecondaryColorBorder:"#3858E9",buttonSecondaryColorText:"#3858E9",colorText:"#101517",colorSecondaryText:"#50575E",actionPrimaryColorText:"#3858E9",actionSecondaryColorText:"#101517",colorBorder:"#DDDDDD",formHighlightColorBorder:"#3858E9",formAccentColor:"#3858E9",colorDanger:"#CC1818",offsetBackgroundColor:"#F0F0F0",formBackgroundColor:"#FFFFFF",badgeNeutralColorText:"#2C3338",badgeNeutralColorBackground:"#F6F7F7",badgeNeutralColorBorder:"#F6F7F7",badgeSuccessColorText:"#005C12",badgeSuccessColorBackground:"#EDFAEF",badgeSuccessColorBorder:"#EDFAEF",badgeWarningColorText:"#614200",badgeWarningColorBackground:"#FCF9E8",badgeWarningColorBorder:"#FCF9E8",badgeDangerColorText:"#8A2424",badgeDangerColorBackground:"#FCF0F1",badgeDangerColorBorder:"#FCF0F1",borderRadius:"2px",buttonBorderRadius:"2px",formBorderRadius:"2px",badgeBorderRadius:"2px",overlayBorderRadius:"8px",spacingUnit:"10px",fontFamily:"-apple-system, BlinkMacSystemFont, 'system-ui', 'Segoe UI', 'Helvetica Neue', 'Helvetica', 'Roboto', 'Arial', sans-serif",fontSizeBase:"16px",headingXlFontSize:"32px",headingXlFontWeight:"400",headingLgFontSize:"24px",headingLgFontWeight:"400",headingMdFontSize:"20px",headingMdFontWeight:"400",headingSmFontSize:"13px",headingSmFontWeight:"600",headingXsFontSize:"12px",headingXsFontWeight:"600",bodyMdFontWeight:"400",bodyMdFontSize:"16px",bodySmFontSize:"13px",bodySmFontWeight:"400",labelSmFontSize:"12px",labelSmFontWeight:"200",labelMdFontSize:"13px"}},Zg=(e={})=>{const[t,n]=(0,H.useState)(e),[o,a]=(0,H.useState)({}),[r,s]=(0,H.useState)({});return{data:t,setData:e=>n((t=>Object.assign(Object.assign({},t),e))),errors:o,setErrors:e=>a((t=>(0,lt.omitBy)(Object.assign(Object.assign({},t),e),lt.isNil))),touched:r,setTouched:e=>s((t=>Object.assign(Object.assign({},t),e)))}},Kg=(0,H.createContext)(null),Jg=({children:e,initialData:t})=>Y().createElement(Kg.Provider,{value:Zg(t)},e),Xg=()=>{const e=(0,H.useContext)(Kg);if(!e)throw new Error("useOnboardingContext() must be used within <OnboardingContextProvider>");return e},ew=new Set;let tw,nw;const ow=e=>Math.round((Date.now()-e)/1e3),aw=()=>{const e=ow(nw);return nw=Date.now(),e};var rw=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};const sw=(e,t)=>{const[n,o]=(0,H.useState)(null),[a,r]=(0,H.useState)(null),[s,c]=(0,H.useState)(!0);return(0,H.useEffect)((()=>{rw(void 0,void 0,void 0,(function*(){try{let r;e&&t?(r=yield(a=t,Gg(void 0,void 0,void 0,(function*(){const e=new URLSearchParams(window.location.search);return yield G()({path:`${_t}/onboarding/kyc/session`,method:"POST",data:{self_assessment:(t=a,(0,lt.toPairs)(t).reduce(((e,[t,n])=>null!=n?(0,lt.set)(e,t,n):e),{})),capabilities:e.get("capabilities")||""}});var t}))),((e=!1)=>{var t;const n=new URLSearchParams(window.location.search);ce("wcpay_onboarding_flow_redirected",{is_embedded_onboarding:e,elapsed:ow(tw),source:(null===(t=n.get("source"))||void 0===t?void 0:t.replace(/[^\w-]+/g,""))||"unknown"})})(!0)):r=yield Gg(void 0,void 0,void 0,(function*(){return yield G()({path:(0,Q.addQueryArgs)(`${_t}/accounts/session`,{}),method:"GET"})}));const{clientSecret:s,publishableKey:c}=r;if(!c)throw new Error((0,V.__)("Unable to start onboarding. If this problem persists, please contact support.","woocommerce-payments"));const i=(n={publishableKey:c,fetchClientSecret:()=>rw(void 0,void 0,void 0,(function*(){return s})),appearance:Object.assign({overlays:"drawer"},Qg),locale:r.locale.replace("_","-")},Fg=!0,jg(Mg,n));o(i)}catch(e){r(e instanceof Error?e.message:(0,V.__)("Unable to start onboarding. If this problem persists, please contact support.","woocommerce-payments"))}finally{c(!1)}var n,a}))}),[e,t]),{stripeConnectInstance:n,initializationError:a,loading:s}},cw=({onboardingData:e,onExit:t,onLoaderStart:n,onLoadError:o,onStepChange:a,collectPayoutRequirements:r=!1})=>{const{stripeConnectInstance:s,initializationError:c}=sw(!0,e);return Y().createElement(Y().Fragment,null,c&&Y().createElement(xe,{status:"error"},c),s&&Y().createElement($g,{connectInstance:s},Y().createElement(Hg,{onLoaderStart:n,onLoadError:o,onExit:t,onStepChange:e=>null==a?void 0:a(e.step),collectionOptions:{fields:r?"eventually_due":"currently_due",futureRequirements:"omit"}})))},iw=({onLoaderStart:e,onLoadError:t,onNotificationsChange:n})=>{const{stripeConnectInstance:o,initializationError:a,loading:r}=sw(!1,null);return Y().createElement(Y().Fragment,null,(r||!o)&&Y().createElement(Cg,null),a&&Y().createElement(xe,{status:"error"},a),o&&Y().createElement($g,{connectInstance:o},Y().createElement(Yg,{onLoaderStart:e,onLoadError:t,onNotificationsChange:n,collectionOptions:{fields:"eventually_due",futureRequirements:"omit"}})))},lw=()=>{const e="1"===(0,Ni.getQuery)()["wcpay-login-error"];return wcpaySettings.errorMessage||e?(0,ve.jsx)(xe,{className:e?"wcpay-login-error":"",status:"error",icon:!0,isDismissible:!1,children:wcpaySettings.errorMessage||(0,V.__)("There was a problem redirecting you to the account dashboard. Please try again.","woocommerce-payments")}):null},mw=()=>{const{accountStatus:e,accountLoans:{has_active_loan:t},overviewTasksVisibility:n,wpcomReconnectUrl:o,featureFlags:{isAccountDetailsEnabled:a},accountDetails:r}=wcpaySettings,[s,c]=(0,H.useState)(!1),[i,l]=(0,H.useState)(""),[m,d]=(0,H.useState)(""),[u,p]=Y().useState(""),[_,y]=(0,H.useState)(!0),[h,g]=(0,H.useState)(0),w=vt(),{isLoading:f}=$s(),[v,b]=(0,H.useState)(!1),E=Us(),{disputes:S}=ja({filter:"awaiting_response",per_page:50}),k=Ng({showUpdateDetailsTask:s,wpcomReconnectUrl:o,activeDisputes:S}),N=Array.isArray(k)&&k.sort(xg),x=(0,Ni.getQuery)(),C=e.status&&e.status.startsWith("rejected"),T="under_review"===e.status,O=e.paymentsEnabled,I="enabled"===e.deposits?.status,A="1"===x["wcpay-connection-success"],R="true"===x["wcpay-sandbox-success"]&&(e.status&&"complete"===e.status||"enabled"===e.status),L="1"===x["wcpay-loan-offer-error"],D="1"===x["wcpay-server-link-error"],j="1"===x["wcpay-reset-account-error"],P=!C&&!T&&N.length>0,M=A&&!w&&O&&I,F=Object.entries(wcpaySettings.accountFees).map((([e,t])=>{const n=!f&&E.enabled_payment_method_ids.filter((t=>t===e)).length>0;return f||!n||0===t.discount.length?null:{payment_method:e,fee:t}})).filter((e=>e&&void 0!==e.fee));return!v&&R&&((0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Success! You can start using WooPayments in test mode.","woocommerce-payments")),b(!0)),(0,H.useEffect)((()=>{i&&(c(!0),y(!1))}),[i]),(0,ve.jsxs)(ge,{isNarrow:!0,className:"wcpay-overview",children:[(0,ve.jsx)(ol,{}),(0,ve.jsx)(lw,{}),(0,ve.jsx)(Ay,{}),L&&(0,ve.jsx)(Z.Notice,{status:"error",isDismissible:!1,children:(0,V.__)("There was a problem redirecting you to the loan offer. Please check that it is not expired and try again.","woocommerce-payments")}),D&&(0,ve.jsx)(Z.Notice,{status:"error",isDismissible:!1,children:(0,V.__)("There was a problem redirecting you to the requested link. Please check that it is valid and try again.","woocommerce-payments")}),j&&(0,ve.jsx)(Z.Notice,{status:"error",isDismissible:!1,children:(0,V.__)("There was a problem resetting your account. Please wait a few seconds and try again.","woocommerce-payments")}),w?(0,ve.jsx)(Yt,{from:"WCPAY_OVERVIEW",source:"wcpay-overview-page"}):(0,ve.jsx)(tn,{currentPage:"overview",isTestModeOnboarding:w,actions:[]}),i&&"invalid_request_error"===m&&(0,ve.jsx)(xe,{status:"warning",icon:!0,isDismissible:!1,children:Oe({mixedString:(0,V.sprintf)((0,V.__)("Some account related notifications require HTTPS and cannot be displayed. View them on our financial partners website. {{seeDetailsLink}}See details{{/seeDetailsLink}}","woocommerce-payments")),components:{seeDetailsLink:(0,ve.jsx)(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/startup-guide/#requirements"})}})}),!C&&!T&&(0,ve.jsxs)(he,{children:[(0,ve.jsx)(Fh,{}),_&&"complete"!==e.status&&(0,ve.jsx)(Z.Card,{children:(0,ve.jsx)("div",{className:"stripe-notifications-banner-loader",children:(0,ve.jsx)(Cg,{})})}),(0,ve.jsx)("div",{className:"stripe-notifications-banner-wrapper",style:{display:u?"block":"none"},children:(0,ve.jsx)(he,{children:(0,ve.jsx)(iw,{onLoadError:e=>{l(e.error.message||"Unknown error"),d(e.error.type),y(!1)},onNotificationsChange:e=>{e.actionRequired>0?p("You must resolve the notifications on this page before proceeding."):e.total>0?p("The items below are in review."):(h>0&&((0,ln.dispatch)("core/notices").createSuccessNotice((0,V.__)("Updates take a moment to appear. Please refresh the page in a minute.","woocommerce-payments"),{actions:[{label:(0,V.__)("Refresh","woocommerce-payments"),url:Et({page:"wc-admin",path:"/payments/overview"})}],explicitDismiss:!0}),ce("wcpay_overview_stripe_notifications_banner_action_completed")),p("")),(e.actionRequired>0||e.total>0)&&(ce("wcpay_overview_stripe_notifications_banner_update",{action_required_count:e.actionRequired,total_count:e.total}),g(e.total)),y(!1)}})})}),P&&(0,ve.jsx)(Z.Card,{children:(0,ve.jsx)(he,{children:(0,ve.jsx)(_g,{tasks:N,overviewTasksVisibility:n})})}),(0,ve.jsx)(Z.Card,{children:(0,ve.jsx)(he,{children:(0,ve.jsx)(L_,{})})}),(0,ve.jsx)(Iy,{})]}),(0,ve.jsx)(he,{children:a&&r?(0,ve.jsx)(fy,{accountDetails:r,accountFees:F,accountLink:e.accountLink}):(0,ve.jsx)(ry,{accountStatus:e,accountFees:F})}),t&&(0,ve.jsx)(he,{children:(0,ve.jsx)(h_,{})}),!C&&!T&&(0,ve.jsx)(he,{children:(0,ve.jsx)(ug,{})}),M&&(0,ve.jsx)(he,{children:(0,ve.jsx)(by,{})}),(0,ve.jsx)(he,{children:(0,ve.jsx)(il,{})})]})},dw={vat_invoice:(0,V.__)("Tax Invoice","woocommerce-payments")},uw=Object.entries(dw).map((([e,t])=>({label:t,value:e}))).filter((function(e){return null!=e})),pw=[{label:(0,V.__)("Show","woocommerce-payments"),param:"filter",staticParams:["paged","per_page","orderby","order"],showFilters:()=>!0,filters:[{label:(0,V.__)("All documents","woocommerce-payments"),value:"all"},{label:(0,V.__)("Advanced filters","woocommerce-payments"),value:"advanced"}]}],_w=(0,va.getSetting)("wcVersion"),yw=parseFloat(_w),hw={title:yw<7.8?(0,V.__)("Documents match {{select /}} filters","woocommerce-payments"):(0,V.__)("Documents match <select /> filters","woocommerce-payments"),filters:{date:{labels:{add:(0,V.__)("Date","woocommerce-payments"),remove:(0,V.__)("Remove document date filter","woocommerce-payments"),rule:(0,V.__)("Select a document date filter match","woocommerce-payments"),title:yw<7.8?(0,V.__)("{{title}}Date{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Date</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a document date","woocommerce-payments")},rules:[{value:"before",label:(0,V.__)("Before","woocommerce-payments")},{value:"after",label:(0,V.__)("After","woocommerce-payments")},{value:"between",label:(0,V.__)("Between","woocommerce-payments")}],input:{component:"Date"}},type:{labels:{add:(0,V.__)("Type","woocommerce-payments"),remove:(0,V.__)("Remove document type filter","woocommerce-payments"),rule:(0,V.__)("Select a document type filter match","woocommerce-payments"),title:yw<7.8?(0,V.__)("{{title}}Type{{/title}} {{rule /}} {{filter /}}","woocommerce-payments"):(0,V.__)("<title>Type</title> <rule /> <filter />","woocommerce-payments"),filter:(0,V.__)("Select a document type","woocommerce-payments")},rules:[{value:"is",label:(0,V._x)("Is","document type","woocommerce-payments")},{value:"is_not",label:(0,V._x)("Is not","document type","woocommerce-payments")}],input:{component:"SelectControl",options:uw}}}},gw=()=>Y().createElement("div",{className:"woocommerce-filters-documents"},Y().createElement(X.ReportFilters,{filters:pw,advancedFilters:hw,showDatePicker:!1,path:"/payments/documents",query:(0,Ni.getQuery)()}));const ww=({onCompleted:e,vatNumber:t,placeholderCompanyName:n,placeholderCompanyAddress:o})=>{const{setCompleted:a}=(0,H.useContext)(Cn),[r,s]=(0,H.useState)(null),[c,i]=(0,H.useState)(!1),[l,m]=(0,H.useState)(""),[d,u]=(0,H.useState)("");(0,H.useEffect)((()=>{m(n),u(o)}),[n,o]);const p=""===l.trim()||""===d.trim();return Y().createElement(fp,{index:2,title:(0,V.__)("Confirm your business details","woocommerce-payments")},Y().createElement(yp,null,Y().createElement(Z.TextControl,{className:"wcpay-company-data-task__text-control",label:(0,V.__)("Business name","woocommerce-payments"),value:l,onChange:m,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),Y().createElement(Z.TextareaControl,{className:"wcpay-company-data-task__textarea-control",label:(0,V.__)("Address","woocommerce-payments"),value:d,onChange:u,__nextHasNoMarginBottom:!0}),Y().createElement(Z.Button,{variant:"primary",disabled:p||c,isBusy:c,onClick:()=>{return n=void 0,o=void 0,c=function*(){try{i(!0);const n={name:l,address:d};null!==t&&(n.vat_number=t);const o=yield G()({path:"/wc/v3/payments/vat",method:"POST",data:n});i(!1),a(!0,"vat-submitted"),e(o.vat_number,o.name,o.address)}catch(e){i(!1),s(e.message)}},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{i(c.next(e))}catch(e){t(e)}}function s(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}i((c=c.apply(n,o||[])).next())}));var n,o,r,c},__next40pxDefaultSize:!0},(0,V.__)("Confirm","woocommerce-payments")),r&&Y().createElement(Z.Notice,{status:"error",isDismissible:!1,className:"vat-number-error"},r)))};const fw=()=>{switch(wcpaySettings.accountStatus.country){case"AU":return(0,V.__)("ABN","woocommerce-payments");case"JP":return(0,V.__)("Corporate Number","woocommerce-payments");case"NZ":return(0,V.__)("IRD Number","woocommerce-payments");case"SG":return(0,V.__)("UEN or GST Registration Number","woocommerce-payments");default:return(0,V.__)("VAT Number","woocommerce-payments")}},vw=()=>{switch(wcpaySettings.accountStatus.country){case"AU":return(0,V.__)("By inputting your ABN number you confirm that you are going to account for the GST.","woocommerce-payments");case"JP":return(0,V.__)("","woocommerce-payments");case"NO":return(0,V.__)("By inputting your VAT number you confirm you are a Norway VAT registered business and that you are going to account for the VAT.","woocommerce-payments");case"NZ":return(0,V.__)("By inputting your IRD number you confirm that you are going to account for the GST.","woocommerce-payments");case"SG":return(0,V.__)("By providing your UEN or GST number you confirm you are a Singapore GST registered business and you are going to account for the GST.","woocommerce-payments");default:return(0,V.__)("If your sales exceed the VAT threshold for your country, you're required to register for a VAT Number.","woocommerce-payments")}},bw=()=>{switch(wcpaySettings.accountStatus.country){case"AU":return(0,V.__)("11-digit number, for example 12 345 678 901.","woocommerce-payments");case"JP":return(0,V.__)("13-digit number, for example 1234567890123.","woocommerce-payments");case"NZ":return(0,V.__)("8-digit or 9-digit number, for example 99-999-999 or 999-999-999.","woocommerce-payments");case"SG":return(0,V.__)("Enter your UEN (e.g., 200312345A) or GST Registration Number (e.g., M91234567X).","woocommerce-payments");default:return(0,V.__)("8 to 12 digits with your country code prefix, for example DE 123456789.","woocommerce-payments")}},Ew=({onCompleted:e})=>{const{setCompleted:t}=(0,H.useContext)(Cn),[n,o]=(0,H.useState)(null),[a,r]=(0,H.useState)(!1),[s,c]=(0,H.useState)(!1),[i,l]=(0,H.useState)(""),m=(()=>{switch(wcpaySettings.accountStatus.country){case"AU":case"JP":case"NZ":case"SG":return"";case"GR":return"EL ";case"CH":return"CHE ";default:return`${wcpaySettings.accountStatus.country} `}})(),d=s&&i.trimEnd()===m.trimEnd();return(0,H.useEffect)((()=>{s&&""===i&&l(m),s||""===i||l("")}),[s,i,m]),Y().createElement(fp,{index:1,title:(0,V.sprintf)((0,V.__)("Set your %1$s","woocommerce-payments"),fw())},Y().createElement("p",{className:"wcpay-wizard-task__description-element"},(0,V.__)("The information you provide here will be used for all of your account's tax documents.","woocommerce-payments")),Y().createElement(yp,null,Y().createElement(Z.CheckboxControl,{className:"wcpay-vat-number-task__checkbox",checked:s,onChange:c,label:(0,V.sprintf)((0,V.__)("I have a valid %1$s","woocommerce-payments"),fw()),help:vw(),__nextHasNoMarginBottom:!0}),s&&Y().createElement(Z.TextControl,{className:"wcpay-vat-number-task__text-control",label:fw(),help:bw(),value:i,onChange:e=>{const t=m.trim();e.trim().startsWith(t)?l(e):l(t)},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),Y().createElement(Z.Button,{variant:"primary",disabled:d||a,isBusy:a,onClick:()=>{return n=void 0,a=void 0,l=function*(){var n,a;const c=s?i.replace(m,""):null;let l="",d="";o("");try{if(null!==c){r(!0);const e=yield G()({path:`/wc/v3/payments/vat/${encodeURI(c)}`});r(!1),l=null!==(n=e.name)&&void 0!==n?n:"",d=null!==(a=e.address)&&void 0!==a?a:""}t(!0,"company-data"),e(c,l,d)}catch(e){r(!1),o(e.message)}},new((c=void 0)||(c=Promise))((function(e,t){function o(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c((function(e){e(n)}))).then(o,r)}s((l=l.apply(n,a||[])).next())}));var n,a,c,l},__next40pxDefaultSize:!0},(0,V.__)("Continue","woocommerce-payments")),n&&Y().createElement(Z.Notice,{status:"error",isDismissible:!1,className:"vat-number-error"},n)))},Sw=({onCompleted:e})=>{const[t,n]=(0,H.useState)(null),[o,a]=(0,H.useState)(""),[r,s]=(0,H.useState)("");return Y().createElement(gp,{defaultActiveTask:"vat-number"},Y().createElement(vp,null,Y().createElement(wp,{id:"vat-number"},Y().createElement(Ew,{onCompleted:(e,t,o)=>{n(e),a(t),s(o)}})),Y().createElement(wp,{id:"company-data"},Y().createElement(ww,{onCompleted:(t,n,o)=>{e(t,n,o)},vatNumber:t,placeholderCompanyName:o,placeholderCompanyAddress:r}))))},kw=({isModalOpen:e,setModalOpen:t,onCompleted:n})=>e?Y().createElement(Z.Modal,{title:(0,V.__)("Set your tax details","woocommerce-payments"),onRequestClose:()=>t(!1)},Y().createElement(Sw,{onCompleted:n})):null,Nw=e=>"vat_invoice"===e.type?e.period_from&&e.period_to?(0,V.sprintf)((0,V.__)("Tax invoice for %s to %s","woocommerce-payments"),nn(e.period_from),nn(e.period_to)):(0,V.__)("Tax invoice without proper period dates","woocommerce-payments"):(0,V.__)("Unknown document type","woocommerce-payments"),xw=()=>{var e;const{documents:t,isLoading:n}=(({paged:e,per_page:t,orderby:n,order:o,match:a,date_before:r,date_after:s,date_between:c,type_is:i,type_is_not:l})=>(0,ln.useSelect)((m=>{const{getDocuments:d,getDocumentsError:u,isResolving:p}=m(yt),_={paged:Number.isNaN(parseInt(null!=e?e:"",10))?"1":e,perPage:Number.isNaN(parseInt(null!=t?t:"",10))?"25":t,orderby:n||"date",order:o||"desc",match:a,dateBefore:r,dateAfter:s,dateBetween:c&&c.sort(((e,t)=>ut()(e).diff(ut()(t)))),typeIs:i,typeIsNot:l};return{documents:d(_),documentsError:u(_),isLoading:p("getDocuments",[_])}}),[e,t,n,o,a,r,s,JSON.stringify(c),i,l]))((0,Ni.getQuery)()),{documentsSummary:o,isLoading:a}=(({match:e,date_before:t,date_after:n,date_between:o,type_is:a,type_is_not:r})=>(0,ln.useSelect)((s=>{const{getDocumentsSummary:c,isResolving:i}=s(yt),l={match:e,dateBefore:t,dateAfter:n,dateBetween:o,typeIs:a,typeIsNot:r};return{documentsSummary:c(l),isLoading:i("getDocumentsSummary",[l])}}),[e,t,n,JSON.stringify(o),a,r]))((0,Ni.getQuery)()),[r,s]=(0,H.useState)(!1),[c,i]=(0,H.useState)(null),l=(0,H.useCallback)(((e,t,n=!0)=>{const o=St(e);((e,t,n)=>(i({documentId:e,type:t,newTab:n}),!("vat_invoice"===t&&!wcpaySettings.accountStatus.hasSubmittedVatData&&(s(!0),1))))(e,t,n)&&window.open(o,n?"_blank":"_self")}),[]),{document_id:m,document_type:d}=(0,Ni.getQuery)();(0,H.useEffect)((()=>{m&&d&&l(m,d,!1)}),[m,d,l]);const u=[{key:"date",label:(0,V.__)("Date","woocommerce-payments"),screenReaderLabel:(0,V.__)("Date and time","woocommerce-payments"),required:!0,isLeftAligned:!0,defaultOrder:"desc",cellClassName:"date",isSortable:!0,defaultSort:!0},{key:"type",label:(0,V.__)("Type","woocommerce-payments"),screenReaderLabel:(0,V.__)("Type","woocommerce-payments"),required:!0,isLeftAligned:!0},{key:"description",label:(0,V.__)("Description","woocommerce-payments"),screenReaderLabel:(0,V.__)("Description","woocommerce-payments")},{key:"download",label:(0,V.__)("Download","woocommerce-payments"),screenReaderLabel:(0,V.__)("Download","woocommerce-payments"),isLeftAligned:!1,isNumeric:!0}].filter(Boolean),{columnsToDisplay:p,onColumnsChange:_}=Hi("wc_payments_documents_hidden_columns",u),y=o.count||0,h=t.map((e=>{var t;const n=null!==(t=dw[e.type])&&void 0!==t?t:(0,V.__)("Unknown document type","woocommerce-payments"),o={date:{value:e.date,display:nn(e.date)},type:{value:n,display:n},description:{value:Nw(e),display:Nw(e)},download:{value:St(e.document_id),display:Y().createElement(Z.Button,{className:"documents-list__download-button",variant:"link",onClick:()=>l(e.document_id,e.type),__next40pxDefaultSize:!0},(0,V.__)("Download","woocommerce-payments"))}};return p.map((({key:e})=>o[e]||{display:null}))})),g=(0,V.__)("Documents","woocommerce-payments");let w;return void 0!==o.count&&!1===a&&(w=[{label:(0,V._n)("document","documents",o.count,"woocommerce-payments"),value:`${o.count}`}]),Y().createElement(ge,null,Y().createElement(gw,null),Y().createElement(X.TableCard,{className:"documents-list woocommerce-report-table has-search",title:g,isLoading:n,rowsPerPage:parseInt(null!==(e=(0,Ni.getQuery)().per_page)&&void 0!==e?e:"",10)||25,totalRows:y,headers:p,rows:h,summary:w,query:(0,Ni.getQuery)(),onQueryChange:Ni.onQueryChange,onColumnsChange:_,actions:[]}),Y().createElement(kw,{isModalOpen:r,setModalOpen:s,onCompleted:()=>{s(!1),wcpaySettings.accountStatus.hasSubmittedVatData=!0,c&&l(c.documentId,c.type,c.newTab)}}))},Cw=()=>Y().createElement(ge,null,Y().createElement(ol,null),Y().createElement(tn,{currentPage:"documents"}),Y().createElement(xw,null),Y().createElement(he,null,Y().createElement(il,null))),Tw=e=>(null==e?void 0:e.name)||"",Ow=({selectedItem:e},{type:t,changes:n,props:{items:o}})=>{switch(t){case Ah.stateChangeTypes.ToggleButtonKeyDownArrowDown:return{selectedItem:o[e?Math.min(o.indexOf(e)+1,o.length-1):0]};case Ah.stateChangeTypes.ToggleButtonKeyDownArrowUp:return{selectedItem:o[e?Math.max(o.indexOf(e)-1,0):o.length-1]};default:return n}},Iw=function({name:e,className:t,label:n,describedBy:o,options:a,onChange:r,value:s,placeholder:c,children:i}){var l;const{getLabelProps:m,getToggleButtonProps:d,getMenuProps:u,getItemProps:p,isOpen:_,highlightedIndex:y,selectedItem:h}=Ah({initialSelectedItem:a[0],items:a,itemToString:Tw,onSelectedItemChange:r,selectedItem:s||{},stateReducer:Ow}),g=Tw(h),w=u({className:"components-custom-select-control__menu","aria-hidden":!_}),f=(0,J.useCallback)((e=>{var t;e.stopPropagation(),null===(t=null==w?void 0:w.onKeyDown)||void 0===t||t.call(w,e)}),[w]);return(null===(l=w["aria-activedescendant"])||void 0===l?void 0:l.startsWith("downshift-null"))&&delete w["aria-activedescendant"],Y().createElement("div",{className:ue("wcpay components-custom-select-control",t)},Y().createElement("label",Object.assign({},m({className:"components-custom-select-control__label"})),n),Y().createElement(Z.Button,Object.assign({},d({"aria-label":n,"aria-labelledby":void 0,"aria-describedby":o||(g?(0,V.sprintf)((0,V.__)("Currently selected: %s"),g):(0,V.__)("No selection")),className:ue("components-custom-select-control__button",{placeholder:!g}),name:e}),{__next40pxDefaultSize:!0}),Y().createElement("span",{className:"components-custom-select-control__button-value"},g||c),Y().createElement(Ut,{icon:od,className:"components-custom-select-control__button-icon"})),Y().createElement("ul",Object.assign({},w,{onKeyDown:f}),_&&a.map(((e,t)=>Y().createElement("li",Object.assign({},p({item:e,index:t,key:e.key,className:ue(e.className,"components-custom-select-control__item",{"is-highlighted":t===y}),style:e.style})),i?i(e):e.name,e===h&&Y().createElement(Ut,{icon:be,className:"components-custom-select-control__item-icon"}))))))},Aw=({name:e,className:t,label:n,options:o,onChange:a,value:r,placeholder:s,searchable:c})=>{var i;const l=(0,H.useRef)(null),m=(0,H.useRef)(),d=o.filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length})).map((e=>e.key)),[u,p]=(0,H.useState)(new Set([d[0]])),[_,y]=(0,H.useState)(new Set([...d,...(null===(i=o[0])||void 0===i?void 0:i.items)||[]])),[h,g]=(0,H.useState)(""),w=o.filter((e=>_.has(e.key))),{isOpen:f,selectedItem:v,getToggleButtonProps:b,getMenuProps:E,getLabelProps:S,highlightedIndex:k,getItemProps:N}=Ah({items:w,itemToString:e=>(null==e?void 0:e.name)||"",selectedItem:r||{},onSelectedItemChange:a,stateReducer:(e,{changes:t,type:n})=>{if(c&&n===Ah.stateChangeTypes.MenuKeyDownCharacter)return e;if(t.selectedItem&&t.selectedItem.items){if(h)return e;const n=t.selectedItem.key;return u.has(n)?(u.delete(n),t.selectedItem.items.forEach((e=>_.delete(e)))):(u.add(n),t.selectedItem.items.forEach((e=>_.add(e)))),p(u),y(_),e}return t}}),x=E({className:"wcpay-component-grouped-select-control__list","aria-hidden":!f,onFocus:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.focus()},onBlur:e=>{e.relatedTarget===l.current&&(e.nativeEvent.preventDownshiftDefault=!0)},onKeyDown:e=>{"Space"===e.code&&(e.nativeEvent.preventDownshiftDefault=!0)}});return Y().createElement("div",{className:ue("wcpay-component-grouped-select-control",t)},Y().createElement("label",Object.assign({},S({className:"wcpay-component-grouped-select-control__label"})),n),Y().createElement("button",Object.assign({},b({type:"button",className:ue("components-text-control__input wcpay-component-grouped-select-control__button",{placeholder:s}),name:e})),Y().createElement("span",{className:"wcpay-component-grouped-select-control__button-value"},(null==v?void 0:v.name)||s),Y().createElement(Ut,{icon:od,className:"wcpay-component-grouped-select-control__button-icon"})),Y().createElement("ul",Object.assign({},x),f&&Y().createElement(Y().Fragment,null,c&&Y().createElement("input",{className:"wcpay-component-grouped-select-control__search",ref:l,type:"text",value:h,onChange:({target:e})=>{if(m.current||(m.current={visibleItems:_}),""===e.value)y(m.current.visibleItems),m.current=void 0;else{const t=o.filter((t=>(null==t?void 0:t.group)&&`${t.name} ${t.context||""}`.toLowerCase().includes(e.value.toLowerCase()))),n=t.map((e=>(null==e?void 0:e.group)||"")),a=new Set([...t.map((e=>e.key)),...n]);y(a)}g(e.value)},tabIndex:-1,placeholder:(0,V.__)("Search","woocommerce-payments")}),Y().createElement("div",{className:"wcpay-component-grouped-select-control__list-container"},w.map(((e,t)=>{const n=!!e.items;return Y().createElement("li",Object.assign({},N({item:e,index:t,key:e.key,className:ue("wcpay-component-grouped-select-control__item",e.className,{"is-highlighted":t===k},{"is-group":n})})),Y().createElement("div",{className:"wcpay-component-grouped-select-control__item-content"},e.name),e.key===(null==v?void 0:v.key)&&Y().createElement(Ut,{icon:be}),!h&&n&&Y().createElement(Ut,{icon:u.has(e.key)?nd:od}))}))))))};const Rw=(e,t,n)=>{const{error:o}=t,a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(t,["error"]);return o?Y().createElement(Y().Fragment,null,Y().createElement(e,Object.assign(Object.assign({},a),{ref:n,className:ue(a.className,"has-error")})),Y().createElement("div",{className:"components-form-field__error"},o)):Y().createElement(e,Object.assign(Object.assign({},a),{ref:n}))},Lw=((0,H.forwardRef)(((e,t)=>Rw(Z.TextControl,Object.assign(Object.assign({},e),{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),t))),e=>Rw(Iw,e)),Dw=e=>Rw(Aw,e),jw={steps:{business:{heading:(0,V.__)("Lets get your store ready to accept payments","woocommerce-payments"),subheading:(0,V.__)("Well use these details to enable payments for your store. This information cant be changed after your account is created.","woocommerce-payments")},store:{heading:(0,V.__)("Please share a few more details","woocommerce-payments"),subheading:(0,V.__)("This info will help us speed up the set up process.","woocommerce-payments")},loading:{heading:(0,V.__)("One last step! Verify your identity with our partner","woocommerce-payments"),subheading:(0,V.__)("This will take place in a secure environment through our partner. Once your business details are verified, youll be redirected back to your store dashboard.","woocommerce-payments"),cta:(0,V.__)("Finish your verification process","woocommerce-payments")},embedded:{heading:(0,V.__)("One last step! Verify your identity with our partner","woocommerce-payments"),subheading:(0,V.__)("This info will verify your account","woocommerce-payments")}},fields:{country:(0,V.__)("Where is your business located?","woocommerce-payments"),business_type:(0,V.__)("What type of legal entity is your business?","woocommerce-payments"),"company.structure":(0,V.__)("What category of legal entity identify your business?","woocommerce-payments"),mcc:(0,V.__)("What type of goods or services does your business sell? ","woocommerce-payments")},errors:{generic:(0,V.__)("Please provide a response","woocommerce-payments"),country:(0,V.__)("Please provide a country","woocommerce-payments"),business_type:(0,V.__)("Please provide a business type","woocommerce-payments"),mcc:(0,V.__)("Please provide a type of goods or services","woocommerce-payments")},placeholders:{generic:(0,V.__)("Select an option","woocommerce-payments"),country:(0,V.__)("Select a country","woocommerce-payments")},annualRevenues:{less_than_250k:(0,V.__)("Less than $250k","woocommerce-payments"),from_250k_to_1m:(0,V.__)("$250k - $1M","woocommerce-payments"),from_1m_to_20m:(0,V.__)("$1M - $20M","woocommerce-payments"),from_20m_to_100m:(0,V.__)("$20M - $100M","woocommerce-payments"),more_than_100m:(0,V.__)("More than $100M","woocommerce-payments")},goLiveTimeframes:{already_live:(0,V.__)("My store is already live","woocommerce-payments"),within_1month:(0,V.__)("Within 1 month","woocommerce-payments"),from_1_to_3months:(0,V.__)("1  3 months","woocommerce-payments"),from_3_to_6months:(0,V.__)("3  6 months","woocommerce-payments"),more_than_6months:(0,V.__)("6+ months","woocommerce-payments")},tos:Oe({mixedString:(0,V.sprintf)((0,V.__)("By using %1$s, you agree to be bound by our {{tosLink}}Terms of Service{{/tosLink}} (including {{merchantTermsLink}}%2$s merchant terms{{/merchantTermsLink}}) and acknowledge that you have read our {{privacyPolicyLink}}Privacy Policy{{/privacyPolicyLink}}.","woocommerce-payments"),"WooPayments","WooPay"),components:{tosLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:"https://wordpress.com/tos/"}),merchantTermsLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:"https://wordpress.com/tos/#more-woopay-specifically"}),privacyPolicyLink:Y().createElement("a",{rel:"external noopener noreferrer",target:"_blank",href:"https://automattic.com/privacy/"})}}),inlineNotice:{title:(0,V.__)("Business Location:","woocommerce-payments"),action:(0,V.__)("Change","woocommerce-payments")},continue:(0,V.__)("Continue","woocommerce-payments"),back:(0,V.__)("Back","woocommerce-payments"),cancel:(0,V.__)("Cancel","woocommerce-payments")},Pw=e=>{const{data:t,errors:n,setErrors:o,touched:a,setTouched:r}=Xg(),s=(n=t[e])=>{a[e]||r({[e]:!0});const s=((e,t)=>!!t)(0,n)?void 0:jw.errors[e]||jw.errors.generic;o({[e]:s})};return(0,H.useEffect)((()=>(s(),t[e]||r({[e]:!1}),()=>o({[e]:void 0}))),[]),{validate:s,error:()=>a[e]?n[e]:void 0}};var Mw=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};const Fw=({children:e})=>{const{errors:t,touched:n,setTouched:o}=Xg(),{currentStep:a,nextStep:r}=rp();return Y().createElement("form",{onSubmit:e=>{e.preventDefault(),(()=>{if((0,lt.isEmpty)(t))return(e=>{ew.has(e)||(ce("wcpay_onboarding_flow_step_completed",{step:e,elapsed:aw()}),ew.add(e))})(a),r();o((0,lt.mapValues)(n,(()=>!0)))})()}},e,Y().createElement(Z.Button,{variant:"primary",type:"submit",className:"stepper__cta",__next40pxDefaultSize:!0},jw.continue))},Bw=e=>{var t,n,{onChange:o}=e,a=Mw(e,["onChange"]);const{name:r}=a,{data:s,setData:c}=Xg(),{validate:i,error:l}=Pw(r);return Y().createElement(Lw,Object.assign({label:jw.fields[r],value:null===(t=a.options)||void 0===t?void 0:t.find((e=>e.key===s[r])),placeholder:null!==(n=jw.placeholders[r])&&void 0!==n?n:jw.placeholders.generic,onChange:({selectedItem:e})=>{o?null==o||o(r,e):c({[r]:null==e?void 0:e.key}),i(null==e?void 0:e.key)},options:[],error:l()},a))},zw=e=>{var t,n,{onChange:o}=e,a=Mw(e,["onChange"]);const{name:r}=a,{data:s,setData:c}=Xg(),{validate:i,error:l}=Pw(r);return Y().createElement(Dw,Object.assign({label:jw.fields[r],value:null===(t=a.options)||void 0===t?void 0:t.find((e=>e.key===s[r])),placeholder:null!==(n=jw.placeholders[r])&&void 0!==n?n:jw.placeholders.generic,onChange:({selectedItem:e})=>{o?null==o||o(r,e):c({[r]:null==e?void 0:e.key}),i(null==e?void 0:e.key)},options:[],error:l()},a))},Uw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTg0IiBoZWlnaHQ9IjQ5IiB2aWV3Qm94PSIwIDAgMTg0IDQ5IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPHBhdGggZD0iTTIzLjQwMTkgNDguMjY1NkMyOC43NTY2IDQ4LjI2NTYgMzMuMDUzNSA0NS42MjEzIDM2LjI5MjggMzkuNTM5NUw0My40OTg0IDI2LjA1MzZWMzcuNDkwMUM0My40OTg0IDQ0LjIzMzEgNDcuODYxNSA0OC4yNjU2IDU0LjYwNDQgNDguMjY1NkM1OS44OTMgNDguMjY1NiA2My43OTMzIDQ1Ljk1MTggNjcuNTYxNCAzOS41Mzk1TDg0LjE1NDMgMTEuNTEwMUM4Ny43OTAyIDUuMzYyMTEgODUuMjEyIDAuNzM0NjE5IDc3LjIxMyAwLjczNDYxOUM3Mi45MTYxIDAuNzM0NjE5IDcwLjEzOTYgMi4xMjI4NyA2Ny42Mjc1IDYuODE2NDdMNTYuMTkxIDI4LjMwMTNWOS4xOTYzMkM1Ni4xOTEgMy41MTExMiA1My40ODA2IDAuNzM0NjE5IDQ4LjQ1NjUgMC43MzQ2MTlDNDQuNDkgMC43MzQ2MTkgNDEuMzE2OSAyLjQ1MzQgMzguODcwOSA3LjIxMzExTDI4LjA5NTUgMjguMzAxM1Y5LjM5NDY0QzI4LjA5NTUgMy4zMTI3OSAyNS41ODM0IDAuNzM0NjE5IDE5LjUwMTYgMC43MzQ2MTlINy4wNzM0NUMyLjM3OTg1IDAuNzM0NjE5IDAgMi45MTYxNSAwIDYuOTQ4NjhDMCAxMC45ODEyIDIuNTEyMDcgMTMuMjk1IDcuMDczNDUgMTMuMjk1SDEyLjE2MzdWMzcuNDI0QzEyLjE2MzcgNDQuMjMzMSAxNi43MjUxIDQ4LjI2NTYgMjMuNDAxOSA0OC4yNjU2WiIgZmlsbD0iIzg3M0VGRiIvPgoJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMDguNDE5IDAuNzM0NjE5Qzk0Ljg2NzEgMC43MzQ2MTkgODQuNDg4MyAxMC44NDkgODQuNDg4MyAyNC41MzMyQzg0LjQ4ODMgMzguMjE3MyA5NC45MzMyIDQ4LjI2NTYgMTA4LjQxOSA0OC4yNjU2QzEyMS45MDUgNDguMjY1NiAxMzIuMjE4IDM4LjE1MTIgMTMyLjI4NCAyNC41MzMyQzEzMi4yODQgMTAuODQ5IDEyMS45MDUgMC43MzQ2MTkgMTA4LjQxOSAwLjczNDYxOVpNMTA4LjQxOSAzMy42NTU5QzEwMy4zMjkgMzMuNjU1OSA5OS44MjUxIDI5LjgyMTcgOTkuODI1MSAyNC41MzMyQzk5LjgyNTEgMTkuMjQ0NiAxMDMuMzI5IDE1LjM0NDMgMTA4LjQxOSAxNS4zNDQzQzExMy41MDkgMTUuMzQ0MyAxMTcuMDEzIDE5LjI0NDYgMTE3LjAxMyAyNC41MzMyQzExNy4wMTMgMjkuODIxNyAxMTMuNTc1IDMzLjY1NTkgMTA4LjQxOSAzMy42NTU5WiIgZmlsbD0iIzg3M0VGRiIvPgoJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMzUuNjUgMjQuNTMzMkMxMzUuNjUgMTAuODQ5IDE0Ni4wMjkgMC43MzQ2MTkgMTU5LjUxNSAwLjczNDYxOUMxNzMuMDAxIDAuNzM0NjE5IDE4My4zOCAxMC45MTUxIDE4My4zOCAyNC41MzMyQzE4My4zOCAzOC4xNTEyIDE3My4wMDEgNDguMjY1NiAxNTkuNTE1IDQ4LjI2NTZDMTQ2LjAyOSA0OC4yNjU2IDEzNS42NSAzOC4yMTczIDEzNS42NSAyNC41MzMyWk0xNTAuOTg3IDI0LjUzMzJDMTUwLjk4NyAyOS44MjE3IDE1NC4zNTkgMzMuNjU1OSAxNTkuNTE1IDMzLjY1NTlDMTY0LjYwNSAzMy42NTU5IDE2OC4xMDkgMjkuODIxNyAxNjguMTA5IDI0LjUzMzJDMTY4LjEwOSAxOS4yNDQ2IDE2NC42MDUgMTUuMzQ0MyAxNTkuNTE1IDE1LjM0NDNDMTU0LjQyNSAxNS4zNDQzIDE1MC45ODcgMTkuMjQ0NiAxNTAuOTg3IDI0LjUzMzJaIiBmaWxsPSIjODczRUZGIi8+Cjwvc3ZnPgo=",$w=n.p+"../assets/images/icons/close.svg?ver=39b198a4f964c0e17c7c",Vw=({name:e,children:t,showHeading:n=!0})=>{const{trackAbandoned:o}=(()=>{const{errors:e,touched:t}=Xg(),{currentStep:n}=rp(),o=(o="hide")=>{var a;const r="hide"===o?"wcpay_onboarding_flow_hidden":"wcpay_onboarding_flow_exited",s=Object.keys(e).filter((e=>t[e])),c=new URLSearchParams(window.location.search);ce(r,{step:n,errored:s,elapsed:ow(tw),source:(null===(a=c.get("source"))||void 0===a?void 0:a.replace(/[^\w-]+/g,""))||"unknown"})},a=()=>{"hidden"===document.visibilityState&&o("hide")};return(0,H.useEffect)((()=>(document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)})),[n,e,t]),{trackAbandoned:e=>{o(e),document.removeEventListener("visibilitychange",a)},removeTrackListener:()=>document.removeEventListener("visibilitychange",a)}})(),{exit:a}=rp();return Y().createElement(Y().Fragment,null,Y().createElement("div",{className:"stepper__nav"},Y().createElement("img",{src:Uw,alt:"Woo",className:"stepper__nav-logo"}),Y().createElement("button",{type:"button",className:"stepper__nav-button",onClick:()=>{o("exit"),a()}},Y().createElement("img",{src:$w,alt:"Close"}))),Y().createElement("div",{className:"stepper__wrapper"},n&&Y().createElement(Y().Fragment,null,Y().createElement("h1",{className:"stepper__heading"},jw.steps[e].heading),Y().createElement("h2",{className:"stepper__subheading"},jw.steps[e].subheading)),Y().createElement("div",{className:"stepper__content"},t)))},Ww=()=>{const{data:e,setData:t}=Xg(),n=Object.entries((null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.connect.availableCountries)||[]).map((([e,t])=>({key:e,name:t,types:[]}))).sort(((e,t)=>e.name.localeCompare(t.name))),o=(()=>{var e;return((null===(e=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.onboardingFieldsData)||void 0===e?void 0:e.business_types)||[]).map((e=>Object.assign(Object.assign({},e),{types:e.types.map((t=>Object.assign(Object.assign({},t),{description:qg[e.key]?qg[e.key][t.key]:qg.generic[t.key]})))}))).sort(((e,t)=>e.name.localeCompare(t.name)))||[]})(),a=(()=>{var e;const t=((null===(e=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.onboardingFieldsData)||void 0===e?void 0:e.mccs_display_tree)||[]).filter((e=>{var t;return!!(null==e?void 0:e.items)&&((null===(t=e.items)||void 0===t?void 0:t.filter((e=>!(null==e?void 0:e.items))))||[]).length}));return t.reduce(((e,t)=>{var n;const o=(null===(n=t.items)||void 0===n?void 0:n.map((e=>({key:e.id,name:e.title,group:t.id,context:(null==e?void 0:e.keywords)?e.keywords.join(" "):""}))))||[];return[...e,{key:t.id,name:t.title,items:o.map((e=>e.key))},...o]}),[])})(),r=o.find((t=>"PR"===e.country?"US"===t.key:t.key===e.country)),s=null==r?void 0:r.types.sort(((e,t)=>"company"===e.key?-1:"company"===t.key?1:0)),c=null==s?void 0:s.find((t=>t.key===e.business_type)),i=0===(null==c?void 0:c.structures.length)||(null==c?void 0:c.structures.find((t=>t.key===e["company.structure"]))),l=(e,n)=>{let o={[e]:null==n?void 0:n.key};"business_type"===e?o=Object.assign(Object.assign({},o),{"company.structure":void 0}):"country"===e&&(o=Object.assign(Object.assign({},o),{business_type:void 0})),t(o)};return Y().createElement(Y().Fragment,null,Y().createElement("span",{"data-testid":"country-select"},Y().createElement(Bw,{name:"country",options:n,onChange:l})),r&&r.types.length>0&&Y().createElement("span",{"data-testid":"business-type-select"},Y().createElement(Bw,{name:"business_type",options:r.types,onChange:l},(e=>Y().createElement("div",null,Y().createElement("div",null,e.name),Y().createElement("div",{className:"complete-business-info-task__option-description"},e.description))))),c&&c.structures.length>0&&Y().createElement("span",{"data-testid":"business-structure-select"},Y().createElement(Bw,{name:"company.structure",options:c.structures,onChange:l})),r&&c&&i&&Y().createElement(Y().Fragment,null,Y().createElement("span",{"data-testid":"mcc-select"},Y().createElement(zw,{name:"mcc",options:a,searchable:!0})),Y().createElement("span",{className:"wcpay-onboarding__tos"},jw.tos)))};const Hw=({collectPayoutRequirements:e=!1})=>{var t;const{data:n}=Xg(),[o,a]=(0,H.useState)(!1),[r,s]=(0,H.useState)(!0),[c,i]=(0,H.useState)(null),l=(null===(t=new URLSearchParams(window.location.search).get("source"))||void 0===t?void 0:t.replace(/[^\w-]+/g,""))||"unknown";return Y().createElement(Y().Fragment,null,r&&Y().createElement("div",{className:"embedded-kyc-loader-wrapper padded"},Y().createElement(Cg,null)),o&&Y().createElement("div",{className:"embedded-kyc-loader-wrapper"},Y().createElement(Cg,null)),c&&("invalid_request_error"===c.error.type?Y().createElement(xe,{className:"wcpay-banner-notice--embedded-kyc",status:"warning",isDismissible:!1,actions:[{label:(0,V.__)("Learn more","woocommerce-payments"),variant:"primary",url:"https://woocommerce.com/document/woopayments/startup-guide/#requirements",urlTarget:"_blank"},{label:(0,V.__)("Cancel","woocommerce-payments"),variant:"link",url:kt({"wcpay-connection-error":"1",source:l},"WCPAY_ONBOARDING_WIZARD")}]},(0,V.__)("Payment activation through our financial partner requires HTTPS and cannot be completed.","woocommerce-payments")):Y().createElement(xe,{className:"wcpay-banner-notice--embedded-kyc",status:"error",isDismissible:!1},c.error.message)),Y().createElement(cw,{onExit:()=>{return e=void 0,t=void 0,o=function*(){a(!0);try{const e=yield(e=>{return t=void 0,n=void 0,a=function*(){return yield G()({path:`${_t}/onboarding/kyc/finalize`,method:"POST",data:{source:e,from:"WCPAY_ONBOARDING_WIZARD"}})},new((o=void 0)||(o=Promise))((function(e,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function c(e){try{i(a.throw(e))}catch(e){r(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,c)}i((a=a.apply(t,n||[])).next())}));var t,n,o,a})(l);e.success?window.location.href=(e=>{const t="object"==typeof e?e:{},n={page:"wc-admin",path:"/payments/overview",source:t.source?.replace(/[^\w-]+/g,"")||"unknown",from:"WCPAY_ONBOARDING_WIZARD"},o={...t,...n};return Et(o)})(Object.assign(Object.assign({},e.params),{"wcpay-connection-success":"1"})):window.location.href=kt(Object.assign(Object.assign({},e.params),{"wcpay-connection-error":"1"}),"WCPAY_ONBOARDING_WIZARD")}catch(e){window.location.href=kt({"wcpay-connection-error":"1",source:l},"WCPAY_ONBOARDING_WIZARD")}},new((n=void 0)||(n=Promise))((function(a,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}));var e,t,n,o},onStepChange:e=>{(e=>{var t;const n=new URLSearchParams(window.location.search);ce("wcpay_onboarding_flow_embedded_step_change",{step:e,elapsed:ow(tw),source:(null===(t=n.get("source"))||void 0===t?void 0:t.replace(/[^\w-]+/g,""))||"unknown"})})(e)},onLoaderStart:()=>s(!1),onLoadError:e=>{i(e)},onboardingData:n,collectPayoutRequirements:e}))};var Yw;const qw=()=>Y().createElement(ap,{onStepChange:()=>window.scroll(0,0),onExit:()=>{var e;const t=new URLSearchParams(window.location.search);window.location.href=Et({page:"wc-admin",path:"/payments/connect",source:(null===(e=t.get("source"))||void 0===e?void 0:e.replace(/[^\w-]+/g,""))||"unknown",from:"WCPAY_ONBOARDING_WIZARD"})}},Y().createElement(Vw,{name:"business"},Y().createElement(Fw,null,Y().createElement(Ww,null))),Y().createElement(Vw,{name:"embedded",showHeading:!1},Y().createElement(Hw,null))),Gw={business_name:null===wcSettings||void 0===wcSettings?void 0:wcSettings.siteTitle,mcc:(()=>{var e,t,n,o,a;const r=null===(o=null===(n=null===(t=null===(e=wcSettings.admin)||void 0===e?void 0:e.onboarding)||void 0===t?void 0:t.profile)||void 0===n?void 0:n.industry)||void 0===o?void 0:o[0];if(r)return((null===(a=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.onboardingFieldsData)||void 0===a?void 0:a.industry_to_mcc)||{})[r]})(),site:"localhost"===location.hostname?"https://wcpay.test":(null===wcSettings||void 0===wcSettings?void 0:wcSettings.homeUrl)+(()=>{var e;const{woocommerce_share_key:t,woocommerce_coming_soon:n,woocommerce_private_link:o}=(null===(e=null===wcSettings||void 0===wcSettings?void 0:wcSettings.admin)||void 0===e?void 0:e.siteVisibilitySettings)||{};return"yes"!==n||"no"===o?"":t?"?woo-share="+t:""})(),country:null===(Yw=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.connect)||void 0===Yw?void 0:Yw.country},Qw=()=>((0,H.useEffect)((()=>((()=>{var e;tw=nw=Date.now();const t=new URLSearchParams(window.location.search);ce("wcpay_onboarding_flow_started",{source:(null===(e=t.get("source"))||void 0===e?void 0:e.replace(/[^\w-]+/g,""))||"unknown"})})(),document.body.classList.remove("woocommerce-admin-is-loading"),document.body.classList.add("woocommerce-admin-full-screen"),document.body.classList.add("is-wp-toolbar-disabled"),document.body.classList.add("wcpay-onboarding__body"),()=>{document.body.classList.remove("woocommerce-admin-full-screen"),document.body.classList.remove("is-wp-toolbar-disabled"),document.body.classList.remove("wcpay-onboarding__body")})),[]),Y().createElement(ge,{className:"wcpay-onboarding-mox"},Y().createElement(Jg,{initialData:Gw},Y().createElement(qw,null)))),Zw=()=>{const e=new URLSearchParams(window.location.search),t=!!e.get("collect_payout_requirements");return(0,H.useEffect)((()=>(document.body.classList.remove("woocommerce-admin-is-loading"),document.body.classList.add("woocommerce-admin-full-screen"),document.body.classList.add("is-wp-toolbar-disabled"),document.body.classList.add("wcpay-onboarding__body"),()=>{document.body.classList.remove("woocommerce-admin-full-screen"),document.body.classList.remove("is-wp-toolbar-disabled"),document.body.classList.remove("wcpay-onboarding__body")})),[]),Y().createElement(ge,{className:"wcpay-onboarding-mox"},Y().createElement(Jg,null,Y().createElement("div",{className:"stepper__nav"},Y().createElement("img",{src:Uw,alt:"Woo",className:"stepper__nav-logo"}),Y().createElement("button",{type:"button",className:"stepper__nav-button",onClick:()=>{var t;(()=>{var e;const t=new URLSearchParams(window.location.search);ce("wcpay_onboarding_kyc_exit",{source:(null===(e=t.get("source"))||void 0===e?void 0:e.replace(/[^\w-]+/g,""))||"unknown"})})(),window.location.href=kt({source:(null===(t=e.get("source"))||void 0===t?void 0:t.replace(/[^\w-]+/g,""))||"unknown"},"WCPAY_ONBOARDING_KYC")}},Y().createElement("img",{src:$w,alt:"Close"}))),Y().createElement("div",{className:"stepper__wrapper"},Y().createElement("div",{className:"stepper__content"},Y().createElement(Hw,{collectPayoutRequirements:t})))))};const Kw=e=>{var{className:t}=e,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["className"]);return Y().createElement(Z.CardBody,Object.assign({className:ue("wcpay-card-body",t)},n))},Jw=({title:e,children:t,id:n})=>Y().createElement(Z.Card,{id:n,className:"fraud-protection-rule-card"},Y().createElement(Kw,{className:"wcpay-card-body"},Y().createElement("h4",null,e),t)),Xw=({children:e})=>Y().createElement("div",{className:"fraud-protection-rule-description"},Y().createElement("strong",null,(0,V.__)("How does this filter protect me?","woocommerce-payments")),Y().createElement("p",null,e)),ef=(0,H.createContext)({protectionSettingsUI:{},setProtectionSettingsUI:()=>null,setIsDirty:()=>null}),tf="review",nf="block",of=[{label:(0,V.__)("Authorize and hold for review","woocommerce-payments"),value:tf},{label:(0,V.__)("Block Payment","woocommerce-payments"),value:nf}],af=({setting:e,label:t,description:n,children:o})=>{const{protectionSettingsUI:a,setProtectionSettingsUI:r,setIsDirty:s}=(0,H.useContext)(ef),{isFRTReviewFeatureActive:c}=wcpaySettings.featureFlags,i=null==a?void 0:a[e],l=((e,t)=>t?e.block?nf:tf:nf)(i,c),m=(t,n)=>{r((o=>Object.assign(Object.assign({},o),{[e]:Object.assign(Object.assign({},o[e]),{[t]:n})}))),s(!0)};return a?Y().createElement(Y().Fragment,null,Y().createElement("div",{className:"fraud-protection-rule-toggle"},Y().createElement(Z.ToggleControl,{label:t,key:e,checked:null==i?void 0:i.enabled,help:n,onChange:e=>{m("enabled",e)},__nextHasNoMarginBottom:!0})),(null==i?void 0:i.enabled)&&Y().createElement(Y().Fragment,null,o,Boolean(c)&&Y().createElement("div",null,Y().createElement("strong",null,(0,V.__)("Filter action","woocommerce-payments")),Y().createElement(Z.RadioControl,{options:of,selected:l,onChange:e=>{m("block",nf===e)}})))):null},rf=()=>Y().createElement(Jw,{title:(0,V.__)("AVS Mismatch","woocommerce-payments"),id:"avs-mismatch-card"},Y().createElement(af,{setting:"avs_verification",label:(0,V.__)("Enable AVS Mismatch filter","woocommerce-payments"),description:(0,V.__)("This filter compares the street number and the post code submitted by the customer against the data on file with the card issuer. When enabled the payment will be blocked.","woocommerce-payments")}),Y().createElement(Xw,null,(0,V.__)("Buyers who can provide the street number and post code on file with the issuing bank are more likely to be the actual account holder. AVS matches, however, are not a guarantee.","woocommerce-payments"))),sf=["error","warning","info"],cf=({type:e,children:t})=>{if(!sf.includes(e))return null;const n="info"===e?Y().createElement(Pd,null):Y().createElement(ee.A,null);return Y().createElement(ye,{status:e,icon:n,children:t,isDismissible:!1})},lf=()=>{var e,t,n;const o=null===(n=null===(t=null===(e=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===e?void 0:e.fraudProtection)||void 0===t?void 0:t.declineOnCVCFailure)||void 0===n||n;return Y().createElement(Jw,{title:(0,V.__)("CVC Verification","woocommerce-payments"),id:"cvc-verification-card"},Y().createElement(cf,{type:"warning"},o?Oe({mixedString:(0,V.__)("For security, this filter is enabled and cannot be modified. Payments failing CVC verification will be blocked. {{learnMoreLink}}Learn more{{/learnMoreLink}}","woocommerce-payments"),components:{learnMoreLink:Y().createElement(Z.ExternalLink,{href:"https://woocommerce.com/document/woopayments/fraud-and-disputes/fraud-protection/#advanced-configuration"})}}):(0,V.__)("This filter is disabled, and cannot be modified.","woocommerce-payments")),Y().createElement(Xw,null,(0,V.__)("Because the card security code appears only on the card and not on receipts or statements, the card security code provides some assurance that the physical card is in the possession of the buyer.","woocommerce-payments")))};function mf(e){return void 0!==e.key}function df(e){return void 0!==e.min_items}function uf(e){return void 0!==e.min_amount}const pf=()=>wcSettings.admin.preloadSettings.general.woocommerce_allowed_countries,_f=()=>{switch(pf()){case"all":default:return[];case"all_except":return wcSettings.admin.preloadSettings.general.woocommerce_all_except_countries;case"specific":return wcSettings.admin.preloadSettings.general.woocommerce_specific_allowed_countries}},yf=e=>{const t=parseFloat(e);return isNaN(t)?"":[parseInt((100*t).toString(),10),wcpaySettings.storeCurrency||"usd"].join("|")},hf=e=>{if(!e)return"";const[t]=e.toString().split("|");return Number(t)/100},gf=(e,t,n={})=>{var o,a,r,s;const c={key:e,outcome:t?za:Ua,check:null};switch(e){case $a:c.check={key:"avs_mismatch",operator:Za,value:!0};break;case Va:c.check={key:"billing_shipping_address_same",operator:Za,value:!1};break;case Wa:c.check={key:"ip_country",operator:"specific"===pf()?"not_in":"in",value:_f().join("|").toLowerCase()};break;case Ha:c.check={key:"ip_billing_country_same",operator:Za,value:!1};break;case Ya:if(df(n)){const e=(null==n?void 0:n.min_items)+"",t=(null==n?void 0:n.max_items)+"";parseInt(e,10)&&parseInt(t,10)?c.check={operator:"or",checks:[{key:Ga,operator:Ja,value:null!==(o=parseInt(e,10))&&void 0!==o?o:null},{key:Ga,operator:Ka,value:null!==(a=parseInt(t,10))&&void 0!==a?a:null}]}:(parseInt(e,10)||parseInt(t,10))&&(c.check=parseInt(e,10)?{key:Ga,operator:Ja,value:null!==(r=parseInt(e,10))&&void 0!==r?r:null}:{key:Ga,operator:Ka,value:null!==(s=parseInt(t,10))&&void 0!==s?s:null})}break;case qa:if(uf(n)){const e=(null==n?void 0:n.min_amount)+"",t=(null==n?void 0:n.max_amount)+"";parseFloat(e)&&parseFloat(t)?c.check={operator:"or",checks:[{key:Qa,operator:Ja,value:yf(e)},{key:Qa,operator:Ka,value:yf(t)}]}:(parseFloat(e)||parseFloat(t))&&(c.check=parseFloat(e)?{key:Qa,operator:Ja,value:yf(e)}:{key:Qa,operator:Ka,value:yf(t)})}}return c},wf=(e,t,n)=>{if(mf(e)&&t===e.key&&n===e.operator)return e;if(!mf(e)&&(null==e?void 0:e.checks))for(const o in e.checks){const a=e.checks[o],r=wf(a,t,n);if(!1!==r)return r}return!1},ff=e=>{const{isFRTReviewFeatureActive:t}=wcpaySettings.featureFlags;return!t||e===za},vf=e=>{var t,n,o,a;const{isFRTReviewFeatureActive:r}=wcpaySettings.featureFlags,s=(null===(n=null===(t=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===t?void 0:t.fraudProtection)||void 0===n?void 0:n.declineOnAVSFailure)||!1,c={enabled:!1,block:!r},i={[$a]:{enabled:s,block:s},[Va]:Object.assign({},c),[Wa]:Object.assign({},c),[Ha]:Object.assign({},c),[Ya]:Object.assign(Object.assign({},c),{min_items:null,max_items:null}),[qa]:Object.assign(Object.assign({},c),{min_amount:null,max_amount:null})},l={};if("string"!=typeof e)for(const t in e){const n=e[t];switch(n.key){case $a:case Va:case Wa:case Ha:l[n.key]={enabled:!0,block:ff(n.outcome)};break;case Ya:const e=wf(n.check,Ga,Ja),t=wf(n.check,Ga,Ka);l[n.key]={enabled:!0,block:ff(n.outcome),min_items:null!==(o=e.value)&&void 0!==o?o:"",max_items:null!==(a=t.value)&&void 0!==a?a:""};break;case qa:const r=wf(n.check,Qa,Ja),s=wf(n.check,Qa,Ka);l[n.key]={enabled:!0,block:ff(n.outcome),min_amount:hf(r.value),max_amount:hf(s.value)}}}return Object.assign({},i,l)},bf=({setting:e})=>{var t,n;const{protectionSettingsUI:o}=(0,H.useContext)(ef),[a,r]=(0,H.useState)(null!==(n=null===(t=o[e])||void 0===t?void 0:t.block)&&void 0!==n&&n);(0,H.useEffect)((()=>{var t,n;r(null!==(n=null===(t=o[e])||void 0===t?void 0:t.block)&&void 0!==n&&n)}),[o,e]);const s=pf(),c=_f();return Y().createElement(cf,{type:"info"},(l=a,"all_except"===(i=s)?l?(0,V.__)("Orders from the following countries will be blocked by the filter: ","woocommerce-payments"):(0,V.__)("Orders from the following countries will be screened by the filter: ","woocommerce-payments"):"specific"===i?l?(0,V.__)("Orders from outside of the following countries will be blocked by the filter: ","woocommerce-payments"):(0,V.__)("Orders from outside of the following countries will be screened by the filter: ","woocommerce-payments"):null),Y().createElement("strong",null,(0,qt.decodeEntities)(c.map((e=>{var t;return null!==(t=wcSettings.countries[e])&&void 0!==t&&t})).filter((e=>e)).join(", "))));var i,l},Ef=()=>{const e="all"===pf();return Y().createElement(Jw,{title:(0,V.__)("International IP Address","woocommerce-payments"),id:"international-ip-address-card"},e&&Y().createElement(cf,{type:"warning"},(0,V.__)("This filter is disabled because you're currently selling to all countries.","woocommerce-payments")),!e&&Y().createElement(af,{setting:"international_ip_address",label:(0,V.__)("Enable International IP Address filter","woocommerce-payments"),description:Oe({mixedString:(0,V.__)("This filter screens for {{ipAddressLink}}IP addresses{{/ipAddressLink}} outside of your {{supportedCountriesLink}}supported countries{{/supportedCountriesLink}}. When enabled the payment will be blocked.","woocommerce-payments"),components:{ipAddressLink:Y().createElement(Z.ExternalLink,{href:"https://simple.wikipedia.org/wiki/IP_address"}),supportedCountriesLink:Y().createElement("a",{href:Et({page:"wc-settings",tab:"general"})})}})}),Y().createElement(Xw,null,(0,V.__)("You should be especially wary when a customer has an international IP address but uses domestic billing and shipping information. Fraudsters often pretend to live in one location, but live and shop from another.","woocommerce-payments")),!e&&Y().createElement(bf,{setting:"international_ip_address"}))},Sf=()=>Y().createElement(Jw,{title:(0,V.__)("IP Address Mismatch","woocommerce-payments"),id:"ip-address-mismatch"},Y().createElement(af,{setting:"ip_address_mismatch",label:(0,V.__)("Enable IP Address Mismatch filter","woocommerce-payments"),description:Oe({mixedString:(0,V.__)("This filter screens for customer's {{ipAddressLink}}IP address{{/ipAddressLink}} to see if it is in a different country than indicated in their billing address. When enabled the payment will be blocked.","woocommerce-payments"),components:{ipAddressLink:Y().createElement(Z.ExternalLink,{href:"https://simple.wikipedia.org/wiki/IP_address"})}})}),Y().createElement(Xw,null,(0,V.__)("Fraudulent transactions often use fake addresses to place orders. If the IP address seems to be in one country, but the billing address is in another, that could signal potential fraud.","woocommerce-payments"))),kf=()=>Y().createElement(Jw,{title:(0,V.__)("Address Mismatch","woocommerce-payments"),id:"address-mismatch-card"},Y().createElement(af,{setting:"address_mismatch",label:(0,V.__)("Enable Address Mismatch filter","woocommerce-payments"),description:(0,V.__)("This filter screens for differences between the shipping information and the billing information (country). When enabled the payment will be blocked.","woocommerce-payments")}),Y().createElement(Xw,null,(0,V.__)("There are legitimate reasons for a billing/shipping mismatch with a customer purchase, but a mismatch could also indicate that someone is using a stolen identity to complete a purchase.","woocommerce-payments"))),Nf=({id:e,prefix:t,label:n,value:o,placeholder:a,help:r,onChange:s=()=>null})=>{const c=(0,H.useCallback)((e=>/^(\d+\.?\d*)?$/m.test(e)),[]),i=c(o)?o:"",[l,m]=Y().useState(i);return(0,H.useEffect)((()=>{c(l)||s("")}),[c,l,s]),Y().createElement(X.TextControlWithAffixes,{id:e,className:"wcpay-components-amount-input",label:n,prefix:t,value:l,"data-testid":"amount-input",onChange:e=>{c(e)&&(m(e),s(e))},placeholder:a,help:r})},xf=e=>""===e||"0"===e?0:parseFloat(e),Cf=({setting:e})=>{const{protectionSettingsUI:t,setProtectionSettingsUI:n,setIsDirty:o}=(0,H.useContext)(ef),a=(0,H.useMemo)((()=>t[e]),[t,e]),r=parseFloat(a.min_amount+""),s=parseFloat(a.max_amount+""),c=!xf(r+"")&&!xf(s+""),i=r&&s&&xf(r+"")>xf(s+""),l=(()=>{var e;const t={symbol:"$"};if("1"!==wcpaySettings.isMultiCurrencyEnabled)return t.symbol;const n=Rn(wcpaySettings.storeCurrency),{symbol:o}=(null===(e=n)||void 0===e?void 0:e.getCurrencyConfig())||t;return o})(),m=t=>a=>{n((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{[t]:a?parseFloat(a+""):null})}))),o(!0)};return Y().createElement("div",{className:"fraud-protection-rule-toggle-children-container"},Y().createElement("strong",null,(0,V.__)("Limits","woocommerce-components")),Y().createElement("div",{className:"fraud-protection-rule-toggle-children-horizontal-form"},Y().createElement("div",{className:"fraud-protection-rule-toggle-children-vertical-form"},Y().createElement(Nf,{id:"fraud-protection-purchase-price-minimum",label:(0,V.__)("Minimum purchase price","woocommerce-payments"),prefix:l,placeholder:"0.00",value:r.toString(),onChange:m("min_amount"),help:(0,V.__)("Leave blank for no limit","woocommerce-payments")})),Y().createElement("div",{className:"fraud-protection-rule-toggle-children-vertical-form"},Y().createElement(Nf,{id:"fraud-protection-purchase-price-maximum",label:(0,V.__)("Maximum purchase price","woocommerce-payments"),prefix:l,placeholder:"0.00",value:s.toString(),onChange:m("max_amount"),help:(0,V.__)("Leave blank for no limit","woocommerce-payments")}))),c&&Y().createElement("div",{className:"fraud-protection-rule-toggle-children-notice"},Y().createElement(cf,{type:"warning"},(0,V.__)("A price range must be set for this filter to take effect.","woocommerce-payments"))),i?Y().createElement("div",{className:"fraud-protection-rule-toggle-children-notice"},Y().createElement(cf,{type:"error"},(0,V.__)("Maximum purchase price must be greater than the minimum purchase price.","woocommerce-payments"))):null)},Tf=(e,t)=>{if(e.enabled&&uf(e)){const{min_amount:n,max_amount:o}=e,a=xf(n+""),r=xf(o+"");if(!a&&!r)return t((0,V.__)('A price range must be set for the "Purchase Price threshold" filter.',"woocommerce-payments")),!1;if(n&&o&&a>r)return t((0,V.__)("Maximum purchase price must be greater than the minimum purchase price.","woocommerce-payments")),!1}return!0},Of=()=>Y().createElement(Jw,{title:(0,V.__)("Purchase Price Threshold","woocommerce-payments"),id:"purchase-price-threshold-card"},Y().createElement(af,{setting:"purchase_price_threshold",label:(0,V.__)("Enable Purchase Price Threshold filter","woocommerce-payments"),description:(0,V.__)("This filter compares the purchase price of an order to the minimum and maximum purchase amounts that you specify. When enabled the payment will be blocked.","woocommerce-payments")},Y().createElement(Cf,{setting:"purchase_price_threshold"})),Y().createElement(Xw,null,(0,V.__)("An unusually high purchase amount, compared to the average for your business, can indicate potential fraudulent activity.","woocommerce-payments"))),If=({setting:e})=>{const{protectionSettingsUI:t,setProtectionSettingsUI:n,setIsDirty:o}=(0,H.useContext)(ef),a=(0,H.useMemo)((()=>t[e]),[t,e]),r=parseInt((null==a?void 0:a.min_items)+"",10),s=parseInt((null==a?void 0:a.max_items)+"",10),c=isNaN(r)?"":r,i=isNaN(s)?"":s,l=!parseInt(c+"",10)&&!parseInt(i+"",10),m=parseInt(c+"",10)>parseInt(i+"",10),d=t=>a=>{n((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{[t]:a?parseInt(a+"",10):a})}))),o(!0)};return Y().createElement("div",{className:"fraud-protection-rule-toggle-children-container"},Y().createElement("strong",null,(0,V.__)("Limits","woocommerce-payments")),Y().createElement("div",{className:"fraud-protection-rule-toggle-children-horizontal-form"},Y().createElement("div",{className:"fraud-protection-rule-toggle-children-vertical-form"},Y().createElement(Z.TextControl,{label:(0,V.__)("Minimum items per order","woocommerce-payments"),id:"fraud-protection-order-items-minimum",placeholder:"0",value:c,type:"number",onChange:d("min_items"),onKeyDown:e=>/^[+-.,e]$/m.test(e.key)&&e.preventDefault(),help:(0,V.__)("Leave blank for no limit","woocommerce-payments"),min:"1",step:"1",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})),Y().createElement("div",{className:"fraud-protection-rule-toggle-children-vertical-form"},Y().createElement(Z.TextControl,{label:(0,V.__)("Maximum items per order","woocommerce-payments"),id:"fraud-protection-order-items-maximum",placeholder:"0",type:"number",value:i,onChange:d("max_items"),onKeyDown:e=>/^[+-.,e]$/m.test(e.key)&&e.preventDefault(),help:(0,V.__)("Leave blank for no limit","woocommerce-payments"),min:"1",step:"1",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))),l&&Y().createElement("div",{className:"fraud-protection-rule-toggle-children-notice"},Y().createElement(cf,{type:"warning"},(0,V.__)("An item range must be set for this filter to take effect.","woocommerce-payments"))),m?Y().createElement("div",{className:"fraud-protection-rule-toggle-children-notice"},Y().createElement(cf,{type:"error"},(0,V.__)("Maximum item count must be greater than the minimum item count.","woocommerce-payments"))):null)},Af=(e,t)=>{if(e.enabled&&df(e)){const{min_items:n,max_items:o}=e;if(!parseInt(n+"",10)&&!parseInt(o+"",10))return t((0,V.__)('An item range must be set for the "Order Item Threshold" filter.',"woocommerce-payments")),!1;if(parseInt(n+"",10)>parseInt(o+"",10))return t((0,V.__)('Maximum item count must be greater than the minimum item count on the "Order Item Threshold" rule.',"woocommerce-payments")),!1}return!0},Rf=()=>Y().createElement(Jw,{title:(0,V.__)("Order Items Threshold","woocommerce-payments"),id:"order-items-threshold-card"},Y().createElement(af,{setting:"order_items_threshold",label:(0,V.__)("Enable Order Items Threshold filter","woocommerce-payments"),description:(0,V.__)("This filter compares the amount of items in an order to the minimum and maximum counts that you specify. When enabled the payment will be blocked.","woocommerce-payments")},Y().createElement(If,{setting:"order_items_threshold"})),Y().createElement(Xw,null,(0,V.__)("An unusually high item count, compared to the average for your business, can indicate potential fraudulent activity.","woocommerce-payments"))),Lf={"avs-mismatch-card":"wcpay_fraud_protection_advanced_settings_card_avs_mismatch_viewed","cvc-verification-card":"wcpay_fraud_protection_advanced_settings_card_cvc_verification_viewed","international-ip-address-card":"wcpay_fraud_protection_advanced_settings_card_international_ip_address_card_viewed","ip-address-mismatch":"wcpay_fraud_protection_advanced_settings_card_ip_address_mismatch_card_viewed","address-mismatch-card":"wcpay_fraud_protection_advanced_settings_card_address_mismatch_viewed","purchase-price-threshold-card":"wcpay_fraud_protection_advanced_settings_card_price_threshold_viewed","order-items-threshold-card":"wcpay_fraud_protection_advanced_settings_card_items_threshold_viewed"},Df=()=>Y().createElement(Y().Fragment,null,Y().createElement("h2",null,(0,V.__)("Filter configuration","woocommerce-payments")),Y().createElement("p",null,(0,V.__)("Set up advanced fraud filters. Enable at least one filter to activate advanced protection.","woocommerce-payments"))),jf=()=>{const e=(e=>{const t=e=>e.split("-")[0].split(".").map(Number),[n=0,o=0,a=0]=t(e),[r=0,s=0,c=0]=t("9.8.3");return n>r||n===r&&o>s||n===r&&o===s&&a>=c})(window.wcSettings.wcVersion);return Y().createElement(Y().Fragment,null,e?Y().createElement("h2",{className:"fraud-protection-header-breadcrumb"},Y().createElement("small",null,Y().createElement(X.Link,{type:"wp-admin",href:Et({page:"wc-settings",tab:"checkout",section:"woocommerce_payments"})},Y().createElement("span",{className:"dashicons dashicons-arrow-left-alt2"}))),(0,V.__)("Advanced fraud protection","woocommerce-payments")):Y().createElement("h2",{className:"fraud-protection-header-breadcrumb-legacy"},(0,V.__)("Advanced fraud protection","woocommerce-payments"),Y().createElement("small",null,Y().createElement(X.Link,{type:"wp-admin",href:Et({page:"wc-settings",tab:"checkout",section:"woocommerce_payments"})},""))))},Pf=()=>{const[e,t]=(0,H.useState)(!1),{saveSettings:n,isLoading:o,isSaving:a}=$s(),r=(0,H.useRef)(),[s,c]=(()=>{const{updateProtectionLevel:e}=(0,ln.useDispatch)(yt);return[(0,ln.useSelect)((e=>e(yt).getCurrentProtectionLevel())),e]})(),[i,l]=(()=>{const{updateAdvancedFraudProtectionSettings:e}=(0,ln.useDispatch)(yt);return[(0,ln.useSelect)((e=>e(yt).getAdvancedFraudProtectionSettings())),e]})(),[m,d]=(0,H.useState)(null),[u,p]=(0,H.useState)({});(0,H.useEffect)((()=>{p(vf(i))}),[i]);const _=e=>{e.forEach((e=>{var t;const{target:n,intersectionRatio:o}=e;if(0<o){const{id:e}=n,o=Lf[e]||null;o&&ce(o);const a=document.getElementById(e);a&&(null===(t=r.current)||void 0===t||t.unobserve(a))}}))};(0,H.useEffect)((()=>{if(!o)return r.current=new IntersectionObserver(_),Object.keys(Lf).forEach((e=>{var t;const n=document.getElementById(e);n&&(null===(t=r.current)||void 0===t||t.observe(n))})),()=>{var e;null===(e=r.current)||void 0===e||e.disconnect()}}),[o]);const{isFRTReviewFeatureActive:y}=wcpaySettings.featureFlags,h=(e=>{const t=(0,J.useRef)();return(0,J.useEffect)((()=>{t.current=e})),(0,J.useCallback)((()=>{const e=t.current();if(!e)return;const n=e=>{e.preventDefault(),e.returnValue=""};window.addEventListener("beforeunload",n);const o=(0,Ni.getHistory)().block((t=>(window.confirm(e)&&(o(),t.retry()),!0)));return()=>{window.removeEventListener("beforeunload",n),o()}}),[])})((()=>{if(!o&&!(0,lt.isMatchWith)(vf(i),u,((e,t)=>{for(const n in e)if((y||"block"!==n)&&e[n]!==t[n])return!1;return!0})))return(0,V.__)("There are unsaved changes on this page. Are you sure you want to leave and discard the unsaved changes?","woocommerce-payments")}));return(0,H.useEffect)(h,[h,u,i]),Y().createElement(ef.Provider,{value:{protectionSettingsUI:u,setProtectionSettingsUI:p,setIsDirty:t}},Y().createElement(jf,null),Y().createElement(bp,null,Y().createElement(Ep,{description:Df,id:"advanced-fraud"},Y().createElement(he,null,m&&Y().createElement(ye,{className:"fraud-protection-advanced-settings-error-notice",status:"error",isDismissible:!0,onRemove:()=>{d(null)}},(0,V.sprintf)("%s %s",(0,V.__)("Settings were not saved.","woocommerce-payments"),m)),"error"===i&&Y().createElement(ye,{className:"fraud-protection-advanced-settings-error-notice",status:"error",isDismissible:!1},(0,V.__)("There was an error retrieving your fraud protection settings. Please refresh the page to try again.","woocommerce-payments")),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(rf,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(Ef,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(Sf,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(kf,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(Of,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(Rf,null)),Y().createElement(Rm,{isLoading:o,numLines:20},Y().createElement(lf,null)),Y().createElement("footer",{className:"fraud-protection-advanced-settings__footer"},Y().createElement(Z.Button,{variant:"primary",isBusy:a,onClick:()=>{var e,o;if(!(e=>{d(null);const t={order_items_threshold:Af,purchase_price_threshold:Tf};return Object.keys(t).map((n=>t[n](e[n],d))).every(Boolean)})(u))return void window.scrollTo({top:0});if((e=>Object.values(e).some((e=>e.enabled)))(u))Ba!==s&&c(Ba);else{if(Fa===s)return void(0,ln.dispatch)("core/notices").createErrorNotice((0,V.__)("At least one risk filter needs to be enabled for advanced protection.","woocommerce-payments"));c(Fa)}const a=(e=>{const t=[];for(const n in e)e[n].enabled&&t.push(gf(n,e[n].block,e[n]));return t.filter((e=>e))})(u);(null===(o=null===(e=null===wcpaySettings||void 0===wcpaySettings?void 0:wcpaySettings.accountStatus)||void 0===e?void 0:e.fraudProtection)||void 0===o?void 0:o.declineOnAVSFailure)&&(wcpaySettings.accountStatus.fraudProtection.declineOnAVSFailure=a.some((e=>"avs_verification"===e.key))),l(a),n(),t(!1),ce("wcpay_fraud_protection_advanced_settings_saved",{settings:JSON.stringify(a)})},disabled:a||o||"error"===i||!e},(0,V.__)("Save changes","woocommerce-payments")))))))};(0,W.addFilter)("woocommerce_admin_pages_list","woocommerce-payments",(e=>{const{menuID:t,rootLink:n}=function(){const e=document.querySelector("#toplevel_page_wc-admin-path--payments-connect")?"connect":"overview";return{menuID:`toplevel_page_wc-admin-path--payments-${e}`,rootLink:[`/payments/${e}`,(0,V.__)("Payments","woocommerce-payments")]}}(),o=window.wcAdminFeatures&&window.wcAdminFeatures.navigation?"WooPayments":(0,V.__)("Connect","woocommerce-payments");return e.push({container:Jt,path:"/payments/connect",wpOpenMenu:t,breadcrumbs:[n,o],navArgs:{id:"wc-payments"},capability:"manage_woocommerce"}),e.push({container:Qw,path:"/payments/onboarding",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Onboarding","woocommerce-payments")],navArgs:{id:"wc-payments-onboarding"},capability:"manage_woocommerce"}),e.push({container:Zw,path:"/payments/onboarding/kyc",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Continue onboarding","woocommerce-payments")],navArgs:{id:"wc-payments-continue-onboarding"},capability:"manage_woocommerce"}),e.push({container:mw,path:"/payments/overview",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Overview","woocommerce-payments")],navArgs:{id:"wc-payments-overview"},capability:"manage_woocommerce"}),e.push({container:ul,path:"/payments/payouts",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Payouts","woocommerce-payments")],navArgs:{id:"wc-payments-deposits"},capability:"manage_woocommerce"}),e.push({container:im,path:"/payments/payouts/details",wpOpenMenu:t,breadcrumbs:[n,["/payments/payouts",(0,V.__)("Payouts","woocommerce-payments")],(0,V.__)("Payout details","woocommerce-payments")],navArgs:{id:"wc-payments-deposit-details",parentPath:"/payments/payouts"},capability:"manage_woocommerce"}),e.push({container:fm,path:"/payments/transactions",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Transactions","woocommerce-payments")],navArgs:{id:"wc-payments-transactions"},capability:"manage_woocommerce"}),e.push({container:Ou,path:"/payments/transactions/details",wpOpenMenu:t,breadcrumbs:[n,["/payments/transactions",(0,V.__)("Transactions","woocommerce-payments")],(0,V.__)("Payment details","woocommerce-payments")],navArgs:{id:"wc-payments-transaction-details",parentPath:"/payments/transactions"},capability:"manage_woocommerce"}),e.push({container:Ru,path:"/payments/disputes",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Disputes","woocommerce-payments")],navArgs:{id:"wc-payments-disputes"},capability:"manage_woocommerce"}),e.push({container:Du,path:"/payments/disputes/details",wpOpenMenu:t,breadcrumbs:[n,["/payments/disputes",(0,V.__)("Disputes","woocommerce-payments")],(0,V.__)("Dispute details","woocommerce-payments")],navArgs:{id:"wc-payments-disputes-details-legacy-redirect",parentPath:"/payments/disputes"},capability:"manage_woocommerce"}),e.push({container:_p,path:"/payments/disputes/challenge",wpOpenMenu:t,breadcrumbs:[n,["/payments/disputes",(0,V.__)("Disputes","woocommerce-payments")],(0,V.__)("Challenge dispute","woocommerce-payments")],navArgs:{id:"wc-payments-disputes-challenge",parentPath:"/payments/disputes"},capability:"manage_woocommerce"}),e.push({container:c_,path:"/payments/multi-currency-setup",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Set up multiple currencies","woocommerce-payments")],capability:"manage_woocommerce"}),e.push({container:u_,path:"/payments/card-readers",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Card readers","woocommerce-payments")],navArgs:{id:"wc-payments-card-readers"},capability:"manage_woocommerce"}),e.push({container:E_,path:"/payments/loans",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Capital Loans","woocommerce-payments")],navArgs:{id:"wc-payments-capital"},capability:"manage_woocommerce"}),wcpaySettings&&wcpaySettings.featureFlags.documents&&e.push({container:Cw,path:"/payments/documents",wpOpenMenu:t,breadcrumbs:[n,(0,V.__)("Documents","woocommerce-payments")],navArgs:{id:"wc-payments-documents"},capability:"manage_woocommerce"}),wcpaySettings&&e.push({container:Pf,path:"/payments/fraud-protection",wpOpenMenu:t,breadcrumbs:[n,"Settings"],capability:"manage_woocommerce"}),e})),(0,W.addFilter)("woocommerce_admin_onboarding_task_list","woocommerce-payments",(e=>{const{showUpdateDetailsTask:t,wpcomReconnectUrl:n}=wcpaySettings;return[...e,...Ng({showUpdateDetailsTask:t,wpcomReconnectUrl:n,showGoLiveTask:!0})]}))})()})();